var hk=Object.defineProperty;var fk=(t,e,n)=>e in t?hk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ze=(t,e,n)=>fk(t,typeof e!="symbol"?e+"":e,n);function Qp(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Ha=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function em(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Jv(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Xv={exports:{}},Ed={},Qv={exports:{}},rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xl=Symbol.for("react.element"),pk=Symbol.for("react.portal"),mk=Symbol.for("react.fragment"),gk=Symbol.for("react.strict_mode"),yk=Symbol.for("react.profiler"),_k=Symbol.for("react.provider"),vk=Symbol.for("react.context"),xk=Symbol.for("react.forward_ref"),bk=Symbol.for("react.suspense"),wk=Symbol.for("react.memo"),Sk=Symbol.for("react.lazy"),yy=Symbol.iterator;function kk(t){return t===null||typeof t!="object"?null:(t=yy&&t[yy]||t["@@iterator"],typeof t=="function"?t:null)}var ex={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},tx=Object.assign,nx={};function aa(t,e,n){this.props=t,this.context=e,this.refs=nx,this.updater=n||ex}aa.prototype.isReactComponent={};aa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};aa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function rx(){}rx.prototype=aa.prototype;function tm(t,e,n){this.props=t,this.context=e,this.refs=nx,this.updater=n||ex}var nm=tm.prototype=new rx;nm.constructor=tm;tx(nm,aa.prototype);nm.isPureReactComponent=!0;var _y=Array.isArray,ix=Object.prototype.hasOwnProperty,rm={current:null},sx={key:!0,ref:!0,__self:!0,__source:!0};function ox(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)ix.call(e,r)&&!sx.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Xl,type:t,key:s,ref:o,props:i,_owner:rm.current}}function Ek(t,e){return{$$typeof:Xl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function im(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xl}function Ck(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var vy=/\/+/g;function Th(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ck(""+t.key):e.toString(36)}function du(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Xl:case pk:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Th(o,0):r,_y(i)?(n="",t!=null&&(n=t.replace(vy,"$&/")+"/"),du(i,e,n,"",function(u){return u})):i!=null&&(im(i)&&(i=Ek(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(vy,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",_y(t))for(var a=0;a<t.length;a++){s=t[a];var c=r+Th(s,a);o+=du(s,e,n,c,i)}else if(c=kk(t),typeof c=="function")for(t=c.call(t),a=0;!(s=t.next()).done;)s=s.value,c=r+Th(s,a++),o+=du(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function bc(t,e,n){if(t==null)return t;var r=[],i=0;return du(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Tk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pn={current:null},hu={transition:null},jk={ReactCurrentDispatcher:Pn,ReactCurrentBatchConfig:hu,ReactCurrentOwner:rm};function ax(){throw Error("act(...) is not supported in production builds of React.")}rt.Children={map:bc,forEach:function(t,e,n){bc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return bc(t,function(){e++}),e},toArray:function(t){return bc(t,function(e){return e})||[]},only:function(t){if(!im(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};rt.Component=aa;rt.Fragment=mk;rt.Profiler=yk;rt.PureComponent=tm;rt.StrictMode=gk;rt.Suspense=bk;rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jk;rt.act=ax;rt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=tx({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=rm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)ix.call(e,c)&&!sx.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Xl,type:t.type,key:i,ref:s,props:r,_owner:o}};rt.createContext=function(t){return t={$$typeof:vk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:_k,_context:t},t.Consumer=t};rt.createElement=ox;rt.createFactory=function(t){var e=ox.bind(null,t);return e.type=t,e};rt.createRef=function(){return{current:null}};rt.forwardRef=function(t){return{$$typeof:xk,render:t}};rt.isValidElement=im;rt.lazy=function(t){return{$$typeof:Sk,_payload:{_status:-1,_result:t},_init:Tk}};rt.memo=function(t,e){return{$$typeof:wk,type:t,compare:e===void 0?null:e}};rt.startTransition=function(t){var e=hu.transition;hu.transition={};try{t()}finally{hu.transition=e}};rt.unstable_act=ax;rt.useCallback=function(t,e){return Pn.current.useCallback(t,e)};rt.useContext=function(t){return Pn.current.useContext(t)};rt.useDebugValue=function(){};rt.useDeferredValue=function(t){return Pn.current.useDeferredValue(t)};rt.useEffect=function(t,e){return Pn.current.useEffect(t,e)};rt.useId=function(){return Pn.current.useId()};rt.useImperativeHandle=function(t,e,n){return Pn.current.useImperativeHandle(t,e,n)};rt.useInsertionEffect=function(t,e){return Pn.current.useInsertionEffect(t,e)};rt.useLayoutEffect=function(t,e){return Pn.current.useLayoutEffect(t,e)};rt.useMemo=function(t,e){return Pn.current.useMemo(t,e)};rt.useReducer=function(t,e,n){return Pn.current.useReducer(t,e,n)};rt.useRef=function(t){return Pn.current.useRef(t)};rt.useState=function(t){return Pn.current.useState(t)};rt.useSyncExternalStore=function(t,e,n){return Pn.current.useSyncExternalStore(t,e,n)};rt.useTransition=function(){return Pn.current.useTransition()};rt.version="18.3.1";Qv.exports=rt;var q=Qv.exports;const xl=em(q),Pk=Qp({__proto__:null,default:xl},[q]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ak=q,Ok=Symbol.for("react.element"),Dk=Symbol.for("react.fragment"),Rk=Object.prototype.hasOwnProperty,Mk=Ak.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Lk={key:!0,ref:!0,__self:!0,__source:!0};function lx(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Rk.call(e,r)&&!Lk.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Ok,type:t,key:s,ref:o,props:i,_owner:Mk.current}}Ed.Fragment=Dk;Ed.jsx=lx;Ed.jsxs=lx;Xv.exports=Ed;var f=Xv.exports,Pf={},cx={exports:{}},nr={},ux={exports:{}},dx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,N){var H=z.length;z.push(N);e:for(;0<H;){var K=H-1>>>1,Y=z[K];if(0<i(Y,N))z[K]=N,z[H]=Y,H=K;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var N=z[0],H=z.pop();if(H!==N){z[0]=H;e:for(var K=0,Y=z.length,ce=Y>>>1;K<ce;){var ne=2*(K+1)-1,X=z[ne],_e=ne+1,Te=z[_e];if(0>i(X,H))_e<Y&&0>i(Te,X)?(z[K]=Te,z[_e]=H,K=_e):(z[K]=X,z[ne]=H,K=ne);else if(_e<Y&&0>i(Te,H))z[K]=Te,z[_e]=H,K=_e;else break e}}return N}function i(z,N){var H=z.sortIndex-N.sortIndex;return H!==0?H:z.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],u=[],h=1,p=null,m=3,g=!1,y=!1,_=!1,b=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(z){for(var N=n(u);N!==null;){if(N.callback===null)r(u);else if(N.startTime<=z)r(u),N.sortIndex=N.expirationTime,e(c,N);else break;N=n(u)}}function C(z){if(_=!1,S(z),!y)if(n(c)!==null)y=!0,$(j);else{var N=n(u);N!==null&&I(C,N.startTime-z)}}function j(z,N){y=!1,_&&(_=!1,x(T),T=-1),g=!0;var H=m;try{for(S(N),p=n(c);p!==null&&(!(p.expirationTime>N)||z&&!V());){var K=p.callback;if(typeof K=="function"){p.callback=null,m=p.priorityLevel;var Y=K(p.expirationTime<=N);N=t.unstable_now(),typeof Y=="function"?p.callback=Y:p===n(c)&&r(c),S(N)}else r(c);p=n(c)}if(p!==null)var ce=!0;else{var ne=n(u);ne!==null&&I(C,ne.startTime-N),ce=!1}return ce}finally{p=null,m=H,g=!1}}var D=!1,P=null,T=-1,A=5,F=-1;function V(){return!(t.unstable_now()-F<A)}function R(){if(P!==null){var z=t.unstable_now();F=z;var N=!0;try{N=P(!0,z)}finally{N?B():(D=!1,P=null)}}else D=!1}var B;if(typeof w=="function")B=function(){w(R)};else if(typeof MessageChannel<"u"){var E=new MessageChannel,Z=E.port2;E.port1.onmessage=R,B=function(){Z.postMessage(null)}}else B=function(){b(R,0)};function $(z){P=z,D||(D=!0,B())}function I(z,N){T=b(function(){z(t.unstable_now())},N)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,$(j))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(z){switch(m){case 1:case 2:case 3:var N=3;break;default:N=m}var H=m;m=N;try{return z()}finally{m=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,N){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var H=m;m=z;try{return N()}finally{m=H}},t.unstable_scheduleCallback=function(z,N,H){var K=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?K+H:K):H=K,z){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=H+Y,z={id:h++,callback:N,priorityLevel:z,startTime:H,expirationTime:Y,sortIndex:-1},H>K?(z.sortIndex=H,e(u,z),n(c)===null&&z===n(u)&&(_?(x(T),T=-1):_=!0,I(C,H-K))):(z.sortIndex=Y,e(c,z),y||g||(y=!0,$(j))),z},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(z){var N=m;return function(){var H=m;m=N;try{return z.apply(this,arguments)}finally{m=H}}}})(dx);ux.exports=dx;var Ik=ux.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zk=q,tr=Ik;function Ce(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hx=new Set,bl={};function Qs(t,e){Go(t,e),Go(t+"Capture",e)}function Go(t,e){for(bl[t]=e,t=0;t<e.length;t++)hx.add(e[t])}var mi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Af=Object.prototype.hasOwnProperty,Nk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xy={},by={};function Fk(t){return Af.call(by,t)?!0:Af.call(xy,t)?!1:Nk.test(t)?by[t]=!0:(xy[t]=!0,!1)}function Bk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Uk(t,e,n,r){if(e===null||typeof e>"u"||Bk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function An(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var un={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){un[t]=new An(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];un[e]=new An(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){un[t]=new An(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){un[t]=new An(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){un[t]=new An(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){un[t]=new An(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){un[t]=new An(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){un[t]=new An(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){un[t]=new An(t,5,!1,t.toLowerCase(),null,!1,!1)});var sm=/[\-:]([a-z])/g;function om(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(sm,om);un[e]=new An(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(sm,om);un[e]=new An(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(sm,om);un[e]=new An(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){un[t]=new An(t,1,!1,t.toLowerCase(),null,!1,!1)});un.xlinkHref=new An("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){un[t]=new An(t,1,!1,t.toLowerCase(),null,!0,!0)});function am(t,e,n,r){var i=un.hasOwnProperty(e)?un[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Uk(e,n,i,r)&&(n=null),r||i===null?Fk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var xi=zk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wc=Symbol.for("react.element"),Co=Symbol.for("react.portal"),To=Symbol.for("react.fragment"),lm=Symbol.for("react.strict_mode"),Of=Symbol.for("react.profiler"),fx=Symbol.for("react.provider"),px=Symbol.for("react.context"),cm=Symbol.for("react.forward_ref"),Df=Symbol.for("react.suspense"),Rf=Symbol.for("react.suspense_list"),um=Symbol.for("react.memo"),Di=Symbol.for("react.lazy"),mx=Symbol.for("react.offscreen"),wy=Symbol.iterator;function Ta(t){return t===null||typeof t!="object"?null:(t=wy&&t[wy]||t["@@iterator"],typeof t=="function"?t:null)}var Mt=Object.assign,jh;function Va(t){if(jh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);jh=e&&e[1]||""}return`
`+jh+t}var Ph=!1;function Ah(t,e){if(!t||Ph)return"";Ph=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{Ph=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Va(t):""}function Wk(t){switch(t.tag){case 5:return Va(t.type);case 16:return Va("Lazy");case 13:return Va("Suspense");case 19:return Va("SuspenseList");case 0:case 2:case 15:return t=Ah(t.type,!1),t;case 11:return t=Ah(t.type.render,!1),t;case 1:return t=Ah(t.type,!0),t;default:return""}}function Mf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case To:return"Fragment";case Co:return"Portal";case Of:return"Profiler";case lm:return"StrictMode";case Df:return"Suspense";case Rf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case px:return(t.displayName||"Context")+".Consumer";case fx:return(t._context.displayName||"Context")+".Provider";case cm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case um:return e=t.displayName||null,e!==null?e:Mf(t.type)||"Memo";case Di:e=t._payload,t=t._init;try{return Mf(t(e))}catch{}}return null}function $k(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mf(e);case 8:return e===lm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function es(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function gx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Hk(t){var e=gx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Sc(t){t._valueTracker||(t._valueTracker=Hk(t))}function yx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=gx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ru(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Lf(t,e){var n=e.checked;return Mt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Sy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=es(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _x(t,e){e=e.checked,e!=null&&am(t,"checked",e,!1)}function If(t,e){_x(t,e);var n=es(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zf(t,e.type,n):e.hasOwnProperty("defaultValue")&&zf(t,e.type,es(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ky(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function zf(t,e,n){(e!=="number"||Ru(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Za=Array.isArray;function Bo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+es(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Nf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ce(91));return Mt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ey(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ce(92));if(Za(n)){if(1<n.length)throw Error(Ce(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:es(n)}}function vx(t,e){var n=es(e.value),r=es(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Cy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function xx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ff(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?xx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var kc,bx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(kc=kc||document.createElement("div"),kc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=kc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var rl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vk=["Webkit","ms","Moz","O"];Object.keys(rl).forEach(function(t){Vk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),rl[e]=rl[t]})});function wx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||rl.hasOwnProperty(t)&&rl[t]?(""+e).trim():e+"px"}function Sx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=wx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Zk=Mt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bf(t,e){if(e){if(Zk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ce(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ce(62))}}function Uf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wf=null;function dm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $f=null,Uo=null,Wo=null;function Ty(t){if(t=tc(t)){if(typeof $f!="function")throw Error(Ce(280));var e=t.stateNode;e&&(e=Ad(e),$f(t.stateNode,t.type,e))}}function kx(t){Uo?Wo?Wo.push(t):Wo=[t]:Uo=t}function Ex(){if(Uo){var t=Uo,e=Wo;if(Wo=Uo=null,Ty(t),e)for(t=0;t<e.length;t++)Ty(e[t])}}function Cx(t,e){return t(e)}function Tx(){}var Oh=!1;function jx(t,e,n){if(Oh)return t(e,n);Oh=!0;try{return Cx(t,e,n)}finally{Oh=!1,(Uo!==null||Wo!==null)&&(Tx(),Ex())}}function Sl(t,e){var n=t.stateNode;if(n===null)return null;var r=Ad(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ce(231,e,typeof n));return n}var Hf=!1;if(mi)try{var ja={};Object.defineProperty(ja,"passive",{get:function(){Hf=!0}}),window.addEventListener("test",ja,ja),window.removeEventListener("test",ja,ja)}catch{Hf=!1}function Yk(t,e,n,r,i,s,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var il=!1,Mu=null,Lu=!1,Vf=null,qk={onError:function(t){il=!0,Mu=t}};function Gk(t,e,n,r,i,s,o,a,c){il=!1,Mu=null,Yk.apply(qk,arguments)}function Kk(t,e,n,r,i,s,o,a,c){if(Gk.apply(this,arguments),il){if(il){var u=Mu;il=!1,Mu=null}else throw Error(Ce(198));Lu||(Lu=!0,Vf=u)}}function eo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Px(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function jy(t){if(eo(t)!==t)throw Error(Ce(188))}function Jk(t){var e=t.alternate;if(!e){if(e=eo(t),e===null)throw Error(Ce(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return jy(i),t;if(s===r)return jy(i),e;s=s.sibling}throw Error(Ce(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Ce(189))}}if(n.alternate!==r)throw Error(Ce(190))}if(n.tag!==3)throw Error(Ce(188));return n.stateNode.current===n?t:e}function Ax(t){return t=Jk(t),t!==null?Ox(t):null}function Ox(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ox(t);if(e!==null)return e;t=t.sibling}return null}var Dx=tr.unstable_scheduleCallback,Py=tr.unstable_cancelCallback,Xk=tr.unstable_shouldYield,Qk=tr.unstable_requestPaint,Ft=tr.unstable_now,eE=tr.unstable_getCurrentPriorityLevel,hm=tr.unstable_ImmediatePriority,Rx=tr.unstable_UserBlockingPriority,Iu=tr.unstable_NormalPriority,tE=tr.unstable_LowPriority,Mx=tr.unstable_IdlePriority,Cd=null,Zr=null;function nE(t){if(Zr&&typeof Zr.onCommitFiberRoot=="function")try{Zr.onCommitFiberRoot(Cd,t,void 0,(t.current.flags&128)===128)}catch{}}var Or=Math.clz32?Math.clz32:sE,rE=Math.log,iE=Math.LN2;function sE(t){return t>>>=0,t===0?32:31-(rE(t)/iE|0)|0}var Ec=64,Cc=4194304;function Ya(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function zu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Ya(a):(s&=o,s!==0&&(r=Ya(s)))}else o=n&~i,o!==0?r=Ya(o):s!==0&&(r=Ya(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Or(e),i=1<<n,r|=t[n],e&=~i;return r}function oE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Or(s),a=1<<o,c=i[o];c===-1?(!(a&n)||a&r)&&(i[o]=oE(a,e)):c<=e&&(t.expiredLanes|=a),s&=~a}}function Zf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Lx(){var t=Ec;return Ec<<=1,!(Ec&4194240)&&(Ec=64),t}function Dh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ql(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Or(e),t[e]=n}function lE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Or(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function fm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Or(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var mt=0;function Ix(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var zx,pm,Nx,Fx,Bx,Yf=!1,Tc=[],Vi=null,Zi=null,Yi=null,kl=new Map,El=new Map,Mi=[],cE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ay(t,e){switch(t){case"focusin":case"focusout":Vi=null;break;case"dragenter":case"dragleave":Zi=null;break;case"mouseover":case"mouseout":Yi=null;break;case"pointerover":case"pointerout":kl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":El.delete(e.pointerId)}}function Pa(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=tc(e),e!==null&&pm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function uE(t,e,n,r,i){switch(e){case"focusin":return Vi=Pa(Vi,t,e,n,r,i),!0;case"dragenter":return Zi=Pa(Zi,t,e,n,r,i),!0;case"mouseover":return Yi=Pa(Yi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return kl.set(s,Pa(kl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,El.set(s,Pa(El.get(s)||null,t,e,n,r,i)),!0}return!1}function Ux(t){var e=Ms(t.target);if(e!==null){var n=eo(e);if(n!==null){if(e=n.tag,e===13){if(e=Px(n),e!==null){t.blockedOn=e,Bx(t.priority,function(){Nx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function fu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Wf=r,n.target.dispatchEvent(r),Wf=null}else return e=tc(n),e!==null&&pm(e),t.blockedOn=n,!1;e.shift()}return!0}function Oy(t,e,n){fu(t)&&n.delete(e)}function dE(){Yf=!1,Vi!==null&&fu(Vi)&&(Vi=null),Zi!==null&&fu(Zi)&&(Zi=null),Yi!==null&&fu(Yi)&&(Yi=null),kl.forEach(Oy),El.forEach(Oy)}function Aa(t,e){t.blockedOn===e&&(t.blockedOn=null,Yf||(Yf=!0,tr.unstable_scheduleCallback(tr.unstable_NormalPriority,dE)))}function Cl(t){function e(i){return Aa(i,t)}if(0<Tc.length){Aa(Tc[0],t);for(var n=1;n<Tc.length;n++){var r=Tc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Vi!==null&&Aa(Vi,t),Zi!==null&&Aa(Zi,t),Yi!==null&&Aa(Yi,t),kl.forEach(e),El.forEach(e),n=0;n<Mi.length;n++)r=Mi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Mi.length&&(n=Mi[0],n.blockedOn===null);)Ux(n),n.blockedOn===null&&Mi.shift()}var $o=xi.ReactCurrentBatchConfig,Nu=!0;function hE(t,e,n,r){var i=mt,s=$o.transition;$o.transition=null;try{mt=1,mm(t,e,n,r)}finally{mt=i,$o.transition=s}}function fE(t,e,n,r){var i=mt,s=$o.transition;$o.transition=null;try{mt=4,mm(t,e,n,r)}finally{mt=i,$o.transition=s}}function mm(t,e,n,r){if(Nu){var i=qf(t,e,n,r);if(i===null)Wh(t,e,r,Fu,n),Ay(t,r);else if(uE(i,t,e,n,r))r.stopPropagation();else if(Ay(t,r),e&4&&-1<cE.indexOf(t)){for(;i!==null;){var s=tc(i);if(s!==null&&zx(s),s=qf(t,e,n,r),s===null&&Wh(t,e,r,Fu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Wh(t,e,r,null,n)}}var Fu=null;function qf(t,e,n,r){if(Fu=null,t=dm(r),t=Ms(t),t!==null)if(e=eo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Px(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Fu=t,null}function Wx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eE()){case hm:return 1;case Rx:return 4;case Iu:case tE:return 16;case Mx:return 536870912;default:return 16}default:return 16}}var zi=null,gm=null,pu=null;function $x(){if(pu)return pu;var t,e=gm,n=e.length,r,i="value"in zi?zi.value:zi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return pu=i.slice(t,1<r?1-r:void 0)}function mu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jc(){return!0}function Dy(){return!1}function rr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?jc:Dy,this.isPropagationStopped=Dy,this}return Mt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jc)},persist:function(){},isPersistent:jc}),e}var la={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ym=rr(la),ec=Mt({},la,{view:0,detail:0}),pE=rr(ec),Rh,Mh,Oa,Td=Mt({},ec,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_m,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oa&&(Oa&&t.type==="mousemove"?(Rh=t.screenX-Oa.screenX,Mh=t.screenY-Oa.screenY):Mh=Rh=0,Oa=t),Rh)},movementY:function(t){return"movementY"in t?t.movementY:Mh}}),Ry=rr(Td),mE=Mt({},Td,{dataTransfer:0}),gE=rr(mE),yE=Mt({},ec,{relatedTarget:0}),Lh=rr(yE),_E=Mt({},la,{animationName:0,elapsedTime:0,pseudoElement:0}),vE=rr(_E),xE=Mt({},la,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bE=rr(xE),wE=Mt({},la,{data:0}),My=rr(wE),SE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},EE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=EE[t])?!!e[t]:!1}function _m(){return CE}var TE=Mt({},ec,{key:function(t){if(t.key){var e=SE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=mu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?kE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_m,charCode:function(t){return t.type==="keypress"?mu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?mu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jE=rr(TE),PE=Mt({},Td,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ly=rr(PE),AE=Mt({},ec,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_m}),OE=rr(AE),DE=Mt({},la,{propertyName:0,elapsedTime:0,pseudoElement:0}),RE=rr(DE),ME=Mt({},Td,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),LE=rr(ME),IE=[9,13,27,32],vm=mi&&"CompositionEvent"in window,sl=null;mi&&"documentMode"in document&&(sl=document.documentMode);var zE=mi&&"TextEvent"in window&&!sl,Hx=mi&&(!vm||sl&&8<sl&&11>=sl),Iy=" ",zy=!1;function Vx(t,e){switch(t){case"keyup":return IE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var jo=!1;function NE(t,e){switch(t){case"compositionend":return Zx(e);case"keypress":return e.which!==32?null:(zy=!0,Iy);case"textInput":return t=e.data,t===Iy&&zy?null:t;default:return null}}function FE(t,e){if(jo)return t==="compositionend"||!vm&&Vx(t,e)?(t=$x(),pu=gm=zi=null,jo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Hx&&e.locale!=="ko"?null:e.data;default:return null}}var BE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ny(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!BE[t.type]:e==="textarea"}function Yx(t,e,n,r){kx(r),e=Bu(e,"onChange"),0<e.length&&(n=new ym("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ol=null,Tl=null;function UE(t){ib(t,0)}function jd(t){var e=Oo(t);if(yx(e))return t}function WE(t,e){if(t==="change")return e}var qx=!1;if(mi){var Ih;if(mi){var zh="oninput"in document;if(!zh){var Fy=document.createElement("div");Fy.setAttribute("oninput","return;"),zh=typeof Fy.oninput=="function"}Ih=zh}else Ih=!1;qx=Ih&&(!document.documentMode||9<document.documentMode)}function By(){ol&&(ol.detachEvent("onpropertychange",Gx),Tl=ol=null)}function Gx(t){if(t.propertyName==="value"&&jd(Tl)){var e=[];Yx(e,Tl,t,dm(t)),jx(UE,e)}}function $E(t,e,n){t==="focusin"?(By(),ol=e,Tl=n,ol.attachEvent("onpropertychange",Gx)):t==="focusout"&&By()}function HE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jd(Tl)}function VE(t,e){if(t==="click")return jd(e)}function ZE(t,e){if(t==="input"||t==="change")return jd(e)}function YE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Rr=typeof Object.is=="function"?Object.is:YE;function jl(t,e){if(Rr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Af.call(e,i)||!Rr(t[i],e[i]))return!1}return!0}function Uy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Wy(t,e){var n=Uy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Uy(n)}}function Kx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Kx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Jx(){for(var t=window,e=Ru();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ru(t.document)}return e}function xm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function qE(t){var e=Jx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Kx(n.ownerDocument.documentElement,n)){if(r!==null&&xm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Wy(n,s);var o=Wy(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var GE=mi&&"documentMode"in document&&11>=document.documentMode,Po=null,Gf=null,al=null,Kf=!1;function $y(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kf||Po==null||Po!==Ru(r)||(r=Po,"selectionStart"in r&&xm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),al&&jl(al,r)||(al=r,r=Bu(Gf,"onSelect"),0<r.length&&(e=new ym("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Po)))}function Pc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ao={animationend:Pc("Animation","AnimationEnd"),animationiteration:Pc("Animation","AnimationIteration"),animationstart:Pc("Animation","AnimationStart"),transitionend:Pc("Transition","TransitionEnd")},Nh={},Xx={};mi&&(Xx=document.createElement("div").style,"AnimationEvent"in window||(delete Ao.animationend.animation,delete Ao.animationiteration.animation,delete Ao.animationstart.animation),"TransitionEvent"in window||delete Ao.transitionend.transition);function Pd(t){if(Nh[t])return Nh[t];if(!Ao[t])return t;var e=Ao[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Xx)return Nh[t]=e[n];return t}var Qx=Pd("animationend"),eb=Pd("animationiteration"),tb=Pd("animationstart"),nb=Pd("transitionend"),rb=new Map,Hy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rs(t,e){rb.set(t,e),Qs(e,[t])}for(var Fh=0;Fh<Hy.length;Fh++){var Bh=Hy[Fh],KE=Bh.toLowerCase(),JE=Bh[0].toUpperCase()+Bh.slice(1);rs(KE,"on"+JE)}rs(Qx,"onAnimationEnd");rs(eb,"onAnimationIteration");rs(tb,"onAnimationStart");rs("dblclick","onDoubleClick");rs("focusin","onFocus");rs("focusout","onBlur");rs(nb,"onTransitionEnd");Go("onMouseEnter",["mouseout","mouseover"]);Go("onMouseLeave",["mouseout","mouseover"]);Go("onPointerEnter",["pointerout","pointerover"]);Go("onPointerLeave",["pointerout","pointerover"]);Qs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XE=new Set("cancel close invalid load scroll toggle".split(" ").concat(qa));function Vy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Kk(r,e,void 0,t),t.currentTarget=null}function ib(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;Vy(i,a,u),s=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;Vy(i,a,u),s=c}}}if(Lu)throw t=Vf,Lu=!1,Vf=null,t}function St(t,e){var n=e[tp];n===void 0&&(n=e[tp]=new Set);var r=t+"__bubble";n.has(r)||(sb(e,t,2,!1),n.add(r))}function Uh(t,e,n){var r=0;e&&(r|=4),sb(n,t,r,e)}var Ac="_reactListening"+Math.random().toString(36).slice(2);function Pl(t){if(!t[Ac]){t[Ac]=!0,hx.forEach(function(n){n!=="selectionchange"&&(XE.has(n)||Uh(n,!1,t),Uh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ac]||(e[Ac]=!0,Uh("selectionchange",!1,e))}}function sb(t,e,n,r){switch(Wx(e)){case 1:var i=hE;break;case 4:i=fE;break;default:i=mm}n=i.bind(null,e,n,t),i=void 0,!Hf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Wh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ms(a),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}a=a.parentNode}}r=r.return}jx(function(){var u=s,h=dm(n),p=[];e:{var m=rb.get(t);if(m!==void 0){var g=ym,y=t;switch(t){case"keypress":if(mu(n)===0)break e;case"keydown":case"keyup":g=jE;break;case"focusin":y="focus",g=Lh;break;case"focusout":y="blur",g=Lh;break;case"beforeblur":case"afterblur":g=Lh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Ry;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=gE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=OE;break;case Qx:case eb:case tb:g=vE;break;case nb:g=RE;break;case"scroll":g=pE;break;case"wheel":g=LE;break;case"copy":case"cut":case"paste":g=bE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Ly}var _=(e&4)!==0,b=!_&&t==="scroll",x=_?m!==null?m+"Capture":null:m;_=[];for(var w=u,S;w!==null;){S=w;var C=S.stateNode;if(S.tag===5&&C!==null&&(S=C,x!==null&&(C=Sl(w,x),C!=null&&_.push(Al(w,C,S)))),b)break;w=w.return}0<_.length&&(m=new g(m,y,null,n,h),p.push({event:m,listeners:_}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==Wf&&(y=n.relatedTarget||n.fromElement)&&(Ms(y)||y[gi]))break e;if((g||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,g?(y=n.relatedTarget||n.toElement,g=u,y=y?Ms(y):null,y!==null&&(b=eo(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=u),g!==y)){if(_=Ry,C="onMouseLeave",x="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(_=Ly,C="onPointerLeave",x="onPointerEnter",w="pointer"),b=g==null?m:Oo(g),S=y==null?m:Oo(y),m=new _(C,w+"leave",g,n,h),m.target=b,m.relatedTarget=S,C=null,Ms(h)===u&&(_=new _(x,w+"enter",y,n,h),_.target=S,_.relatedTarget=b,C=_),b=C,g&&y)t:{for(_=g,x=y,w=0,S=_;S;S=po(S))w++;for(S=0,C=x;C;C=po(C))S++;for(;0<w-S;)_=po(_),w--;for(;0<S-w;)x=po(x),S--;for(;w--;){if(_===x||x!==null&&_===x.alternate)break t;_=po(_),x=po(x)}_=null}else _=null;g!==null&&Zy(p,m,g,_,!1),y!==null&&b!==null&&Zy(p,b,y,_,!0)}}e:{if(m=u?Oo(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var j=WE;else if(Ny(m))if(qx)j=ZE;else{j=HE;var D=$E}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=VE);if(j&&(j=j(t,u))){Yx(p,j,n,h);break e}D&&D(t,m,u),t==="focusout"&&(D=m._wrapperState)&&D.controlled&&m.type==="number"&&zf(m,"number",m.value)}switch(D=u?Oo(u):window,t){case"focusin":(Ny(D)||D.contentEditable==="true")&&(Po=D,Gf=u,al=null);break;case"focusout":al=Gf=Po=null;break;case"mousedown":Kf=!0;break;case"contextmenu":case"mouseup":case"dragend":Kf=!1,$y(p,n,h);break;case"selectionchange":if(GE)break;case"keydown":case"keyup":$y(p,n,h)}var P;if(vm)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else jo?Vx(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(Hx&&n.locale!=="ko"&&(jo||T!=="onCompositionStart"?T==="onCompositionEnd"&&jo&&(P=$x()):(zi=h,gm="value"in zi?zi.value:zi.textContent,jo=!0)),D=Bu(u,T),0<D.length&&(T=new My(T,t,null,n,h),p.push({event:T,listeners:D}),P?T.data=P:(P=Zx(n),P!==null&&(T.data=P)))),(P=zE?NE(t,n):FE(t,n))&&(u=Bu(u,"onBeforeInput"),0<u.length&&(h=new My("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:u}),h.data=P))}ib(p,e)})}function Al(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Bu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Sl(t,n),s!=null&&r.unshift(Al(t,s,i)),s=Sl(t,e),s!=null&&r.push(Al(t,s,i))),t=t.return}return r}function po(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Zy(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,i?(c=Sl(n,s),c!=null&&o.unshift(Al(n,c,a))):i||(c=Sl(n,s),c!=null&&o.push(Al(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var QE=/\r\n?/g,eC=/\u0000|\uFFFD/g;function Yy(t){return(typeof t=="string"?t:""+t).replace(QE,`
`).replace(eC,"")}function Oc(t,e,n){if(e=Yy(e),Yy(t)!==e&&n)throw Error(Ce(425))}function Uu(){}var Jf=null,Xf=null;function Qf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ep=typeof setTimeout=="function"?setTimeout:void 0,tC=typeof clearTimeout=="function"?clearTimeout:void 0,qy=typeof Promise=="function"?Promise:void 0,nC=typeof queueMicrotask=="function"?queueMicrotask:typeof qy<"u"?function(t){return qy.resolve(null).then(t).catch(rC)}:ep;function rC(t){setTimeout(function(){throw t})}function $h(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Cl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Cl(e)}function qi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Gy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ca=Math.random().toString(36).slice(2),Vr="__reactFiber$"+ca,Ol="__reactProps$"+ca,gi="__reactContainer$"+ca,tp="__reactEvents$"+ca,iC="__reactListeners$"+ca,sC="__reactHandles$"+ca;function Ms(t){var e=t[Vr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[gi]||n[Vr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Gy(t);t!==null;){if(n=t[Vr])return n;t=Gy(t)}return e}t=n,n=t.parentNode}return null}function tc(t){return t=t[Vr]||t[gi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Oo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ce(33))}function Ad(t){return t[Ol]||null}var np=[],Do=-1;function is(t){return{current:t}}function Et(t){0>Do||(t.current=np[Do],np[Do]=null,Do--)}function xt(t,e){Do++,np[Do]=t.current,t.current=e}var ts={},bn=is(ts),Un=is(!1),Vs=ts;function Ko(t,e){var n=t.type.contextTypes;if(!n)return ts;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Wn(t){return t=t.childContextTypes,t!=null}function Wu(){Et(Un),Et(bn)}function Ky(t,e,n){if(bn.current!==ts)throw Error(Ce(168));xt(bn,e),xt(Un,n)}function ob(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ce(108,$k(t)||"Unknown",i));return Mt({},n,r)}function $u(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ts,Vs=bn.current,xt(bn,t),xt(Un,Un.current),!0}function Jy(t,e,n){var r=t.stateNode;if(!r)throw Error(Ce(169));n?(t=ob(t,e,Vs),r.__reactInternalMemoizedMergedChildContext=t,Et(Un),Et(bn),xt(bn,t)):Et(Un),xt(Un,n)}var ai=null,Od=!1,Hh=!1;function ab(t){ai===null?ai=[t]:ai.push(t)}function oC(t){Od=!0,ab(t)}function ss(){if(!Hh&&ai!==null){Hh=!0;var t=0,e=mt;try{var n=ai;for(mt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ai=null,Od=!1}catch(i){throw ai!==null&&(ai=ai.slice(t+1)),Dx(hm,ss),i}finally{mt=e,Hh=!1}}return null}var Ro=[],Mo=0,Hu=null,Vu=0,cr=[],ur=0,Zs=null,ci=1,ui="";function Es(t,e){Ro[Mo++]=Vu,Ro[Mo++]=Hu,Hu=t,Vu=e}function lb(t,e,n){cr[ur++]=ci,cr[ur++]=ui,cr[ur++]=Zs,Zs=t;var r=ci;t=ui;var i=32-Or(r)-1;r&=~(1<<i),n+=1;var s=32-Or(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ci=1<<32-Or(e)+i|n<<i|r,ui=s+t}else ci=1<<s|n<<i|r,ui=t}function bm(t){t.return!==null&&(Es(t,1),lb(t,1,0))}function wm(t){for(;t===Hu;)Hu=Ro[--Mo],Ro[Mo]=null,Vu=Ro[--Mo],Ro[Mo]=null;for(;t===Zs;)Zs=cr[--ur],cr[ur]=null,ui=cr[--ur],cr[ur]=null,ci=cr[--ur],cr[ur]=null}var er=null,Qn=null,Pt=!1,Ar=null;function cb(t,e){var n=dr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Xy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,er=t,Qn=qi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,er=t,Qn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Zs!==null?{id:ci,overflow:ui}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=dr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,er=t,Qn=null,!0):!1;default:return!1}}function rp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ip(t){if(Pt){var e=Qn;if(e){var n=e;if(!Xy(t,e)){if(rp(t))throw Error(Ce(418));e=qi(n.nextSibling);var r=er;e&&Xy(t,e)?cb(r,n):(t.flags=t.flags&-4097|2,Pt=!1,er=t)}}else{if(rp(t))throw Error(Ce(418));t.flags=t.flags&-4097|2,Pt=!1,er=t}}}function Qy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;er=t}function Dc(t){if(t!==er)return!1;if(!Pt)return Qy(t),Pt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Qf(t.type,t.memoizedProps)),e&&(e=Qn)){if(rp(t))throw ub(),Error(Ce(418));for(;e;)cb(t,e),e=qi(e.nextSibling)}if(Qy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ce(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Qn=qi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Qn=null}}else Qn=er?qi(t.stateNode.nextSibling):null;return!0}function ub(){for(var t=Qn;t;)t=qi(t.nextSibling)}function Jo(){Qn=er=null,Pt=!1}function Sm(t){Ar===null?Ar=[t]:Ar.push(t)}var aC=xi.ReactCurrentBatchConfig;function Da(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ce(309));var r=n.stateNode}if(!r)throw Error(Ce(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Ce(284));if(!n._owner)throw Error(Ce(290,t))}return t}function Rc(t,e){throw t=Object.prototype.toString.call(e),Error(Ce(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function e0(t){var e=t._init;return e(t._payload)}function db(t){function e(x,w){if(t){var S=x.deletions;S===null?(x.deletions=[w],x.flags|=16):S.push(w)}}function n(x,w){if(!t)return null;for(;w!==null;)e(x,w),w=w.sibling;return null}function r(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function i(x,w){return x=Xi(x,w),x.index=0,x.sibling=null,x}function s(x,w,S){return x.index=S,t?(S=x.alternate,S!==null?(S=S.index,S<w?(x.flags|=2,w):S):(x.flags|=2,w)):(x.flags|=1048576,w)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,w,S,C){return w===null||w.tag!==6?(w=Jh(S,x.mode,C),w.return=x,w):(w=i(w,S),w.return=x,w)}function c(x,w,S,C){var j=S.type;return j===To?h(x,w,S.props.children,C,S.key):w!==null&&(w.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Di&&e0(j)===w.type)?(C=i(w,S.props),C.ref=Da(x,w,S),C.return=x,C):(C=wu(S.type,S.key,S.props,null,x.mode,C),C.ref=Da(x,w,S),C.return=x,C)}function u(x,w,S,C){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=Xh(S,x.mode,C),w.return=x,w):(w=i(w,S.children||[]),w.return=x,w)}function h(x,w,S,C,j){return w===null||w.tag!==7?(w=Ws(S,x.mode,C,j),w.return=x,w):(w=i(w,S),w.return=x,w)}function p(x,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Jh(""+w,x.mode,S),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case wc:return S=wu(w.type,w.key,w.props,null,x.mode,S),S.ref=Da(x,null,w),S.return=x,S;case Co:return w=Xh(w,x.mode,S),w.return=x,w;case Di:var C=w._init;return p(x,C(w._payload),S)}if(Za(w)||Ta(w))return w=Ws(w,x.mode,S,null),w.return=x,w;Rc(x,w)}return null}function m(x,w,S,C){var j=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return j!==null?null:a(x,w,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case wc:return S.key===j?c(x,w,S,C):null;case Co:return S.key===j?u(x,w,S,C):null;case Di:return j=S._init,m(x,w,j(S._payload),C)}if(Za(S)||Ta(S))return j!==null?null:h(x,w,S,C,null);Rc(x,S)}return null}function g(x,w,S,C,j){if(typeof C=="string"&&C!==""||typeof C=="number")return x=x.get(S)||null,a(w,x,""+C,j);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case wc:return x=x.get(C.key===null?S:C.key)||null,c(w,x,C,j);case Co:return x=x.get(C.key===null?S:C.key)||null,u(w,x,C,j);case Di:var D=C._init;return g(x,w,S,D(C._payload),j)}if(Za(C)||Ta(C))return x=x.get(S)||null,h(w,x,C,j,null);Rc(w,C)}return null}function y(x,w,S,C){for(var j=null,D=null,P=w,T=w=0,A=null;P!==null&&T<S.length;T++){P.index>T?(A=P,P=null):A=P.sibling;var F=m(x,P,S[T],C);if(F===null){P===null&&(P=A);break}t&&P&&F.alternate===null&&e(x,P),w=s(F,w,T),D===null?j=F:D.sibling=F,D=F,P=A}if(T===S.length)return n(x,P),Pt&&Es(x,T),j;if(P===null){for(;T<S.length;T++)P=p(x,S[T],C),P!==null&&(w=s(P,w,T),D===null?j=P:D.sibling=P,D=P);return Pt&&Es(x,T),j}for(P=r(x,P);T<S.length;T++)A=g(P,x,T,S[T],C),A!==null&&(t&&A.alternate!==null&&P.delete(A.key===null?T:A.key),w=s(A,w,T),D===null?j=A:D.sibling=A,D=A);return t&&P.forEach(function(V){return e(x,V)}),Pt&&Es(x,T),j}function _(x,w,S,C){var j=Ta(S);if(typeof j!="function")throw Error(Ce(150));if(S=j.call(S),S==null)throw Error(Ce(151));for(var D=j=null,P=w,T=w=0,A=null,F=S.next();P!==null&&!F.done;T++,F=S.next()){P.index>T?(A=P,P=null):A=P.sibling;var V=m(x,P,F.value,C);if(V===null){P===null&&(P=A);break}t&&P&&V.alternate===null&&e(x,P),w=s(V,w,T),D===null?j=V:D.sibling=V,D=V,P=A}if(F.done)return n(x,P),Pt&&Es(x,T),j;if(P===null){for(;!F.done;T++,F=S.next())F=p(x,F.value,C),F!==null&&(w=s(F,w,T),D===null?j=F:D.sibling=F,D=F);return Pt&&Es(x,T),j}for(P=r(x,P);!F.done;T++,F=S.next())F=g(P,x,T,F.value,C),F!==null&&(t&&F.alternate!==null&&P.delete(F.key===null?T:F.key),w=s(F,w,T),D===null?j=F:D.sibling=F,D=F);return t&&P.forEach(function(R){return e(x,R)}),Pt&&Es(x,T),j}function b(x,w,S,C){if(typeof S=="object"&&S!==null&&S.type===To&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case wc:e:{for(var j=S.key,D=w;D!==null;){if(D.key===j){if(j=S.type,j===To){if(D.tag===7){n(x,D.sibling),w=i(D,S.props.children),w.return=x,x=w;break e}}else if(D.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Di&&e0(j)===D.type){n(x,D.sibling),w=i(D,S.props),w.ref=Da(x,D,S),w.return=x,x=w;break e}n(x,D);break}else e(x,D);D=D.sibling}S.type===To?(w=Ws(S.props.children,x.mode,C,S.key),w.return=x,x=w):(C=wu(S.type,S.key,S.props,null,x.mode,C),C.ref=Da(x,w,S),C.return=x,x=C)}return o(x);case Co:e:{for(D=S.key;w!==null;){if(w.key===D)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){n(x,w.sibling),w=i(w,S.children||[]),w.return=x,x=w;break e}else{n(x,w);break}else e(x,w);w=w.sibling}w=Xh(S,x.mode,C),w.return=x,x=w}return o(x);case Di:return D=S._init,b(x,w,D(S._payload),C)}if(Za(S))return y(x,w,S,C);if(Ta(S))return _(x,w,S,C);Rc(x,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(n(x,w.sibling),w=i(w,S),w.return=x,x=w):(n(x,w),w=Jh(S,x.mode,C),w.return=x,x=w),o(x)):n(x,w)}return b}var Xo=db(!0),hb=db(!1),Zu=is(null),Yu=null,Lo=null,km=null;function Em(){km=Lo=Yu=null}function Cm(t){var e=Zu.current;Et(Zu),t._currentValue=e}function sp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ho(t,e){Yu=t,km=Lo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Bn=!0),t.firstContext=null)}function pr(t){var e=t._currentValue;if(km!==t)if(t={context:t,memoizedValue:e,next:null},Lo===null){if(Yu===null)throw Error(Ce(308));Lo=t,Yu.dependencies={lanes:0,firstContext:t}}else Lo=Lo.next=t;return e}var Ls=null;function Tm(t){Ls===null?Ls=[t]:Ls.push(t)}function fb(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Tm(e)):(n.next=i.next,i.next=n),e.interleaved=n,yi(t,r)}function yi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ri=!1;function jm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function fi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,at&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,yi(t,n)}return i=r.interleaved,i===null?(e.next=e,Tm(r)):(e.next=i.next,i.next=e),r.interleaved=e,yi(t,n)}function gu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fm(t,n)}}function t0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function qu(t,e,n,r){var i=t.updateQueue;Ri=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=c))}if(s!==null){var p=i.baseState;o=0,h=u=c=null,a=s;do{var m=a.lane,g=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,_=a;switch(m=e,g=n,_.tag){case 1:if(y=_.payload,typeof y=="function"){p=y.call(g,p,m);break e}p=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=_.payload,m=typeof y=="function"?y.call(g,p,m):y,m==null)break e;p=Mt({},p,m);break e;case 2:Ri=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else g={eventTime:g,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=g,c=p):h=h.next=g,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(h===null&&(c=p),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);qs|=o,t.lanes=o,t.memoizedState=p}}function n0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ce(191,i));i.call(r)}}}var nc={},Yr=is(nc),Dl=is(nc),Rl=is(nc);function Is(t){if(t===nc)throw Error(Ce(174));return t}function Pm(t,e){switch(xt(Rl,e),xt(Dl,t),xt(Yr,nc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ff(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ff(e,t)}Et(Yr),xt(Yr,e)}function Qo(){Et(Yr),Et(Dl),Et(Rl)}function mb(t){Is(Rl.current);var e=Is(Yr.current),n=Ff(e,t.type);e!==n&&(xt(Dl,t),xt(Yr,n))}function Am(t){Dl.current===t&&(Et(Yr),Et(Dl))}var Ot=is(0);function Gu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Vh=[];function Om(){for(var t=0;t<Vh.length;t++)Vh[t]._workInProgressVersionPrimary=null;Vh.length=0}var yu=xi.ReactCurrentDispatcher,Zh=xi.ReactCurrentBatchConfig,Ys=0,Rt=null,Kt=null,tn=null,Ku=!1,ll=!1,Ml=0,lC=0;function pn(){throw Error(Ce(321))}function Dm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Rr(t[n],e[n]))return!1;return!0}function Rm(t,e,n,r,i,s){if(Ys=s,Rt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,yu.current=t===null||t.memoizedState===null?hC:fC,t=n(r,i),ll){s=0;do{if(ll=!1,Ml=0,25<=s)throw Error(Ce(301));s+=1,tn=Kt=null,e.updateQueue=null,yu.current=pC,t=n(r,i)}while(ll)}if(yu.current=Ju,e=Kt!==null&&Kt.next!==null,Ys=0,tn=Kt=Rt=null,Ku=!1,e)throw Error(Ce(300));return t}function Mm(){var t=Ml!==0;return Ml=0,t}function Wr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?Rt.memoizedState=tn=t:tn=tn.next=t,tn}function mr(){if(Kt===null){var t=Rt.alternate;t=t!==null?t.memoizedState:null}else t=Kt.next;var e=tn===null?Rt.memoizedState:tn.next;if(e!==null)tn=e,Kt=t;else{if(t===null)throw Error(Ce(310));Kt=t,t={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},tn===null?Rt.memoizedState=tn=t:tn=tn.next=t}return tn}function Ll(t,e){return typeof e=="function"?e(t):e}function Yh(t){var e=mr(),n=e.queue;if(n===null)throw Error(Ce(311));n.lastRenderedReducer=t;var r=Kt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,c=null,u=s;do{var h=u.lane;if((Ys&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var p={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=p,o=r):c=c.next=p,Rt.lanes|=h,qs|=h}u=u.next}while(u!==null&&u!==s);c===null?o=r:c.next=a,Rr(r,e.memoizedState)||(Bn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Rt.lanes|=s,qs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qh(t){var e=mr(),n=e.queue;if(n===null)throw Error(Ce(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Rr(s,e.memoizedState)||(Bn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function gb(){}function yb(t,e){var n=Rt,r=mr(),i=e(),s=!Rr(r.memoizedState,i);if(s&&(r.memoizedState=i,Bn=!0),r=r.queue,Lm(xb.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||tn!==null&&tn.memoizedState.tag&1){if(n.flags|=2048,Il(9,vb.bind(null,n,r,i,e),void 0,null),rn===null)throw Error(Ce(349));Ys&30||_b(n,e,i)}return i}function _b(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Rt.updateQueue,e===null?(e={lastEffect:null,stores:null},Rt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function vb(t,e,n,r){e.value=n,e.getSnapshot=r,bb(e)&&wb(t)}function xb(t,e,n){return n(function(){bb(e)&&wb(t)})}function bb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Rr(t,n)}catch{return!0}}function wb(t){var e=yi(t,1);e!==null&&Dr(e,t,1,-1)}function r0(t){var e=Wr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ll,lastRenderedState:t},e.queue=t,t=t.dispatch=dC.bind(null,Rt,t),[e.memoizedState,t]}function Il(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Rt.updateQueue,e===null?(e={lastEffect:null,stores:null},Rt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Sb(){return mr().memoizedState}function _u(t,e,n,r){var i=Wr();Rt.flags|=t,i.memoizedState=Il(1|e,n,void 0,r===void 0?null:r)}function Dd(t,e,n,r){var i=mr();r=r===void 0?null:r;var s=void 0;if(Kt!==null){var o=Kt.memoizedState;if(s=o.destroy,r!==null&&Dm(r,o.deps)){i.memoizedState=Il(e,n,s,r);return}}Rt.flags|=t,i.memoizedState=Il(1|e,n,s,r)}function i0(t,e){return _u(8390656,8,t,e)}function Lm(t,e){return Dd(2048,8,t,e)}function kb(t,e){return Dd(4,2,t,e)}function Eb(t,e){return Dd(4,4,t,e)}function Cb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Tb(t,e,n){return n=n!=null?n.concat([t]):null,Dd(4,4,Cb.bind(null,e,t),n)}function Im(){}function jb(t,e){var n=mr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Dm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Pb(t,e){var n=mr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Dm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ab(t,e,n){return Ys&21?(Rr(n,e)||(n=Lx(),Rt.lanes|=n,qs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Bn=!0),t.memoizedState=n)}function cC(t,e){var n=mt;mt=n!==0&&4>n?n:4,t(!0);var r=Zh.transition;Zh.transition={};try{t(!1),e()}finally{mt=n,Zh.transition=r}}function Ob(){return mr().memoizedState}function uC(t,e,n){var r=Ji(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Db(t))Rb(e,n);else if(n=fb(t,e,n,r),n!==null){var i=jn();Dr(n,t,r,i),Mb(n,e,r)}}function dC(t,e,n){var r=Ji(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Db(t))Rb(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Rr(a,o)){var c=e.interleaved;c===null?(i.next=i,Tm(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=fb(t,e,i,r),n!==null&&(i=jn(),Dr(n,t,r,i),Mb(n,e,r))}}function Db(t){var e=t.alternate;return t===Rt||e!==null&&e===Rt}function Rb(t,e){ll=Ku=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Mb(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fm(t,n)}}var Ju={readContext:pr,useCallback:pn,useContext:pn,useEffect:pn,useImperativeHandle:pn,useInsertionEffect:pn,useLayoutEffect:pn,useMemo:pn,useReducer:pn,useRef:pn,useState:pn,useDebugValue:pn,useDeferredValue:pn,useTransition:pn,useMutableSource:pn,useSyncExternalStore:pn,useId:pn,unstable_isNewReconciler:!1},hC={readContext:pr,useCallback:function(t,e){return Wr().memoizedState=[t,e===void 0?null:e],t},useContext:pr,useEffect:i0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,_u(4194308,4,Cb.bind(null,e,t),n)},useLayoutEffect:function(t,e){return _u(4194308,4,t,e)},useInsertionEffect:function(t,e){return _u(4,2,t,e)},useMemo:function(t,e){var n=Wr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Wr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=uC.bind(null,Rt,t),[r.memoizedState,t]},useRef:function(t){var e=Wr();return t={current:t},e.memoizedState=t},useState:r0,useDebugValue:Im,useDeferredValue:function(t){return Wr().memoizedState=t},useTransition:function(){var t=r0(!1),e=t[0];return t=cC.bind(null,t[1]),Wr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Rt,i=Wr();if(Pt){if(n===void 0)throw Error(Ce(407));n=n()}else{if(n=e(),rn===null)throw Error(Ce(349));Ys&30||_b(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,i0(xb.bind(null,r,s,t),[t]),r.flags|=2048,Il(9,vb.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Wr(),e=rn.identifierPrefix;if(Pt){var n=ui,r=ci;n=(r&~(1<<32-Or(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ml++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=lC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},fC={readContext:pr,useCallback:jb,useContext:pr,useEffect:Lm,useImperativeHandle:Tb,useInsertionEffect:kb,useLayoutEffect:Eb,useMemo:Pb,useReducer:Yh,useRef:Sb,useState:function(){return Yh(Ll)},useDebugValue:Im,useDeferredValue:function(t){var e=mr();return Ab(e,Kt.memoizedState,t)},useTransition:function(){var t=Yh(Ll)[0],e=mr().memoizedState;return[t,e]},useMutableSource:gb,useSyncExternalStore:yb,useId:Ob,unstable_isNewReconciler:!1},pC={readContext:pr,useCallback:jb,useContext:pr,useEffect:Lm,useImperativeHandle:Tb,useInsertionEffect:kb,useLayoutEffect:Eb,useMemo:Pb,useReducer:qh,useRef:Sb,useState:function(){return qh(Ll)},useDebugValue:Im,useDeferredValue:function(t){var e=mr();return Kt===null?e.memoizedState=t:Ab(e,Kt.memoizedState,t)},useTransition:function(){var t=qh(Ll)[0],e=mr().memoizedState;return[t,e]},useMutableSource:gb,useSyncExternalStore:yb,useId:Ob,unstable_isNewReconciler:!1};function Er(t,e){if(t&&t.defaultProps){e=Mt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function op(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Mt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Rd={isMounted:function(t){return(t=t._reactInternals)?eo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=jn(),i=Ji(t),s=fi(r,i);s.payload=e,n!=null&&(s.callback=n),e=Gi(t,s,i),e!==null&&(Dr(e,t,i,r),gu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=jn(),i=Ji(t),s=fi(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Gi(t,s,i),e!==null&&(Dr(e,t,i,r),gu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=jn(),r=Ji(t),i=fi(n,r);i.tag=2,e!=null&&(i.callback=e),e=Gi(t,i,r),e!==null&&(Dr(e,t,r,n),gu(e,t,r))}};function s0(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!jl(n,r)||!jl(i,s):!0}function Lb(t,e,n){var r=!1,i=ts,s=e.contextType;return typeof s=="object"&&s!==null?s=pr(s):(i=Wn(e)?Vs:bn.current,r=e.contextTypes,s=(r=r!=null)?Ko(t,i):ts),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Rd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function o0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Rd.enqueueReplaceState(e,e.state,null)}function ap(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},jm(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=pr(s):(s=Wn(e)?Vs:bn.current,i.context=Ko(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(op(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Rd.enqueueReplaceState(i,i.state,null),qu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ea(t,e){try{var n="",r=e;do n+=Wk(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Gh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function lp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var mC=typeof WeakMap=="function"?WeakMap:Map;function Ib(t,e,n){n=fi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Qu||(Qu=!0,_p=r),lp(t,e)},n}function zb(t,e,n){n=fi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){lp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){lp(t,e),typeof r!="function"&&(Ki===null?Ki=new Set([this]):Ki.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function a0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new mC;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=PC.bind(null,t,e,n),e.then(t,t))}function l0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function c0(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=fi(-1,1),e.tag=2,Gi(n,e,1))),n.lanes|=1),t)}var gC=xi.ReactCurrentOwner,Bn=!1;function Cn(t,e,n,r){e.child=t===null?hb(e,null,n,r):Xo(e,t.child,n,r)}function u0(t,e,n,r,i){n=n.render;var s=e.ref;return Ho(e,i),r=Rm(t,e,n,r,s,i),n=Mm(),t!==null&&!Bn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_i(t,e,i)):(Pt&&n&&bm(e),e.flags|=1,Cn(t,e,r,i),e.child)}function d0(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Hm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Nb(t,e,s,r,i)):(t=wu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:jl,n(o,r)&&t.ref===e.ref)return _i(t,e,i)}return e.flags|=1,t=Xi(s,r),t.ref=e.ref,t.return=e,e.child=t}function Nb(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(jl(s,r)&&t.ref===e.ref)if(Bn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Bn=!0);else return e.lanes=t.lanes,_i(t,e,i)}return cp(t,e,n,r,i)}function Fb(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xt(zo,qn),qn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,xt(zo,qn),qn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,xt(zo,qn),qn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,xt(zo,qn),qn|=r;return Cn(t,e,i,n),e.child}function Bb(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function cp(t,e,n,r,i){var s=Wn(n)?Vs:bn.current;return s=Ko(e,s),Ho(e,i),n=Rm(t,e,n,r,s,i),r=Mm(),t!==null&&!Bn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_i(t,e,i)):(Pt&&r&&bm(e),e.flags|=1,Cn(t,e,n,i),e.child)}function h0(t,e,n,r,i){if(Wn(n)){var s=!0;$u(e)}else s=!1;if(Ho(e,i),e.stateNode===null)vu(t,e),Lb(e,n,r),ap(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=pr(u):(u=Wn(n)?Vs:bn.current,u=Ko(e,u));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&o0(e,o,r,u),Ri=!1;var m=e.memoizedState;o.state=m,qu(e,r,o,i),c=e.memoizedState,a!==r||m!==c||Un.current||Ri?(typeof h=="function"&&(op(e,n,h,r),c=e.memoizedState),(a=Ri||s0(e,n,a,r,m,c,u))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,pb(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Er(e.type,a),o.props=u,p=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=pr(c):(c=Wn(n)?Vs:bn.current,c=Ko(e,c));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||m!==c)&&o0(e,o,r,c),Ri=!1,m=e.memoizedState,o.state=m,qu(e,r,o,i);var y=e.memoizedState;a!==p||m!==y||Un.current||Ri?(typeof g=="function"&&(op(e,n,g,r),y=e.memoizedState),(u=Ri||s0(e,n,u,r,m,y,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return up(t,e,n,r,s,i)}function up(t,e,n,r,i,s){Bb(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Jy(e,n,!1),_i(t,e,s);r=e.stateNode,gC.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Xo(e,t.child,null,s),e.child=Xo(e,null,a,s)):Cn(t,e,a,s),e.memoizedState=r.state,i&&Jy(e,n,!0),e.child}function Ub(t){var e=t.stateNode;e.pendingContext?Ky(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ky(t,e.context,!1),Pm(t,e.containerInfo)}function f0(t,e,n,r,i){return Jo(),Sm(i),e.flags|=256,Cn(t,e,n,r),e.child}var dp={dehydrated:null,treeContext:null,retryLane:0};function hp(t){return{baseLanes:t,cachePool:null,transitions:null}}function Wb(t,e,n){var r=e.pendingProps,i=Ot.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),xt(Ot,i&1),t===null)return ip(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Id(o,r,0,null),t=Ws(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=hp(n),e.memoizedState=dp,t):zm(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return yC(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Xi(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Xi(a,s):(s=Ws(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?hp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=dp,r}return s=t.child,t=s.sibling,r=Xi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function zm(t,e){return e=Id({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Mc(t,e,n,r){return r!==null&&Sm(r),Xo(e,t.child,null,n),t=zm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function yC(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Gh(Error(Ce(422))),Mc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Id({mode:"visible",children:r.children},i,0,null),s=Ws(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Xo(e,t.child,null,o),e.child.memoizedState=hp(o),e.memoizedState=dp,s);if(!(e.mode&1))return Mc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Ce(419)),r=Gh(s,r,void 0),Mc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Bn||a){if(r=rn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,yi(t,i),Dr(r,t,i,-1))}return $m(),r=Gh(Error(Ce(421))),Mc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=AC.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Qn=qi(i.nextSibling),er=e,Pt=!0,Ar=null,t!==null&&(cr[ur++]=ci,cr[ur++]=ui,cr[ur++]=Zs,ci=t.id,ui=t.overflow,Zs=e),e=zm(e,r.children),e.flags|=4096,e)}function p0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),sp(t.return,e,n)}function Kh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function $b(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Cn(t,e,r.children,n),r=Ot.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&p0(t,n,e);else if(t.tag===19)p0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(xt(Ot,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Gu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Kh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Gu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Kh(e,!0,n,null,s);break;case"together":Kh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function vu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function _i(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),qs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ce(153));if(e.child!==null){for(t=e.child,n=Xi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Xi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function _C(t,e,n){switch(e.tag){case 3:Ub(e),Jo();break;case 5:mb(e);break;case 1:Wn(e.type)&&$u(e);break;case 4:Pm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;xt(Zu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(xt(Ot,Ot.current&1),e.flags|=128,null):n&e.child.childLanes?Wb(t,e,n):(xt(Ot,Ot.current&1),t=_i(t,e,n),t!==null?t.sibling:null);xt(Ot,Ot.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return $b(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),xt(Ot,Ot.current),r)break;return null;case 22:case 23:return e.lanes=0,Fb(t,e,n)}return _i(t,e,n)}var Hb,fp,Vb,Zb;Hb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fp=function(){};Vb=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Is(Yr.current);var s=null;switch(n){case"input":i=Lf(t,i),r=Lf(t,r),s=[];break;case"select":i=Mt({},i,{value:void 0}),r=Mt({},r,{value:void 0}),s=[];break;case"textarea":i=Nf(t,i),r=Nf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Uu)}Bf(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(bl.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(bl.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&St("scroll",t),s||a===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Zb=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ra(t,e){if(!Pt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function mn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function vC(t,e,n){var r=e.pendingProps;switch(wm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mn(e),null;case 1:return Wn(e.type)&&Wu(),mn(e),null;case 3:return r=e.stateNode,Qo(),Et(Un),Et(bn),Om(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Dc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ar!==null&&(bp(Ar),Ar=null))),fp(t,e),mn(e),null;case 5:Am(e);var i=Is(Rl.current);if(n=e.type,t!==null&&e.stateNode!=null)Vb(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ce(166));return mn(e),null}if(t=Is(Yr.current),Dc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Vr]=e,r[Ol]=s,t=(e.mode&1)!==0,n){case"dialog":St("cancel",r),St("close",r);break;case"iframe":case"object":case"embed":St("load",r);break;case"video":case"audio":for(i=0;i<qa.length;i++)St(qa[i],r);break;case"source":St("error",r);break;case"img":case"image":case"link":St("error",r),St("load",r);break;case"details":St("toggle",r);break;case"input":Sy(r,s),St("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},St("invalid",r);break;case"textarea":Ey(r,s),St("invalid",r)}Bf(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Oc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Oc(r.textContent,a,t),i=["children",""+a]):bl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&St("scroll",r)}switch(n){case"input":Sc(r),ky(r,s,!0);break;case"textarea":Sc(r),Cy(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Uu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=xx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Vr]=e,t[Ol]=r,Hb(t,e,!1,!1),e.stateNode=t;e:{switch(o=Uf(n,r),n){case"dialog":St("cancel",t),St("close",t),i=r;break;case"iframe":case"object":case"embed":St("load",t),i=r;break;case"video":case"audio":for(i=0;i<qa.length;i++)St(qa[i],t);i=r;break;case"source":St("error",t),i=r;break;case"img":case"image":case"link":St("error",t),St("load",t),i=r;break;case"details":St("toggle",t),i=r;break;case"input":Sy(t,r),i=Lf(t,r),St("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Mt({},r,{value:void 0}),St("invalid",t);break;case"textarea":Ey(t,r),i=Nf(t,r),St("invalid",t);break;default:i=r}Bf(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?Sx(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&bx(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&wl(t,c):typeof c=="number"&&wl(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(bl.hasOwnProperty(s)?c!=null&&s==="onScroll"&&St("scroll",t):c!=null&&am(t,s,c,o))}switch(n){case"input":Sc(t),ky(t,r,!1);break;case"textarea":Sc(t),Cy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+es(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Bo(t,!!r.multiple,s,!1):r.defaultValue!=null&&Bo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Uu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mn(e),null;case 6:if(t&&e.stateNode!=null)Zb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ce(166));if(n=Is(Rl.current),Is(Yr.current),Dc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Vr]=e,(s=r.nodeValue!==n)&&(t=er,t!==null))switch(t.tag){case 3:Oc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Oc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vr]=e,e.stateNode=r}return mn(e),null;case 13:if(Et(Ot),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pt&&Qn!==null&&e.mode&1&&!(e.flags&128))ub(),Jo(),e.flags|=98560,s=!1;else if(s=Dc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Ce(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ce(317));s[Vr]=e}else Jo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mn(e),s=!1}else Ar!==null&&(bp(Ar),Ar=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ot.current&1?Jt===0&&(Jt=3):$m())),e.updateQueue!==null&&(e.flags|=4),mn(e),null);case 4:return Qo(),fp(t,e),t===null&&Pl(e.stateNode.containerInfo),mn(e),null;case 10:return Cm(e.type._context),mn(e),null;case 17:return Wn(e.type)&&Wu(),mn(e),null;case 19:if(Et(Ot),s=e.memoizedState,s===null)return mn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Ra(s,!1);else{if(Jt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Gu(t),o!==null){for(e.flags|=128,Ra(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return xt(Ot,Ot.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ft()>ta&&(e.flags|=128,r=!0,Ra(s,!1),e.lanes=4194304)}else{if(!r)if(t=Gu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ra(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Pt)return mn(e),null}else 2*Ft()-s.renderingStartTime>ta&&n!==1073741824&&(e.flags|=128,r=!0,Ra(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ft(),e.sibling=null,n=Ot.current,xt(Ot,r?n&1|2:n&1),e):(mn(e),null);case 22:case 23:return Wm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?qn&1073741824&&(mn(e),e.subtreeFlags&6&&(e.flags|=8192)):mn(e),null;case 24:return null;case 25:return null}throw Error(Ce(156,e.tag))}function xC(t,e){switch(wm(e),e.tag){case 1:return Wn(e.type)&&Wu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Qo(),Et(Un),Et(bn),Om(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Am(e),null;case 13:if(Et(Ot),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ce(340));Jo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Et(Ot),null;case 4:return Qo(),null;case 10:return Cm(e.type._context),null;case 22:case 23:return Wm(),null;case 24:return null;default:return null}}var Lc=!1,_n=!1,bC=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Io(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){It(t,e,r)}else n.current=null}function pp(t,e,n){try{n()}catch(r){It(t,e,r)}}var m0=!1;function wC(t,e){if(Jf=Nu,t=Jx(),xm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,h=0,p=t,m=null;t:for(;;){for(var g;p!==n||i!==0&&p.nodeType!==3||(a=o+i),p!==s||r!==0&&p.nodeType!==3||(c=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(g=p.firstChild)!==null;)m=p,p=g;for(;;){if(p===t)break t;if(m===n&&++u===i&&(a=o),m===s&&++h===r&&(c=o),(g=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=g}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xf={focusedElem:t,selectionRange:n},Nu=!1,Ie=e;Ie!==null;)if(e=Ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ie=t;else for(;Ie!==null;){e=Ie;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var _=y.memoizedProps,b=y.memoizedState,x=e.stateNode,w=x.getSnapshotBeforeUpdate(e.elementType===e.type?_:Er(e.type,_),b);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ce(163))}}catch(C){It(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,Ie=t;break}Ie=e.return}return y=m0,m0=!1,y}function cl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&pp(e,n,s)}i=i.next}while(i!==r)}}function Md(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function mp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Yb(t){var e=t.alternate;e!==null&&(t.alternate=null,Yb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vr],delete e[Ol],delete e[tp],delete e[iC],delete e[sC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qb(t){return t.tag===5||t.tag===3||t.tag===4}function g0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Uu));else if(r!==4&&(t=t.child,t!==null))for(gp(t,e,n),t=t.sibling;t!==null;)gp(t,e,n),t=t.sibling}function yp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(yp(t,e,n),t=t.sibling;t!==null;)yp(t,e,n),t=t.sibling}var ln=null,Tr=!1;function Ti(t,e,n){for(n=n.child;n!==null;)Gb(t,e,n),n=n.sibling}function Gb(t,e,n){if(Zr&&typeof Zr.onCommitFiberUnmount=="function")try{Zr.onCommitFiberUnmount(Cd,n)}catch{}switch(n.tag){case 5:_n||Io(n,e);case 6:var r=ln,i=Tr;ln=null,Ti(t,e,n),ln=r,Tr=i,ln!==null&&(Tr?(t=ln,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ln.removeChild(n.stateNode));break;case 18:ln!==null&&(Tr?(t=ln,n=n.stateNode,t.nodeType===8?$h(t.parentNode,n):t.nodeType===1&&$h(t,n),Cl(t)):$h(ln,n.stateNode));break;case 4:r=ln,i=Tr,ln=n.stateNode.containerInfo,Tr=!0,Ti(t,e,n),ln=r,Tr=i;break;case 0:case 11:case 14:case 15:if(!_n&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&pp(n,e,o),i=i.next}while(i!==r)}Ti(t,e,n);break;case 1:if(!_n&&(Io(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){It(n,e,a)}Ti(t,e,n);break;case 21:Ti(t,e,n);break;case 22:n.mode&1?(_n=(r=_n)||n.memoizedState!==null,Ti(t,e,n),_n=r):Ti(t,e,n);break;default:Ti(t,e,n)}}function y0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new bC),e.forEach(function(r){var i=OC.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function br(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ln=a.stateNode,Tr=!1;break e;case 3:ln=a.stateNode.containerInfo,Tr=!0;break e;case 4:ln=a.stateNode.containerInfo,Tr=!0;break e}a=a.return}if(ln===null)throw Error(Ce(160));Gb(s,o,i),ln=null,Tr=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){It(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Kb(e,t),e=e.sibling}function Kb(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(br(e,t),Nr(t),r&4){try{cl(3,t,t.return),Md(3,t)}catch(_){It(t,t.return,_)}try{cl(5,t,t.return)}catch(_){It(t,t.return,_)}}break;case 1:br(e,t),Nr(t),r&512&&n!==null&&Io(n,n.return);break;case 5:if(br(e,t),Nr(t),r&512&&n!==null&&Io(n,n.return),t.flags&32){var i=t.stateNode;try{wl(i,"")}catch(_){It(t,t.return,_)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&_x(i,s),Uf(a,o);var u=Uf(a,s);for(o=0;o<c.length;o+=2){var h=c[o],p=c[o+1];h==="style"?Sx(i,p):h==="dangerouslySetInnerHTML"?bx(i,p):h==="children"?wl(i,p):am(i,h,p,u)}switch(a){case"input":If(i,s);break;case"textarea":vx(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Bo(i,!!s.multiple,g,!1):m!==!!s.multiple&&(s.defaultValue!=null?Bo(i,!!s.multiple,s.defaultValue,!0):Bo(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ol]=s}catch(_){It(t,t.return,_)}}break;case 6:if(br(e,t),Nr(t),r&4){if(t.stateNode===null)throw Error(Ce(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(_){It(t,t.return,_)}}break;case 3:if(br(e,t),Nr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Cl(e.containerInfo)}catch(_){It(t,t.return,_)}break;case 4:br(e,t),Nr(t);break;case 13:br(e,t),Nr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Bm=Ft())),r&4&&y0(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(_n=(u=_n)||h,br(e,t),_n=u):br(e,t),Nr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(Ie=t,h=t.child;h!==null;){for(p=Ie=h;Ie!==null;){switch(m=Ie,g=m.child,m.tag){case 0:case 11:case 14:case 15:cl(4,m,m.return);break;case 1:Io(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(_){It(r,n,_)}}break;case 5:Io(m,m.return);break;case 22:if(m.memoizedState!==null){v0(p);continue}}g!==null?(g.return=m,Ie=g):v0(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=wx("display",o))}catch(_){It(t,t.return,_)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(_){It(t,t.return,_)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:br(e,t),Nr(t),r&4&&y0(t);break;case 21:break;default:br(e,t),Nr(t)}}function Nr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(qb(n)){var r=n;break e}n=n.return}throw Error(Ce(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(wl(i,""),r.flags&=-33);var s=g0(t);yp(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=g0(t);gp(t,a,o);break;default:throw Error(Ce(161))}}catch(c){It(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function SC(t,e,n){Ie=t,Jb(t)}function Jb(t,e,n){for(var r=(t.mode&1)!==0;Ie!==null;){var i=Ie,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Lc;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||_n;a=Lc;var u=_n;if(Lc=o,(_n=c)&&!u)for(Ie=i;Ie!==null;)o=Ie,c=o.child,o.tag===22&&o.memoizedState!==null?x0(i):c!==null?(c.return=o,Ie=c):x0(i);for(;s!==null;)Ie=s,Jb(s),s=s.sibling;Ie=i,Lc=a,_n=u}_0(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ie=s):_0(t)}}function _0(t){for(;Ie!==null;){var e=Ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:_n||Md(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!_n)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Er(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&n0(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}n0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&Cl(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ce(163))}_n||e.flags&512&&mp(e)}catch(m){It(e,e.return,m)}}if(e===t){Ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function v0(t){for(;Ie!==null;){var e=Ie;if(e===t){Ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function x0(t){for(;Ie!==null;){var e=Ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Md(4,e)}catch(c){It(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){It(e,i,c)}}var s=e.return;try{mp(e)}catch(c){It(e,s,c)}break;case 5:var o=e.return;try{mp(e)}catch(c){It(e,o,c)}}}catch(c){It(e,e.return,c)}if(e===t){Ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ie=a;break}Ie=e.return}}var kC=Math.ceil,Xu=xi.ReactCurrentDispatcher,Nm=xi.ReactCurrentOwner,fr=xi.ReactCurrentBatchConfig,at=0,rn=null,Yt=null,cn=0,qn=0,zo=is(0),Jt=0,zl=null,qs=0,Ld=0,Fm=0,ul=null,zn=null,Bm=0,ta=1/0,si=null,Qu=!1,_p=null,Ki=null,Ic=!1,Ni=null,ed=0,dl=0,vp=null,xu=-1,bu=0;function jn(){return at&6?Ft():xu!==-1?xu:xu=Ft()}function Ji(t){return t.mode&1?at&2&&cn!==0?cn&-cn:aC.transition!==null?(bu===0&&(bu=Lx()),bu):(t=mt,t!==0||(t=window.event,t=t===void 0?16:Wx(t.type)),t):1}function Dr(t,e,n,r){if(50<dl)throw dl=0,vp=null,Error(Ce(185));Ql(t,n,r),(!(at&2)||t!==rn)&&(t===rn&&(!(at&2)&&(Ld|=n),Jt===4&&Li(t,cn)),$n(t,r),n===1&&at===0&&!(e.mode&1)&&(ta=Ft()+500,Od&&ss()))}function $n(t,e){var n=t.callbackNode;aE(t,e);var r=zu(t,t===rn?cn:0);if(r===0)n!==null&&Py(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Py(n),e===1)t.tag===0?oC(b0.bind(null,t)):ab(b0.bind(null,t)),nC(function(){!(at&6)&&ss()}),n=null;else{switch(Ix(r)){case 1:n=hm;break;case 4:n=Rx;break;case 16:n=Iu;break;case 536870912:n=Mx;break;default:n=Iu}n=s1(n,Xb.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Xb(t,e){if(xu=-1,bu=0,at&6)throw Error(Ce(327));var n=t.callbackNode;if(Vo()&&t.callbackNode!==n)return null;var r=zu(t,t===rn?cn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=td(t,r);else{e=r;var i=at;at|=2;var s=e1();(rn!==t||cn!==e)&&(si=null,ta=Ft()+500,Us(t,e));do try{TC();break}catch(a){Qb(t,a)}while(!0);Em(),Xu.current=s,at=i,Yt!==null?e=0:(rn=null,cn=0,e=Jt)}if(e!==0){if(e===2&&(i=Zf(t),i!==0&&(r=i,e=xp(t,i))),e===1)throw n=zl,Us(t,0),Li(t,r),$n(t,Ft()),n;if(e===6)Li(t,r);else{if(i=t.current.alternate,!(r&30)&&!EC(i)&&(e=td(t,r),e===2&&(s=Zf(t),s!==0&&(r=s,e=xp(t,s))),e===1))throw n=zl,Us(t,0),Li(t,r),$n(t,Ft()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Ce(345));case 2:Cs(t,zn,si);break;case 3:if(Li(t,r),(r&130023424)===r&&(e=Bm+500-Ft(),10<e)){if(zu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){jn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ep(Cs.bind(null,t,zn,si),e);break}Cs(t,zn,si);break;case 4:if(Li(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Or(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ft()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kC(r/1960))-r,10<r){t.timeoutHandle=ep(Cs.bind(null,t,zn,si),r);break}Cs(t,zn,si);break;case 5:Cs(t,zn,si);break;default:throw Error(Ce(329))}}}return $n(t,Ft()),t.callbackNode===n?Xb.bind(null,t):null}function xp(t,e){var n=ul;return t.current.memoizedState.isDehydrated&&(Us(t,e).flags|=256),t=td(t,e),t!==2&&(e=zn,zn=n,e!==null&&bp(e)),t}function bp(t){zn===null?zn=t:zn.push.apply(zn,t)}function EC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Rr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Li(t,e){for(e&=~Fm,e&=~Ld,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Or(e),r=1<<n;t[n]=-1,e&=~r}}function b0(t){if(at&6)throw Error(Ce(327));Vo();var e=zu(t,0);if(!(e&1))return $n(t,Ft()),null;var n=td(t,e);if(t.tag!==0&&n===2){var r=Zf(t);r!==0&&(e=r,n=xp(t,r))}if(n===1)throw n=zl,Us(t,0),Li(t,e),$n(t,Ft()),n;if(n===6)throw Error(Ce(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Cs(t,zn,si),$n(t,Ft()),null}function Um(t,e){var n=at;at|=1;try{return t(e)}finally{at=n,at===0&&(ta=Ft()+500,Od&&ss())}}function Gs(t){Ni!==null&&Ni.tag===0&&!(at&6)&&Vo();var e=at;at|=1;var n=fr.transition,r=mt;try{if(fr.transition=null,mt=1,t)return t()}finally{mt=r,fr.transition=n,at=e,!(at&6)&&ss()}}function Wm(){qn=zo.current,Et(zo)}function Us(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,tC(n)),Yt!==null)for(n=Yt.return;n!==null;){var r=n;switch(wm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Wu();break;case 3:Qo(),Et(Un),Et(bn),Om();break;case 5:Am(r);break;case 4:Qo();break;case 13:Et(Ot);break;case 19:Et(Ot);break;case 10:Cm(r.type._context);break;case 22:case 23:Wm()}n=n.return}if(rn=t,Yt=t=Xi(t.current,null),cn=qn=e,Jt=0,zl=null,Fm=Ld=qs=0,zn=ul=null,Ls!==null){for(e=0;e<Ls.length;e++)if(n=Ls[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ls=null}return t}function Qb(t,e){do{var n=Yt;try{if(Em(),yu.current=Ju,Ku){for(var r=Rt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ku=!1}if(Ys=0,tn=Kt=Rt=null,ll=!1,Ml=0,Nm.current=null,n===null||n.return===null){Jt=1,zl=e,Yt=null;break}e:{var s=t,o=n.return,a=n,c=e;if(e=cn,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=a,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=l0(o);if(g!==null){g.flags&=-257,c0(g,o,a,s,e),g.mode&1&&a0(s,u,e),e=g,c=u;var y=e.updateQueue;if(y===null){var _=new Set;_.add(c),e.updateQueue=_}else y.add(c);break e}else{if(!(e&1)){a0(s,u,e),$m();break e}c=Error(Ce(426))}}else if(Pt&&a.mode&1){var b=l0(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),c0(b,o,a,s,e),Sm(ea(c,a));break e}}s=c=ea(c,a),Jt!==4&&(Jt=2),ul===null?ul=[s]:ul.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=Ib(s,c,e);t0(s,x);break e;case 1:a=c;var w=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ki===null||!Ki.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=zb(s,a,e);t0(s,C);break e}}s=s.return}while(s!==null)}n1(n)}catch(j){e=j,Yt===n&&n!==null&&(Yt=n=n.return);continue}break}while(!0)}function e1(){var t=Xu.current;return Xu.current=Ju,t===null?Ju:t}function $m(){(Jt===0||Jt===3||Jt===2)&&(Jt=4),rn===null||!(qs&268435455)&&!(Ld&268435455)||Li(rn,cn)}function td(t,e){var n=at;at|=2;var r=e1();(rn!==t||cn!==e)&&(si=null,Us(t,e));do try{CC();break}catch(i){Qb(t,i)}while(!0);if(Em(),at=n,Xu.current=r,Yt!==null)throw Error(Ce(261));return rn=null,cn=0,Jt}function CC(){for(;Yt!==null;)t1(Yt)}function TC(){for(;Yt!==null&&!Xk();)t1(Yt)}function t1(t){var e=i1(t.alternate,t,qn);t.memoizedProps=t.pendingProps,e===null?n1(t):Yt=e,Nm.current=null}function n1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=xC(n,e),n!==null){n.flags&=32767,Yt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Jt=6,Yt=null;return}}else if(n=vC(n,e,qn),n!==null){Yt=n;return}if(e=e.sibling,e!==null){Yt=e;return}Yt=e=t}while(e!==null);Jt===0&&(Jt=5)}function Cs(t,e,n){var r=mt,i=fr.transition;try{fr.transition=null,mt=1,jC(t,e,n,r)}finally{fr.transition=i,mt=r}return null}function jC(t,e,n,r){do Vo();while(Ni!==null);if(at&6)throw Error(Ce(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ce(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(lE(t,s),t===rn&&(Yt=rn=null,cn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ic||(Ic=!0,s1(Iu,function(){return Vo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=fr.transition,fr.transition=null;var o=mt;mt=1;var a=at;at|=4,Nm.current=null,wC(t,n),Kb(n,t),qE(Xf),Nu=!!Jf,Xf=Jf=null,t.current=n,SC(n),Qk(),at=a,mt=o,fr.transition=s}else t.current=n;if(Ic&&(Ic=!1,Ni=t,ed=i),s=t.pendingLanes,s===0&&(Ki=null),nE(n.stateNode),$n(t,Ft()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Qu)throw Qu=!1,t=_p,_p=null,t;return ed&1&&t.tag!==0&&Vo(),s=t.pendingLanes,s&1?t===vp?dl++:(dl=0,vp=t):dl=0,ss(),null}function Vo(){if(Ni!==null){var t=Ix(ed),e=fr.transition,n=mt;try{if(fr.transition=null,mt=16>t?16:t,Ni===null)var r=!1;else{if(t=Ni,Ni=null,ed=0,at&6)throw Error(Ce(331));var i=at;for(at|=4,Ie=t.current;Ie!==null;){var s=Ie,o=s.child;if(Ie.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(Ie=u;Ie!==null;){var h=Ie;switch(h.tag){case 0:case 11:case 15:cl(8,h,s)}var p=h.child;if(p!==null)p.return=h,Ie=p;else for(;Ie!==null;){h=Ie;var m=h.sibling,g=h.return;if(Yb(h),h===u){Ie=null;break}if(m!==null){m.return=g,Ie=m;break}Ie=g}}}var y=s.alternate;if(y!==null){var _=y.child;if(_!==null){y.child=null;do{var b=_.sibling;_.sibling=null,_=b}while(_!==null)}}Ie=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ie=o;else e:for(;Ie!==null;){if(s=Ie,s.flags&2048)switch(s.tag){case 0:case 11:case 15:cl(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,Ie=x;break e}Ie=s.return}}var w=t.current;for(Ie=w;Ie!==null;){o=Ie;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,Ie=S;else e:for(o=w;Ie!==null;){if(a=Ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Md(9,a)}}catch(j){It(a,a.return,j)}if(a===o){Ie=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,Ie=C;break e}Ie=a.return}}if(at=i,ss(),Zr&&typeof Zr.onPostCommitFiberRoot=="function")try{Zr.onPostCommitFiberRoot(Cd,t)}catch{}r=!0}return r}finally{mt=n,fr.transition=e}}return!1}function w0(t,e,n){e=ea(n,e),e=Ib(t,e,1),t=Gi(t,e,1),e=jn(),t!==null&&(Ql(t,1,e),$n(t,e))}function It(t,e,n){if(t.tag===3)w0(t,t,n);else for(;e!==null;){if(e.tag===3){w0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ki===null||!Ki.has(r))){t=ea(n,t),t=zb(e,t,1),e=Gi(e,t,1),t=jn(),e!==null&&(Ql(e,1,t),$n(e,t));break}}e=e.return}}function PC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=jn(),t.pingedLanes|=t.suspendedLanes&n,rn===t&&(cn&n)===n&&(Jt===4||Jt===3&&(cn&130023424)===cn&&500>Ft()-Bm?Us(t,0):Fm|=n),$n(t,e)}function r1(t,e){e===0&&(t.mode&1?(e=Cc,Cc<<=1,!(Cc&130023424)&&(Cc=4194304)):e=1);var n=jn();t=yi(t,e),t!==null&&(Ql(t,e,n),$n(t,n))}function AC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),r1(t,n)}function OC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ce(314))}r!==null&&r.delete(e),r1(t,n)}var i1;i1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Un.current)Bn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Bn=!1,_C(t,e,n);Bn=!!(t.flags&131072)}else Bn=!1,Pt&&e.flags&1048576&&lb(e,Vu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;vu(t,e),t=e.pendingProps;var i=Ko(e,bn.current);Ho(e,n),i=Rm(null,e,r,t,i,n);var s=Mm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Wn(r)?(s=!0,$u(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,jm(e),i.updater=Rd,e.stateNode=i,i._reactInternals=e,ap(e,r,t,n),e=up(null,e,r,!0,s,n)):(e.tag=0,Pt&&s&&bm(e),Cn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(vu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=RC(r),t=Er(r,t),i){case 0:e=cp(null,e,r,t,n);break e;case 1:e=h0(null,e,r,t,n);break e;case 11:e=u0(null,e,r,t,n);break e;case 14:e=d0(null,e,r,Er(r.type,t),n);break e}throw Error(Ce(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Er(r,i),cp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Er(r,i),h0(t,e,r,i,n);case 3:e:{if(Ub(e),t===null)throw Error(Ce(387));r=e.pendingProps,s=e.memoizedState,i=s.element,pb(t,e),qu(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ea(Error(Ce(423)),e),e=f0(t,e,r,n,i);break e}else if(r!==i){i=ea(Error(Ce(424)),e),e=f0(t,e,r,n,i);break e}else for(Qn=qi(e.stateNode.containerInfo.firstChild),er=e,Pt=!0,Ar=null,n=hb(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Jo(),r===i){e=_i(t,e,n);break e}Cn(t,e,r,n)}e=e.child}return e;case 5:return mb(e),t===null&&ip(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Qf(r,i)?o=null:s!==null&&Qf(r,s)&&(e.flags|=32),Bb(t,e),Cn(t,e,o,n),e.child;case 6:return t===null&&ip(e),null;case 13:return Wb(t,e,n);case 4:return Pm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Xo(e,null,r,n):Cn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Er(r,i),u0(t,e,r,i,n);case 7:return Cn(t,e,e.pendingProps,n),e.child;case 8:return Cn(t,e,e.pendingProps.children,n),e.child;case 12:return Cn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,xt(Zu,r._currentValue),r._currentValue=o,s!==null)if(Rr(s.value,o)){if(s.children===i.children&&!Un.current){e=_i(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=fi(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),sp(s.return,n,e),a.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ce(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),sp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Cn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ho(e,n),i=pr(i),r=r(i),e.flags|=1,Cn(t,e,r,n),e.child;case 14:return r=e.type,i=Er(r,e.pendingProps),i=Er(r.type,i),d0(t,e,r,i,n);case 15:return Nb(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Er(r,i),vu(t,e),e.tag=1,Wn(r)?(t=!0,$u(e)):t=!1,Ho(e,n),Lb(e,r,i),ap(e,r,i,n),up(null,e,r,!0,t,n);case 19:return $b(t,e,n);case 22:return Fb(t,e,n)}throw Error(Ce(156,e.tag))};function s1(t,e){return Dx(t,e)}function DC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dr(t,e,n,r){return new DC(t,e,n,r)}function Hm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function RC(t){if(typeof t=="function")return Hm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===cm)return 11;if(t===um)return 14}return 2}function Xi(t,e){var n=t.alternate;return n===null?(n=dr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function wu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Hm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case To:return Ws(n.children,i,s,e);case lm:o=8,i|=8;break;case Of:return t=dr(12,n,e,i|2),t.elementType=Of,t.lanes=s,t;case Df:return t=dr(13,n,e,i),t.elementType=Df,t.lanes=s,t;case Rf:return t=dr(19,n,e,i),t.elementType=Rf,t.lanes=s,t;case mx:return Id(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case fx:o=10;break e;case px:o=9;break e;case cm:o=11;break e;case um:o=14;break e;case Di:o=16,r=null;break e}throw Error(Ce(130,t==null?t:typeof t,""))}return e=dr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ws(t,e,n,r){return t=dr(7,t,r,e),t.lanes=n,t}function Id(t,e,n,r){return t=dr(22,t,r,e),t.elementType=mx,t.lanes=n,t.stateNode={isHidden:!1},t}function Jh(t,e,n){return t=dr(6,t,null,e),t.lanes=n,t}function Xh(t,e,n){return e=dr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function MC(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dh(0),this.expirationTimes=Dh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vm(t,e,n,r,i,s,o,a,c){return t=new MC(t,e,n,a,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=dr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jm(s),t}function LC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Co,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function o1(t){if(!t)return ts;t=t._reactInternals;e:{if(eo(t)!==t||t.tag!==1)throw Error(Ce(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Wn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ce(171))}if(t.tag===1){var n=t.type;if(Wn(n))return ob(t,n,e)}return e}function a1(t,e,n,r,i,s,o,a,c){return t=Vm(n,r,!0,t,i,s,o,a,c),t.context=o1(null),n=t.current,r=jn(),i=Ji(n),s=fi(r,i),s.callback=e??null,Gi(n,s,i),t.current.lanes=i,Ql(t,i,r),$n(t,r),t}function zd(t,e,n,r){var i=e.current,s=jn(),o=Ji(i);return n=o1(n),e.context===null?e.context=n:e.pendingContext=n,e=fi(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Gi(i,e,o),t!==null&&(Dr(t,i,o,s),gu(t,i,o)),o}function nd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function S0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Zm(t,e){S0(t,e),(t=t.alternate)&&S0(t,e)}function IC(){return null}var l1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ym(t){this._internalRoot=t}Nd.prototype.render=Ym.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ce(409));zd(t,e,null,null)};Nd.prototype.unmount=Ym.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Gs(function(){zd(null,t,null,null)}),e[gi]=null}};function Nd(t){this._internalRoot=t}Nd.prototype.unstable_scheduleHydration=function(t){if(t){var e=Fx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Mi.length&&e!==0&&e<Mi[n].priority;n++);Mi.splice(n,0,t),n===0&&Ux(t)}};function qm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function k0(){}function zC(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=nd(o);s.call(u)}}var o=a1(e,r,t,0,null,!1,!1,"",k0);return t._reactRootContainer=o,t[gi]=o.current,Pl(t.nodeType===8?t.parentNode:t),Gs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=nd(c);a.call(u)}}var c=Vm(t,0,!1,null,null,!1,!1,"",k0);return t._reactRootContainer=c,t[gi]=c.current,Pl(t.nodeType===8?t.parentNode:t),Gs(function(){zd(e,c,n,r)}),c}function Bd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=nd(o);a.call(c)}}zd(e,o,t,i)}else o=zC(n,e,t,i,r);return nd(o)}zx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ya(e.pendingLanes);n!==0&&(fm(e,n|1),$n(e,Ft()),!(at&6)&&(ta=Ft()+500,ss()))}break;case 13:Gs(function(){var r=yi(t,1);if(r!==null){var i=jn();Dr(r,t,1,i)}}),Zm(t,1)}};pm=function(t){if(t.tag===13){var e=yi(t,134217728);if(e!==null){var n=jn();Dr(e,t,134217728,n)}Zm(t,134217728)}};Nx=function(t){if(t.tag===13){var e=Ji(t),n=yi(t,e);if(n!==null){var r=jn();Dr(n,t,e,r)}Zm(t,e)}};Fx=function(){return mt};Bx=function(t,e){var n=mt;try{return mt=t,e()}finally{mt=n}};$f=function(t,e,n){switch(e){case"input":if(If(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ad(r);if(!i)throw Error(Ce(90));yx(r),If(r,i)}}}break;case"textarea":vx(t,n);break;case"select":e=n.value,e!=null&&Bo(t,!!n.multiple,e,!1)}};Cx=Um;Tx=Gs;var NC={usingClientEntryPoint:!1,Events:[tc,Oo,Ad,kx,Ex,Um]},Ma={findFiberByHostInstance:Ms,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FC={bundleType:Ma.bundleType,version:Ma.version,rendererPackageName:Ma.rendererPackageName,rendererConfig:Ma.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ax(t),t===null?null:t.stateNode},findFiberByHostInstance:Ma.findFiberByHostInstance||IC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zc.isDisabled&&zc.supportsFiber)try{Cd=zc.inject(FC),Zr=zc}catch{}}nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NC;nr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qm(e))throw Error(Ce(200));return LC(t,e,null,n)};nr.createRoot=function(t,e){if(!qm(t))throw Error(Ce(299));var n=!1,r="",i=l1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Vm(t,1,!1,null,null,n,!1,r,i),t[gi]=e.current,Pl(t.nodeType===8?t.parentNode:t),new Ym(e)};nr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ce(188)):(t=Object.keys(t).join(","),Error(Ce(268,t)));return t=Ax(e),t=t===null?null:t.stateNode,t};nr.flushSync=function(t){return Gs(t)};nr.hydrate=function(t,e,n){if(!Fd(e))throw Error(Ce(200));return Bd(null,t,e,!0,n)};nr.hydrateRoot=function(t,e,n){if(!qm(t))throw Error(Ce(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=l1;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=a1(e,null,t,1,n??null,i,!1,s,o),t[gi]=e.current,Pl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Nd(e)};nr.render=function(t,e,n){if(!Fd(e))throw Error(Ce(200));return Bd(null,t,e,!1,n)};nr.unmountComponentAtNode=function(t){if(!Fd(t))throw Error(Ce(40));return t._reactRootContainer?(Gs(function(){Bd(null,null,t,!1,function(){t._reactRootContainer=null,t[gi]=null})}),!0):!1};nr.unstable_batchedUpdates=Um;nr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Fd(n))throw Error(Ce(200));if(t==null||t._reactInternals===void 0)throw Error(Ce(38));return Bd(t,e,n,!1,r)};nr.version="18.3.1-next-f1338f8080-20240426";function c1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c1)}catch(t){console.error(t)}}c1(),cx.exports=nr;var Ud=cx.exports;const BC=em(Ud),UC=Qp({__proto__:null,default:BC},[Ud]);var E0=Ud;Pf.createRoot=E0.createRoot,Pf.hydrateRoot=E0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jt(){return jt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jt.apply(this,arguments)}var Ht;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ht||(Ht={}));const C0="popstate";function WC(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Nl("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Ks(i)}return HC(e,n,null,t)}function nt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function na(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $C(){return Math.random().toString(36).substr(2,8)}function T0(t,e){return{usr:t.state,key:t.key,idx:e}}function Nl(t,e,n,r){return n===void 0&&(n=null),jt({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?os(e):e,{state:n,key:e&&e.key||r||$C()})}function Ks(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function os(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function HC(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Ht.Pop,c=null,u=h();u==null&&(u=0,o.replaceState(jt({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function p(){a=Ht.Pop;let b=h(),x=b==null?null:b-u;u=b,c&&c({action:a,location:_.location,delta:x})}function m(b,x){a=Ht.Push;let w=Nl(_.location,b,x);u=h()+1;let S=T0(w,u),C=_.createHref(w);try{o.pushState(S,"",C)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;i.location.assign(C)}s&&c&&c({action:a,location:_.location,delta:1})}function g(b,x){a=Ht.Replace;let w=Nl(_.location,b,x);u=h();let S=T0(w,u),C=_.createHref(w);o.replaceState(S,"",C),s&&c&&c({action:a,location:_.location,delta:0})}function y(b){let x=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof b=="string"?b:Ks(b);return w=w.replace(/ $/,"%20"),nt(x,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,x)}let _={get action(){return a},get location(){return t(i,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(C0,p),c=b,()=>{i.removeEventListener(C0,p),c=null}},createHref(b){return e(i,b)},createURL:y,encodeLocation(b){let x=y(b);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:g,go(b){return o.go(b)}};return _}var ht;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ht||(ht={}));const VC=new Set(["lazy","caseSensitive","path","id","index","children"]);function ZC(t){return t.index===!0}function rd(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,String(s)],a=typeof i.id=="string"?i.id:o.join("-");if(nt(i.index!==!0||!i.children,"Cannot specify children on an index route"),nt(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),ZC(i)){let c=jt({},i,e(i),{id:a});return r[a]=c,c}else{let c=jt({},i,e(i),{id:a,children:void 0});return r[a]=c,i.children&&(c.children=rd(i.children,e,o,r)),c}})}function As(t,e,n){return n===void 0&&(n="/"),Su(t,e,n,!1)}function Su(t,e,n,r){let i=typeof e=="string"?os(e):e,s=ua(i.pathname||"/",n);if(s==null)return null;let o=u1(t);qC(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let u=sT(s);a=rT(o[c],u,r)}return a}function YC(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function u1(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let c={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(nt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=pi([r,c.relativePath]),h=n.concat(c);s.children&&s.children.length>0&&(nt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),u1(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:tT(u,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let c of d1(s.path))i(s,o,c)}),e}function d1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=d1(r.join("/")),a=[];return a.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function qC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:nT(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const GC=/^:[\w-]+$/,KC=3,JC=2,XC=1,QC=10,eT=-2,j0=t=>t==="*";function tT(t,e){let n=t.split("/"),r=n.length;return n.some(j0)&&(r+=eT),e&&(r+=JC),n.filter(i=>!j0(i)).reduce((i,s)=>i+(GC.test(s)?KC:s===""?XC:QC),r)}function nT(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function rT(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],u=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",p=P0({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),m=c.route;if(!p&&u&&n&&!r[r.length-1].route.index&&(p=P0({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:pi([s,p.pathname]),pathnameBase:lT(pi([s,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(s=pi([s,p.pathnameBase]))}return o}function P0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=iT(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,h,p)=>{let{paramName:m,isOptional:g}=h;if(m==="*"){let _=a[p]||"";o=s.slice(0,s.length-_.length).replace(/(.)\/+$/,"$1")}const y=a[p];return g&&!y?u[m]=void 0:u[m]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function iT(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),na(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function sT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return na(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ua(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function oT(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?os(t):t;return{pathname:n?n.startsWith("/")?n:aT(n,e):e,search:cT(r),hash:uT(i)}}function aT(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Qh(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function h1(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Wd(t,e){let n=h1(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function $d(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=os(t):(i=jt({},t),nt(!i.pathname||!i.pathname.includes("?"),Qh("?","pathname","search",i)),nt(!i.pathname||!i.pathname.includes("#"),Qh("#","pathname","hash",i)),nt(!i.search||!i.search.includes("#"),Qh("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}a=p>=0?e[p]:"/"}let c=oT(i,a),u=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const pi=t=>t.join("/").replace(/\/\/+/g,"/"),lT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),cT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,uT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class id{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Fl(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const f1=["post","put","patch","delete"],dT=new Set(f1),hT=["get",...f1],fT=new Set(hT),pT=new Set([301,302,303,307,308]),mT=new Set([307,308]),ef={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},gT={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},La={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Gm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yT=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),p1="remix-router-transitions";function _T(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;nt(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let Q=t.detectErrorBoundary;i=ie=>({hasErrorBoundary:Q(ie)})}else i=yT;let s={},o=rd(t.routes,i,void 0,s),a,c=t.basename||"/",u=t.dataStrategy||wT,h=t.patchRoutesOnNavigation,p=jt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),m=null,g=new Set,y=null,_=null,b=null,x=t.hydrationData!=null,w=As(o,t.history.location,c),S=!1,C=null;if(w==null&&!h){let Q=In(404,{pathname:t.history.location.pathname}),{matches:ie,route:pe}=B0(o);w=ie,C={[pe.id]:Q}}w&&!t.hydrationData&&hn(w,o,t.history.location.pathname).active&&(w=null);let j;if(w)if(w.some(Q=>Q.route.lazy))j=!1;else if(!w.some(Q=>Q.route.loader))j=!0;else if(p.v7_partialHydration){let Q=t.hydrationData?t.hydrationData.loaderData:null,ie=t.hydrationData?t.hydrationData.errors:null;if(ie){let pe=w.findIndex(W=>ie[W.route.id]!==void 0);j=w.slice(0,pe+1).every(W=>!Sp(W.route,Q,ie))}else j=w.every(pe=>!Sp(pe.route,Q,ie))}else j=t.hydrationData!=null;else if(j=!1,w=[],p.v7_partialHydration){let Q=hn(null,o,t.history.location.pathname);Q.active&&Q.matches&&(S=!0,w=Q.matches)}let D,P={historyAction:t.history.action,location:t.history.location,matches:w,initialized:j,navigation:ef,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||C,fetchers:new Map,blockers:new Map},T=Ht.Pop,A=!1,F,V=!1,R=new Map,B=null,E=!1,Z=!1,$=[],I=new Set,z=new Map,N=0,H=-1,K=new Map,Y=new Set,ce=new Map,ne=new Map,X=new Set,_e=new Map,Te=new Map,Pe;function le(){if(m=t.history.listen(Q=>{let{action:ie,location:pe,delta:W}=Q;if(Pe){Pe(),Pe=void 0;return}na(Te.size===0||W!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let se=Sn({currentLocation:P.location,nextLocation:pe,historyAction:ie});if(se&&W!=null){let Ee=new Promise(ve=>{Pe=ve});t.history.go(W*-1),dn(se,{state:"blocked",location:pe,proceed(){dn(se,{state:"proceeding",proceed:void 0,reset:void 0,location:pe}),Ee.then(()=>t.history.go(W))},reset(){let ve=new Map(P.blockers);ve.set(se,La),Re({blockers:ve})}});return}return ae(ie,pe)}),n){IT(e,R);let Q=()=>zT(e,R);e.addEventListener("pagehide",Q),B=()=>e.removeEventListener("pagehide",Q)}return P.initialized||ae(Ht.Pop,P.location,{initialHydration:!0}),D}function ke(){m&&m(),B&&B(),g.clear(),F&&F.abort(),P.fetchers.forEach((Q,ie)=>Xe(ie)),P.blockers.forEach((Q,ie)=>On(ie))}function De(Q){return g.add(Q),()=>g.delete(Q)}function Re(Q,ie){ie===void 0&&(ie={}),P=jt({},P,Q);let pe=[],W=[];p.v7_fetcherPersist&&P.fetchers.forEach((se,Ee)=>{se.state==="idle"&&(X.has(Ee)?W.push(Ee):pe.push(Ee))}),X.forEach(se=>{!P.fetchers.has(se)&&!z.has(se)&&W.push(se)}),[...g].forEach(se=>se(P,{deletedFetchers:W,viewTransitionOpts:ie.viewTransitionOpts,flushSync:ie.flushSync===!0})),p.v7_fetcherPersist?(pe.forEach(se=>P.fetchers.delete(se)),W.forEach(se=>Xe(se))):W.forEach(se=>X.delete(se))}function Ge(Q,ie,pe){var W,se;let{flushSync:Ee}=pe===void 0?{}:pe,ve=P.actionData!=null&&P.navigation.formMethod!=null&&jr(P.navigation.formMethod)&&P.navigation.state==="loading"&&((W=Q.state)==null?void 0:W._isRedirect)!==!0,xe;ie.actionData?Object.keys(ie.actionData).length>0?xe=ie.actionData:xe=null:ve?xe=P.actionData:xe=null;let Se=ie.loaderData?N0(P.loaderData,ie.loaderData,ie.matches||[],ie.errors):P.loaderData,je=P.blockers;je.size>0&&(je=new Map(je),je.forEach((Ye,bt)=>je.set(bt,La)));let Oe=A===!0||P.navigation.formMethod!=null&&jr(P.navigation.formMethod)&&((se=Q.state)==null?void 0:se._isRedirect)!==!0;a&&(o=a,a=void 0),E||T===Ht.Pop||(T===Ht.Push?t.history.push(Q,Q.state):T===Ht.Replace&&t.history.replace(Q,Q.state));let Fe;if(T===Ht.Pop){let Ye=R.get(P.location.pathname);Ye&&Ye.has(Q.pathname)?Fe={currentLocation:P.location,nextLocation:Q}:R.has(Q.pathname)&&(Fe={currentLocation:Q,nextLocation:P.location})}else if(V){let Ye=R.get(P.location.pathname);Ye?Ye.add(Q.pathname):(Ye=new Set([Q.pathname]),R.set(P.location.pathname,Ye)),Fe={currentLocation:P.location,nextLocation:Q}}Re(jt({},ie,{actionData:xe,loaderData:Se,historyAction:T,location:Q,initialized:!0,navigation:ef,revalidation:"idle",restoreScrollPosition:Mr(Q,ie.matches||P.matches),preventScrollReset:Oe,blockers:je}),{viewTransitionOpts:Fe,flushSync:Ee===!0}),T=Ht.Pop,A=!1,V=!1,E=!1,Z=!1,$=[]}async function M(Q,ie){if(typeof Q=="number"){t.history.go(Q);return}let pe=wp(P.location,P.matches,c,p.v7_prependBasename,Q,p.v7_relativeSplatPath,ie==null?void 0:ie.fromRouteId,ie==null?void 0:ie.relative),{path:W,submission:se,error:Ee}=A0(p.v7_normalizeFormMethod,!1,pe,ie),ve=P.location,xe=Nl(P.location,W,ie&&ie.state);xe=jt({},xe,t.history.encodeLocation(xe));let Se=ie&&ie.replace!=null?ie.replace:void 0,je=Ht.Push;Se===!0?je=Ht.Replace:Se===!1||se!=null&&jr(se.formMethod)&&se.formAction===P.location.pathname+P.location.search&&(je=Ht.Replace);let Oe=ie&&"preventScrollReset"in ie?ie.preventScrollReset===!0:void 0,Fe=(ie&&ie.flushSync)===!0,Ye=Sn({currentLocation:ve,nextLocation:xe,historyAction:je});if(Ye){dn(Ye,{state:"blocked",location:xe,proceed(){dn(Ye,{state:"proceeding",proceed:void 0,reset:void 0,location:xe}),M(Q,ie)},reset(){let bt=new Map(P.blockers);bt.set(Ye,La),Re({blockers:bt})}});return}return await ae(je,xe,{submission:se,pendingError:Ee,preventScrollReset:Oe,replace:ie&&ie.replace,enableViewTransition:ie&&ie.viewTransition,flushSync:Fe})}function he(){if(Le(),Re({revalidation:"loading"}),P.navigation.state!=="submitting"){if(P.navigation.state==="idle"){ae(P.historyAction,P.location,{startUninterruptedRevalidation:!0});return}ae(T||P.historyAction,P.navigation.location,{overrideNavigation:P.navigation,enableViewTransition:V===!0})}}async function ae(Q,ie,pe){F&&F.abort(),F=null,T=Q,E=(pe&&pe.startUninterruptedRevalidation)===!0,yr(P.location,P.matches),A=(pe&&pe.preventScrollReset)===!0,V=(pe&&pe.enableViewTransition)===!0;let W=a||o,se=pe&&pe.overrideNavigation,Ee=pe!=null&&pe.initialHydration&&P.matches&&P.matches.length>0&&!S?P.matches:As(W,ie,c),ve=(pe&&pe.flushSync)===!0;if(Ee&&P.initialized&&!Z&&jT(P.location,ie)&&!(pe&&pe.submission&&jr(pe.submission.formMethod))){Ge(ie,{matches:Ee},{flushSync:ve});return}let xe=hn(Ee,W,ie.pathname);if(xe.active&&xe.matches&&(Ee=xe.matches),!Ee){let{error:lt,notFoundMatches:st,route:Tt}=Vn(ie.pathname);Ge(ie,{matches:st,loaderData:{},errors:{[Tt.id]:lt}},{flushSync:ve});return}F=new AbortController;let Se=mo(t.history,ie,F.signal,pe&&pe.submission),je;if(pe&&pe.pendingError)je=[Os(Ee).route.id,{type:ht.error,error:pe.pendingError}];else if(pe&&pe.submission&&jr(pe.submission.formMethod)){let lt=await J(Se,ie,pe.submission,Ee,xe.active,{replace:pe.replace,flushSync:ve});if(lt.shortCircuited)return;if(lt.pendingActionResult){let[st,Tt]=lt.pendingActionResult;if(Gn(Tt)&&Fl(Tt.error)&&Tt.error.status===404){F=null,Ge(ie,{matches:lt.matches,loaderData:{},errors:{[st]:Tt.error}});return}}Ee=lt.matches||Ee,je=lt.pendingActionResult,se=tf(ie,pe.submission),ve=!1,xe.active=!1,Se=mo(t.history,Se.url,Se.signal)}let{shortCircuited:Oe,matches:Fe,loaderData:Ye,errors:bt}=await G(Se,ie,Ee,xe.active,se,pe&&pe.submission,pe&&pe.fetcherSubmission,pe&&pe.replace,pe&&pe.initialHydration===!0,ve,je);Oe||(F=null,Ge(ie,jt({matches:Fe||Ee},F0(je),{loaderData:Ye,errors:bt})))}async function J(Q,ie,pe,W,se,Ee){Ee===void 0&&(Ee={}),Le();let ve=MT(ie,pe);if(Re({navigation:ve},{flushSync:Ee.flushSync===!0}),se){let je=await fn(W,ie.pathname,Q.signal);if(je.type==="aborted")return{shortCircuited:!0};if(je.type==="error"){let Oe=Os(je.partialMatches).route.id;return{matches:je.partialMatches,pendingActionResult:[Oe,{type:ht.error,error:je.error}]}}else if(je.matches)W=je.matches;else{let{notFoundMatches:Oe,error:Fe,route:Ye}=Vn(ie.pathname);return{matches:Oe,pendingActionResult:[Ye.id,{type:ht.error,error:Fe}]}}}let xe,Se=Ga(W,ie);if(!Se.route.action&&!Se.route.lazy)xe={type:ht.error,error:In(405,{method:Q.method,pathname:ie.pathname,routeId:Se.route.id})};else if(xe=(await ye("action",P,Q,[Se],W,null))[Se.route.id],Q.signal.aborted)return{shortCircuited:!0};if(zs(xe)){let je;return Ee&&Ee.replace!=null?je=Ee.replace:je=L0(xe.response.headers.get("Location"),new URL(Q.url),c)===P.location.pathname+P.location.search,await fe(Q,xe,!0,{submission:pe,replace:je}),{shortCircuited:!0}}if(Fi(xe))throw In(400,{type:"defer-action"});if(Gn(xe)){let je=Os(W,Se.route.id);return(Ee&&Ee.replace)!==!0&&(T=Ht.Push),{matches:W,pendingActionResult:[je.route.id,xe]}}return{matches:W,pendingActionResult:[Se.route.id,xe]}}async function G(Q,ie,pe,W,se,Ee,ve,xe,Se,je,Oe){let Fe=se||tf(ie,Ee),Ye=Ee||ve||W0(Fe),bt=!E&&(!p.v7_partialHydration||!Se);if(W){if(bt){let wt=re(Oe);Re(jt({navigation:Fe},wt!==void 0?{actionData:wt}:{}),{flushSync:je})}let et=await fn(pe,ie.pathname,Q.signal);if(et.type==="aborted")return{shortCircuited:!0};if(et.type==="error"){let wt=Os(et.partialMatches).route.id;return{matches:et.partialMatches,loaderData:{},errors:{[wt]:et.error}}}else if(et.matches)pe=et.matches;else{let{error:wt,notFoundMatches:Jr,route:_r}=Vn(ie.pathname);return{matches:Jr,loaderData:{},errors:{[_r.id]:wt}}}}let lt=a||o,[st,Tt]=D0(t.history,P,pe,Ye,ie,p.v7_partialHydration&&Se===!0,p.v7_skipActionErrorRevalidation,Z,$,I,X,ce,Y,lt,c,Oe);if(Ct(et=>!(pe&&pe.some(wt=>wt.route.id===et))||st&&st.some(wt=>wt.route.id===et)),H=++N,st.length===0&&Tt.length===0){let et=zt();return Ge(ie,jt({matches:pe,loaderData:{},errors:Oe&&Gn(Oe[1])?{[Oe[0]]:Oe[1].error}:null},F0(Oe),et?{fetchers:new Map(P.fetchers)}:{}),{flushSync:je}),{shortCircuited:!0}}if(bt){let et={};if(!W){et.navigation=Fe;let wt=re(Oe);wt!==void 0&&(et.actionData=wt)}Tt.length>0&&(et.fetchers=de(Tt)),Re(et,{flushSync:je})}Tt.forEach(et=>{He(et.key),et.controller&&z.set(et.key,et.controller)});let Gr=()=>Tt.forEach(et=>He(et.key));F&&F.signal.addEventListener("abort",Gr);let{loaderResults:us,fetcherResults:Rn}=await be(P,pe,st,Tt,Q);if(Q.signal.aborted)return{shortCircuited:!0};F&&F.signal.removeEventListener("abort",Gr),Tt.forEach(et=>z.delete(et.key));let ir=Nc(us);if(ir)return await fe(Q,ir.result,!0,{replace:xe}),{shortCircuited:!0};if(ir=Nc(Rn),ir)return Y.add(ir.key),await fe(Q,ir.result,!0,{replace:xe}),{shortCircuited:!0};let{loaderData:ga,errors:ds}=z0(P,pe,us,Oe,Tt,Rn,_e);_e.forEach((et,wt)=>{et.subscribe(Jr=>{(Jr||et.done)&&_e.delete(wt)})}),p.v7_partialHydration&&Se&&P.errors&&(ds=jt({},P.errors,ds));let Kr=zt(),so=Lt(H),Si=Kr||so||Tt.length>0;return jt({matches:pe,loaderData:ga,errors:ds},Si?{fetchers:new Map(P.fetchers)}:{})}function re(Q){if(Q&&!Gn(Q[1]))return{[Q[0]]:Q[1].data};if(P.actionData)return Object.keys(P.actionData).length===0?null:P.actionData}function de(Q){return Q.forEach(ie=>{let pe=P.fetchers.get(ie.key),W=Ia(void 0,pe?pe.data:void 0);P.fetchers.set(ie.key,W)}),new Map(P.fetchers)}function ge(Q,ie,pe,W){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");He(Q);let se=(W&&W.flushSync)===!0,Ee=a||o,ve=wp(P.location,P.matches,c,p.v7_prependBasename,pe,p.v7_relativeSplatPath,ie,W==null?void 0:W.relative),xe=As(Ee,ve,c),Se=hn(xe,Ee,ve);if(Se.active&&Se.matches&&(xe=Se.matches),!xe){We(Q,ie,In(404,{pathname:ve}),{flushSync:se});return}let{path:je,submission:Oe,error:Fe}=A0(p.v7_normalizeFormMethod,!0,ve,W);if(Fe){We(Q,ie,Fe,{flushSync:se});return}let Ye=Ga(xe,je),bt=(W&&W.preventScrollReset)===!0;if(Oe&&jr(Oe.formMethod)){oe(Q,ie,je,Ye,xe,Se.active,se,bt,Oe);return}ce.set(Q,{routeId:ie,path:je}),ee(Q,ie,je,Ye,xe,Se.active,se,bt,Oe)}async function oe(Q,ie,pe,W,se,Ee,ve,xe,Se){Le(),ce.delete(Q);function je($e){if(!$e.route.action&&!$e.route.lazy){let ct=In(405,{method:Se.formMethod,pathname:pe,routeId:ie});return We(Q,ie,ct,{flushSync:ve}),!0}return!1}if(!Ee&&je(W))return;let Oe=P.fetchers.get(Q);Ae(Q,LT(Se,Oe),{flushSync:ve});let Fe=new AbortController,Ye=mo(t.history,pe,Fe.signal,Se);if(Ee){let $e=await fn(se,new URL(Ye.url).pathname,Ye.signal,Q);if($e.type==="aborted")return;if($e.type==="error"){We(Q,ie,$e.error,{flushSync:ve});return}else if($e.matches){if(se=$e.matches,W=Ga(se,pe),je(W))return}else{We(Q,ie,In(404,{pathname:pe}),{flushSync:ve});return}}z.set(Q,Fe);let bt=N,st=(await ye("action",P,Ye,[W],se,Q))[W.route.id];if(Ye.signal.aborted){z.get(Q)===Fe&&z.delete(Q);return}if(p.v7_fetcherPersist&&X.has(Q)){if(zs(st)||Gn(st)){Ae(Q,Oi(void 0));return}}else{if(zs(st))if(z.delete(Q),H>bt){Ae(Q,Oi(void 0));return}else return Y.add(Q),Ae(Q,Ia(Se)),fe(Ye,st,!1,{fetcherSubmission:Se,preventScrollReset:xe});if(Gn(st)){We(Q,ie,st.error);return}}if(Fi(st))throw In(400,{type:"defer-action"});let Tt=P.navigation.location||P.location,Gr=mo(t.history,Tt,Fe.signal),us=a||o,Rn=P.navigation.state!=="idle"?As(us,P.navigation.location,c):P.matches;nt(Rn,"Didn't find any matches after fetcher action");let ir=++N;K.set(Q,ir);let ga=Ia(Se,st.data);P.fetchers.set(Q,ga);let[ds,Kr]=D0(t.history,P,Rn,Se,Tt,!1,p.v7_skipActionErrorRevalidation,Z,$,I,X,ce,Y,us,c,[W.route.id,st]);Kr.filter($e=>$e.key!==Q).forEach($e=>{let ct=$e.key,hs=P.fetchers.get(ct),ki=Ia(void 0,hs?hs.data:void 0);P.fetchers.set(ct,ki),He(ct),$e.controller&&z.set(ct,$e.controller)}),Re({fetchers:new Map(P.fetchers)});let so=()=>Kr.forEach($e=>He($e.key));Fe.signal.addEventListener("abort",so);let{loaderResults:Si,fetcherResults:et}=await be(P,Rn,ds,Kr,Gr);if(Fe.signal.aborted)return;Fe.signal.removeEventListener("abort",so),K.delete(Q),z.delete(Q),Kr.forEach($e=>z.delete($e.key));let wt=Nc(Si);if(wt)return fe(Gr,wt.result,!1,{preventScrollReset:xe});if(wt=Nc(et),wt)return Y.add(wt.key),fe(Gr,wt.result,!1,{preventScrollReset:xe});let{loaderData:Jr,errors:_r}=z0(P,Rn,Si,void 0,Kr,et,_e);if(P.fetchers.has(Q)){let $e=Oi(st.data);P.fetchers.set(Q,$e)}Lt(ir),P.navigation.state==="loading"&&ir>H?(nt(T,"Expected pending action"),F&&F.abort(),Ge(P.navigation.location,{matches:Rn,loaderData:Jr,errors:_r,fetchers:new Map(P.fetchers)})):(Re({errors:_r,loaderData:N0(P.loaderData,Jr,Rn,_r),fetchers:new Map(P.fetchers)}),Z=!1)}async function ee(Q,ie,pe,W,se,Ee,ve,xe,Se){let je=P.fetchers.get(Q);Ae(Q,Ia(Se,je?je.data:void 0),{flushSync:ve});let Oe=new AbortController,Fe=mo(t.history,pe,Oe.signal);if(Ee){let st=await fn(se,new URL(Fe.url).pathname,Fe.signal,Q);if(st.type==="aborted")return;if(st.type==="error"){We(Q,ie,st.error,{flushSync:ve});return}else if(st.matches)se=st.matches,W=Ga(se,pe);else{We(Q,ie,In(404,{pathname:pe}),{flushSync:ve});return}}z.set(Q,Oe);let Ye=N,lt=(await ye("loader",P,Fe,[W],se,Q))[W.route.id];if(Fi(lt)&&(lt=await Km(lt,Fe.signal,!0)||lt),z.get(Q)===Oe&&z.delete(Q),!Fe.signal.aborted){if(X.has(Q)){Ae(Q,Oi(void 0));return}if(zs(lt))if(H>Ye){Ae(Q,Oi(void 0));return}else{Y.add(Q),await fe(Fe,lt,!1,{preventScrollReset:xe});return}if(Gn(lt)){We(Q,ie,lt.error);return}nt(!Fi(lt),"Unhandled fetcher deferred data"),Ae(Q,Oi(lt.data))}}async function fe(Q,ie,pe,W){let{submission:se,fetcherSubmission:Ee,preventScrollReset:ve,replace:xe}=W===void 0?{}:W;ie.response.headers.has("X-Remix-Revalidate")&&(Z=!0);let Se=ie.response.headers.get("Location");nt(Se,"Expected a Location header on the redirect Response"),Se=L0(Se,new URL(Q.url),c);let je=Nl(P.location,Se,{_isRedirect:!0});if(n){let st=!1;if(ie.response.headers.has("X-Remix-Reload-Document"))st=!0;else if(Gm.test(Se)){const Tt=t.history.createURL(Se);st=Tt.origin!==e.location.origin||ua(Tt.pathname,c)==null}if(st){xe?e.location.replace(Se):e.location.assign(Se);return}}F=null;let Oe=xe===!0||ie.response.headers.has("X-Remix-Replace")?Ht.Replace:Ht.Push,{formMethod:Fe,formAction:Ye,formEncType:bt}=P.navigation;!se&&!Ee&&Fe&&Ye&&bt&&(se=W0(P.navigation));let lt=se||Ee;if(mT.has(ie.response.status)&&lt&&jr(lt.formMethod))await ae(Oe,je,{submission:jt({},lt,{formAction:Se}),preventScrollReset:ve||A,enableViewTransition:pe?V:void 0});else{let st=tf(je,se);await ae(Oe,je,{overrideNavigation:st,fetcherSubmission:Ee,preventScrollReset:ve||A,enableViewTransition:pe?V:void 0})}}async function ye(Q,ie,pe,W,se,Ee){let ve,xe={};try{ve=await ST(u,Q,ie,pe,W,se,Ee,s,i)}catch(Se){return W.forEach(je=>{xe[je.route.id]={type:ht.error,error:Se}}),xe}for(let[Se,je]of Object.entries(ve))if(PT(je)){let Oe=je.result;xe[Se]={type:ht.redirect,response:CT(Oe,pe,Se,se,c,p.v7_relativeSplatPath)}}else xe[Se]=await ET(je);return xe}async function be(Q,ie,pe,W,se){let Ee=Q.matches,ve=ye("loader",Q,se,pe,ie,null),xe=Promise.all(W.map(async Oe=>{if(Oe.matches&&Oe.match&&Oe.controller){let Ye=(await ye("loader",Q,mo(t.history,Oe.path,Oe.controller.signal),[Oe.match],Oe.matches,Oe.key))[Oe.match.route.id];return{[Oe.key]:Ye}}else return Promise.resolve({[Oe.key]:{type:ht.error,error:In(404,{pathname:Oe.path})}})})),Se=await ve,je=(await xe).reduce((Oe,Fe)=>Object.assign(Oe,Fe),{});return await Promise.all([DT(ie,Se,se.signal,Ee,Q.loaderData),RT(ie,je,W)]),{loaderResults:Se,fetcherResults:je}}function Le(){Z=!0,$.push(...Ct()),ce.forEach((Q,ie)=>{z.has(ie)&&I.add(ie),He(ie)})}function Ae(Q,ie,pe){pe===void 0&&(pe={}),P.fetchers.set(Q,ie),Re({fetchers:new Map(P.fetchers)},{flushSync:(pe&&pe.flushSync)===!0})}function We(Q,ie,pe,W){W===void 0&&(W={});let se=Os(P.matches,ie);Xe(Q),Re({errors:{[se.route.id]:pe},fetchers:new Map(P.fetchers)},{flushSync:(W&&W.flushSync)===!0})}function Qe(Q){return ne.set(Q,(ne.get(Q)||0)+1),X.has(Q)&&X.delete(Q),P.fetchers.get(Q)||gT}function Xe(Q){let ie=P.fetchers.get(Q);z.has(Q)&&!(ie&&ie.state==="loading"&&K.has(Q))&&He(Q),ce.delete(Q),K.delete(Q),Y.delete(Q),p.v7_fetcherPersist&&X.delete(Q),I.delete(Q),P.fetchers.delete(Q)}function gt(Q){let ie=(ne.get(Q)||0)-1;ie<=0?(ne.delete(Q),X.add(Q),p.v7_fetcherPersist||Xe(Q)):ne.set(Q,ie),Re({fetchers:new Map(P.fetchers)})}function He(Q){let ie=z.get(Q);ie&&(ie.abort(),z.delete(Q))}function yt(Q){for(let ie of Q){let pe=Qe(ie),W=Oi(pe.data);P.fetchers.set(ie,W)}}function zt(){let Q=[],ie=!1;for(let pe of Y){let W=P.fetchers.get(pe);nt(W,"Expected fetcher: "+pe),W.state==="loading"&&(Y.delete(pe),Q.push(pe),ie=!0)}return yt(Q),ie}function Lt(Q){let ie=[];for(let[pe,W]of K)if(W<Q){let se=P.fetchers.get(pe);nt(se,"Expected fetcher: "+pe),se.state==="loading"&&(He(pe),K.delete(pe),ie.push(pe))}return yt(ie),ie.length>0}function sn(Q,ie){let pe=P.blockers.get(Q)||La;return Te.get(Q)!==ie&&Te.set(Q,ie),pe}function On(Q){P.blockers.delete(Q),Te.delete(Q)}function dn(Q,ie){let pe=P.blockers.get(Q)||La;nt(pe.state==="unblocked"&&ie.state==="blocked"||pe.state==="blocked"&&ie.state==="blocked"||pe.state==="blocked"&&ie.state==="proceeding"||pe.state==="blocked"&&ie.state==="unblocked"||pe.state==="proceeding"&&ie.state==="unblocked","Invalid blocker state transition: "+pe.state+" -> "+ie.state);let W=new Map(P.blockers);W.set(Q,ie),Re({blockers:W})}function Sn(Q){let{currentLocation:ie,nextLocation:pe,historyAction:W}=Q;if(Te.size===0)return;Te.size>1&&na(!1,"A router only supports one blocker at a time");let se=Array.from(Te.entries()),[Ee,ve]=se[se.length-1],xe=P.blockers.get(Ee);if(!(xe&&xe.state==="proceeding")&&ve({currentLocation:ie,nextLocation:pe,historyAction:W}))return Ee}function Vn(Q){let ie=In(404,{pathname:Q}),pe=a||o,{matches:W,route:se}=B0(pe);return Ct(),{notFoundMatches:W,route:se,error:ie}}function Ct(Q){let ie=[];return _e.forEach((pe,W)=>{(!Q||Q(W))&&(pe.cancel(),ie.push(W),_e.delete(W))}),ie}function Ut(Q,ie,pe){if(y=Q,b=ie,_=pe||null,!x&&P.navigation===ef){x=!0;let W=Mr(P.location,P.matches);W!=null&&Re({restoreScrollPosition:W})}return()=>{y=null,b=null,_=null}}function Zn(Q,ie){return _&&_(Q,ie.map(W=>YC(W,P.loaderData)))||Q.key}function yr(Q,ie){if(y&&b){let pe=Zn(Q,ie);y[pe]=b()}}function Mr(Q,ie){if(y){let pe=Zn(Q,ie),W=y[pe];if(typeof W=="number")return W}return null}function hn(Q,ie,pe){if(h)if(Q){if(Object.keys(Q[0].params).length>0)return{active:!0,matches:Su(ie,pe,c,!0)}}else return{active:!0,matches:Su(ie,pe,c,!0)||[]};return{active:!1,matches:null}}async function fn(Q,ie,pe,W){if(!h)return{type:"success",matches:Q};let se=Q;for(;;){let Ee=a==null,ve=a||o,xe=s;try{await h({signal:pe,path:ie,matches:se,fetcherKey:W,patch:(Oe,Fe)=>{pe.aborted||M0(Oe,Fe,ve,xe,i)}})}catch(Oe){return{type:"error",error:Oe,partialMatches:se}}finally{Ee&&!pe.aborted&&(o=[...o])}if(pe.aborted)return{type:"aborted"};let Se=As(ve,ie,c);if(Se)return{type:"success",matches:Se};let je=Su(ve,ie,c,!0);if(!je||se.length===je.length&&se.every((Oe,Fe)=>Oe.route.id===je[Fe].route.id))return{type:"success",matches:null};se=je}}function on(Q){s={},a=rd(Q,i,void 0,s)}function Dn(Q,ie){let pe=a==null;M0(Q,ie,a||o,s,i),pe&&(o=[...o],Re({}))}return D={get basename(){return c},get future(){return p},get state(){return P},get routes(){return o},get window(){return e},initialize:le,subscribe:De,enableScrollRestoration:Ut,navigate:M,fetch:ge,revalidate:he,createHref:Q=>t.history.createHref(Q),encodeLocation:Q=>t.history.encodeLocation(Q),getFetcher:Qe,deleteFetcher:gt,dispose:ke,getBlocker:sn,deleteBlocker:On,patchRoutes:Dn,_internalFetchControllers:z,_internalActiveDeferreds:_e,_internalSetRoutes:on},D}function vT(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function wp(t,e,n,r,i,s,o,a){let c,u;if(o){c=[];for(let p of e)if(c.push(p),p.route.id===o){u=p;break}}else c=e,u=e[e.length-1];let h=$d(i||".",Wd(c,s),ua(t.pathname,n)||t.pathname,a==="path");if(i==null&&(h.search=t.search,h.hash=t.hash),(i==null||i===""||i===".")&&u){let p=Jm(h.search);if(u.route.index&&!p)h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index";else if(!u.route.index&&p){let m=new URLSearchParams(h.search),g=m.getAll("index");m.delete("index"),g.filter(_=>_).forEach(_=>m.append("index",_));let y=m.toString();h.search=y?"?"+y:""}}return r&&n!=="/"&&(h.pathname=h.pathname==="/"?n:pi([n,h.pathname])),Ks(h)}function A0(t,e,n,r){if(!r||!vT(r))return{path:n};if(r.formMethod&&!OT(r.formMethod))return{path:n,error:In(405,{method:r.formMethod})};let i=()=>({path:n,error:In(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=y1(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!jr(o))return i();let m=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((g,y)=>{let[_,b]=y;return""+g+_+"="+b+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:m}}}else if(r.formEncType==="application/json"){if(!jr(o))return i();try{let m=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:m,text:void 0}}}catch{return i()}}}nt(typeof FormData=="function","FormData is not available in this environment");let c,u;if(r.formData)c=kp(r.formData),u=r.formData;else if(r.body instanceof FormData)c=kp(r.body),u=r.body;else if(r.body instanceof URLSearchParams)c=r.body,u=I0(c);else if(r.body==null)c=new URLSearchParams,u=new FormData;else try{c=new URLSearchParams(r.body),u=I0(c)}catch{return i()}let h={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(jr(h.formMethod))return{path:n,submission:h};let p=os(n);return e&&p.search&&Jm(p.search)&&c.append("index",""),p.search="?"+c,{path:Ks(p),submission:h}}function O0(t,e,n){n===void 0&&(n=!1);let r=t.findIndex(i=>i.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function D0(t,e,n,r,i,s,o,a,c,u,h,p,m,g,y,_){let b=_?Gn(_[1])?_[1].error:_[1].data:void 0,x=t.createURL(e.location),w=t.createURL(i),S=n;s&&e.errors?S=O0(n,Object.keys(e.errors)[0],!0):_&&Gn(_[1])&&(S=O0(n,_[0]));let C=_?_[1].statusCode:void 0,j=o&&C&&C>=400,D=S.filter((T,A)=>{let{route:F}=T;if(F.lazy)return!0;if(F.loader==null)return!1;if(s)return Sp(F,e.loaderData,e.errors);if(xT(e.loaderData,e.matches[A],T)||c.some(B=>B===T.route.id))return!0;let V=e.matches[A],R=T;return R0(T,jt({currentUrl:x,currentParams:V.params,nextUrl:w,nextParams:R.params},r,{actionResult:b,actionStatus:C,defaultShouldRevalidate:j?!1:a||x.pathname+x.search===w.pathname+w.search||x.search!==w.search||m1(V,R)}))}),P=[];return p.forEach((T,A)=>{if(s||!n.some(E=>E.route.id===T.routeId)||h.has(A))return;let F=As(g,T.path,y);if(!F){P.push({key:A,routeId:T.routeId,path:T.path,matches:null,match:null,controller:null});return}let V=e.fetchers.get(A),R=Ga(F,T.path),B=!1;m.has(A)?B=!1:u.has(A)?(u.delete(A),B=!0):V&&V.state!=="idle"&&V.data===void 0?B=a:B=R0(R,jt({currentUrl:x,currentParams:e.matches[e.matches.length-1].params,nextUrl:w,nextParams:n[n.length-1].params},r,{actionResult:b,actionStatus:C,defaultShouldRevalidate:j?!1:a})),B&&P.push({key:A,routeId:T.routeId,path:T.path,matches:F,match:R,controller:new AbortController})}),[D,P]}function Sp(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function xT(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function m1(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function R0(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function M0(t,e,n,r,i){var s;let o;if(t){let u=r[t];nt(u,"No route found to patch children into: routeId = "+t),u.children||(u.children=[]),o=u.children}else o=n;let a=e.filter(u=>!o.some(h=>g1(u,h))),c=rd(a,i,[t||"_","patch",String(((s=o)==null?void 0:s.length)||"0")],r);o.push(...c)}function g1(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(s=>g1(n,s))}):!1}async function bT(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];nt(i,"No route found in manifest");let s={};for(let o in r){let c=i[o]!==void 0&&o!=="hasErrorBoundary";na(!c,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!c&&!VC.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,jt({},e(i),{lazy:void 0}))}async function wT(t){let{matches:e}=t,n=e.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,s,o)=>Object.assign(i,{[n[o].route.id]:s}),{})}async function ST(t,e,n,r,i,s,o,a,c,u){let h=s.map(g=>g.route.lazy?bT(g.route,c,a):void 0),p=s.map((g,y)=>{let _=h[y],b=i.some(w=>w.route.id===g.route.id);return jt({},g,{shouldLoad:b,resolve:async w=>(w&&r.method==="GET"&&(g.route.lazy||g.route.loader)&&(b=!0),b?kT(e,r,g,_,w,u):Promise.resolve({type:ht.data,result:void 0}))})}),m=await t({matches:p,request:r,params:s[0].params,fetcherKey:o,context:u});try{await Promise.all(h)}catch{}return m}async function kT(t,e,n,r,i,s){let o,a,c=u=>{let h,p=new Promise((y,_)=>h=_);a=()=>h(),e.signal.addEventListener("abort",a);let m=y=>typeof u!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):u({request:e,params:n.params,context:s},...y!==void 0?[y]:[]),g=(async()=>{try{return{type:"data",result:await(i?i(_=>m(_)):m())}}catch(y){return{type:"error",result:y}}})();return Promise.race([g,p])};try{let u=n.route[t];if(r)if(u){let h,[p]=await Promise.all([c(u).catch(m=>{h=m}),r]);if(h!==void 0)throw h;o=p}else if(await r,u=n.route[t],u)o=await c(u);else if(t==="action"){let h=new URL(e.url),p=h.pathname+h.search;throw In(405,{method:e.method,pathname:p,routeId:n.route.id})}else return{type:ht.data,result:void 0};else if(u)o=await c(u);else{let h=new URL(e.url),p=h.pathname+h.search;throw In(404,{pathname:p})}nt(o.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(u){return{type:ht.error,result:u}}finally{a&&e.signal.removeEventListener("abort",a)}return o}async function ET(t){let{result:e,type:n}=t;if(_1(e)){let p;try{let m=e.headers.get("Content-Type");m&&/\bapplication\/json\b/.test(m)?e.body==null?p=null:p=await e.json():p=await e.text()}catch(m){return{type:ht.error,error:m}}return n===ht.error?{type:ht.error,error:new id(e.status,e.statusText,p),statusCode:e.status,headers:e.headers}:{type:ht.data,data:p,statusCode:e.status,headers:e.headers}}if(n===ht.error){if(U0(e)){var r,i;if(e.data instanceof Error){var s,o;return{type:ht.error,error:e.data,statusCode:(s=e.init)==null?void 0:s.status,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}}return{type:ht.error,error:new id(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:Fl(e)?e.status:void 0,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}}return{type:ht.error,error:e,statusCode:Fl(e)?e.status:void 0}}if(AT(e)){var a,c;return{type:ht.deferred,deferredData:e,statusCode:(a=e.init)==null?void 0:a.status,headers:((c=e.init)==null?void 0:c.headers)&&new Headers(e.init.headers)}}if(U0(e)){var u,h;return{type:ht.data,data:e.data,statusCode:(u=e.init)==null?void 0:u.status,headers:(h=e.init)!=null&&h.headers?new Headers(e.init.headers):void 0}}return{type:ht.data,data:e}}function CT(t,e,n,r,i,s){let o=t.headers.get("Location");if(nt(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!Gm.test(o)){let a=r.slice(0,r.findIndex(c=>c.route.id===n)+1);o=wp(new URL(e.url),a,i,!0,o,s),t.headers.set("Location",o)}return t}function L0(t,e,n){if(Gm.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=ua(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function mo(t,e,n,r){let i=t.createURL(y1(e)).toString(),s={signal:n};if(r&&jr(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=kp(r.formData):s.body=r.formData}return new Request(i,s)}function kp(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function I0(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function TT(t,e,n,r,i){let s={},o=null,a,c=!1,u={},h=n&&Gn(n[1])?n[1].error:void 0;return t.forEach(p=>{if(!(p.route.id in e))return;let m=p.route.id,g=e[m];if(nt(!zs(g),"Cannot handle redirect results in processLoaderData"),Gn(g)){let y=g.error;h!==void 0&&(y=h,h=void 0),o=o||{};{let _=Os(t,m);o[_.route.id]==null&&(o[_.route.id]=y)}s[m]=void 0,c||(c=!0,a=Fl(g.error)?g.error.status:500),g.headers&&(u[m]=g.headers)}else Fi(g)?(r.set(m,g.deferredData),s[m]=g.deferredData.data,g.statusCode!=null&&g.statusCode!==200&&!c&&(a=g.statusCode),g.headers&&(u[m]=g.headers)):(s[m]=g.data,g.statusCode&&g.statusCode!==200&&!c&&(a=g.statusCode),g.headers&&(u[m]=g.headers))}),h!==void 0&&n&&(o={[n[0]]:h},s[n[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:u}}function z0(t,e,n,r,i,s,o){let{loaderData:a,errors:c}=TT(e,n,r,o);return i.forEach(u=>{let{key:h,match:p,controller:m}=u,g=s[h];if(nt(g,"Did not find corresponding fetcher result"),!(m&&m.signal.aborted))if(Gn(g)){let y=Os(t.matches,p==null?void 0:p.route.id);c&&c[y.route.id]||(c=jt({},c,{[y.route.id]:g.error})),t.fetchers.delete(h)}else if(zs(g))nt(!1,"Unhandled fetcher revalidation redirect");else if(Fi(g))nt(!1,"Unhandled fetcher deferred data");else{let y=Oi(g.data);t.fetchers.set(h,y)}}),{loaderData:a,errors:c}}function N0(t,e,n,r){let i=jt({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function F0(t){return t?Gn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Os(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function B0(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function In(t,e){let{pathname:n,routeId:r,method:i,type:s,message:o}=e===void 0?{}:e,a="Unknown Server Error",c="Unknown @remix-run/router error";return t===400?(a="Bad Request",i&&n&&r?c="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?c="defer() is not supported in actions":s==="invalid-body"&&(c="Unable to encode submission body")):t===403?(a="Forbidden",c='Route "'+r+'" does not match URL "'+n+'"'):t===404?(a="Not Found",c='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",i&&n&&r?c="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(c='Invalid request method "'+i.toUpperCase()+'"')),new id(t||500,a,new Error(c),!0)}function Nc(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(zs(i))return{key:r,result:i}}}function y1(t){let e=typeof t=="string"?os(t):t;return Ks(jt({},e,{hash:""}))}function jT(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function PT(t){return _1(t.result)&&pT.has(t.result.status)}function Fi(t){return t.type===ht.deferred}function Gn(t){return t.type===ht.error}function zs(t){return(t&&t.type)===ht.redirect}function U0(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function AT(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function _1(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function OT(t){return fT.has(t.toLowerCase())}function jr(t){return dT.has(t.toLowerCase())}async function DT(t,e,n,r,i){let s=Object.entries(e);for(let o=0;o<s.length;o++){let[a,c]=s[o],u=t.find(m=>(m==null?void 0:m.route.id)===a);if(!u)continue;let h=r.find(m=>m.route.id===u.route.id),p=h!=null&&!m1(h,u)&&(i&&i[u.route.id])!==void 0;Fi(c)&&p&&await Km(c,n,!1).then(m=>{m&&(e[a]=m)})}}async function RT(t,e,n){for(let r=0;r<n.length;r++){let{key:i,routeId:s,controller:o}=n[r],a=e[i];t.find(u=>(u==null?void 0:u.route.id)===s)&&Fi(a)&&(nt(o,"Expected an AbortController for revalidating fetcher deferred result"),await Km(a,o.signal,!0).then(u=>{u&&(e[i]=u)}))}}async function Km(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:ht.data,data:t.deferredData.unwrappedData}}catch(i){return{type:ht.error,error:i}}return{type:ht.data,data:t.deferredData.data}}}function Jm(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function Ga(t,e){let n=typeof e=="string"?os(e).search:e.search;if(t[t.length-1].route.index&&Jm(n||""))return t[t.length-1];let r=h1(t);return r[r.length-1]}function W0(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function tf(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function MT(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Ia(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function LT(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Oi(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function IT(t,e){try{let n=t.sessionStorage.getItem(p1);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function zT(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(p1,JSON.stringify(n))}catch(r){na(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sd(){return sd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sd.apply(this,arguments)}const Hd=q.createContext(null),v1=q.createContext(null),as=q.createContext(null),Xm=q.createContext(null),bi=q.createContext({outlet:null,matches:[],isDataRoute:!1}),x1=q.createContext(null);function NT(t,e){let{relative:n}=e===void 0?{}:e;da()||nt(!1);let{basename:r,navigator:i}=q.useContext(as),{hash:s,pathname:o,search:a}=w1(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:pi([r,o])),i.createHref({pathname:c,search:a,hash:s})}function da(){return q.useContext(Xm)!=null}function to(){return da()||nt(!1),q.useContext(Xm).location}function b1(t){q.useContext(as).static||q.useLayoutEffect(t)}function ls(){let{isDataRoute:t}=q.useContext(bi);return t?JT():FT()}function FT(){da()||nt(!1);let t=q.useContext(Hd),{basename:e,future:n,navigator:r}=q.useContext(as),{matches:i}=q.useContext(bi),{pathname:s}=to(),o=JSON.stringify(Wd(i,n.v7_relativeSplatPath)),a=q.useRef(!1);return b1(()=>{a.current=!0}),q.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let p=$d(u,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:pi([e,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[e,r,o,s,t])}function BT(){let{matches:t}=q.useContext(bi),e=t[t.length-1];return e?e.params:{}}function w1(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=q.useContext(as),{matches:i}=q.useContext(bi),{pathname:s}=to(),o=JSON.stringify(Wd(i,r.v7_relativeSplatPath));return q.useMemo(()=>$d(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function UT(t,e,n,r){da()||nt(!1);let{navigator:i}=q.useContext(as),{matches:s}=q.useContext(bi),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=to(),h;h=u;let p=h.pathname||"/",m=p;if(c!=="/"){let _=c.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(_.length).join("/")}let g=As(t,{pathname:m});return ZT(g&&g.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:pi([c,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:pi([c,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,n,r)}function WT(){let t=KT(),e=Fl(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),n?q.createElement("pre",{style:i},n):null,null)}const $T=q.createElement(WT,null);class HT extends q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?q.createElement(bi.Provider,{value:this.props.routeContext},q.createElement(x1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function VT(t){let{routeContext:e,match:n,children:r}=t,i=q.useContext(Hd);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),q.createElement(bi.Provider,{value:e},r)}function ZT(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);h>=0||nt(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=h),p.route.id){let{loaderData:m,errors:g}=n,y=p.route.loader&&m[p.route.id]===void 0&&(!g||g[p.route.id]===void 0);if(p.route.lazy||y){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,p,m)=>{let g,y=!1,_=null,b=null;n&&(g=a&&p.route.id?a[p.route.id]:void 0,_=p.route.errorElement||$T,c&&(u<0&&m===0?(XT("route-fallback"),y=!0,b=null):u===m&&(y=!0,b=p.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,m+1)),w=()=>{let S;return g?S=_:y?S=b:p.route.Component?S=q.createElement(p.route.Component,null):p.route.element?S=p.route.element:S=h,q.createElement(VT,{match:p,routeContext:{outlet:h,matches:x,isDataRoute:n!=null},children:S})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?q.createElement(HT,{location:n.location,revalidation:n.revalidation,component:_,error:g,children:w(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):w()},null)}var S1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(S1||{}),k1=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(k1||{});function YT(t){let e=q.useContext(Hd);return e||nt(!1),e}function qT(t){let e=q.useContext(v1);return e||nt(!1),e}function GT(t){let e=q.useContext(bi);return e||nt(!1),e}function E1(t){let e=GT(),n=e.matches[e.matches.length-1];return n.route.id||nt(!1),n.route.id}function KT(){var t;let e=q.useContext(x1),n=qT(),r=E1();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function JT(){let{router:t}=YT(S1.UseNavigateStable),e=E1(k1.UseNavigateStable),n=q.useRef(!1);return b1(()=>{n.current=!0}),q.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,sd({fromRouteId:e},s)))},[t,e])}const $0={};function XT(t,e,n){$0[t]||($0[t]=!0)}function QT(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function ej(t){let{to:e,replace:n,state:r,relative:i}=t;da()||nt(!1);let{future:s,static:o}=q.useContext(as),{matches:a}=q.useContext(bi),{pathname:c}=to(),u=ls(),h=$d(e,Wd(a,s.v7_relativeSplatPath),c,i==="path"),p=JSON.stringify(h);return q.useEffect(()=>u(JSON.parse(p),{replace:n,state:r,relative:i}),[u,p,i,n,r]),null}function tj(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Ht.Pop,navigator:s,static:o=!1,future:a}=t;da()&&nt(!1);let c=e.replace(/^\/*/,"/"),u=q.useMemo(()=>({basename:c,navigator:s,static:o,future:sd({v7_relativeSplatPath:!1},a)}),[c,a,s,o]);typeof r=="string"&&(r=os(r));let{pathname:h="/",search:p="",hash:m="",state:g=null,key:y="default"}=r,_=q.useMemo(()=>{let b=ua(h,c);return b==null?null:{location:{pathname:b,search:p,hash:m,state:g,key:y},navigationType:i}},[c,h,p,m,g,y,i]);return _==null?null:q.createElement(as.Provider,{value:u},q.createElement(Xm.Provider,{children:n,value:_}))}new Promise(()=>{});function nj(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:q.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:q.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:q.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bl(){return Bl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bl.apply(this,arguments)}function rj(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function ij(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function sj(t,e){return t.button===0&&(!e||e==="_self")&&!ij(t)}function Ep(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function oj(t,e){let n=Ep(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}const aj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],lj="6";try{window.__reactRouterVersion=lj}catch{}function cj(t,e){return _T({basename:e==null?void 0:e.basename,future:Bl({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:WC({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||uj(),routes:t,mapRouteProperties:nj,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function uj(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Bl({},e,{errors:dj(e.errors)})),e}function dj(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new id(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const hj=q.createContext({isTransitioning:!1}),fj=q.createContext(new Map),pj="startTransition",H0=Pk[pj],mj="flushSync",V0=UC[mj];function gj(t){H0?H0(t):t()}function za(t){V0?V0(t):t()}let yj=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function _j(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=q.useState(n.state),[o,a]=q.useState(),[c,u]=q.useState({isTransitioning:!1}),[h,p]=q.useState(),[m,g]=q.useState(),[y,_]=q.useState(),b=q.useRef(new Map),{v7_startTransition:x}=r||{},w=q.useCallback(T=>{x?gj(T):T()},[x]),S=q.useCallback((T,A)=>{let{deletedFetchers:F,flushSync:V,viewTransitionOpts:R}=A;T.fetchers.forEach((E,Z)=>{E.data!==void 0&&b.current.set(Z,E.data)}),F.forEach(E=>b.current.delete(E));let B=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!R||B){V?za(()=>s(T)):w(()=>s(T));return}if(V){za(()=>{m&&(h&&h.resolve(),m.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:R.currentLocation,nextLocation:R.nextLocation})});let E=n.window.document.startViewTransition(()=>{za(()=>s(T))});E.finished.finally(()=>{za(()=>{p(void 0),g(void 0),a(void 0),u({isTransitioning:!1})})}),za(()=>g(E));return}m?(h&&h.resolve(),m.skipTransition(),_({state:T,currentLocation:R.currentLocation,nextLocation:R.nextLocation})):(a(T),u({isTransitioning:!0,flushSync:!1,currentLocation:R.currentLocation,nextLocation:R.nextLocation}))},[n.window,m,h,b,w]);q.useLayoutEffect(()=>n.subscribe(S),[n,S]),q.useEffect(()=>{c.isTransitioning&&!c.flushSync&&p(new yj)},[c]),q.useEffect(()=>{if(h&&o&&n.window){let T=o,A=h.promise,F=n.window.document.startViewTransition(async()=>{w(()=>s(T)),await A});F.finished.finally(()=>{p(void 0),g(void 0),a(void 0),u({isTransitioning:!1})}),g(F)}},[w,o,h,n.window]),q.useEffect(()=>{h&&o&&i.location.key===o.location.key&&h.resolve()},[h,m,i.location,o]),q.useEffect(()=>{!c.isTransitioning&&y&&(a(y.state),u({isTransitioning:!0,flushSync:!1,currentLocation:y.currentLocation,nextLocation:y.nextLocation}),_(void 0))},[c.isTransitioning,y]),q.useEffect(()=>{},[]);let C=q.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:T=>n.navigate(T),push:(T,A,F)=>n.navigate(T,{state:A,preventScrollReset:F==null?void 0:F.preventScrollReset}),replace:(T,A,F)=>n.navigate(T,{replace:!0,state:A,preventScrollReset:F==null?void 0:F.preventScrollReset})}),[n]),j=n.basename||"/",D=q.useMemo(()=>({router:n,navigator:C,static:!1,basename:j}),[n,C,j]),P=q.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return q.useEffect(()=>QT(r,n.future),[r,n.future]),q.createElement(q.Fragment,null,q.createElement(Hd.Provider,{value:D},q.createElement(v1.Provider,{value:i},q.createElement(fj.Provider,{value:b.current},q.createElement(hj.Provider,{value:c},q.createElement(tj,{basename:j,location:i.location,navigationType:i.historyAction,navigator:C,future:P},i.initialized||n.future.v7_partialHydration?q.createElement(vj,{routes:n.routes,future:n.future,state:i}):e))))),null)}const vj=q.memo(xj);function xj(t){let{routes:e,future:n,state:r}=t;return UT(e,void 0,r,n)}const bj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zt=q.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:c,to:u,preventScrollReset:h,viewTransition:p}=e,m=rj(e,aj),{basename:g}=q.useContext(as),y,_=!1;if(typeof u=="string"&&wj.test(u)&&(y=u,bj))try{let S=new URL(window.location.href),C=u.startsWith("//")?new URL(S.protocol+u):new URL(u),j=ua(C.pathname,g);C.origin===S.origin&&j!=null?u=j+C.search+C.hash:_=!0}catch{}let b=NT(u,{relative:i}),x=Sj(u,{replace:o,state:a,target:c,preventScrollReset:h,relative:i,viewTransition:p});function w(S){r&&r(S),S.defaultPrevented||x(S)}return q.createElement("a",Bl({},m,{href:y||b,onClick:_||s?r:w,ref:n,target:c}))});var Z0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Z0||(Z0={}));var Y0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Y0||(Y0={}));function Sj(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,c=ls(),u=to(),h=w1(t,{relative:o});return q.useCallback(p=>{if(sj(p,n)){p.preventDefault();let m=r!==void 0?r:Ks(u)===Ks(h);c(t,{replace:m,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[u,c,h,r,i,n,t,s,o,a])}function Hn(t){let e=q.useRef(Ep(t)),n=q.useRef(!1),r=to(),i=q.useMemo(()=>oj(r.search,n.current?null:e.current),[r.search]),s=ls(),o=q.useCallback((a,c)=>{const u=Ep(typeof a=="function"?a(i):a);n.current=!0,s("?"+u,c)},[s,i]);return[i,o]}const kj="modulepreload",Ej=function(t){return"/CipherDispatch/"+t},q0={},no=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=Ej(c),c in q0)return;q0[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":kj,u||(p.as="script"),p.crossOrigin="",p.href=c,a&&p.setAttribute("nonce",a),document.head.appendChild(p),u)return new Promise((m,g)=>{p.addEventListener("load",m),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function Cj(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t;let a,c;const u=async(p=!0)=>{await c};async function h(){if("serviceWorker"in navigator){if(a=await no(async()=>{const{Workbox:p}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:p}},[]).then(({Workbox:p})=>new p("/CipherDispatch/sw.js",{scope:"/CipherDispatch/",type:"classic"})).catch(p=>{o==null||o(p)}),!a)return;a.addEventListener("activated",p=>{(p.isUpdate||p.isExternal)&&window.location.reload()}),a.addEventListener("installed",p=>{p.isUpdate||r==null||r()}),a.register({immediate:e}).then(p=>{s?s("/CipherDispatch/sw.js",p):i==null||i(p)}).catch(p=>{o==null||o(p)})}}return c=h(),u}var Cp=function(t,e){return Cp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Cp(t,e)};function C1(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Cp(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var od=function(){return od=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},od.apply(this,arguments)};function ha(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function T1(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function j1(t,e){return function(n,r){e(n,r,t)}}function P1(t,e,n,r,i,s){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var a=r.kind,c=a==="getter"?"get":a==="setter"?"set":"value",u=!e&&t?r.static?t:t.prototype:null,h=e||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),p,m=!1,g=n.length-1;g>=0;g--){var y={};for(var _ in r)y[_]=_==="access"?{}:r[_];for(var _ in r.access)y.access[_]=r.access[_];y.addInitializer=function(x){if(m)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(x||null))};var b=(0,n[g])(a==="accessor"?{get:h.get,set:h.set}:h[c],y);if(a==="accessor"){if(b===void 0)continue;if(b===null||typeof b!="object")throw new TypeError("Object expected");(p=o(b.get))&&(h.get=p),(p=o(b.set))&&(h.set=p),(p=o(b.init))&&i.unshift(p)}else(p=o(b))&&(a==="field"?i.unshift(p):h[c]=p)}u&&Object.defineProperty(u,r.name,h),m=!0}function A1(t,e,n){for(var r=arguments.length>2,i=0;i<e.length;i++)n=r?e[i].call(t,n):e[i].call(t);return r?n:void 0}function O1(t){return typeof t=="symbol"?t:"".concat(t)}function D1(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function R1(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Be(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{u(r.next(h))}catch(p){o(p)}}function c(h){try{u(r.throw(h))}catch(p){o(p)}}function u(h){h.done?s(h.value):i(h.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function M1(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(h){return c([u,h])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(n=0)),n;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(h){u=[6,h],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Vd=Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]};function L1(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Vd(e,t,n)}function ad(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Qm(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function I1(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Qm(arguments[e]));return t}function z1(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function N1(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function ra(t){return this instanceof ra?(this.v=t,this):new ra(t)}function F1(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(g){return function(y){return Promise.resolve(y).then(g,p)}}function a(g,y){r[g]&&(i[g]=function(_){return new Promise(function(b,x){s.push([g,_,b,x])>1||c(g,_)})},y&&(i[g]=y(i[g])))}function c(g,y){try{u(r[g](y))}catch(_){m(s[0][3],_)}}function u(g){g.value instanceof ra?Promise.resolve(g.value.v).then(h,p):m(s[0][2],g)}function h(g){c("next",g)}function p(g){c("throw",g)}function m(g,y){g(y),s.shift(),s.length&&c(s[0][0],s[0][1])}}function B1(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=t[i]?function(o){return(n=!n)?{value:ra(t[i](o)),done:!1}:s?s(o):o}:s}}function U1(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ad=="function"?ad(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}function W1(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var Tj=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},Tp=function(t){return Tp=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},Tp(t)};function $1(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=Tp(t),r=0;r<n.length;r++)n[r]!=="default"&&Vd(e,t,n[r]);return Tj(e,t),e}function H1(t){return t&&t.__esModule?t:{default:t}}function V1(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function Z1(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n}function Y1(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function q1(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var jj=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function G1(t){function e(s){t.error=t.hasError?new jj(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var n,r=0;function i(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(i);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(s).then(i,function(o){return e(o),i()})}else r|=1}catch(o){e(o)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function K1(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,s,o){return r?e?".jsx":".js":i&&(!s||!o)?n:i+s+"."+o.toLowerCase()+"js"}):t}const Pj={__extends:C1,__assign:od,__rest:ha,__decorate:T1,__param:j1,__esDecorate:P1,__runInitializers:A1,__propKey:O1,__setFunctionName:D1,__metadata:R1,__awaiter:Be,__generator:M1,__createBinding:Vd,__exportStar:L1,__values:ad,__read:Qm,__spread:I1,__spreadArrays:z1,__spreadArray:N1,__await:ra,__asyncGenerator:F1,__asyncDelegator:B1,__asyncValues:U1,__makeTemplateObject:W1,__importStar:$1,__importDefault:H1,__classPrivateFieldGet:V1,__classPrivateFieldSet:Z1,__classPrivateFieldIn:Y1,__addDisposableResource:q1,__disposeResources:G1,__rewriteRelativeImportExtension:K1},Aj=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:q1,get __assign(){return od},__asyncDelegator:B1,__asyncGenerator:F1,__asyncValues:U1,__await:ra,__awaiter:Be,__classPrivateFieldGet:V1,__classPrivateFieldIn:Y1,__classPrivateFieldSet:Z1,__createBinding:Vd,__decorate:T1,__disposeResources:G1,__esDecorate:P1,__exportStar:L1,__extends:C1,__generator:M1,__importDefault:H1,__importStar:$1,__makeTemplateObject:W1,__metadata:R1,__param:j1,__propKey:O1,__read:Qm,__rest:ha,__rewriteRelativeImportExtension:K1,__runInitializers:A1,__setFunctionName:D1,__spread:I1,__spreadArray:N1,__spreadArrays:z1,__values:ad,default:Pj},Symbol.toStringTag,{value:"Module"})),Oj=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>no(async()=>{const{default:r}=await Promise.resolve().then(()=>ro);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class eg extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class G0 extends eg{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class K0 extends eg{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class J0 extends eg{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var jp;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(jp||(jp={}));class Dj{constructor(e,{headers:n={},customFetch:r,region:i=jp.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=Oj(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Be(this,arguments,void 0,function*(n,r={}){var i;try{const{headers:s,method:o,body:a,signal:c}=r;let u={},{region:h}=r;h||(h=this.region);const p=new URL(`${this.url}/${n}`);h&&h!=="any"&&(u["x-region"]=h,p.searchParams.set("forceFunctionRegion",h));let m;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",m=a):typeof a=="string"?(u["Content-Type"]="text/plain",m=a):typeof FormData<"u"&&a instanceof FormData?m=a:(u["Content-Type"]="application/json",m=JSON.stringify(a)):m=a;const g=yield this.fetch(p.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),s),body:m,signal:c}).catch(x=>{throw x.name==="AbortError"?x:new G0(x)}),y=g.headers.get("x-relay-error");if(y&&y==="true")throw new K0(g);if(!g.ok)throw new J0(g);let _=((i=g.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),b;return _==="application/json"?b=yield g.json():_==="application/octet-stream"||_==="application/pdf"?b=yield g.blob():_==="text/event-stream"?b=g:_==="multipart/form-data"?b=yield g.formData():b=yield g.text(),{data:b,error:null,response:g}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new G0(s)}:{data:null,error:s,response:s instanceof J0||s instanceof K0?s.context:void 0}}})}}var Tn={};const fa=Jv(Aj);var Fc={},Bc={},Uc={},Wc={},$c={},Rj=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ia=Rj();const Mj=ia.fetch,J1=ia.fetch.bind(ia),X1=ia.Headers,Lj=ia.Request,Ij=ia.Response,ro=Object.freeze(Object.defineProperty({__proto__:null,Headers:X1,Request:Lj,Response:Ij,default:J1,fetch:Mj},Symbol.toStringTag,{value:"Module"})),zj=Jv(ro);var Hc={},X0;function Q1(){if(X0)return Hc;X0=1,Object.defineProperty(Hc,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Hc.default=t,Hc}var Q0;function ew(){if(Q0)return $c;Q0=1,Object.defineProperty($c,"__esModule",{value:!0});const t=fa,e=t.__importDefault(zj),n=t.__importDefault(Q1());class r{constructor(s){var o,a;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(o=s.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=s.signal,this.isMaybeSingle=(a=s.isMaybeSingle)!==null&&a!==void 0?a:!1,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,o){return this.headers=new Headers(this.headers),this.headers.set(s,o),this}then(s,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let c=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var h,p,m,g;let y=null,_=null,b=null,x=u.status,w=u.statusText;if(u.ok){if(this.method!=="HEAD"){const D=await u.text();D===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((h=this.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?_=D:_=JSON.parse(D))}const C=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),j=(m=u.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");C&&j&&j.length>1&&(b=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(y={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,b=null,x=406,w="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const C=await u.text();try{y=JSON.parse(C),Array.isArray(y)&&u.status===404&&(_=[],y=null,x=200,w="OK")}catch{u.status===404&&C===""?(x=204,w="No Content"):y={message:C}}if(y&&this.isMaybeSingle&&(!((g=y==null?void 0:y.details)===null||g===void 0)&&g.includes("0 rows"))&&(y=null,x=200,w="OK"),y&&this.shouldThrowOnError)throw new n.default(y)}return{error:y,data:_,count:b,status:x,statusText:w}});return this.shouldThrowOnError||(c=c.catch(u=>{var h,p,m;return{error:{message:`${(h=u==null?void 0:u.name)!==null&&h!==void 0?h:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(p=u==null?void 0:u.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(m=u==null?void 0:u.code)!==null&&m!==void 0?m:""}`},data:null,count:null,status:0,statusText:""}})),c.then(s,o)}returns(){return this}overrideTypes(){return this}}return $c.default=r,$c}var e_;function tw(){if(e_)return Wc;e_=1,Object.defineProperty(Wc,"__esModule",{value:!0});const e=fa.__importDefault(ew());class n extends e.default{select(i){let s=!1;const o=(i??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:s=!0,nullsFirst:o,foreignTable:a,referencedTable:c=a}={}){const u=c?`${c}.order`:"order",h=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${h?`${h},`:""}${i}.${s?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:o=s}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,s,{foreignTable:o,referencedTable:a=o}={}){const c=typeof a>"u"?"offset":`${a}.offset`,u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(c,`${i}`),this.url.searchParams.set(u,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:s=!1,settings:o=!1,buffers:a=!1,wal:c=!1,format:u="text"}={}){var h;const p=[i?"analyze":null,s?"verbose":null,o?"settings":null,a?"buffers":null,c?"wal":null].filter(Boolean).join("|"),m=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${m}"; options=${p};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Wc.default=n,Wc}var t_;function tg(){if(t_)return Uc;t_=1,Object.defineProperty(Uc,"__esModule",{value:!0});const e=fa.__importDefault(tw()),n=new RegExp("[,()]");class r extends e.default{eq(s,o){return this.url.searchParams.append(s,`eq.${o}`),this}neq(s,o){return this.url.searchParams.append(s,`neq.${o}`),this}gt(s,o){return this.url.searchParams.append(s,`gt.${o}`),this}gte(s,o){return this.url.searchParams.append(s,`gte.${o}`),this}lt(s,o){return this.url.searchParams.append(s,`lt.${o}`),this}lte(s,o){return this.url.searchParams.append(s,`lte.${o}`),this}like(s,o){return this.url.searchParams.append(s,`like.${o}`),this}likeAllOf(s,o){return this.url.searchParams.append(s,`like(all).{${o.join(",")}}`),this}likeAnyOf(s,o){return this.url.searchParams.append(s,`like(any).{${o.join(",")}}`),this}ilike(s,o){return this.url.searchParams.append(s,`ilike.${o}`),this}ilikeAllOf(s,o){return this.url.searchParams.append(s,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(s,o){return this.url.searchParams.append(s,`ilike(any).{${o.join(",")}}`),this}is(s,o){return this.url.searchParams.append(s,`is.${o}`),this}in(s,o){const a=Array.from(new Set(o)).map(c=>typeof c=="string"&&n.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(s,`in.(${a})`),this}contains(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cs.{${o.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(o)}`),this}containedBy(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cd.{${o.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(o)}`),this}rangeGt(s,o){return this.url.searchParams.append(s,`sr.${o}`),this}rangeGte(s,o){return this.url.searchParams.append(s,`nxl.${o}`),this}rangeLt(s,o){return this.url.searchParams.append(s,`sl.${o}`),this}rangeLte(s,o){return this.url.searchParams.append(s,`nxr.${o}`),this}rangeAdjacent(s,o){return this.url.searchParams.append(s,`adj.${o}`),this}overlaps(s,o){return typeof o=="string"?this.url.searchParams.append(s,`ov.${o}`):this.url.searchParams.append(s,`ov.{${o.join(",")}}`),this}textSearch(s,o,{config:a,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const h=a===void 0?"":`(${a})`;return this.url.searchParams.append(s,`${u}fts${h}.${o}`),this}match(s){return Object.entries(s).forEach(([o,a])=>{this.url.searchParams.append(o,`eq.${a}`)}),this}not(s,o,a){return this.url.searchParams.append(s,`not.${o}.${a}`),this}or(s,{foreignTable:o,referencedTable:a=o}={}){const c=a?`${a}.or`:"or";return this.url.searchParams.append(c,`(${s})`),this}filter(s,o,a){return this.url.searchParams.append(s,`${o}.${a}`),this}}return Uc.default=r,Uc}var n_;function nw(){if(n_)return Bc;n_=1,Object.defineProperty(Bc,"__esModule",{value:!0});const e=fa.__importDefault(tg());class n{constructor(i,{headers:s={},schema:o,fetch:a}){this.url=i,this.headers=new Headers(s),this.schema=o,this.fetch=a}select(i,s){const{head:o=!1,count:a}=s??{},c=o?"HEAD":"GET";let u=!1;const h=(i??"*").split("").map(p=>/\s/.test(p)&&!u?"":(p==='"'&&(u=!u),p)).join("");return this.url.searchParams.set("select",h),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:s,defaultToNull:o=!0}={}){var a;const c="POST";if(s&&this.headers.append("Prefer",`count=${s}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const u=i.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(u.length>0){const h=[...new Set(u)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(i,{onConflict:s,ignoreDuplicates:o=!1,count:a,defaultToNull:c=!0}={}){var u;const h="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),a&&this.headers.append("Prefer",`count=${a}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const p=i.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(p.length>0){const m=[...new Set(p)].map(g=>`"${g}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(i,{count:s}={}){var o;const a="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:i}={}){var s;const o="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}}return Bc.default=n,Bc}var r_;function Nj(){if(r_)return Fc;r_=1,Object.defineProperty(Fc,"__esModule",{value:!0});const t=fa,e=t.__importDefault(nw()),n=t.__importDefault(tg());class r{constructor(s,{headers:o={},schema:a,fetch:c}={}){this.url=s,this.headers=new Headers(o),this.schemaName=a,this.fetch=c}from(s){const o=new URL(`${this.url}/${s}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new r(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,o={},{head:a=!1,get:c=!1,count:u}={}){var h;let p;const m=new URL(`${this.url}/rpc/${s}`);let g;a||c?(p=a?"HEAD":"GET",Object.entries(o).filter(([_,b])=>b!==void 0).map(([_,b])=>[_,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([_,b])=>{m.searchParams.append(_,b)})):(p="POST",g=o);const y=new Headers(this.headers);return u&&y.set("Prefer",`count=${u}`),new n.default({method:p,url:m,headers:y,schema:this.schemaName,body:g,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return Fc.default=r,Fc}Object.defineProperty(Tn,"__esModule",{value:!0});var rw=Tn.PostgrestError=fw=Tn.PostgrestBuilder=dw=Tn.PostgrestTransformBuilder=cw=Tn.PostgrestFilterBuilder=aw=Tn.PostgrestQueryBuilder=sw=Tn.PostgrestClient=void 0;const pa=fa,iw=pa.__importDefault(Nj());var sw=Tn.PostgrestClient=iw.default;const ow=pa.__importDefault(nw());var aw=Tn.PostgrestQueryBuilder=ow.default;const lw=pa.__importDefault(tg());var cw=Tn.PostgrestFilterBuilder=lw.default;const uw=pa.__importDefault(tw());var dw=Tn.PostgrestTransformBuilder=uw.default;const hw=pa.__importDefault(ew());var fw=Tn.PostgrestBuilder=hw.default;const pw=pa.__importDefault(Q1());rw=Tn.PostgrestError=pw.default;var mw=Tn.default={PostgrestClient:iw.default,PostgrestQueryBuilder:ow.default,PostgrestFilterBuilder:lw.default,PostgrestTransformBuilder:uw.default,PostgrestBuilder:hw.default,PostgrestError:pw.default};const Fj=Qp({__proto__:null,get PostgrestBuilder(){return fw},get PostgrestClient(){return sw},get PostgrestError(){return rw},get PostgrestFilterBuilder(){return cw},get PostgrestQueryBuilder(){return aw},get PostgrestTransformBuilder(){return dw},default:mw},[Tn]),{PostgrestClient:Bj,PostgrestQueryBuilder:HL,PostgrestFilterBuilder:VL,PostgrestTransformBuilder:ZL,PostgrestBuilder:YL,PostgrestError:qL}=mw||Fj;class Uj{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Wj="2.78.0",$j=`realtime-js/${Wj}`,Hj="1.0.0",Pp=1e4,Vj=1e3,Zj=100;var hl;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(hl||(hl={}));var Gt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Gt||(Gt={}));var Pr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Pr||(Pr={}));var Ap;(function(t){t.websocket="websocket"})(Ap||(Ap={}));var Ds;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ds||(Ds={}));class Yj{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const c=r.decode(e.slice(o,o+s));o=o+s;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:u}}}class gw{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var vt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(vt||(vt={}));const i_=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=qj(o,t,e,i),s),{}):{}},qj=(t,e,n,r)=>{const i=e.find(a=>a.name===t),s=i==null?void 0:i.type,o=n[t];return s&&!r.includes(s)?yw(s,o):Op(o)},yw=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Xj(e,n)}switch(t){case vt.bool:return Gj(e);case vt.float4:case vt.float8:case vt.int2:case vt.int4:case vt.int8:case vt.numeric:case vt.oid:return Kj(e);case vt.json:case vt.jsonb:return Jj(e);case vt.timestamp:return Qj(e);case vt.abstime:case vt.date:case vt.daterange:case vt.int4range:case vt.int8range:case vt.money:case vt.reltime:case vt.text:case vt.time:case vt.timestamptz:case vt.timetz:case vt.tsrange:case vt.tstzrange:return Op(e);default:return Op(e)}},Op=t=>t,Gj=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Kj=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Jj=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Xj=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>yw(e,a))}return t},Qj=t=>typeof t=="string"?t.replace(" ","T"):t,_w=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class nf{constructor(e,n,r={},i=Pp){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var s_;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(s_||(s_={}));class fl{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=fl.syncState(this.state,i,s,o),this.pendingDiffs.forEach(c=>{this.state=fl.syncDiff(this.state,c,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=fl.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),o=this.transformState(n),a={},c={};return this.map(s,(u,h)=>{o[u]||(c[u]=h)}),this.map(o,(u,h)=>{const p=s[u];if(p){const m=h.map(b=>b.presence_ref),g=p.map(b=>b.presence_ref),y=h.filter(b=>g.indexOf(b.presence_ref)<0),_=p.filter(b=>m.indexOf(b.presence_ref)<0);y.length>0&&(a[u]=y),_.length>0&&(c[u]=_)}else a[u]=h}),this.syncDiff(s,{joins:a,leaves:c},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,c)=>{var u;const h=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(c),h.length>0){const p=e[a].map(g=>g.presence_ref),m=h.filter(g=>p.indexOf(g.presence_ref)<0);e[a].unshift(...m)}r(a,h,c)}),this.map(o,(a,c)=>{let u=e[a];if(!u)return;const h=c.map(p=>p.presence_ref);u=u.filter(p=>h.indexOf(p.presence_ref)<0),e[a]=u,i(a,u,c),u.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var o_;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(o_||(o_={}));var pl;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(pl||(pl={}));var oi;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(oi||(oi={}));class ng{constructor(e,n={config:{}},r){var i,s;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Gt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new nf(this,Pr.join,this.params,this.timeout),this.rejoinTimer=new gw(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Gt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Gt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Gt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Gt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Gt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Pr.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new fl(this),this.broadcastEndpointURL=_w(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Gt.closed){const{config:{broadcast:o,presence:a,private:c}}=this.params,u=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[pl.PRESENCE]&&this.bindings[pl.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,p={},m={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:h}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(g=>e==null?void 0:e(oi.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(oi.CLOSED)),this.updateJoinPayload(Object.assign({config:m},p)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var y;if(this.socket.setAuth(),g===void 0){e==null||e(oi.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,b=(y=_==null?void 0:_.length)!==null&&y!==void 0?y:0,x=[];for(let w=0;w<b;w++){const S=_[w],{filter:{event:C,schema:j,table:D,filter:P}}=S,T=g&&g[w];if(T&&T.event===C&&T.schema===j&&T.table===D&&T.filter===P)x.push(Object.assign(Object.assign({},S),{id:T.id}));else{this.unsubscribe(),this.state=Gt.errored,e==null||e(oi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(oi.SUBSCRIBED);return}}).receive("error",g=>{this.state=Gt.errored,e==null||e(oi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(oi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Gt.joined&&e===pl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let c=a.statusText;try{const u=await a.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,c;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Gt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Pr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new nf(this,Pr.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Gt.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new nf(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Zj){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:u,join:h}=Pr;if(r&&[a,c,u,h].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var y,_,b;return((y=g.filter)===null||y===void 0?void 0:y.event)==="*"||((b=(_=g.filter)===null||_===void 0?void 0:_.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(g=>g.callback(m,r)):(s=this.bindings[o])===null||s===void 0||s.filter(g=>{var y,_,b,x,w,S;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const C=g.id,j=(y=g.filter)===null||y===void 0?void 0:y.event;return C&&((_=n.ids)===null||_===void 0?void 0:_.includes(C))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const C=(w=(x=g==null?void 0:g.filter)===null||x===void 0?void 0:x.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return C==="*"||C===((S=n==null?void 0:n.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof m=="object"&&"ids"in m){const y=m.data,{schema:_,table:b,commit_timestamp:x,type:w,errors:S}=y;m=Object.assign(Object.assign({},{schema:_,table:b,commit_timestamp:x,eventType:w,new:{},old:{},errors:S}),this._getPayloadRecords(y))}g.callback(m,r)})}_isClosed(){return this.state===Gt.closed}_isJoined(){return this.state===Gt.joined}_isJoining(){return this.state===Gt.joining}_isLeaving(){return this.state===Gt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&ng.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Pr.close,{},e)}_onError(e){this._on(Pr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Gt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=i_(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=i_(e.columns,e.old_record)),n}}const rf=()=>{},Vc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},eP=[1e3,2e3,5e3,1e4],tP=1e4,nP=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class rP{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Pp,this.transport=null,this.heartbeatIntervalMs=Vc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=rf,this.ref=0,this.reconnectTimer=null,this.logger=rf,this.conn=null,this.sendBuffer=[],this.serializer=new Yj,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...o)=>no(async()=>{const{default:a}=await Promise.resolve().then(()=>ro);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...o)=>s(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Ap.websocket}`,this.httpEndpoint=_w(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Uj.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Hj}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case hl.connecting:return Ds.Connecting;case hl.open:return Ds.Open;case hl.closing:return Ds.Closing;default:return Ds.Closed}}isConnected(){return this.connectionState()===Ds.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new ng(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Vj,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Vc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:o}=n,a=o?`(${o})`:"",c=s.status||"";this.log("receive",`${c} ${r} ${i} ${a}`.trim(),s),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(i,s,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Pr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([nP],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:$j};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Pr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new gw(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Vc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,s,o,a,c,u,h;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Pp,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Vc.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:rf,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:p=>eP[p-1]||tP,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(p,m)=>m(JSON.stringify(p)),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class rg extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function At(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class iP extends rg{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Dp extends rg{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const ig=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>no(async()=>{const{default:r}=await Promise.resolve().then(()=>ro);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},sP=()=>Be(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield no(()=>Promise.resolve().then(()=>ro),void 0)).Response:Response}),Rp=t=>{if(Array.isArray(t))return t.map(n=>Rp(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=Rp(r)}),e},oP=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},sf=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},aP=(t,e,n)=>Be(void 0,void 0,void 0,function*(){const r=yield sP();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{const s=t.status||500,o=(i==null?void 0:i.statusCode)||s+"";e(new iP(sf(i),s,o))}).catch(i=>{e(new Dp(sf(i),i))}):e(new Dp(sf(t),t))}),lP=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(oP(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),n))};function rc(t,e,n,r,i,s){return Be(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,lP(e,r,i,s)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>aP(c,a,r))})})}function Ul(t,e,n,r){return Be(this,void 0,void 0,function*(){return rc(t,"GET",e,n,r)})}function Cr(t,e,n,r,i){return Be(this,void 0,void 0,function*(){return rc(t,"POST",e,r,i,n)})}function Mp(t,e,n,r,i){return Be(this,void 0,void 0,function*(){return rc(t,"PUT",e,r,i,n)})}function cP(t,e,n,r){return Be(this,void 0,void 0,function*(){return rc(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function sg(t,e,n,r,i){return Be(this,void 0,void 0,function*(){return rc(t,"DELETE",e,r,i,n)})}class uP{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return Be(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(At(e))return{data:null,error:e};throw e}})}}var vw;class dP{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[vw]="BlobDownloadBuilder",this.promise=null}asStream(){return new uP(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Be(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(At(e))return{data:null,error:e};throw e}})}}vw=Symbol.toStringTag;const hP={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},a_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class fP{constructor(e,n={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=ig(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,i){return Be(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},a_),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const u=this._removeEmptyFolders(n),h=this._getFinalPath(u),p=yield(e=="PUT"?Mp:Cr)(this.fetch,`${this.url}/object/${h}`,s,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:p.Id,fullPath:p.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(At(s))return{data:null,error:s};throw s}})}upload(e,n,r){return Be(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return Be(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:a_.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType);const p=yield Mp(this.fetch,a.toString(),c,{headers:h});return{data:{path:s,fullPath:p.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(At(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return Be(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield Cr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new rg("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(At(r))return{data:null,error:r};throw r}})}update(e,n,r){return Be(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Be(this,void 0,void 0,function*(){try{return{data:yield Cr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(At(i))return{data:null,error:i};throw i}})}copy(e,n,r){return Be(this,void 0,void 0,function*(){try{return{data:{path:(yield Cr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(At(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return Be(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Cr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(At(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return Be(this,void 0,void 0,function*(){try{const i=yield Cr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(At(i))return{data:null,error:i};throw i}})}download(e,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"",a=this._getFinalPath(e),c=()=>Ul(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new dP(c,this.shouldThrowOnError)}info(e){return Be(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Ul(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Rp(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(At(r))return{data:null,error:r};throw r}})}exists(e){return Be(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield cP(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(At(r)&&r instanceof Dp){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&i.push(c);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(e){return Be(this,void 0,void 0,function*(){try{return{data:yield sg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}})}list(e,n,r){return Be(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},hP),n),{prefix:e||""});return{data:yield Cr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(At(i))return{data:null,error:i};throw i}})}listV2(e,n){return Be(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Cr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(At(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const xw="2.78.0",bw={"X-Client-Info":`storage-js/${xw}`};class pP{constructor(e,n={},r,i){this.shouldThrowOnError=!1;const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},bw),n),this.fetch=ig(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return Be(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield Ul(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}})}getBucket(e){return Be(this,void 0,void 0,function*(){try{return{data:yield Ul(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}})}createBucket(e){return Be(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Cr(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(At(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return Be(this,void 0,void 0,function*(){try{return{data:yield Mp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(At(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Be(this,void 0,void 0,function*(){try{return{data:yield Cr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Be(this,void 0,void 0,function*(){try{return{data:yield sg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class mP{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},bw),n),this.fetch=ig(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Be(this,void 0,void 0,function*(){try{return{data:yield Cr(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}})}listBuckets(e){return Be(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Ul(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Be(this,void 0,void 0,function*(){try{return{data:yield sg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}})}}const og={"X-Client-Info":`storage-js/${xw}`,"Content-Type":"application/json"};class ww extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Jn(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class of extends ww{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class gP extends ww{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var l_;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(l_||(l_={}));const ag=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>no(async()=>{const{default:r}=await Promise.resolve().then(()=>ro);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},yP=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},c_=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),_P=(t,e,n)=>Be(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const i=t.status||500,s=t;if(typeof s.json=="function")s.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";e(new of(c_(o),i,a))}).catch(()=>{const o=i+"",a=s.statusText||`HTTP ${i} error`;e(new of(a,i,o))});else{const o=i+"",a=s.statusText||`HTTP ${i} error`;e(new of(a,i,o))}}else e(new gP(c_(t),t))}),vP=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(yP(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n)):i};function xP(t,e,n,r,i,s){return Be(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,vP(e,r,i,s)).then(c=>{if(!c.ok)throw c;if(r!=null&&r.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>_P(c,a,r))})})}function Xn(t,e,n,r,i){return Be(this,void 0,void 0,function*(){return xP(t,"POST",e,r,i,n)})}class bP{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},og),n),this.fetch=ag(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Be(this,void 0,void 0,function*(){try{return{data:(yield Xn(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Jn(n))return{data:null,error:n};throw n}})}getIndex(e,n){return Be(this,void 0,void 0,function*(){try{return{data:yield Xn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Jn(r))return{data:null,error:r};throw r}})}listIndexes(e){return Be(this,void 0,void 0,function*(){try{return{data:yield Xn(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Jn(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return Be(this,void 0,void 0,function*(){try{return{data:(yield Xn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Jn(r))return{data:null,error:r};throw r}})}}class wP{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},og),n),this.fetch=ag(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Be(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Xn(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Jn(n))return{data:null,error:n};throw n}})}getVectors(e){return Be(this,void 0,void 0,function*(){try{return{data:yield Xn(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Jn(n))return{data:null,error:n};throw n}})}listVectors(e){return Be(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Xn(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Jn(n))return{data:null,error:n};throw n}})}queryVectors(e){return Be(this,void 0,void 0,function*(){try{return{data:yield Xn(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Jn(n))return{data:null,error:n};throw n}})}deleteVectors(e){return Be(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Xn(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Jn(n))return{data:null,error:n};throw n}})}}class SP{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},og),n),this.fetch=ag(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Be(this,void 0,void 0,function*(){try{return{data:(yield Xn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Jn(n))return{data:null,error:n};throw n}})}getBucket(e){return Be(this,void 0,void 0,function*(){try{return{data:yield Xn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Jn(n))return{data:null,error:n};throw n}})}listBuckets(){return Be(this,arguments,void 0,function*(e={}){try{return{data:yield Xn(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Jn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Be(this,void 0,void 0,function*(){try{return{data:(yield Xn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Jn(n))return{data:null,error:n};throw n}})}}class kP extends SP{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new EP(this.url,this.headers,e,this.fetch)}}class EP extends bP{constructor(e,n,r,i){super(e,n,i),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Be(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Be(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Be(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Be(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new CP(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class CP extends wP{constructor(e,n,r,i,s){super(e,n,s),this.vectorBucketName=r,this.indexName=i}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Be(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Be(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Be(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Be(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Be(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class TP extends pP{constructor(e,n={},r,i){super(e,n,r,i)}from(e){return new fP(this.url,this.headers,e,this.fetch)}get vectors(){return new kP(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new mP(this.url+"/iceberg",this.headers,this.fetch)}}const jP="2.78.0";let Ka="";typeof Deno<"u"?Ka="deno":typeof document<"u"?Ka="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ka="react-native":Ka="node";const PP={"X-Client-Info":`supabase-js-${Ka}/${jP}`},AP={headers:PP},OP={schema:"public"},DP={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},RP={},MP=t=>{let e;return t?e=t:typeof fetch>"u"?e=J1:e=fetch,(...n)=>e(...n)},LP=()=>typeof Headers>"u"?X1:Headers,IP=(t,e,n)=>{const r=MP(n),i=LP();return async(s,o)=>{var a;const c=(a=await e())!==null&&a!==void 0?a:t;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},o),{headers:u}))}};function zP(t){return t.endsWith("/")?t:t+"/"}function NP(t,e){var n,r;const{db:i,auth:s,realtime:o,global:a}=t,{db:c,auth:u,realtime:h,global:p}=e,m={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},h),o),storage:{},global:Object.assign(Object.assign(Object.assign({},p),a),{headers:Object.assign(Object.assign({},(n=p==null?void 0:p.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}function FP(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(zP(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Sw="2.78.0",ko=30*1e3,Lp=3,af=Lp*ko,BP="http://localhost:9999",UP="supabase.auth.token",WP={"X-Client-Info":`gotrue-js/${Sw}`},Ip="X-Supabase-Api-Version",kw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},$P=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,HP=10*60*1e3;class Wl extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ue(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class VP extends Wl{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function ZP(t){return Ue(t)&&t.name==="AuthApiError"}class Rs extends Wl{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class cs extends Wl{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class wr extends cs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function YP(t){return Ue(t)&&t.name==="AuthSessionMissingError"}class go extends cs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Zc extends cs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Yc extends cs{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function qP(t){return Ue(t)&&t.name==="AuthImplicitGrantRedirectError"}class u_ extends cs{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class zp extends cs{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function lf(t){return Ue(t)&&t.name==="AuthRetryableFetchError"}class d_ extends cs{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Np extends cs{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ld="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),h_=` 	
\r=`.split(""),GP=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<h_.length;e+=1)t[h_[e].charCodeAt(0)]=-2;for(let e=0;e<ld.length;e+=1)t[ld[e].charCodeAt(0)]=e;return t})();function f_(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(ld[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(ld[r]),e.queuedBits-=6}}function Ew(t,e,n){const r=GP[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function p_(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{XP(o,r,n)};for(let o=0;o<t.length;o+=1)Ew(t.charCodeAt(o),i,s);return e.join("")}function KP(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function JP(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}KP(r,e)}}function XP(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Zo(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)Ew(t.charCodeAt(i),n,r);return new Uint8Array(e)}function QP(t){const e=[];return JP(t,n=>e.push(n)),new Uint8Array(e)}function Ns(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>f_(i,n,r)),f_(null,n,r),e.join("")}function eA(t){return Math.round(Date.now()/1e3)+t}function tA(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const En=()=>typeof window<"u"&&typeof document<"u",_s={tested:!1,writable:!1},Cw=()=>{if(!En())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(_s.tested)return _s.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),_s.tested=!0,_s.writable=!0}catch{_s.tested=!0,_s.writable=!1}return _s.writable};function nA(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const Tw=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>no(async()=>{const{default:r}=await Promise.resolve().then(()=>ro);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},rA=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Eo=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},vs=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ji=async(t,e)=>{await t.removeItem(e)};class Zd{constructor(){this.promise=new Zd.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Zd.promiseConstructor=Promise;function cf(t){const e=t.split(".");if(e.length!==3)throw new Np("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!$P.test(e[r]))throw new Np("JWT not in base64url format");return{header:JSON.parse(p_(e[0])),payload:JSON.parse(p_(e[1])),signature:Zo(e[2]),raw:{header:e[0],payload:e[1]}}}async function iA(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function sA(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function oA(t){return("0"+t.toString(16)).substr(-2)}function aA(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,oA).join("")}async function lA(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function cA(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await lA(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yo(t,e,n=!1){const r=aA();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Eo(t,`${e}-code-verifier`,i);const s=await cA(r);return[s,r===s?"plain":"s256"]}const uA=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function dA(t){const e=t.headers.get(Ip);if(!e||!e.match(uA))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function hA(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function fA(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const pA=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function _o(t){if(!pA.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function uf(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function mA(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function m_(t){return JSON.parse(JSON.stringify(t))}const Ts=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),gA=[502,503,504];async function g_(t){var e;if(!rA(t))throw new zp(Ts(t),0);if(gA.includes(t.status))throw new zp(Ts(t),t.status);let n;try{n=await t.json()}catch(s){throw new Rs(Ts(s),s)}let r;const i=dA(t);if(i&&i.getTime()>=kw["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new d_(Ts(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new wr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new d_(Ts(n),t.status,n.weak_password.reasons);throw new VP(Ts(n),t.status||500,r)}const yA=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function Ze(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[Ip]||(s[Ip]=kw["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await _A(t,e,n+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function _A(t,e,n,r,i,s){const o=yA(e,r,i,s);let a;try{a=await t(n,Object.assign({},o))}catch(c){throw console.error(c),new zp(Ts(c),0)}if(a.ok||await g_(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(c){await g_(c)}}function Sr(t){var e;let n=null;bA(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=eA(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function y_(t){const e=Sr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ii(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function vA(t){return{data:t,error:null}}function xA(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,o=ha(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function __(t){return t}function bA(t){return t.access_token&&t.refresh_token&&t.expires_in}const df=["global","local","others"];class wA{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Tw(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=df[0]){if(df.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${df.join(", ")}`);try{return await Ze(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ze(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ii})}catch(r){if(Ue(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=ha(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Ze(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:xA,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ue(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ze(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ii})}catch(n){if(Ue(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,o,a,c;try{const u={nextPage:null,lastPage:0,total:0},h=await Ze(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:__});if(h.error)throw h.error;const p=await h.json(),m=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(c=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(y=>{const _=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);u[`${b}Page`]=_}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},p),u),error:null}}catch(u){if(Ue(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){_o(e);try{return await Ze(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ii})}catch(n){if(Ue(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){_o(e);try{return await Ze(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Ii})}catch(r){if(Ue(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){_o(e);try{return await Ze(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ii})}catch(r){if(Ue(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){_o(e.userId);try{const{data:n,error:r}=await Ze(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _deleteFactor(e){_o(e.userId),_o(e.id);try{return{data:await Ze(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,s,o,a,c;try{const u={nextPage:null,lastPage:0,total:0},h=await Ze(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:__});if(h.error)throw h.error;const p=await h.json(),m=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(c=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(y=>{const _=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);u[`${b}Page`]=_}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},p),u),error:null}}catch(u){if(Ue(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await Ze(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Ze(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await Ze(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ue(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Ze(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Ze(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ue(n))return{data:null,error:n};throw n}}}function v_(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const vo={debug:!!(globalThis&&Cw()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class jw extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class SA extends jw{}async function kA(t,e,n){vo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),vo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){vo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{vo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw vo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new SA(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(vo.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function EA(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Pw(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function CA(t){return parseInt(t,16)}function TA(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function jA(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:a,requestId:c,resources:u,scheme:h,uri:p,version:m}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const g=Pw(t.address),y=h?`${h}://${r}`:r,_=t.statement?`${t.statement}
`:"",b=`${y} wants you to sign in with your Ethereum account:
${g}

${_}`;let x=`URI: ${p}
Version: ${m}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(x+=`
Expiration Time: ${i.toISOString()}`),a&&(x+=`
Not Before: ${a.toISOString()}`),c&&(x+=`
Request ID: ${c}`),u){let w=`
Resources:`;for(const S of u){if(!S||typeof S!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${S}`);w+=`
- ${S}`}x+=w}return`${b}
${x}`}class Vt extends Error{constructor({message:e,code:n,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class cd extends Vt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function PA({error:t,options:e}){var n,r,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Vt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Vt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Vt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Vt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Vt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Vt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Vt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Vt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(Aw(o)){if(s.rp.id!==o)return new Vt({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Vt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Vt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Vt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Vt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function AA({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Vt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Vt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(Aw(r)){if(n.rpId!==r)return new Vt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Vt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Vt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Vt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class OA{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const DA=new OA;function RA(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=ha(t,["challenge","user","excludeCredentials"]),s=Zo(e).buffer,o=Object.assign(Object.assign({},n),{id:Zo(n.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:s,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const u=r[c];a.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Zo(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function MA(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=ha(t,["challenge","allowCredentials"]),i=Zo(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];s.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Zo(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return s}function LA(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Ns(new Uint8Array(t.response.attestationObject)),clientDataJSON:Ns(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function IA(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Ns(new Uint8Array(i.authenticatorData)),clientDataJSON:Ns(new Uint8Array(i.clientDataJSON)),signature:Ns(new Uint8Array(i.signature)),userHandle:i.userHandle?Ns(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Aw(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function x_(){var t,e;return!!(En()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function zA(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new cd("Browser returned unexpected credential type",e)}:{data:null,error:new cd("Empty credential response",e)}}catch(e){return{data:null,error:PA({error:e,options:t})}}}async function NA(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new cd("Browser returned unexpected credential type",e)}:{data:null,error:new cd("Empty credential response",e)}}catch(e){return{data:null,error:AA({error:e,options:t})}}}const FA={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},BA={userVerification:"preferred",hints:["security-key"]};function ud(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))r[s]=o;else if(n(o))r[s]=o;else if(e(o)){const a=r[s];e(a)?r[s]=ud(a,o):r[s]=ud(o)}else r[s]=o}return r}function UA(t,e){return ud(FA,t,e||{})}function WA(t,e){return ud(BA,t,e||{})}class $A{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},s){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!o)return{data:null,error:a};const c=i??DA.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=UA(o.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:h,error:p}=await zA({publicKey:u,signal:c});return h?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}case"request":{const u=WA(o.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:h,error:p}=await NA(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return h?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}}}catch(o){return Ue(o)?{data:null,error:o}:{data:null,error:new Rs("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},s){if(!n)return{data:null,error:new Wl("rpId is required for WebAuthn authentication")};try{if(!x_())return{data:null,error:new Rs("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!o)return{data:null,error:a};const{webauthn:c}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(o){return Ue(o)?{data:null,error:o}:{data:null,error:new Rs("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},s){if(!n)return{data:null,error:new Wl("rpId is required for WebAuthn registration")};try{if(!x_())return{data:null,error:new Rs("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(h=>{var p;return(p=h.data)===null||p===void 0?void 0:p.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===e&&m.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:a};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return Ue(o)?{data:null,error:o}:{data:null,error:new Rs("Unexpected error in register",o)}}}}EA();const HA={url:BP,storageKey:UP,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:WP,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function b_(t,e,n){return await n()}const xo={};class $l{get jwks(){var e,n;return(n=(e=xo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){xo[this.storageKey]=Object.assign(Object.assign({},xo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=xo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){xo[this.storageKey]=Object.assign(Object.assign({},xo[this.storageKey]),{cachedAt:e})}constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=$l.nextInstanceID,$l.nextInstanceID+=1,this.instanceID>0&&En()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},HA),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new wA({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Tw(i.fetch),this.lock=i.lock||b_,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:En()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=kA:this.lock=b_,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new $A(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Cw()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=v_(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=v_(this.memoryStorage)),En()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Sw}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=nA(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),En()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),qP(s)){const c=(e=s.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ue(n)?{error:n}:{error:new Rs("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await Ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Sr}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(Ue(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:h,password:p,options:m}=e;let g=null,y=null;this.flowType==="pkce"&&([g,y]=await yo(this.storage,this.storageKey)),s=await Ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:h,password:p,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:y},xform:Sr})}else if("phone"in e){const{phone:h,password:p,options:m}=e;s=await Ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(i=m==null?void 0:m.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Sr})}else throw new Zc("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(Ue(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:o,options:a}=e;n=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:y_})}else if("phone"in e){const{phone:s,password:o,options:a}=e;n=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:y_})}else throw new Zc("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new go}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Ue(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,s,o,a,c,u,h,p,m;let g,y;if("message"in e)g=e.message,y=e.signature;else{const{chain:_,wallet:b,statement:x,options:w}=e;let S;if(En())if(typeof b=="object")S=b;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")S=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=b}const C=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href),j=await S.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const D=Pw(j[0]);let P=(r=w==null?void 0:w.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!P){const A=await S.request({method:"eth_chainId"});P=CA(A)}const T={domain:C.host,address:D,statement:x,uri:C.href,version:"1",chainId:P,nonce:(i=w==null?void 0:w.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=w==null?void 0:w.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=w==null?void 0:w.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(c=w==null?void 0:w.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=w==null?void 0:w.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(h=w==null?void 0:w.signInWithEthereum)===null||h===void 0?void 0:h.resources};g=jA(T),y=await S.request({method:"personal_sign",params:[TA(g),D]})}try{const{data:_,error:b}=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:y},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Sr});if(b)throw b;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new go}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:b})}catch(_){if(Ue(_))return{data:{user:null,session:null},error:_};throw _}}async signInWithSolana(e){var n,r,i,s,o,a,c,u,h,p,m,g;let y,_;if("message"in e)y=e.message,_=e.signature;else{const{chain:b,wallet:x,statement:w,options:S}=e;let C;if(En())if(typeof x=="object")C=x;else{const D=window;if("solana"in D&&typeof D.solana=="object"&&("signIn"in D.solana&&typeof D.solana.signIn=="function"||"signMessage"in D.solana&&typeof D.solana.signMessage=="function"))C=D.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=x}const j=new URL((n=S==null?void 0:S.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in C&&C.signIn){const D=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S==null?void 0:S.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),w?{statement:w}:null));let P;if(Array.isArray(D)&&D[0]&&typeof D[0]=="object")P=D[0];else if(D&&typeof D=="object"&&"signedMessage"in D&&"signature"in D)P=D;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)y=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),_=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${j.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(i=(r=S==null?void 0:S.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=S==null?void 0:S.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((o=S==null?void 0:S.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((a=S==null?void 0:S.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((c=S==null?void 0:S.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((u=S==null?void 0:S.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((p=(h=S==null?void 0:S.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||p===void 0)&&p.length?["Resources",...S.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const D=await C.signMessage(new TextEncoder().encode(y),"utf8");if(!D||!(D instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=D}}try{const{data:b,error:x}=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Ns(_)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Sr});if(x)throw x;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new go}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:x})}catch(b){if(Ue(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(e){const n=await vs(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:o}=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Sr});if(await ji(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new go}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(Ue(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=e,a=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Sr}),{data:c,error:u}=a;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new go}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(Ue(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,i,s,o;try{if("email"in e){const{email:a,options:c}=e;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await yo(this.storage,this.storageKey));const{error:p}=await Ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){const{phone:a,options:c}=e,{data:u,error:h}=await Ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h}}throw new Zc("You must provide either an email or phone number.")}catch(a){if(Ue(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Ze(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Sr});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(Ue(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,r,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await yo(this.storage,this.storageKey)),await Ze(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:vA})}catch(s){if(Ue(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new wr;const{error:i}=await Ze(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(Ue(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await Ze(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await Ze(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Zc("You must provide either an email or phone number and a type")}catch(n){if(Ue(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await vs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<af:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await vs(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=uf()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=mA(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ii}):await this._useSession(async n=>{var r,i,s;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new wr}:await Ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Ii})})}catch(n){if(Ue(n))return YP(n)&&(await this._removeSession(),await ji(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new wr;const o=i.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await yo(this.storage,this.storageKey));const{data:u,error:h}=await Ze(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:Ii});if(h)throw h;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Ue(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new wr;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:o}=cf(e.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{data:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(Ue(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new wr;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ue(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!En())throw new Yc("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Yc(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new u_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Yc("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new u_("No code detected.");const{data:w,error:S}=await this._exchangeCodeForSession(e.code);if(S)throw S;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:c,token_type:u}=e;if(!s||!a||!o||!u)throw new Yc("No session defined in URL");const h=Math.round(Date.now()/1e3),p=parseInt(a);let m=h+p;c&&(m=parseInt(c));const g=m-h;g*1e3<=ko&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${p}s`);const y=m-p;h-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,m,h):h-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,m,h);const{data:_,error:b}=await this._getUser(s);if(b)throw b;const x={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:p,expires_at:m,refresh_token:o,token_type:u,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(r){if(Ue(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await vs(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(ZP(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await ji(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=tA(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await yo(this.storage,this.storageKey,!0));try{return await Ze(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(Ue(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,c,u,h;const{data:p,error:m}=s;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ze(this.fetch,"GET",g,{headers:this.headers,jwt:(h=(u=p.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return En()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Ue(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:o,provider:a,token:c,access_token:u,nonce:h}=e,p=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:c,access_token:u,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Sr}),{data:m,error:g}=p;return g?{data:{user:null,session:null},error:g}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new go}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),{data:m,error:g})}catch(i){if(Ue(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await Ze(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await sA(async i=>(i>0&&await iA(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await Ze(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Sr})),(i,s)=>{const o=200*Math.pow(2,i);return s&&lf(s)&&Date.now()+o-r<ko})}catch(r){if(this._debug(n,"error",r),Ue(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),En()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await vs(this.storage,this.storageKey);if(i&&this.userStorage){let o=await vs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Eo(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:uf()}else if(i&&!i.user&&!i.user){const o=await vs(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await ji(this.storage,this.storageKey+"-user"),await Eo(this.storage,this.storageKey,i)):i.user=uf()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<af;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${af}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),lf(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new wr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Zd;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new wr;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={data:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),Ue(s)){const o={data:null,error:s};return lf(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(c){s.push(c)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Eo(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=m_(i);await Eo(this.storage,this.storageKey,s)}else{const i=m_(n);await Eo(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await ji(this.storage,this.storageKey),await ji(this.storage,this.storageKey+"-code-verifier"),await ji(this.storage,this.storageKey+"-user"),this.userStorage&&await ji(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&En()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ko);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/ko);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${ko}ms, refresh threshold is ${Lp} ticks`),i<=Lp&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof jw)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!En()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await yo(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await Ze(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:u}=await Ze(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&c.type==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?LA(e.webauthn.credential_response):IA(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:c}=await Ze(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:c})})}catch(n){if(Ue(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const o=await Ze(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:RA(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:MA(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Ue(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=cf(r.access_token);let o=null;s.aal&&(o=s.aal);let a=o;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(a="aal2");const u=s.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?{data:null,error:i}:r?await Ze(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):{data:null,error:new wr}})}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return{data:null,error:s};if(!i)return{data:null,error:new wr};const o=await Ze(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&En()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Ue(r))return{data:null,error:r};throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return{data:null,error:s};if(!i)return{data:null,error:new wr};const o=await Ze(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&En()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Ue(r))return{data:null,error:r};throw r}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+HP>i)return r;const{data:s,error:o}=await Ze(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:g,error:y}=await this.getSession();if(y||!g.session)return{data:null,error:y};r=g.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:c}}=cf(r);n!=null&&n.allowExpired||hA(s.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:s,header:i,signature:o},error:null}}const h=fA(i.alg),p=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,p,o,QP(`${a}.${c}`)))throw new Np("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}}}$l.nextInstanceID=0;const VA=$l;class ZA extends VA{constructor(e){super(e)}}class YA{constructor(e,n,r){var i,s,o;this.supabaseUrl=e,this.supabaseKey=n;const a=FP(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const c=`sb-${a.hostname.split(".")[0]}-auth-token`,u={db:OP,realtime:RP,auth:Object.assign(Object.assign({},DP),{storageKey:c}),global:AP},h=NP(r??{},u);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=h.global.headers)!==null&&s!==void 0?s:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=IP(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Bj(new URL("rest/v1",a).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new TP(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new Dj(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:o,flowType:a,lock:c,debug:u},h,p){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ZA({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),h),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,flowType:a,lock:c,debug:u,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new rP(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const qA=(t,e,n)=>new YA(t,e,n);function GA(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}GA()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ne=qA("https://qrouuoycvxxxutkxkxpp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFyb3V1b3ljdnh4eHV0a3hreHBwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIxODMyNDgsImV4cCI6MjA3Nzc1OTI0OH0.LXKVdTXNgHgoILlHJcSaGnzyWlaT0-oBxbEgl5ipA48");function KA(){console.log("GITHUB PAGES BASENAME ACTIVE");const t=ls(),[e,n]=q.useState(null);q.useEffect(()=>{(async()=>{console.log("App: Checking authentication...");const{data:{user:i}}=await Ne.auth.getUser();if(console.log("App: User from auth:",i),!i)return console.log("App: No user found, redirecting to login"),t("/login");console.log("App: Fetching profile for user_id:",i.id);const{data:s,error:o}=await Ne.from("profiles").select("user_id, role").eq("user_id",i.id).single();if(console.log("App: Profile data:",s,"Error:",o),!s)return console.log("App: No profile found, redirecting to login"),t("/login");console.log("App: Profile loaded successfully:",s),n(s)})()},[]);const r=async()=>{await Ne.auth.signOut(),t("/login")};return e?f.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a202c 0%, #2d3748 100%)",padding:32},children:f.jsxs("div",{style:{maxWidth:800,margin:"0 auto"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:32,background:"#2d3748",border:"1px solid #4a5568",padding:20,borderRadius:12,boxShadow:"0 4px 6px rgba(0,0,0,0.5)"},children:[f.jsxs("h2",{style:{margin:0,color:"#e2e8f0"},children:["Welcome, ",e.role==="admin"?"Admin":"Appraiser"]}),f.jsx("button",{onClick:r,style:{padding:"10px 20px",background:"#ef4444",color:"white",border:"none",borderRadius:6,fontWeight:"bold",cursor:"pointer"},onMouseOver:i=>i.currentTarget.style.background="#dc2626",onMouseOut:i=>i.currentTarget.style.background="#ef4444",children:"Logout"})]}),e.role==="admin"?f.jsxs("div",{style:{display:"grid",gap:16},children:[f.jsxs(Zt,{to:"/admin/claims",style:{background:"#2d3748",border:"1px solid #4a5568",padding:24,borderRadius:12,textDecoration:"none",color:"#e2e8f0",boxShadow:"0 4px 6px rgba(0,0,0,0.5)",transition:"transform 0.2s"},onMouseOver:i=>i.currentTarget.style.transform="translateY(-2px)",onMouseOut:i=>i.currentTarget.style.transform="translateY(0)",children:[f.jsx("div",{style:{fontSize:48,marginBottom:12},children:""}),f.jsx("h3",{style:{margin:0,marginBottom:8,color:"#e2e8f0"},children:"View All Claims"}),f.jsx("p",{style:{margin:0,color:"#a0aec0"},children:"View and manage all active claims in the system"})]}),f.jsxs(Zt,{to:"/admin/claims/new",style:{background:"#2d3748",border:"1px solid #4a5568",padding:24,borderRadius:12,textDecoration:"none",color:"#e2e8f0",boxShadow:"0 4px 6px rgba(0,0,0,0.5)",transition:"transform 0.2s"},onMouseOver:i=>i.currentTarget.style.transform="translateY(-2px)",onMouseOut:i=>i.currentTarget.style.transform="translateY(0)",children:[f.jsx("div",{style:{fontSize:48,marginBottom:12},children:""}),f.jsx("h3",{style:{margin:0,marginBottom:8,color:"#e2e8f0"},children:"Create New Claim"}),f.jsx("p",{style:{margin:0,color:"#a0aec0"},children:"Start a new insurance claim with customer and vehicle details"})]}),f.jsxs(Zt,{to:"/admin/claims?archived=true",style:{background:"#2d3748",border:"1px solid #4a5568",padding:24,borderRadius:12,textDecoration:"none",color:"#e2e8f0",boxShadow:"0 4px 6px rgba(0,0,0,0.5)",transition:"transform 0.2s"},onMouseOver:i=>i.currentTarget.style.transform="translateY(-2px)",onMouseOut:i=>i.currentTarget.style.transform="translateY(0)",children:[f.jsx("div",{style:{fontSize:48,marginBottom:12},children:""}),f.jsx("h3",{style:{margin:0,marginBottom:8,color:"#e2e8f0"},children:"Archived Claims"}),f.jsx("p",{style:{margin:0,color:"#a0aec0"},children:"View completed and archived claims for record keeping"})]}),f.jsxs(Zt,{to:"/admin/vendors",style:{background:"#2d3748",border:"1px solid #4a5568",padding:24,borderRadius:12,textDecoration:"none",color:"#e2e8f0",boxShadow:"0 4px 6px rgba(0,0,0,0.5)",transition:"transform 0.2s"},onMouseOver:i=>i.currentTarget.style.transform="translateY(-2px)",onMouseOut:i=>i.currentTarget.style.transform="translateY(0)",children:[f.jsx("div",{style:{fontSize:48,marginBottom:12},children:""}),f.jsx("h3",{style:{margin:0,marginBottom:8,color:"#e2e8f0"},children:"Manage Vendors"}),f.jsx("p",{style:{margin:0,color:"#a0aec0"},children:"Add and edit vendors that provide payouts"})]}),f.jsxs(Zt,{to:"/admin/payouts",style:{background:"#2d3748",border:"1px solid #4a5568",padding:24,borderRadius:12,textDecoration:"none",color:"#e2e8f0",boxShadow:"0 4px 6px rgba(0,0,0,0.5)",transition:"transform 0.2s"},onMouseOver:i=>i.currentTarget.style.transform="translateY(-2px)",onMouseOut:i=>i.currentTarget.style.transform="translateY(0)",children:[f.jsx("div",{style:{fontSize:48,marginBottom:12},children:""}),f.jsx("h3",{style:{margin:0,marginBottom:8,color:"#e2e8f0"},children:"Payout Dashboard"}),f.jsx("p",{style:{margin:0,color:"#a0aec0"},children:"View upcoming vendor payouts and revenue projections"})]}),f.jsxs(Zt,{to:"/admin/intelligence",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"1px solid #8b5cf6",padding:24,borderRadius:12,textDecoration:"none",color:"#e2e8f0",boxShadow:"0 4px 6px rgba(0,0,0,0.5)",transition:"transform 0.2s"},onMouseOver:i=>i.currentTarget.style.transform="translateY(-2px)",onMouseOut:i=>i.currentTarget.style.transform="translateY(0)",children:[f.jsx("div",{style:{fontSize:48,marginBottom:12},children:""}),f.jsx("h3",{style:{margin:0,marginBottom:8,color:"#e2e8f0"},children:"Business Intelligence"}),f.jsx("p",{style:{margin:0,color:"#e2e8f0"},children:"Analytics dashboard with live metrics, charts, and forecasts"})]})]}):f.jsxs("div",{style:{display:"grid",gap:16},children:[f.jsxs(Zt,{to:"/my-claims",style:{background:"#2d3748",border:"1px solid #4a5568",padding:24,borderRadius:12,textDecoration:"none",color:"#e2e8f0",boxShadow:"0 4px 6px rgba(0,0,0,0.5)",transition:"transform 0.2s"},onMouseOver:i=>i.currentTarget.style.transform="translateY(-2px)",onMouseOut:i=>i.currentTarget.style.transform="translateY(0)",children:[f.jsx("div",{style:{fontSize:48,marginBottom:12},children:""}),f.jsx("h3",{style:{margin:0,marginBottom:8,color:"#e2e8f0"},children:"My Claims"}),f.jsx("p",{style:{margin:0,color:"#a0aec0"},children:"View claims assigned to you and manage appraisals"})]}),f.jsxs(Zt,{to:"/my-claims?view=calendar",style:{background:"#2d3748",border:"1px solid #4a5568",padding:24,borderRadius:12,textDecoration:"none",color:"#e2e8f0",boxShadow:"0 4px 6px rgba(0,0,0,0.5)",transition:"transform 0.2s"},onMouseOver:i=>i.currentTarget.style.transform="translateY(-2px)",onMouseOut:i=>i.currentTarget.style.transform="translateY(0)",children:[f.jsx("div",{style:{fontSize:48,marginBottom:12},children:""}),f.jsx("h3",{style:{margin:0,marginBottom:8,color:"#e2e8f0"},children:"Calendar View"}),f.jsx("p",{style:{margin:0,color:"#a0aec0"},children:"View and schedule your claims on a monthly calendar"})]})]})]})}):null}function JA(){const[t,e]=q.useState(""),[n,r]=q.useState(""),i=ls(),s=async()=>{console.log("Attempting login with:",t);const{data:o,error:a}=await Ne.auth.signInWithPassword({email:t,password:n});if(a)return console.error("Login error:",a),alert(a.message);console.log("Login successful:",o),i("/")};return f.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1a202c 0%, #2d3748 100%)"},children:f.jsxs("div",{style:{background:"rgba(45, 55, 72, 0.85)",backdropFilter:"blur(10px)",padding:40,borderRadius:16,boxShadow:"0 15px 35px rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)",width:"100%",maxWidth:400},children:[f.jsx("h2",{style:{marginTop:0,marginBottom:32,textAlign:"center",color:"#e2e8f0"},children:"Auto Appraisal Login"}),f.jsxs("div",{style:{display:"grid",gap:16},children:[f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",marginBottom:8,fontWeight:"bold",color:"#e2e8f0"},children:"Email"}),f.jsx("input",{placeholder:"Enter your email",value:t,onChange:o=>e(o.target.value),style:{width:"100%",padding:12,fontSize:16,border:"1px solid #4a5568",borderRadius:6,boxSizing:"border-box",background:"#2d3748",color:"#e2e8f0"}})]}),f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",marginBottom:8,fontWeight:"bold",color:"#e2e8f0"},children:"Password"}),f.jsx("input",{placeholder:"Enter your password",type:"password",value:n,onChange:o=>r(o.target.value),style:{width:"100%",padding:12,fontSize:16,border:"1px solid #4a5568",borderRadius:6,boxSizing:"border-box",background:"#2d3748",color:"#e2e8f0"}})]}),f.jsx("button",{onClick:s,style:{width:"100%",padding:14,fontSize:16,fontWeight:"bold",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:6,cursor:"pointer",marginTop:8},onMouseOver:o=>o.currentTarget.style.background="linear-gradient(135deg, #764ba2 0%, #667eea 100%)",onMouseOut:o=>o.currentTarget.style.background="linear-gradient(135deg, #667eea 0%, #764ba2 100%)",children:"Sign In"})]})]})})}function Ow(t,e){const n=q.useRef(e);q.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const XA=1;function QA(t){return Object.freeze({__version:XA,map:t})}function e4(t,e){return Object.freeze({...t,...e})}const Dw=q.createContext(null),Rw=Dw.Provider;function Mw(){const t=q.useContext(Dw);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function t4(t){function e(n,r){const{instance:i,context:s}=t(n).current;return q.useImperativeHandle(r,()=>i),n.children==null?null:xl.createElement(Rw,{value:s},n.children)}return q.forwardRef(e)}function n4(t){function e(n,r){const[i,s]=q.useState(!1),{instance:o}=t(n,s).current;q.useImperativeHandle(r,()=>o),q.useEffect(function(){i&&o.update()},[o,i,n.children]);const a=o._contentNode;return a?Ud.createPortal(n.children,a):null}return q.forwardRef(e)}function r4(t){function e(n,r){const{instance:i}=t(n).current;return q.useImperativeHandle(r,()=>i),null}return q.forwardRef(e)}function Lw(t,e){const n=q.useRef();q.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function lg(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function i4(t,e){return function(r,i){const s=Mw(),o=t(lg(r,s),s);return Ow(s.map,r.attribution),Lw(o.current,r.eventHandlers),e(o.current,s,r,i),o}}var Fp={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(Ha,function(n){var r="1.9.4";function i(l){var d,v,k,O;for(v=1,k=arguments.length;v<k;v++){O=arguments[v];for(d in O)l[d]=O[d]}return l}var s=Object.create||function(){function l(){}return function(d){return l.prototype=d,new l}}();function o(l,d){var v=Array.prototype.slice;if(l.bind)return l.bind.apply(l,v.call(arguments,1));var k=v.call(arguments,2);return function(){return l.apply(d,k.length?k.concat(v.call(arguments)):arguments)}}var a=0;function c(l){return"_leaflet_id"in l||(l._leaflet_id=++a),l._leaflet_id}function u(l,d,v){var k,O,U,te;return te=function(){k=!1,O&&(U.apply(v,O),O=!1)},U=function(){k?O=arguments:(l.apply(v,arguments),setTimeout(te,d),k=!0)},U}function h(l,d,v){var k=d[1],O=d[0],U=k-O;return l===k&&v?l:((l-O)%U+U)%U+O}function p(){return!1}function m(l,d){if(d===!1)return l;var v=Math.pow(10,d===void 0?6:d);return Math.round(l*v)/v}function g(l){return l.trim?l.trim():l.replace(/^\s+|\s+$/g,"")}function y(l){return g(l).split(/\s+/)}function _(l,d){Object.prototype.hasOwnProperty.call(l,"options")||(l.options=l.options?s(l.options):{});for(var v in d)l.options[v]=d[v];return l.options}function b(l,d,v){var k=[];for(var O in l)k.push(encodeURIComponent(v?O.toUpperCase():O)+"="+encodeURIComponent(l[O]));return(!d||d.indexOf("?")===-1?"?":"&")+k.join("&")}var x=/\{ *([\w_ -]+) *\}/g;function w(l,d){return l.replace(x,function(v,k){var O=d[k];if(O===void 0)throw new Error("No value provided for variable "+v);return typeof O=="function"&&(O=O(d)),O})}var S=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function C(l,d){for(var v=0;v<l.length;v++)if(l[v]===d)return v;return-1}var j="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function D(l){return window["webkit"+l]||window["moz"+l]||window["ms"+l]}var P=0;function T(l){var d=+new Date,v=Math.max(0,16-(d-P));return P=d+v,window.setTimeout(l,v)}var A=window.requestAnimationFrame||D("RequestAnimationFrame")||T,F=window.cancelAnimationFrame||D("CancelAnimationFrame")||D("CancelRequestAnimationFrame")||function(l){window.clearTimeout(l)};function V(l,d,v){if(v&&A===T)l.call(d);else return A.call(window,o(l,d))}function R(l){l&&F.call(window,l)}var B={__proto__:null,extend:i,create:s,bind:o,get lastId(){return a},stamp:c,throttle:u,wrapNum:h,falseFn:p,formatNum:m,trim:g,splitWords:y,setOptions:_,getParamString:b,template:w,isArray:S,indexOf:C,emptyImageUrl:j,requestFn:A,cancelFn:F,requestAnimFrame:V,cancelAnimFrame:R};function E(){}E.extend=function(l){var d=function(){_(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},v=d.__super__=this.prototype,k=s(v);k.constructor=d,d.prototype=k;for(var O in this)Object.prototype.hasOwnProperty.call(this,O)&&O!=="prototype"&&O!=="__super__"&&(d[O]=this[O]);return l.statics&&i(d,l.statics),l.includes&&(Z(l.includes),i.apply(null,[k].concat(l.includes))),i(k,l),delete k.statics,delete k.includes,k.options&&(k.options=v.options?s(v.options):{},i(k.options,l.options)),k._initHooks=[],k.callInitHooks=function(){if(!this._initHooksCalled){v.callInitHooks&&v.callInitHooks.call(this),this._initHooksCalled=!0;for(var U=0,te=k._initHooks.length;U<te;U++)k._initHooks[U].call(this)}},d},E.include=function(l){var d=this.prototype.options;return i(this.prototype,l),l.options&&(this.prototype.options=d,this.mergeOptions(l.options)),this},E.mergeOptions=function(l){return i(this.prototype.options,l),this},E.addInitHook=function(l){var d=Array.prototype.slice.call(arguments,1),v=typeof l=="function"?l:function(){this[l].apply(this,d)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(v),this};function Z(l){if(!(typeof L>"u"||!L||!L.Mixin)){l=S(l)?l:[l];for(var d=0;d<l.length;d++)l[d]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var $={on:function(l,d,v){if(typeof l=="object")for(var k in l)this._on(k,l[k],d);else{l=y(l);for(var O=0,U=l.length;O<U;O++)this._on(l[O],d,v)}return this},off:function(l,d,v){if(!arguments.length)delete this._events;else if(typeof l=="object")for(var k in l)this._off(k,l[k],d);else{l=y(l);for(var O=arguments.length===1,U=0,te=l.length;U<te;U++)O?this._off(l[U]):this._off(l[U],d,v)}return this},_on:function(l,d,v,k){if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}if(this._listens(l,d,v)===!1){v===this&&(v=void 0);var O={fn:d,ctx:v};k&&(O.once=!0),this._events=this._events||{},this._events[l]=this._events[l]||[],this._events[l].push(O)}},_off:function(l,d,v){var k,O,U;if(this._events&&(k=this._events[l],!!k)){if(arguments.length===1){if(this._firingCount)for(O=0,U=k.length;O<U;O++)k[O].fn=p;delete this._events[l];return}if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}var te=this._listens(l,d,v);if(te!==!1){var ue=k[te];this._firingCount&&(ue.fn=p,this._events[l]=k=k.slice()),k.splice(te,1)}}},fire:function(l,d,v){if(!this.listens(l,v))return this;var k=i({},d,{type:l,target:this,sourceTarget:d&&d.sourceTarget||this});if(this._events){var O=this._events[l];if(O){this._firingCount=this._firingCount+1||1;for(var U=0,te=O.length;U<te;U++){var ue=O[U],me=ue.fn;ue.once&&this.off(l,me,ue.ctx),me.call(ue.ctx||this,k)}this._firingCount--}}return v&&this._propagateEvent(k),this},listens:function(l,d,v,k){typeof l!="string"&&console.warn('"string" type argument expected');var O=d;typeof d!="function"&&(k=!!d,O=void 0,v=void 0);var U=this._events&&this._events[l];if(U&&U.length&&this._listens(l,O,v)!==!1)return!0;if(k){for(var te in this._eventParents)if(this._eventParents[te].listens(l,d,v,k))return!0}return!1},_listens:function(l,d,v){if(!this._events)return!1;var k=this._events[l]||[];if(!d)return!!k.length;v===this&&(v=void 0);for(var O=0,U=k.length;O<U;O++)if(k[O].fn===d&&k[O].ctx===v)return O;return!1},once:function(l,d,v){if(typeof l=="object")for(var k in l)this._on(k,l[k],d,!0);else{l=y(l);for(var O=0,U=l.length;O<U;O++)this._on(l[O],d,v,!0)}return this},addEventParent:function(l){return this._eventParents=this._eventParents||{},this._eventParents[c(l)]=l,this},removeEventParent:function(l){return this._eventParents&&delete this._eventParents[c(l)],this},_propagateEvent:function(l){for(var d in this._eventParents)this._eventParents[d].fire(l.type,i({layer:l.target,propagatedFrom:l.target},l),!0)}};$.addEventListener=$.on,$.removeEventListener=$.clearAllEventListeners=$.off,$.addOneTimeEventListener=$.once,$.fireEvent=$.fire,$.hasEventListeners=$.listens;var I=E.extend($);function z(l,d,v){this.x=v?Math.round(l):l,this.y=v?Math.round(d):d}var N=Math.trunc||function(l){return l>0?Math.floor(l):Math.ceil(l)};z.prototype={clone:function(){return new z(this.x,this.y)},add:function(l){return this.clone()._add(H(l))},_add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.clone()._subtract(H(l))},_subtract:function(l){return this.x-=l.x,this.y-=l.y,this},divideBy:function(l){return this.clone()._divideBy(l)},_divideBy:function(l){return this.x/=l,this.y/=l,this},multiplyBy:function(l){return this.clone()._multiplyBy(l)},_multiplyBy:function(l){return this.x*=l,this.y*=l,this},scaleBy:function(l){return new z(this.x*l.x,this.y*l.y)},unscaleBy:function(l){return new z(this.x/l.x,this.y/l.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=N(this.x),this.y=N(this.y),this},distanceTo:function(l){l=H(l);var d=l.x-this.x,v=l.y-this.y;return Math.sqrt(d*d+v*v)},equals:function(l){return l=H(l),l.x===this.x&&l.y===this.y},contains:function(l){return l=H(l),Math.abs(l.x)<=Math.abs(this.x)&&Math.abs(l.y)<=Math.abs(this.y)},toString:function(){return"Point("+m(this.x)+", "+m(this.y)+")"}};function H(l,d,v){return l instanceof z?l:S(l)?new z(l[0],l[1]):l==null?l:typeof l=="object"&&"x"in l&&"y"in l?new z(l.x,l.y):new z(l,d,v)}function K(l,d){if(l)for(var v=d?[l,d]:l,k=0,O=v.length;k<O;k++)this.extend(v[k])}K.prototype={extend:function(l){var d,v;if(!l)return this;if(l instanceof z||typeof l[0]=="number"||"x"in l)d=v=H(l);else if(l=Y(l),d=l.min,v=l.max,!d||!v)return this;return!this.min&&!this.max?(this.min=d.clone(),this.max=v.clone()):(this.min.x=Math.min(d.x,this.min.x),this.max.x=Math.max(v.x,this.max.x),this.min.y=Math.min(d.y,this.min.y),this.max.y=Math.max(v.y,this.max.y)),this},getCenter:function(l){return H((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,l)},getBottomLeft:function(){return H(this.min.x,this.max.y)},getTopRight:function(){return H(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(l){var d,v;return typeof l[0]=="number"||l instanceof z?l=H(l):l=Y(l),l instanceof K?(d=l.min,v=l.max):d=v=l,d.x>=this.min.x&&v.x<=this.max.x&&d.y>=this.min.y&&v.y<=this.max.y},intersects:function(l){l=Y(l);var d=this.min,v=this.max,k=l.min,O=l.max,U=O.x>=d.x&&k.x<=v.x,te=O.y>=d.y&&k.y<=v.y;return U&&te},overlaps:function(l){l=Y(l);var d=this.min,v=this.max,k=l.min,O=l.max,U=O.x>d.x&&k.x<v.x,te=O.y>d.y&&k.y<v.y;return U&&te},isValid:function(){return!!(this.min&&this.max)},pad:function(l){var d=this.min,v=this.max,k=Math.abs(d.x-v.x)*l,O=Math.abs(d.y-v.y)*l;return Y(H(d.x-k,d.y-O),H(v.x+k,v.y+O))},equals:function(l){return l?(l=Y(l),this.min.equals(l.getTopLeft())&&this.max.equals(l.getBottomRight())):!1}};function Y(l,d){return!l||l instanceof K?l:new K(l,d)}function ce(l,d){if(l)for(var v=d?[l,d]:l,k=0,O=v.length;k<O;k++)this.extend(v[k])}ce.prototype={extend:function(l){var d=this._southWest,v=this._northEast,k,O;if(l instanceof X)k=l,O=l;else if(l instanceof ce){if(k=l._southWest,O=l._northEast,!k||!O)return this}else return l?this.extend(_e(l)||ne(l)):this;return!d&&!v?(this._southWest=new X(k.lat,k.lng),this._northEast=new X(O.lat,O.lng)):(d.lat=Math.min(k.lat,d.lat),d.lng=Math.min(k.lng,d.lng),v.lat=Math.max(O.lat,v.lat),v.lng=Math.max(O.lng,v.lng)),this},pad:function(l){var d=this._southWest,v=this._northEast,k=Math.abs(d.lat-v.lat)*l,O=Math.abs(d.lng-v.lng)*l;return new ce(new X(d.lat-k,d.lng-O),new X(v.lat+k,v.lng+O))},getCenter:function(){return new X((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new X(this.getNorth(),this.getWest())},getSouthEast:function(){return new X(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(l){typeof l[0]=="number"||l instanceof X||"lat"in l?l=_e(l):l=ne(l);var d=this._southWest,v=this._northEast,k,O;return l instanceof ce?(k=l.getSouthWest(),O=l.getNorthEast()):k=O=l,k.lat>=d.lat&&O.lat<=v.lat&&k.lng>=d.lng&&O.lng<=v.lng},intersects:function(l){l=ne(l);var d=this._southWest,v=this._northEast,k=l.getSouthWest(),O=l.getNorthEast(),U=O.lat>=d.lat&&k.lat<=v.lat,te=O.lng>=d.lng&&k.lng<=v.lng;return U&&te},overlaps:function(l){l=ne(l);var d=this._southWest,v=this._northEast,k=l.getSouthWest(),O=l.getNorthEast(),U=O.lat>d.lat&&k.lat<v.lat,te=O.lng>d.lng&&k.lng<v.lng;return U&&te},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(l,d){return l?(l=ne(l),this._southWest.equals(l.getSouthWest(),d)&&this._northEast.equals(l.getNorthEast(),d)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ne(l,d){return l instanceof ce?l:new ce(l,d)}function X(l,d,v){if(isNaN(l)||isNaN(d))throw new Error("Invalid LatLng object: ("+l+", "+d+")");this.lat=+l,this.lng=+d,v!==void 0&&(this.alt=+v)}X.prototype={equals:function(l,d){if(!l)return!1;l=_e(l);var v=Math.max(Math.abs(this.lat-l.lat),Math.abs(this.lng-l.lng));return v<=(d===void 0?1e-9:d)},toString:function(l){return"LatLng("+m(this.lat,l)+", "+m(this.lng,l)+")"},distanceTo:function(l){return Pe.distance(this,_e(l))},wrap:function(){return Pe.wrapLatLng(this)},toBounds:function(l){var d=180*l/40075017,v=d/Math.cos(Math.PI/180*this.lat);return ne([this.lat-d,this.lng-v],[this.lat+d,this.lng+v])},clone:function(){return new X(this.lat,this.lng,this.alt)}};function _e(l,d,v){return l instanceof X?l:S(l)&&typeof l[0]!="object"?l.length===3?new X(l[0],l[1],l[2]):l.length===2?new X(l[0],l[1]):null:l==null?l:typeof l=="object"&&"lat"in l?new X(l.lat,"lng"in l?l.lng:l.lon,l.alt):d===void 0?null:new X(l,d,v)}var Te={latLngToPoint:function(l,d){var v=this.projection.project(l),k=this.scale(d);return this.transformation._transform(v,k)},pointToLatLng:function(l,d){var v=this.scale(d),k=this.transformation.untransform(l,v);return this.projection.unproject(k)},project:function(l){return this.projection.project(l)},unproject:function(l){return this.projection.unproject(l)},scale:function(l){return 256*Math.pow(2,l)},zoom:function(l){return Math.log(l/256)/Math.LN2},getProjectedBounds:function(l){if(this.infinite)return null;var d=this.projection.bounds,v=this.scale(l),k=this.transformation.transform(d.min,v),O=this.transformation.transform(d.max,v);return new K(k,O)},infinite:!1,wrapLatLng:function(l){var d=this.wrapLng?h(l.lng,this.wrapLng,!0):l.lng,v=this.wrapLat?h(l.lat,this.wrapLat,!0):l.lat,k=l.alt;return new X(v,d,k)},wrapLatLngBounds:function(l){var d=l.getCenter(),v=this.wrapLatLng(d),k=d.lat-v.lat,O=d.lng-v.lng;if(k===0&&O===0)return l;var U=l.getSouthWest(),te=l.getNorthEast(),ue=new X(U.lat-k,U.lng-O),me=new X(te.lat-k,te.lng-O);return new ce(ue,me)}},Pe=i({},Te,{wrapLng:[-180,180],R:6371e3,distance:function(l,d){var v=Math.PI/180,k=l.lat*v,O=d.lat*v,U=Math.sin((d.lat-l.lat)*v/2),te=Math.sin((d.lng-l.lng)*v/2),ue=U*U+Math.cos(k)*Math.cos(O)*te*te,me=2*Math.atan2(Math.sqrt(ue),Math.sqrt(1-ue));return this.R*me}}),le=6378137,ke={R:le,MAX_LATITUDE:85.0511287798,project:function(l){var d=Math.PI/180,v=this.MAX_LATITUDE,k=Math.max(Math.min(v,l.lat),-v),O=Math.sin(k*d);return new z(this.R*l.lng*d,this.R*Math.log((1+O)/(1-O))/2)},unproject:function(l){var d=180/Math.PI;return new X((2*Math.atan(Math.exp(l.y/this.R))-Math.PI/2)*d,l.x*d/this.R)},bounds:function(){var l=le*Math.PI;return new K([-l,-l],[l,l])}()};function De(l,d,v,k){if(S(l)){this._a=l[0],this._b=l[1],this._c=l[2],this._d=l[3];return}this._a=l,this._b=d,this._c=v,this._d=k}De.prototype={transform:function(l,d){return this._transform(l.clone(),d)},_transform:function(l,d){return d=d||1,l.x=d*(this._a*l.x+this._b),l.y=d*(this._c*l.y+this._d),l},untransform:function(l,d){return d=d||1,new z((l.x/d-this._b)/this._a,(l.y/d-this._d)/this._c)}};function Re(l,d,v,k){return new De(l,d,v,k)}var Ge=i({},Pe,{code:"EPSG:3857",projection:ke,transformation:function(){var l=.5/(Math.PI*ke.R);return Re(l,.5,-l,.5)}()}),M=i({},Ge,{code:"EPSG:900913"});function he(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function ae(l,d){var v="",k,O,U,te,ue,me;for(k=0,U=l.length;k<U;k++){for(ue=l[k],O=0,te=ue.length;O<te;O++)me=ue[O],v+=(O?"L":"M")+me.x+" "+me.y;v+=d?se.svg?"z":"x":""}return v||"M0 0"}var J=document.documentElement.style,G="ActiveXObject"in window,re=G&&!document.addEventListener,de="msLaunchUri"in navigator&&!("documentMode"in document),ge=W("webkit"),oe=W("android"),ee=W("android 2")||W("android 3"),fe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ye=oe&&W("Google")&&fe<537&&!("AudioNode"in window),be=!!window.opera,Le=!de&&W("chrome"),Ae=W("gecko")&&!ge&&!be&&!G,We=!Le&&W("safari"),Qe=W("phantom"),Xe="OTransition"in J,gt=navigator.platform.indexOf("Win")===0,He=G&&"transition"in J,yt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ee,zt="MozPerspective"in J,Lt=!window.L_DISABLE_3D&&(He||yt||zt)&&!Xe&&!Qe,sn=typeof orientation<"u"||W("mobile"),On=sn&&ge,dn=sn&&yt,Sn=!window.PointerEvent&&window.MSPointerEvent,Vn=!!(window.PointerEvent||Sn),Ct="ontouchstart"in window||!!window.TouchEvent,Ut=!window.L_NO_TOUCH&&(Ct||Vn),Zn=sn&&be,yr=sn&&Ae,Mr=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,hn=function(){var l=!1;try{var d=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("testPassiveEventSupport",p,d),window.removeEventListener("testPassiveEventSupport",p,d)}catch{}return l}(),fn=function(){return!!document.createElement("canvas").getContext}(),on=!!(document.createElementNS&&he("svg").createSVGRect),Dn=!!on&&function(){var l=document.createElement("div");return l.innerHTML="<svg/>",(l.firstChild&&l.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Q=!on&&function(){try{var l=document.createElement("div");l.innerHTML='<v:shape adj="1"/>';var d=l.firstChild;return d.style.behavior="url(#default#VML)",d&&typeof d.adj=="object"}catch{return!1}}(),ie=navigator.platform.indexOf("Mac")===0,pe=navigator.platform.indexOf("Linux")===0;function W(l){return navigator.userAgent.toLowerCase().indexOf(l)>=0}var se={ie:G,ielt9:re,edge:de,webkit:ge,android:oe,android23:ee,androidStock:ye,opera:be,chrome:Le,gecko:Ae,safari:We,phantom:Qe,opera12:Xe,win:gt,ie3d:He,webkit3d:yt,gecko3d:zt,any3d:Lt,mobile:sn,mobileWebkit:On,mobileWebkit3d:dn,msPointer:Sn,pointer:Vn,touch:Ut,touchNative:Ct,mobileOpera:Zn,mobileGecko:yr,retina:Mr,passiveEvents:hn,canvas:fn,svg:on,vml:Q,inlineSvg:Dn,mac:ie,linux:pe},Ee=se.msPointer?"MSPointerDown":"pointerdown",ve=se.msPointer?"MSPointerMove":"pointermove",xe=se.msPointer?"MSPointerUp":"pointerup",Se=se.msPointer?"MSPointerCancel":"pointercancel",je={touchstart:Ee,touchmove:ve,touchend:xe,touchcancel:Se},Oe={touchstart:ir,touchmove:Rn,touchend:Rn,touchcancel:Rn},Fe={},Ye=!1;function bt(l,d,v){return d==="touchstart"&&us(),Oe[d]?(v=Oe[d].bind(this,v),l.addEventListener(je[d],v,!1),v):(console.warn("wrong event specified:",d),p)}function lt(l,d,v){if(!je[d]){console.warn("wrong event specified:",d);return}l.removeEventListener(je[d],v,!1)}function st(l){Fe[l.pointerId]=l}function Tt(l){Fe[l.pointerId]&&(Fe[l.pointerId]=l)}function Gr(l){delete Fe[l.pointerId]}function us(){Ye||(document.addEventListener(Ee,st,!0),document.addEventListener(ve,Tt,!0),document.addEventListener(xe,Gr,!0),document.addEventListener(Se,Gr,!0),Ye=!0)}function Rn(l,d){if(d.pointerType!==(d.MSPOINTER_TYPE_MOUSE||"mouse")){d.touches=[];for(var v in Fe)d.touches.push(Fe[v]);d.changedTouches=[d],l(d)}}function ir(l,d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&an(d),Rn(l,d)}function ga(l){var d={},v,k;for(k in l)v=l[k],d[k]=v&&v.bind?v.bind(l):v;return l=d,d.type="dblclick",d.detail=2,d.isTrusted=!1,d._simulated=!0,d}var ds=200;function Kr(l,d){l.addEventListener("dblclick",d);var v=0,k;function O(U){if(U.detail!==1){k=U.detail;return}if(!(U.pointerType==="mouse"||U.sourceCapabilities&&!U.sourceCapabilities.firesTouchEvents)){var te=Rg(U);if(!(te.some(function(me){return me instanceof HTMLLabelElement&&me.attributes.for})&&!te.some(function(me){return me instanceof HTMLInputElement||me instanceof HTMLSelectElement}))){var ue=Date.now();ue-v<=ds?(k++,k===2&&d(ga(U))):k=1,v=ue}}}return l.addEventListener("click",O),{dblclick:d,simDblclick:O}}function so(l,d){l.removeEventListener("dblclick",d.dblclick),l.removeEventListener("click",d.simDblclick)}var Si=oc(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),et=oc(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),wt=et==="webkitTransition"||et==="OTransition"?et+"End":"transitionend";function Jr(l){return typeof l=="string"?document.getElementById(l):l}function _r(l,d){var v=l.style[d]||l.currentStyle&&l.currentStyle[d];if((!v||v==="auto")&&document.defaultView){var k=document.defaultView.getComputedStyle(l,null);v=k?k[d]:null}return v==="auto"?null:v}function $e(l,d,v){var k=document.createElement(l);return k.className=d||"",v&&v.appendChild(k),k}function ct(l){var d=l.parentNode;d&&d.removeChild(l)}function hs(l){for(;l.firstChild;)l.removeChild(l.firstChild)}function ki(l){var d=l.parentNode;d&&d.lastChild!==l&&d.appendChild(l)}function oo(l){var d=l.parentNode;d&&d.firstChild!==l&&d.insertBefore(l,d.firstChild)}function rh(l,d){if(l.classList!==void 0)return l.classList.contains(d);var v=sc(l);return v.length>0&&new RegExp("(^|\\s)"+d+"(\\s|$)").test(v)}function Ke(l,d){if(l.classList!==void 0)for(var v=y(d),k=0,O=v.length;k<O;k++)l.classList.add(v[k]);else if(!rh(l,d)){var U=sc(l);ih(l,(U?U+" ":"")+d)}}function Nt(l,d){l.classList!==void 0?l.classList.remove(d):ih(l,g((" "+sc(l)+" ").replace(" "+d+" "," ")))}function ih(l,d){l.className.baseVal===void 0?l.className=d:l.className.baseVal=d}function sc(l){return l.correspondingElement&&(l=l.correspondingElement),l.className.baseVal===void 0?l.className:l.className.baseVal}function sr(l,d){"opacity"in l.style?l.style.opacity=d:"filter"in l.style&&yS(l,d)}function yS(l,d){var v=!1,k="DXImageTransform.Microsoft.Alpha";try{v=l.filters.item(k)}catch{if(d===1)return}d=Math.round(d*100),v?(v.Enabled=d!==100,v.Opacity=d):l.style.filter+=" progid:"+k+"(opacity="+d+")"}function oc(l){for(var d=document.documentElement.style,v=0;v<l.length;v++)if(l[v]in d)return l[v];return!1}function fs(l,d,v){var k=d||new z(0,0);l.style[Si]=(se.ie3d?"translate("+k.x+"px,"+k.y+"px)":"translate3d("+k.x+"px,"+k.y+"px,0)")+(v?" scale("+v+")":"")}function Wt(l,d){l._leaflet_pos=d,se.any3d?fs(l,d):(l.style.left=d.x+"px",l.style.top=d.y+"px")}function ps(l){return l._leaflet_pos||new z(0,0)}var ya,_a,sh;if("onselectstart"in document)ya=function(){qe(window,"selectstart",an)},_a=function(){_t(window,"selectstart",an)};else{var va=oc(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ya=function(){if(va){var l=document.documentElement.style;sh=l[va],l[va]="none"}},_a=function(){va&&(document.documentElement.style[va]=sh,sh=void 0)}}function oh(){qe(window,"dragstart",an)}function ah(){_t(window,"dragstart",an)}var ac,lh;function ch(l){for(;l.tabIndex===-1;)l=l.parentNode;l.style&&(lc(),ac=l,lh=l.style.outlineStyle,l.style.outlineStyle="none",qe(window,"keydown",lc))}function lc(){ac&&(ac.style.outlineStyle=lh,ac=void 0,lh=void 0,_t(window,"keydown",lc))}function Og(l){do l=l.parentNode;while((!l.offsetWidth||!l.offsetHeight)&&l!==document.body);return l}function uh(l){var d=l.getBoundingClientRect();return{x:d.width/l.offsetWidth||1,y:d.height/l.offsetHeight||1,boundingClientRect:d}}var _S={__proto__:null,TRANSFORM:Si,TRANSITION:et,TRANSITION_END:wt,get:Jr,getStyle:_r,create:$e,remove:ct,empty:hs,toFront:ki,toBack:oo,hasClass:rh,addClass:Ke,removeClass:Nt,setClass:ih,getClass:sc,setOpacity:sr,testProp:oc,setTransform:fs,setPosition:Wt,getPosition:ps,get disableTextSelection(){return ya},get enableTextSelection(){return _a},disableImageDrag:oh,enableImageDrag:ah,preventOutline:ch,restoreOutline:lc,getSizedParentNode:Og,getScale:uh};function qe(l,d,v,k){if(d&&typeof d=="object")for(var O in d)hh(l,O,d[O],v);else{d=y(d);for(var U=0,te=d.length;U<te;U++)hh(l,d[U],v,k)}return this}var Lr="_leaflet_events";function _t(l,d,v,k){if(arguments.length===1)Dg(l),delete l[Lr];else if(d&&typeof d=="object")for(var O in d)fh(l,O,d[O],v);else if(d=y(d),arguments.length===2)Dg(l,function(ue){return C(d,ue)!==-1});else for(var U=0,te=d.length;U<te;U++)fh(l,d[U],v,k);return this}function Dg(l,d){for(var v in l[Lr]){var k=v.split(/\d/)[0];(!d||d(k))&&fh(l,k,null,null,v)}}var dh={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function hh(l,d,v,k){var O=d+c(v)+(k?"_"+c(k):"");if(l[Lr]&&l[Lr][O])return this;var U=function(ue){return v.call(k||l,ue||window.event)},te=U;!se.touchNative&&se.pointer&&d.indexOf("touch")===0?U=bt(l,d,U):se.touch&&d==="dblclick"?U=Kr(l,U):"addEventListener"in l?d==="touchstart"||d==="touchmove"||d==="wheel"||d==="mousewheel"?l.addEventListener(dh[d]||d,U,se.passiveEvents?{passive:!1}:!1):d==="mouseenter"||d==="mouseleave"?(U=function(ue){ue=ue||window.event,mh(l,ue)&&te(ue)},l.addEventListener(dh[d],U,!1)):l.addEventListener(d,te,!1):l.attachEvent("on"+d,U),l[Lr]=l[Lr]||{},l[Lr][O]=U}function fh(l,d,v,k,O){O=O||d+c(v)+(k?"_"+c(k):"");var U=l[Lr]&&l[Lr][O];if(!U)return this;!se.touchNative&&se.pointer&&d.indexOf("touch")===0?lt(l,d,U):se.touch&&d==="dblclick"?so(l,U):"removeEventListener"in l?l.removeEventListener(dh[d]||d,U,!1):l.detachEvent("on"+d,U),l[Lr][O]=null}function ms(l){return l.stopPropagation?l.stopPropagation():l.originalEvent?l.originalEvent._stopped=!0:l.cancelBubble=!0,this}function ph(l){return hh(l,"wheel",ms),this}function xa(l){return qe(l,"mousedown touchstart dblclick contextmenu",ms),l._leaflet_disable_click=!0,this}function an(l){return l.preventDefault?l.preventDefault():l.returnValue=!1,this}function gs(l){return an(l),ms(l),this}function Rg(l){if(l.composedPath)return l.composedPath();for(var d=[],v=l.target;v;)d.push(v),v=v.parentNode;return d}function Mg(l,d){if(!d)return new z(l.clientX,l.clientY);var v=uh(d),k=v.boundingClientRect;return new z((l.clientX-k.left)/v.x-d.clientLeft,(l.clientY-k.top)/v.y-d.clientTop)}var vS=se.linux&&se.chrome?window.devicePixelRatio:se.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Lg(l){return se.edge?l.wheelDeltaY/2:l.deltaY&&l.deltaMode===0?-l.deltaY/vS:l.deltaY&&l.deltaMode===1?-l.deltaY*20:l.deltaY&&l.deltaMode===2?-l.deltaY*60:l.deltaX||l.deltaZ?0:l.wheelDelta?(l.wheelDeltaY||l.wheelDelta)/2:l.detail&&Math.abs(l.detail)<32765?-l.detail*20:l.detail?l.detail/-32765*60:0}function mh(l,d){var v=d.relatedTarget;if(!v)return!0;try{for(;v&&v!==l;)v=v.parentNode}catch{return!1}return v!==l}var xS={__proto__:null,on:qe,off:_t,stopPropagation:ms,disableScrollPropagation:ph,disableClickPropagation:xa,preventDefault:an,stop:gs,getPropagationPath:Rg,getMousePosition:Mg,getWheelDelta:Lg,isExternalTarget:mh,addListener:qe,removeListener:_t},Ig=I.extend({run:function(l,d,v,k){this.stop(),this._el=l,this._inProgress=!0,this._duration=v||.25,this._easeOutPower=1/Math.max(k||.5,.2),this._startPos=ps(l),this._offset=d.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(l){var d=+new Date-this._startTime,v=this._duration*1e3;d<v?this._runFrame(this._easeOut(d/v),l):(this._runFrame(1),this._complete())},_runFrame:function(l,d){var v=this._startPos.add(this._offset.multiplyBy(l));d&&v._round(),Wt(this._el,v),this.fire("step")},_complete:function(){R(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(l){return 1-Math.pow(1-l,this._easeOutPower)}}),ot=I.extend({options:{crs:Ge,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(l,d){d=_(this,d),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(l),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),d.maxBounds&&this.setMaxBounds(d.maxBounds),d.zoom!==void 0&&(this._zoom=this._limitZoom(d.zoom)),d.center&&d.zoom!==void 0&&this.setView(_e(d.center),d.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=et&&se.any3d&&!se.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),qe(this._proxy,wt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(l,d,v){if(d=d===void 0?this._zoom:this._limitZoom(d),l=this._limitCenter(_e(l),d,this.options.maxBounds),v=v||{},this._stop(),this._loaded&&!v.reset&&v!==!0){v.animate!==void 0&&(v.zoom=i({animate:v.animate},v.zoom),v.pan=i({animate:v.animate,duration:v.duration},v.pan));var k=this._zoom!==d?this._tryAnimatedZoom&&this._tryAnimatedZoom(l,d,v.zoom):this._tryAnimatedPan(l,v.pan);if(k)return clearTimeout(this._sizeTimer),this}return this._resetView(l,d,v.pan&&v.pan.noMoveStart),this},setZoom:function(l,d){return this._loaded?this.setView(this.getCenter(),l,{zoom:d}):(this._zoom=l,this)},zoomIn:function(l,d){return l=l||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+l,d)},zoomOut:function(l,d){return l=l||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-l,d)},setZoomAround:function(l,d,v){var k=this.getZoomScale(d),O=this.getSize().divideBy(2),U=l instanceof z?l:this.latLngToContainerPoint(l),te=U.subtract(O).multiplyBy(1-1/k),ue=this.containerPointToLatLng(O.add(te));return this.setView(ue,d,{zoom:v})},_getBoundsCenterZoom:function(l,d){d=d||{},l=l.getBounds?l.getBounds():ne(l);var v=H(d.paddingTopLeft||d.padding||[0,0]),k=H(d.paddingBottomRight||d.padding||[0,0]),O=this.getBoundsZoom(l,!1,v.add(k));if(O=typeof d.maxZoom=="number"?Math.min(d.maxZoom,O):O,O===1/0)return{center:l.getCenter(),zoom:O};var U=k.subtract(v).divideBy(2),te=this.project(l.getSouthWest(),O),ue=this.project(l.getNorthEast(),O),me=this.unproject(te.add(ue).divideBy(2).add(U),O);return{center:me,zoom:O}},fitBounds:function(l,d){if(l=ne(l),!l.isValid())throw new Error("Bounds are not valid.");var v=this._getBoundsCenterZoom(l,d);return this.setView(v.center,v.zoom,d)},fitWorld:function(l){return this.fitBounds([[-90,-180],[90,180]],l)},panTo:function(l,d){return this.setView(l,this._zoom,{pan:d})},panBy:function(l,d){if(l=H(l).round(),d=d||{},!l.x&&!l.y)return this.fire("moveend");if(d.animate!==!0&&!this.getSize().contains(l))return this._resetView(this.unproject(this.project(this.getCenter()).add(l)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ig,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),d.noMoveStart||this.fire("movestart"),d.animate!==!1){Ke(this._mapPane,"leaflet-pan-anim");var v=this._getMapPanePos().subtract(l).round();this._panAnim.run(this._mapPane,v,d.duration||.25,d.easeLinearity)}else this._rawPanBy(l),this.fire("move").fire("moveend");return this},flyTo:function(l,d,v){if(v=v||{},v.animate===!1||!se.any3d)return this.setView(l,d,v);this._stop();var k=this.project(this.getCenter()),O=this.project(l),U=this.getSize(),te=this._zoom;l=_e(l),d=d===void 0?te:d;var ue=Math.max(U.x,U.y),me=ue*this.getZoomScale(te,d),we=O.distanceTo(k)||1,Me=1.42,Ve=Me*Me;function tt($t){var xc=$t?-1:1,lk=$t?me:ue,ck=me*me-ue*ue+xc*Ve*Ve*we*we,uk=2*lk*Ve*we,Ch=ck/uk,gy=Math.sqrt(Ch*Ch+1)-Ch,dk=gy<1e-9?-18:Math.log(gy);return dk}function kn($t){return(Math.exp($t)-Math.exp(-$t))/2}function Qt($t){return(Math.exp($t)+Math.exp(-$t))/2}function ar($t){return kn($t)/Qt($t)}var Mn=tt(0);function fo($t){return ue*(Qt(Mn)/Qt(Mn+Me*$t))}function ik($t){return ue*(Qt(Mn)*ar(Mn+Me*$t)-kn(Mn))/Ve}function sk($t){return 1-Math.pow(1-$t,1.5)}var ok=Date.now(),py=(tt(1)-Mn)/Me,ak=v.duration?1e3*v.duration:1e3*py*.8;function my(){var $t=(Date.now()-ok)/ak,xc=sk($t)*py;$t<=1?(this._flyToFrame=V(my,this),this._move(this.unproject(k.add(O.subtract(k).multiplyBy(ik(xc)/we)),te),this.getScaleZoom(ue/fo(xc),te),{flyTo:!0})):this._move(l,d)._moveEnd(!0)}return this._moveStart(!0,v.noMoveStart),my.call(this),this},flyToBounds:function(l,d){var v=this._getBoundsCenterZoom(l,d);return this.flyTo(v.center,v.zoom,d)},setMaxBounds:function(l){return l=ne(l),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),l.isValid()?(this.options.maxBounds=l,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(l){var d=this.options.minZoom;return this.options.minZoom=l,this._loaded&&d!==l&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(l):this},setMaxZoom:function(l){var d=this.options.maxZoom;return this.options.maxZoom=l,this._loaded&&d!==l&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(l):this},panInsideBounds:function(l,d){this._enforcingBounds=!0;var v=this.getCenter(),k=this._limitCenter(v,this._zoom,ne(l));return v.equals(k)||this.panTo(k,d),this._enforcingBounds=!1,this},panInside:function(l,d){d=d||{};var v=H(d.paddingTopLeft||d.padding||[0,0]),k=H(d.paddingBottomRight||d.padding||[0,0]),O=this.project(this.getCenter()),U=this.project(l),te=this.getPixelBounds(),ue=Y([te.min.add(v),te.max.subtract(k)]),me=ue.getSize();if(!ue.contains(U)){this._enforcingBounds=!0;var we=U.subtract(ue.getCenter()),Me=ue.extend(U).getSize().subtract(me);O.x+=we.x<0?-Me.x:Me.x,O.y+=we.y<0?-Me.y:Me.y,this.panTo(this.unproject(O),d),this._enforcingBounds=!1}return this},invalidateSize:function(l){if(!this._loaded)return this;l=i({animate:!1,pan:!0},l===!0?{animate:!0}:l);var d=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var v=this.getSize(),k=d.divideBy(2).round(),O=v.divideBy(2).round(),U=k.subtract(O);return!U.x&&!U.y?this:(l.animate&&l.pan?this.panBy(U):(l.pan&&this._rawPanBy(U),this.fire("move"),l.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:d,newSize:v}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(l){if(l=this._locateOptions=i({timeout:1e4,watch:!1},l),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var d=o(this._handleGeolocationResponse,this),v=o(this._handleGeolocationError,this);return l.watch?this._locationWatchId=navigator.geolocation.watchPosition(d,v,l):navigator.geolocation.getCurrentPosition(d,v,l),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(l){if(this._container._leaflet_id){var d=l.code,v=l.message||(d===1?"permission denied":d===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:d,message:"Geolocation error: "+v+"."})}},_handleGeolocationResponse:function(l){if(this._container._leaflet_id){var d=l.coords.latitude,v=l.coords.longitude,k=new X(d,v),O=k.toBounds(l.coords.accuracy*2),U=this._locateOptions;if(U.setView){var te=this.getBoundsZoom(O);this.setView(k,U.maxZoom?Math.min(te,U.maxZoom):te)}var ue={latlng:k,bounds:O,timestamp:l.timestamp};for(var me in l.coords)typeof l.coords[me]=="number"&&(ue[me]=l.coords[me]);this.fire("locationfound",ue)}},addHandler:function(l,d){if(!d)return this;var v=this[l]=new d(this);return this._handlers.push(v),this.options[l]&&v.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ct(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(R(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var l;for(l in this._layers)this._layers[l].remove();for(l in this._panes)ct(this._panes[l]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(l,d){var v="leaflet-pane"+(l?" leaflet-"+l.replace("Pane","")+"-pane":""),k=$e("div",v,d||this._mapPane);return l&&(this._panes[l]=k),k},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var l=this.getPixelBounds(),d=this.unproject(l.getBottomLeft()),v=this.unproject(l.getTopRight());return new ce(d,v)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(l,d,v){l=ne(l),v=H(v||[0,0]);var k=this.getZoom()||0,O=this.getMinZoom(),U=this.getMaxZoom(),te=l.getNorthWest(),ue=l.getSouthEast(),me=this.getSize().subtract(v),we=Y(this.project(ue,k),this.project(te,k)).getSize(),Me=se.any3d?this.options.zoomSnap:1,Ve=me.x/we.x,tt=me.y/we.y,kn=d?Math.max(Ve,tt):Math.min(Ve,tt);return k=this.getScaleZoom(kn,k),Me&&(k=Math.round(k/(Me/100))*(Me/100),k=d?Math.ceil(k/Me)*Me:Math.floor(k/Me)*Me),Math.max(O,Math.min(U,k))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(l,d){var v=this._getTopLeftPoint(l,d);return new K(v,v.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(l){return this.options.crs.getProjectedBounds(l===void 0?this.getZoom():l)},getPane:function(l){return typeof l=="string"?this._panes[l]:l},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(l,d){var v=this.options.crs;return d=d===void 0?this._zoom:d,v.scale(l)/v.scale(d)},getScaleZoom:function(l,d){var v=this.options.crs;d=d===void 0?this._zoom:d;var k=v.zoom(l*v.scale(d));return isNaN(k)?1/0:k},project:function(l,d){return d=d===void 0?this._zoom:d,this.options.crs.latLngToPoint(_e(l),d)},unproject:function(l,d){return d=d===void 0?this._zoom:d,this.options.crs.pointToLatLng(H(l),d)},layerPointToLatLng:function(l){var d=H(l).add(this.getPixelOrigin());return this.unproject(d)},latLngToLayerPoint:function(l){var d=this.project(_e(l))._round();return d._subtract(this.getPixelOrigin())},wrapLatLng:function(l){return this.options.crs.wrapLatLng(_e(l))},wrapLatLngBounds:function(l){return this.options.crs.wrapLatLngBounds(ne(l))},distance:function(l,d){return this.options.crs.distance(_e(l),_e(d))},containerPointToLayerPoint:function(l){return H(l).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(l){return H(l).add(this._getMapPanePos())},containerPointToLatLng:function(l){var d=this.containerPointToLayerPoint(H(l));return this.layerPointToLatLng(d)},latLngToContainerPoint:function(l){return this.layerPointToContainerPoint(this.latLngToLayerPoint(_e(l)))},mouseEventToContainerPoint:function(l){return Mg(l,this._container)},mouseEventToLayerPoint:function(l){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(l))},mouseEventToLatLng:function(l){return this.layerPointToLatLng(this.mouseEventToLayerPoint(l))},_initContainer:function(l){var d=this._container=Jr(l);if(d){if(d._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");qe(d,"scroll",this._onScroll,this),this._containerId=c(d)},_initLayout:function(){var l=this._container;this._fadeAnimated=this.options.fadeAnimation&&se.any3d,Ke(l,"leaflet-container"+(se.touch?" leaflet-touch":"")+(se.retina?" leaflet-retina":"")+(se.ielt9?" leaflet-oldie":"")+(se.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var d=_r(l,"position");d!=="absolute"&&d!=="relative"&&d!=="fixed"&&d!=="sticky"&&(l.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var l=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Wt(this._mapPane,new z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ke(l.markerPane,"leaflet-zoom-hide"),Ke(l.shadowPane,"leaflet-zoom-hide"))},_resetView:function(l,d,v){Wt(this._mapPane,new z(0,0));var k=!this._loaded;this._loaded=!0,d=this._limitZoom(d),this.fire("viewprereset");var O=this._zoom!==d;this._moveStart(O,v)._move(l,d)._moveEnd(O),this.fire("viewreset"),k&&this.fire("load")},_moveStart:function(l,d){return l&&this.fire("zoomstart"),d||this.fire("movestart"),this},_move:function(l,d,v,k){d===void 0&&(d=this._zoom);var O=this._zoom!==d;return this._zoom=d,this._lastCenter=l,this._pixelOrigin=this._getNewPixelOrigin(l),k?v&&v.pinch&&this.fire("zoom",v):((O||v&&v.pinch)&&this.fire("zoom",v),this.fire("move",v)),this},_moveEnd:function(l){return l&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return R(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(l){Wt(this._mapPane,this._getMapPanePos().subtract(l))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(l){this._targets={},this._targets[c(this._container)]=this;var d=l?_t:qe;d(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&d(window,"resize",this._onResize,this),se.any3d&&this.options.transform3DLimit&&(l?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){R(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var l=this._getMapPanePos();Math.max(Math.abs(l.x),Math.abs(l.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(l,d){for(var v=[],k,O=d==="mouseout"||d==="mouseover",U=l.target||l.srcElement,te=!1;U;){if(k=this._targets[c(U)],k&&(d==="click"||d==="preclick")&&this._draggableMoved(k)){te=!0;break}if(k&&k.listens(d,!0)&&(O&&!mh(U,l)||(v.push(k),O))||U===this._container)break;U=U.parentNode}return!v.length&&!te&&!O&&this.listens(d,!0)&&(v=[this]),v},_isClickDisabled:function(l){for(;l&&l!==this._container;){if(l._leaflet_disable_click)return!0;l=l.parentNode}},_handleDOMEvent:function(l){var d=l.target||l.srcElement;if(!(!this._loaded||d._leaflet_disable_events||l.type==="click"&&this._isClickDisabled(d))){var v=l.type;v==="mousedown"&&ch(d),this._fireDOMEvent(l,v)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(l,d,v){if(l.type==="click"){var k=i({},l);k.type="preclick",this._fireDOMEvent(k,k.type,v)}var O=this._findEventTargets(l,d);if(v){for(var U=[],te=0;te<v.length;te++)v[te].listens(d,!0)&&U.push(v[te]);O=U.concat(O)}if(O.length){d==="contextmenu"&&an(l);var ue=O[0],me={originalEvent:l};if(l.type!=="keypress"&&l.type!=="keydown"&&l.type!=="keyup"){var we=ue.getLatLng&&(!ue._radius||ue._radius<=10);me.containerPoint=we?this.latLngToContainerPoint(ue.getLatLng()):this.mouseEventToContainerPoint(l),me.layerPoint=this.containerPointToLayerPoint(me.containerPoint),me.latlng=we?ue.getLatLng():this.layerPointToLatLng(me.layerPoint)}for(te=0;te<O.length;te++)if(O[te].fire(d,me,!0),me.originalEvent._stopped||O[te].options.bubblingMouseEvents===!1&&C(this._mouseEvents,d)!==-1)return}},_draggableMoved:function(l){return l=l.dragging&&l.dragging.enabled()?l:this,l.dragging&&l.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var l=0,d=this._handlers.length;l<d;l++)this._handlers[l].disable()},whenReady:function(l,d){return this._loaded?l.call(d||this,{target:this}):this.on("load",l,d),this},_getMapPanePos:function(){return ps(this._mapPane)||new z(0,0)},_moved:function(){var l=this._getMapPanePos();return l&&!l.equals([0,0])},_getTopLeftPoint:function(l,d){var v=l&&d!==void 0?this._getNewPixelOrigin(l,d):this.getPixelOrigin();return v.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(l,d){var v=this.getSize()._divideBy(2);return this.project(l,d)._subtract(v)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(l,d,v){var k=this._getNewPixelOrigin(v,d);return this.project(l,d)._subtract(k)},_latLngBoundsToNewLayerBounds:function(l,d,v){var k=this._getNewPixelOrigin(v,d);return Y([this.project(l.getSouthWest(),d)._subtract(k),this.project(l.getNorthWest(),d)._subtract(k),this.project(l.getSouthEast(),d)._subtract(k),this.project(l.getNorthEast(),d)._subtract(k)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(l){return this.latLngToLayerPoint(l).subtract(this._getCenterLayerPoint())},_limitCenter:function(l,d,v){if(!v)return l;var k=this.project(l,d),O=this.getSize().divideBy(2),U=new K(k.subtract(O),k.add(O)),te=this._getBoundsOffset(U,v,d);return Math.abs(te.x)<=1&&Math.abs(te.y)<=1?l:this.unproject(k.add(te),d)},_limitOffset:function(l,d){if(!d)return l;var v=this.getPixelBounds(),k=new K(v.min.add(l),v.max.add(l));return l.add(this._getBoundsOffset(k,d))},_getBoundsOffset:function(l,d,v){var k=Y(this.project(d.getNorthEast(),v),this.project(d.getSouthWest(),v)),O=k.min.subtract(l.min),U=k.max.subtract(l.max),te=this._rebound(O.x,-U.x),ue=this._rebound(O.y,-U.y);return new z(te,ue)},_rebound:function(l,d){return l+d>0?Math.round(l-d)/2:Math.max(0,Math.ceil(l))-Math.max(0,Math.floor(d))},_limitZoom:function(l){var d=this.getMinZoom(),v=this.getMaxZoom(),k=se.any3d?this.options.zoomSnap:1;return k&&(l=Math.round(l/k)*k),Math.max(d,Math.min(v,l))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Nt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(l,d){var v=this._getCenterOffset(l)._trunc();return(d&&d.animate)!==!0&&!this.getSize().contains(v)?!1:(this.panBy(v,d),!0)},_createAnimProxy:function(){var l=this._proxy=$e("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(l),this.on("zoomanim",function(d){var v=Si,k=this._proxy.style[v];fs(this._proxy,this.project(d.center,d.zoom),this.getZoomScale(d.zoom,1)),k===this._proxy.style[v]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ct(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var l=this.getCenter(),d=this.getZoom();fs(this._proxy,this.project(l,d),this.getZoomScale(d,1))},_catchTransitionEnd:function(l){this._animatingZoom&&l.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(l,d,v){if(this._animatingZoom)return!0;if(v=v||{},!this._zoomAnimated||v.animate===!1||this._nothingToAnimate()||Math.abs(d-this._zoom)>this.options.zoomAnimationThreshold)return!1;var k=this.getZoomScale(d),O=this._getCenterOffset(l)._divideBy(1-1/k);return v.animate!==!0&&!this.getSize().contains(O)?!1:(V(function(){this._moveStart(!0,v.noMoveStart||!1)._animateZoom(l,d,!0)},this),!0)},_animateZoom:function(l,d,v,k){this._mapPane&&(v&&(this._animatingZoom=!0,this._animateToCenter=l,this._animateToZoom=d,Ke(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:l,zoom:d,noUpdate:k}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Nt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function bS(l,d){return new ot(l,d)}var vr=E.extend({options:{position:"topright"},initialize:function(l){_(this,l)},getPosition:function(){return this.options.position},setPosition:function(l){var d=this._map;return d&&d.removeControl(this),this.options.position=l,d&&d.addControl(this),this},getContainer:function(){return this._container},addTo:function(l){this.remove(),this._map=l;var d=this._container=this.onAdd(l),v=this.getPosition(),k=l._controlCorners[v];return Ke(d,"leaflet-control"),v.indexOf("bottom")!==-1?k.insertBefore(d,k.firstChild):k.appendChild(d),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ct(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(l){this._map&&l&&l.screenX>0&&l.screenY>0&&this._map.getContainer().focus()}}),ba=function(l){return new vr(l)};ot.include({addControl:function(l){return l.addTo(this),this},removeControl:function(l){return l.remove(),this},_initControlPos:function(){var l=this._controlCorners={},d="leaflet-",v=this._controlContainer=$e("div",d+"control-container",this._container);function k(O,U){var te=d+O+" "+d+U;l[O+U]=$e("div",te,v)}k("top","left"),k("top","right"),k("bottom","left"),k("bottom","right")},_clearControlPos:function(){for(var l in this._controlCorners)ct(this._controlCorners[l]);ct(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var zg=vr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(l,d,v,k){return v<k?-1:k<v?1:0}},initialize:function(l,d,v){_(this,v),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var k in l)this._addLayer(l[k],k);for(k in d)this._addLayer(d[k],k,!0)},onAdd:function(l){this._initLayout(),this._update(),this._map=l,l.on("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(l){return vr.prototype.addTo.call(this,l),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(l,d){return this._addLayer(l,d),this._map?this._update():this},addOverlay:function(l,d){return this._addLayer(l,d,!0),this._map?this._update():this},removeLayer:function(l){l.off("add remove",this._onLayerChange,this);var d=this._getLayer(c(l));return d&&this._layers.splice(this._layers.indexOf(d),1),this._map?this._update():this},expand:function(){Ke(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var l=this._map.getSize().y-(this._container.offsetTop+50);return l<this._section.clientHeight?(Ke(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=l+"px"):Nt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Nt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var l="leaflet-control-layers",d=this._container=$e("div",l),v=this.options.collapsed;d.setAttribute("aria-haspopup",!0),xa(d),ph(d);var k=this._section=$e("section",l+"-list");v&&(this._map.on("click",this.collapse,this),qe(d,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var O=this._layersLink=$e("a",l+"-toggle",d);O.href="#",O.title="Layers",O.setAttribute("role","button"),qe(O,{keydown:function(U){U.keyCode===13&&this._expandSafely()},click:function(U){an(U),this._expandSafely()}},this),v||this.expand(),this._baseLayersList=$e("div",l+"-base",k),this._separator=$e("div",l+"-separator",k),this._overlaysList=$e("div",l+"-overlays",k),d.appendChild(k)},_getLayer:function(l){for(var d=0;d<this._layers.length;d++)if(this._layers[d]&&c(this._layers[d].layer)===l)return this._layers[d]},_addLayer:function(l,d,v){this._map&&l.on("add remove",this._onLayerChange,this),this._layers.push({layer:l,name:d,overlay:v}),this.options.sortLayers&&this._layers.sort(o(function(k,O){return this.options.sortFunction(k.layer,O.layer,k.name,O.name)},this)),this.options.autoZIndex&&l.setZIndex&&(this._lastZIndex++,l.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;hs(this._baseLayersList),hs(this._overlaysList),this._layerControlInputs=[];var l,d,v,k,O=0;for(v=0;v<this._layers.length;v++)k=this._layers[v],this._addItem(k),d=d||k.overlay,l=l||!k.overlay,O+=k.overlay?0:1;return this.options.hideSingleBase&&(l=l&&O>1,this._baseLayersList.style.display=l?"":"none"),this._separator.style.display=d&&l?"":"none",this},_onLayerChange:function(l){this._handlingClick||this._update();var d=this._getLayer(c(l.target)),v=d.overlay?l.type==="add"?"overlayadd":"overlayremove":l.type==="add"?"baselayerchange":null;v&&this._map.fire(v,d)},_createRadioElement:function(l,d){var v='<input type="radio" class="leaflet-control-layers-selector" name="'+l+'"'+(d?' checked="checked"':"")+"/>",k=document.createElement("div");return k.innerHTML=v,k.firstChild},_addItem:function(l){var d=document.createElement("label"),v=this._map.hasLayer(l.layer),k;l.overlay?(k=document.createElement("input"),k.type="checkbox",k.className="leaflet-control-layers-selector",k.defaultChecked=v):k=this._createRadioElement("leaflet-base-layers_"+c(this),v),this._layerControlInputs.push(k),k.layerId=c(l.layer),qe(k,"click",this._onInputClick,this);var O=document.createElement("span");O.innerHTML=" "+l.name;var U=document.createElement("span");d.appendChild(U),U.appendChild(k),U.appendChild(O);var te=l.overlay?this._overlaysList:this._baseLayersList;return te.appendChild(d),this._checkDisabledLayers(),d},_onInputClick:function(){if(!this._preventClick){var l=this._layerControlInputs,d,v,k=[],O=[];this._handlingClick=!0;for(var U=l.length-1;U>=0;U--)d=l[U],v=this._getLayer(d.layerId).layer,d.checked?k.push(v):d.checked||O.push(v);for(U=0;U<O.length;U++)this._map.hasLayer(O[U])&&this._map.removeLayer(O[U]);for(U=0;U<k.length;U++)this._map.hasLayer(k[U])||this._map.addLayer(k[U]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var l=this._layerControlInputs,d,v,k=this._map.getZoom(),O=l.length-1;O>=0;O--)d=l[O],v=this._getLayer(d.layerId).layer,d.disabled=v.options.minZoom!==void 0&&k<v.options.minZoom||v.options.maxZoom!==void 0&&k>v.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var l=this._section;this._preventClick=!0,qe(l,"click",an),this.expand();var d=this;setTimeout(function(){_t(l,"click",an),d._preventClick=!1})}}),wS=function(l,d,v){return new zg(l,d,v)},gh=vr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(l){var d="leaflet-control-zoom",v=$e("div",d+" leaflet-bar"),k=this.options;return this._zoomInButton=this._createButton(k.zoomInText,k.zoomInTitle,d+"-in",v,this._zoomIn),this._zoomOutButton=this._createButton(k.zoomOutText,k.zoomOutTitle,d+"-out",v,this._zoomOut),this._updateDisabled(),l.on("zoomend zoomlevelschange",this._updateDisabled,this),v},onRemove:function(l){l.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(l){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(l.shiftKey?3:1))},_zoomOut:function(l){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(l.shiftKey?3:1))},_createButton:function(l,d,v,k,O){var U=$e("a",v,k);return U.innerHTML=l,U.href="#",U.title=d,U.setAttribute("role","button"),U.setAttribute("aria-label",d),xa(U),qe(U,"click",gs),qe(U,"click",O,this),qe(U,"click",this._refocusOnMap,this),U},_updateDisabled:function(){var l=this._map,d="leaflet-disabled";Nt(this._zoomInButton,d),Nt(this._zoomOutButton,d),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||l._zoom===l.getMinZoom())&&(Ke(this._zoomOutButton,d),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||l._zoom===l.getMaxZoom())&&(Ke(this._zoomInButton,d),this._zoomInButton.setAttribute("aria-disabled","true"))}});ot.mergeOptions({zoomControl:!0}),ot.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new gh,this.addControl(this.zoomControl))});var SS=function(l){return new gh(l)},Ng=vr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(l){var d="leaflet-control-scale",v=$e("div",d),k=this.options;return this._addScales(k,d+"-line",v),l.on(k.updateWhenIdle?"moveend":"move",this._update,this),l.whenReady(this._update,this),v},onRemove:function(l){l.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(l,d,v){l.metric&&(this._mScale=$e("div",d,v)),l.imperial&&(this._iScale=$e("div",d,v))},_update:function(){var l=this._map,d=l.getSize().y/2,v=l.distance(l.containerPointToLatLng([0,d]),l.containerPointToLatLng([this.options.maxWidth,d]));this._updateScales(v)},_updateScales:function(l){this.options.metric&&l&&this._updateMetric(l),this.options.imperial&&l&&this._updateImperial(l)},_updateMetric:function(l){var d=this._getRoundNum(l),v=d<1e3?d+" m":d/1e3+" km";this._updateScale(this._mScale,v,d/l)},_updateImperial:function(l){var d=l*3.2808399,v,k,O;d>5280?(v=d/5280,k=this._getRoundNum(v),this._updateScale(this._iScale,k+" mi",k/v)):(O=this._getRoundNum(d),this._updateScale(this._iScale,O+" ft",O/d))},_updateScale:function(l,d,v){l.style.width=Math.round(this.options.maxWidth*v)+"px",l.innerHTML=d},_getRoundNum:function(l){var d=Math.pow(10,(Math.floor(l)+"").length-1),v=l/d;return v=v>=10?10:v>=5?5:v>=3?3:v>=2?2:1,d*v}}),kS=function(l){return new Ng(l)},ES='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',yh=vr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(se.inlineSvg?ES+" ":"")+"Leaflet</a>"},initialize:function(l){_(this,l),this._attributions={}},onAdd:function(l){l.attributionControl=this,this._container=$e("div","leaflet-control-attribution"),xa(this._container);for(var d in l._layers)l._layers[d].getAttribution&&this.addAttribution(l._layers[d].getAttribution());return this._update(),l.on("layeradd",this._addAttribution,this),this._container},onRemove:function(l){l.off("layeradd",this._addAttribution,this)},_addAttribution:function(l){l.layer.getAttribution&&(this.addAttribution(l.layer.getAttribution()),l.layer.once("remove",function(){this.removeAttribution(l.layer.getAttribution())},this))},setPrefix:function(l){return this.options.prefix=l,this._update(),this},addAttribution:function(l){return l?(this._attributions[l]||(this._attributions[l]=0),this._attributions[l]++,this._update(),this):this},removeAttribution:function(l){return l?(this._attributions[l]&&(this._attributions[l]--,this._update()),this):this},_update:function(){if(this._map){var l=[];for(var d in this._attributions)this._attributions[d]&&l.push(d);var v=[];this.options.prefix&&v.push(this.options.prefix),l.length&&v.push(l.join(", ")),this._container.innerHTML=v.join(' <span aria-hidden="true">|</span> ')}}});ot.mergeOptions({attributionControl:!0}),ot.addInitHook(function(){this.options.attributionControl&&new yh().addTo(this)});var CS=function(l){return new yh(l)};vr.Layers=zg,vr.Zoom=gh,vr.Scale=Ng,vr.Attribution=yh,ba.layers=wS,ba.zoom=SS,ba.scale=kS,ba.attribution=CS;var Ir=E.extend({initialize:function(l){this._map=l},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ir.addTo=function(l,d){return l.addHandler(d,this),this};var TS={Events:$},Fg=se.touch?"touchstart mousedown":"mousedown",Ei=I.extend({options:{clickTolerance:3},initialize:function(l,d,v,k){_(this,k),this._element=l,this._dragStartTarget=d||l,this._preventOutline=v},enable:function(){this._enabled||(qe(this._dragStartTarget,Fg,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ei._dragging===this&&this.finishDrag(!0),_t(this._dragStartTarget,Fg,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(l){if(this._enabled&&(this._moved=!1,!rh(this._element,"leaflet-zoom-anim"))){if(l.touches&&l.touches.length!==1){Ei._dragging===this&&this.finishDrag();return}if(!(Ei._dragging||l.shiftKey||l.which!==1&&l.button!==1&&!l.touches)&&(Ei._dragging=this,this._preventOutline&&ch(this._element),oh(),ya(),!this._moving)){this.fire("down");var d=l.touches?l.touches[0]:l,v=Og(this._element);this._startPoint=new z(d.clientX,d.clientY),this._startPos=ps(this._element),this._parentScale=uh(v);var k=l.type==="mousedown";qe(document,k?"mousemove":"touchmove",this._onMove,this),qe(document,k?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(l){if(this._enabled){if(l.touches&&l.touches.length>1){this._moved=!0;return}var d=l.touches&&l.touches.length===1?l.touches[0]:l,v=new z(d.clientX,d.clientY)._subtract(this._startPoint);!v.x&&!v.y||Math.abs(v.x)+Math.abs(v.y)<this.options.clickTolerance||(v.x/=this._parentScale.x,v.y/=this._parentScale.y,an(l),this._moved||(this.fire("dragstart"),this._moved=!0,Ke(document.body,"leaflet-dragging"),this._lastTarget=l.target||l.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ke(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(v),this._moving=!0,this._lastEvent=l,this._updatePosition())}},_updatePosition:function(){var l={originalEvent:this._lastEvent};this.fire("predrag",l),Wt(this._element,this._newPos),this.fire("drag",l)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(l){Nt(document.body,"leaflet-dragging"),this._lastTarget&&(Nt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),_t(document,"mousemove touchmove",this._onMove,this),_t(document,"mouseup touchend touchcancel",this._onUp,this),ah(),_a();var d=this._moved&&this._moving;this._moving=!1,Ei._dragging=!1,d&&this.fire("dragend",{noInertia:l,distance:this._newPos.distanceTo(this._startPos)})}});function Bg(l,d,v){var k,O=[1,4,2,8],U,te,ue,me,we,Me,Ve,tt;for(U=0,Me=l.length;U<Me;U++)l[U]._code=ys(l[U],d);for(ue=0;ue<4;ue++){for(Ve=O[ue],k=[],U=0,Me=l.length,te=Me-1;U<Me;te=U++)me=l[U],we=l[te],me._code&Ve?we._code&Ve||(tt=cc(we,me,Ve,d,v),tt._code=ys(tt,d),k.push(tt)):(we._code&Ve&&(tt=cc(we,me,Ve,d,v),tt._code=ys(tt,d),k.push(tt)),k.push(me));l=k}return l}function Ug(l,d){var v,k,O,U,te,ue,me,we,Me;if(!l||l.length===0)throw new Error("latlngs not passed");or(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var Ve=_e([0,0]),tt=ne(l),kn=tt.getNorthWest().distanceTo(tt.getSouthWest())*tt.getNorthEast().distanceTo(tt.getNorthWest());kn<1700&&(Ve=_h(l));var Qt=l.length,ar=[];for(v=0;v<Qt;v++){var Mn=_e(l[v]);ar.push(d.project(_e([Mn.lat-Ve.lat,Mn.lng-Ve.lng])))}for(ue=me=we=0,v=0,k=Qt-1;v<Qt;k=v++)O=ar[v],U=ar[k],te=O.y*U.x-U.y*O.x,me+=(O.x+U.x)*te,we+=(O.y+U.y)*te,ue+=te*3;ue===0?Me=ar[0]:Me=[me/ue,we/ue];var fo=d.unproject(H(Me));return _e([fo.lat+Ve.lat,fo.lng+Ve.lng])}function _h(l){for(var d=0,v=0,k=0,O=0;O<l.length;O++){var U=_e(l[O]);d+=U.lat,v+=U.lng,k++}return _e([d/k,v/k])}var jS={__proto__:null,clipPolygon:Bg,polygonCenter:Ug,centroid:_h};function Wg(l,d){if(!d||!l.length)return l.slice();var v=d*d;return l=OS(l,v),l=AS(l,v),l}function $g(l,d,v){return Math.sqrt(wa(l,d,v,!0))}function PS(l,d,v){return wa(l,d,v)}function AS(l,d){var v=l.length,k=typeof Uint8Array<"u"?Uint8Array:Array,O=new k(v);O[0]=O[v-1]=1,vh(l,O,d,0,v-1);var U,te=[];for(U=0;U<v;U++)O[U]&&te.push(l[U]);return te}function vh(l,d,v,k,O){var U=0,te,ue,me;for(ue=k+1;ue<=O-1;ue++)me=wa(l[ue],l[k],l[O],!0),me>U&&(te=ue,U=me);U>v&&(d[te]=1,vh(l,d,v,k,te),vh(l,d,v,te,O))}function OS(l,d){for(var v=[l[0]],k=1,O=0,U=l.length;k<U;k++)DS(l[k],l[O])>d&&(v.push(l[k]),O=k);return O<U-1&&v.push(l[U-1]),v}var Hg;function Vg(l,d,v,k,O){var U=k?Hg:ys(l,v),te=ys(d,v),ue,me,we;for(Hg=te;;){if(!(U|te))return[l,d];if(U&te)return!1;ue=U||te,me=cc(l,d,ue,v,O),we=ys(me,v),ue===U?(l=me,U=we):(d=me,te=we)}}function cc(l,d,v,k,O){var U=d.x-l.x,te=d.y-l.y,ue=k.min,me=k.max,we,Me;return v&8?(we=l.x+U*(me.y-l.y)/te,Me=me.y):v&4?(we=l.x+U*(ue.y-l.y)/te,Me=ue.y):v&2?(we=me.x,Me=l.y+te*(me.x-l.x)/U):v&1&&(we=ue.x,Me=l.y+te*(ue.x-l.x)/U),new z(we,Me,O)}function ys(l,d){var v=0;return l.x<d.min.x?v|=1:l.x>d.max.x&&(v|=2),l.y<d.min.y?v|=4:l.y>d.max.y&&(v|=8),v}function DS(l,d){var v=d.x-l.x,k=d.y-l.y;return v*v+k*k}function wa(l,d,v,k){var O=d.x,U=d.y,te=v.x-O,ue=v.y-U,me=te*te+ue*ue,we;return me>0&&(we=((l.x-O)*te+(l.y-U)*ue)/me,we>1?(O=v.x,U=v.y):we>0&&(O+=te*we,U+=ue*we)),te=l.x-O,ue=l.y-U,k?te*te+ue*ue:new z(O,U)}function or(l){return!S(l[0])||typeof l[0][0]!="object"&&typeof l[0][0]<"u"}function Zg(l){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),or(l)}function Yg(l,d){var v,k,O,U,te,ue,me,we;if(!l||l.length===0)throw new Error("latlngs not passed");or(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var Me=_e([0,0]),Ve=ne(l),tt=Ve.getNorthWest().distanceTo(Ve.getSouthWest())*Ve.getNorthEast().distanceTo(Ve.getNorthWest());tt<1700&&(Me=_h(l));var kn=l.length,Qt=[];for(v=0;v<kn;v++){var ar=_e(l[v]);Qt.push(d.project(_e([ar.lat-Me.lat,ar.lng-Me.lng])))}for(v=0,k=0;v<kn-1;v++)k+=Qt[v].distanceTo(Qt[v+1])/2;if(k===0)we=Qt[0];else for(v=0,U=0;v<kn-1;v++)if(te=Qt[v],ue=Qt[v+1],O=te.distanceTo(ue),U+=O,U>k){me=(U-k)/O,we=[ue.x-me*(ue.x-te.x),ue.y-me*(ue.y-te.y)];break}var Mn=d.unproject(H(we));return _e([Mn.lat+Me.lat,Mn.lng+Me.lng])}var RS={__proto__:null,simplify:Wg,pointToSegmentDistance:$g,closestPointOnSegment:PS,clipSegment:Vg,_getEdgeIntersection:cc,_getBitCode:ys,_sqClosestPointOnSegment:wa,isFlat:or,_flat:Zg,polylineCenter:Yg},xh={project:function(l){return new z(l.lng,l.lat)},unproject:function(l){return new X(l.y,l.x)},bounds:new K([-180,-90],[180,90])},bh={R:6378137,R_MINOR:6356752314245179e-9,bounds:new K([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(l){var d=Math.PI/180,v=this.R,k=l.lat*d,O=this.R_MINOR/v,U=Math.sqrt(1-O*O),te=U*Math.sin(k),ue=Math.tan(Math.PI/4-k/2)/Math.pow((1-te)/(1+te),U/2);return k=-v*Math.log(Math.max(ue,1e-10)),new z(l.lng*d*v,k)},unproject:function(l){for(var d=180/Math.PI,v=this.R,k=this.R_MINOR/v,O=Math.sqrt(1-k*k),U=Math.exp(-l.y/v),te=Math.PI/2-2*Math.atan(U),ue=0,me=.1,we;ue<15&&Math.abs(me)>1e-7;ue++)we=O*Math.sin(te),we=Math.pow((1-we)/(1+we),O/2),me=Math.PI/2-2*Math.atan(U*we)-te,te+=me;return new X(te*d,l.x*d/v)}},MS={__proto__:null,LonLat:xh,Mercator:bh,SphericalMercator:ke},LS=i({},Pe,{code:"EPSG:3395",projection:bh,transformation:function(){var l=.5/(Math.PI*bh.R);return Re(l,.5,-l,.5)}()}),qg=i({},Pe,{code:"EPSG:4326",projection:xh,transformation:Re(1/180,1,-1/180,.5)}),IS=i({},Te,{projection:xh,transformation:Re(1,0,-1,0),scale:function(l){return Math.pow(2,l)},zoom:function(l){return Math.log(l)/Math.LN2},distance:function(l,d){var v=d.lng-l.lng,k=d.lat-l.lat;return Math.sqrt(v*v+k*k)},infinite:!0});Te.Earth=Pe,Te.EPSG3395=LS,Te.EPSG3857=Ge,Te.EPSG900913=M,Te.EPSG4326=qg,Te.Simple=IS;var xr=I.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(l){return l.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(l){return l&&l.removeLayer(this),this},getPane:function(l){return this._map.getPane(l?this.options[l]||l:this.options.pane)},addInteractiveTarget:function(l){return this._map._targets[c(l)]=this,this},removeInteractiveTarget:function(l){return delete this._map._targets[c(l)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(l){var d=l.target;if(d.hasLayer(this)){if(this._map=d,this._zoomAnimated=d._zoomAnimated,this.getEvents){var v=this.getEvents();d.on(v,this),this.once("remove",function(){d.off(v,this)},this)}this.onAdd(d),this.fire("add"),d.fire("layeradd",{layer:this})}}});ot.include({addLayer:function(l){if(!l._layerAdd)throw new Error("The provided object is not a Layer.");var d=c(l);return this._layers[d]?this:(this._layers[d]=l,l._mapToAdd=this,l.beforeAdd&&l.beforeAdd(this),this.whenReady(l._layerAdd,l),this)},removeLayer:function(l){var d=c(l);return this._layers[d]?(this._loaded&&l.onRemove(this),delete this._layers[d],this._loaded&&(this.fire("layerremove",{layer:l}),l.fire("remove")),l._map=l._mapToAdd=null,this):this},hasLayer:function(l){return c(l)in this._layers},eachLayer:function(l,d){for(var v in this._layers)l.call(d,this._layers[v]);return this},_addLayers:function(l){l=l?S(l)?l:[l]:[];for(var d=0,v=l.length;d<v;d++)this.addLayer(l[d])},_addZoomLimit:function(l){(!isNaN(l.options.maxZoom)||!isNaN(l.options.minZoom))&&(this._zoomBoundLayers[c(l)]=l,this._updateZoomLevels())},_removeZoomLimit:function(l){var d=c(l);this._zoomBoundLayers[d]&&(delete this._zoomBoundLayers[d],this._updateZoomLevels())},_updateZoomLevels:function(){var l=1/0,d=-1/0,v=this._getZoomSpan();for(var k in this._zoomBoundLayers){var O=this._zoomBoundLayers[k].options;l=O.minZoom===void 0?l:Math.min(l,O.minZoom),d=O.maxZoom===void 0?d:Math.max(d,O.maxZoom)}this._layersMaxZoom=d===-1/0?void 0:d,this._layersMinZoom=l===1/0?void 0:l,v!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ao=xr.extend({initialize:function(l,d){_(this,d),this._layers={};var v,k;if(l)for(v=0,k=l.length;v<k;v++)this.addLayer(l[v])},addLayer:function(l){var d=this.getLayerId(l);return this._layers[d]=l,this._map&&this._map.addLayer(l),this},removeLayer:function(l){var d=l in this._layers?l:this.getLayerId(l);return this._map&&this._layers[d]&&this._map.removeLayer(this._layers[d]),delete this._layers[d],this},hasLayer:function(l){var d=typeof l=="number"?l:this.getLayerId(l);return d in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(l){var d=Array.prototype.slice.call(arguments,1),v,k;for(v in this._layers)k=this._layers[v],k[l]&&k[l].apply(k,d);return this},onAdd:function(l){this.eachLayer(l.addLayer,l)},onRemove:function(l){this.eachLayer(l.removeLayer,l)},eachLayer:function(l,d){for(var v in this._layers)l.call(d,this._layers[v]);return this},getLayer:function(l){return this._layers[l]},getLayers:function(){var l=[];return this.eachLayer(l.push,l),l},setZIndex:function(l){return this.invoke("setZIndex",l)},getLayerId:function(l){return c(l)}}),zS=function(l,d){return new ao(l,d)},Xr=ao.extend({addLayer:function(l){return this.hasLayer(l)?this:(l.addEventParent(this),ao.prototype.addLayer.call(this,l),this.fire("layeradd",{layer:l}))},removeLayer:function(l){return this.hasLayer(l)?(l in this._layers&&(l=this._layers[l]),l.removeEventParent(this),ao.prototype.removeLayer.call(this,l),this.fire("layerremove",{layer:l})):this},setStyle:function(l){return this.invoke("setStyle",l)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var l=new ce;for(var d in this._layers){var v=this._layers[d];l.extend(v.getBounds?v.getBounds():v.getLatLng())}return l}}),NS=function(l,d){return new Xr(l,d)},lo=E.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(l){_(this,l)},createIcon:function(l){return this._createIcon("icon",l)},createShadow:function(l){return this._createIcon("shadow",l)},_createIcon:function(l,d){var v=this._getIconUrl(l);if(!v){if(l==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var k=this._createImg(v,d&&d.tagName==="IMG"?d:null);return this._setIconStyles(k,l),(this.options.crossOrigin||this.options.crossOrigin==="")&&(k.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),k},_setIconStyles:function(l,d){var v=this.options,k=v[d+"Size"];typeof k=="number"&&(k=[k,k]);var O=H(k),U=H(d==="shadow"&&v.shadowAnchor||v.iconAnchor||O&&O.divideBy(2,!0));l.className="leaflet-marker-"+d+" "+(v.className||""),U&&(l.style.marginLeft=-U.x+"px",l.style.marginTop=-U.y+"px"),O&&(l.style.width=O.x+"px",l.style.height=O.y+"px")},_createImg:function(l,d){return d=d||document.createElement("img"),d.src=l,d},_getIconUrl:function(l){return se.retina&&this.options[l+"RetinaUrl"]||this.options[l+"Url"]}});function FS(l){return new lo(l)}var Sa=lo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(l){return typeof Sa.imagePath!="string"&&(Sa.imagePath=this._detectIconPath()),(this.options.imagePath||Sa.imagePath)+lo.prototype._getIconUrl.call(this,l)},_stripUrl:function(l){var d=function(v,k,O){var U=k.exec(v);return U&&U[O]};return l=d(l,/^url\((['"])?(.+)\1\)$/,2),l&&d(l,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var l=$e("div","leaflet-default-icon-path",document.body),d=_r(l,"background-image")||_r(l,"backgroundImage");if(document.body.removeChild(l),d=this._stripUrl(d),d)return d;var v=document.querySelector('link[href$="leaflet.css"]');return v?v.href.substring(0,v.href.length-11-1):""}}),Gg=Ir.extend({initialize:function(l){this._marker=l},addHooks:function(){var l=this._marker._icon;this._draggable||(this._draggable=new Ei(l,l,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ke(l,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Nt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(l){var d=this._marker,v=d._map,k=this._marker.options.autoPanSpeed,O=this._marker.options.autoPanPadding,U=ps(d._icon),te=v.getPixelBounds(),ue=v.getPixelOrigin(),me=Y(te.min._subtract(ue).add(O),te.max._subtract(ue).subtract(O));if(!me.contains(U)){var we=H((Math.max(me.max.x,U.x)-me.max.x)/(te.max.x-me.max.x)-(Math.min(me.min.x,U.x)-me.min.x)/(te.min.x-me.min.x),(Math.max(me.max.y,U.y)-me.max.y)/(te.max.y-me.max.y)-(Math.min(me.min.y,U.y)-me.min.y)/(te.min.y-me.min.y)).multiplyBy(k);v.panBy(we,{animate:!1}),this._draggable._newPos._add(we),this._draggable._startPos._add(we),Wt(d._icon,this._draggable._newPos),this._onDrag(l),this._panRequest=V(this._adjustPan.bind(this,l))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(l){this._marker.options.autoPan&&(R(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,l)))},_onDrag:function(l){var d=this._marker,v=d._shadow,k=ps(d._icon),O=d._map.layerPointToLatLng(k);v&&Wt(v,k),d._latlng=O,l.latlng=O,l.oldLatLng=this._oldLatLng,d.fire("move",l).fire("drag",l)},_onDragEnd:function(l){R(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",l)}}),uc=xr.extend({options:{icon:new Sa,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(l,d){_(this,d),this._latlng=_e(l)},onAdd:function(l){this._zoomAnimated=this._zoomAnimated&&l.options.markerZoomAnimation,this._zoomAnimated&&l.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(l){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&l.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(l){var d=this._latlng;return this._latlng=_e(l),this.update(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},setZIndexOffset:function(l){return this.options.zIndexOffset=l,this.update()},getIcon:function(){return this.options.icon},setIcon:function(l){return this.options.icon=l,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var l=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(l)}return this},_initIcon:function(){var l=this.options,d="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),v=l.icon.createIcon(this._icon),k=!1;v!==this._icon&&(this._icon&&this._removeIcon(),k=!0,l.title&&(v.title=l.title),v.tagName==="IMG"&&(v.alt=l.alt||"")),Ke(v,d),l.keyboard&&(v.tabIndex="0",v.setAttribute("role","button")),this._icon=v,l.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&qe(v,"focus",this._panOnFocus,this);var O=l.icon.createShadow(this._shadow),U=!1;O!==this._shadow&&(this._removeShadow(),U=!0),O&&(Ke(O,d),O.alt=""),this._shadow=O,l.opacity<1&&this._updateOpacity(),k&&this.getPane().appendChild(this._icon),this._initInteraction(),O&&U&&this.getPane(l.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&_t(this._icon,"focus",this._panOnFocus,this),ct(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ct(this._shadow),this._shadow=null},_setPos:function(l){this._icon&&Wt(this._icon,l),this._shadow&&Wt(this._shadow,l),this._zIndex=l.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(l){this._icon&&(this._icon.style.zIndex=this._zIndex+l)},_animateZoom:function(l){var d=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center).round();this._setPos(d)},_initInteraction:function(){if(this.options.interactive&&(Ke(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Gg)){var l=this.options.draggable;this.dragging&&(l=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Gg(this),l&&this.dragging.enable()}},setOpacity:function(l){return this.options.opacity=l,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var l=this.options.opacity;this._icon&&sr(this._icon,l),this._shadow&&sr(this._shadow,l)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var l=this._map;if(l){var d=this.options.icon.options,v=d.iconSize?H(d.iconSize):H(0,0),k=d.iconAnchor?H(d.iconAnchor):H(0,0);l.panInside(this._latlng,{paddingTopLeft:k,paddingBottomRight:v.subtract(k)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function BS(l,d){return new uc(l,d)}var Ci=xr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(l){this._renderer=l.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(l){return _(this,l),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&l&&Object.prototype.hasOwnProperty.call(l,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),dc=Ci.extend({options:{fill:!0,radius:10},initialize:function(l,d){_(this,d),this._latlng=_e(l),this._radius=this.options.radius},setLatLng:function(l){var d=this._latlng;return this._latlng=_e(l),this.redraw(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(l){return this.options.radius=this._radius=l,this.redraw()},getRadius:function(){return this._radius},setStyle:function(l){var d=l&&l.radius||this._radius;return Ci.prototype.setStyle.call(this,l),this.setRadius(d),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var l=this._radius,d=this._radiusY||l,v=this._clickTolerance(),k=[l+v,d+v];this._pxBounds=new K(this._point.subtract(k),this._point.add(k))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(l){return l.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function US(l,d){return new dc(l,d)}var wh=dc.extend({initialize:function(l,d,v){if(typeof d=="number"&&(d=i({},v,{radius:d})),_(this,d),this._latlng=_e(l),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(l){return this._mRadius=l,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var l=[this._radius,this._radiusY||this._radius];return new ce(this._map.layerPointToLatLng(this._point.subtract(l)),this._map.layerPointToLatLng(this._point.add(l)))},setStyle:Ci.prototype.setStyle,_project:function(){var l=this._latlng.lng,d=this._latlng.lat,v=this._map,k=v.options.crs;if(k.distance===Pe.distance){var O=Math.PI/180,U=this._mRadius/Pe.R/O,te=v.project([d+U,l]),ue=v.project([d-U,l]),me=te.add(ue).divideBy(2),we=v.unproject(me).lat,Me=Math.acos((Math.cos(U*O)-Math.sin(d*O)*Math.sin(we*O))/(Math.cos(d*O)*Math.cos(we*O)))/O;(isNaN(Me)||Me===0)&&(Me=U/Math.cos(Math.PI/180*d)),this._point=me.subtract(v.getPixelOrigin()),this._radius=isNaN(Me)?0:me.x-v.project([we,l-Me]).x,this._radiusY=me.y-te.y}else{var Ve=k.unproject(k.project(this._latlng).subtract([this._mRadius,0]));this._point=v.latLngToLayerPoint(this._latlng),this._radius=this._point.x-v.latLngToLayerPoint(Ve).x}this._updateBounds()}});function WS(l,d,v){return new wh(l,d,v)}var Qr=Ci.extend({options:{smoothFactor:1,noClip:!1},initialize:function(l,d){_(this,d),this._setLatLngs(l)},getLatLngs:function(){return this._latlngs},setLatLngs:function(l){return this._setLatLngs(l),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(l){for(var d=1/0,v=null,k=wa,O,U,te=0,ue=this._parts.length;te<ue;te++)for(var me=this._parts[te],we=1,Me=me.length;we<Me;we++){O=me[we-1],U=me[we];var Ve=k(l,O,U,!0);Ve<d&&(d=Ve,v=k(l,O,U))}return v&&(v.distance=Math.sqrt(d)),v},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Yg(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(l,d){return d=d||this._defaultShape(),l=_e(l),d.push(l),this._bounds.extend(l),this.redraw()},_setLatLngs:function(l){this._bounds=new ce,this._latlngs=this._convertLatLngs(l)},_defaultShape:function(){return or(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(l){for(var d=[],v=or(l),k=0,O=l.length;k<O;k++)v?(d[k]=_e(l[k]),this._bounds.extend(d[k])):d[k]=this._convertLatLngs(l[k]);return d},_project:function(){var l=new K;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,l),this._bounds.isValid()&&l.isValid()&&(this._rawPxBounds=l,this._updateBounds())},_updateBounds:function(){var l=this._clickTolerance(),d=new z(l,l);this._rawPxBounds&&(this._pxBounds=new K([this._rawPxBounds.min.subtract(d),this._rawPxBounds.max.add(d)]))},_projectLatlngs:function(l,d,v){var k=l[0]instanceof X,O=l.length,U,te;if(k){for(te=[],U=0;U<O;U++)te[U]=this._map.latLngToLayerPoint(l[U]),v.extend(te[U]);d.push(te)}else for(U=0;U<O;U++)this._projectLatlngs(l[U],d,v)},_clipPoints:function(){var l=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}var d=this._parts,v,k,O,U,te,ue,me;for(v=0,O=0,U=this._rings.length;v<U;v++)for(me=this._rings[v],k=0,te=me.length;k<te-1;k++)ue=Vg(me[k],me[k+1],l,k,!0),ue&&(d[O]=d[O]||[],d[O].push(ue[0]),(ue[1]!==me[k+1]||k===te-2)&&(d[O].push(ue[1]),O++))}},_simplifyPoints:function(){for(var l=this._parts,d=this.options.smoothFactor,v=0,k=l.length;v<k;v++)l[v]=Wg(l[v],d)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(l,d){var v,k,O,U,te,ue,me=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(v=0,U=this._parts.length;v<U;v++)for(ue=this._parts[v],k=0,te=ue.length,O=te-1;k<te;O=k++)if(!(!d&&k===0)&&$g(l,ue[O],ue[k])<=me)return!0;return!1}});function $S(l,d){return new Qr(l,d)}Qr._flat=Zg;var co=Qr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ug(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(l){var d=Qr.prototype._convertLatLngs.call(this,l),v=d.length;return v>=2&&d[0]instanceof X&&d[0].equals(d[v-1])&&d.pop(),d},_setLatLngs:function(l){Qr.prototype._setLatLngs.call(this,l),or(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return or(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var l=this._renderer._bounds,d=this.options.weight,v=new z(d,d);if(l=new K(l.min.subtract(v),l.max.add(v)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}for(var k=0,O=this._rings.length,U;k<O;k++)U=Bg(this._rings[k],l,!0),U.length&&this._parts.push(U)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(l){var d=!1,v,k,O,U,te,ue,me,we;if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(U=0,me=this._parts.length;U<me;U++)for(v=this._parts[U],te=0,we=v.length,ue=we-1;te<we;ue=te++)k=v[te],O=v[ue],k.y>l.y!=O.y>l.y&&l.x<(O.x-k.x)*(l.y-k.y)/(O.y-k.y)+k.x&&(d=!d);return d||Qr.prototype._containsPoint.call(this,l,!0)}});function HS(l,d){return new co(l,d)}var ei=Xr.extend({initialize:function(l,d){_(this,d),this._layers={},l&&this.addData(l)},addData:function(l){var d=S(l)?l:l.features,v,k,O;if(d){for(v=0,k=d.length;v<k;v++)O=d[v],(O.geometries||O.geometry||O.features||O.coordinates)&&this.addData(O);return this}var U=this.options;if(U.filter&&!U.filter(l))return this;var te=hc(l,U);return te?(te.feature=mc(l),te.defaultOptions=te.options,this.resetStyle(te),U.onEachFeature&&U.onEachFeature(l,te),this.addLayer(te)):this},resetStyle:function(l){return l===void 0?this.eachLayer(this.resetStyle,this):(l.options=i({},l.defaultOptions),this._setLayerStyle(l,this.options.style),this)},setStyle:function(l){return this.eachLayer(function(d){this._setLayerStyle(d,l)},this)},_setLayerStyle:function(l,d){l.setStyle&&(typeof d=="function"&&(d=d(l.feature)),l.setStyle(d))}});function hc(l,d){var v=l.type==="Feature"?l.geometry:l,k=v?v.coordinates:null,O=[],U=d&&d.pointToLayer,te=d&&d.coordsToLatLng||Sh,ue,me,we,Me;if(!k&&!v)return null;switch(v.type){case"Point":return ue=te(k),Kg(U,l,ue,d);case"MultiPoint":for(we=0,Me=k.length;we<Me;we++)ue=te(k[we]),O.push(Kg(U,l,ue,d));return new Xr(O);case"LineString":case"MultiLineString":return me=fc(k,v.type==="LineString"?0:1,te),new Qr(me,d);case"Polygon":case"MultiPolygon":return me=fc(k,v.type==="Polygon"?1:2,te),new co(me,d);case"GeometryCollection":for(we=0,Me=v.geometries.length;we<Me;we++){var Ve=hc({geometry:v.geometries[we],type:"Feature",properties:l.properties},d);Ve&&O.push(Ve)}return new Xr(O);case"FeatureCollection":for(we=0,Me=v.features.length;we<Me;we++){var tt=hc(v.features[we],d);tt&&O.push(tt)}return new Xr(O);default:throw new Error("Invalid GeoJSON object.")}}function Kg(l,d,v,k){return l?l(d,v):new uc(v,k&&k.markersInheritOptions&&k)}function Sh(l){return new X(l[1],l[0],l[2])}function fc(l,d,v){for(var k=[],O=0,U=l.length,te;O<U;O++)te=d?fc(l[O],d-1,v):(v||Sh)(l[O]),k.push(te);return k}function kh(l,d){return l=_e(l),l.alt!==void 0?[m(l.lng,d),m(l.lat,d),m(l.alt,d)]:[m(l.lng,d),m(l.lat,d)]}function pc(l,d,v,k){for(var O=[],U=0,te=l.length;U<te;U++)O.push(d?pc(l[U],or(l[U])?0:d-1,v,k):kh(l[U],k));return!d&&v&&O.length>0&&O.push(O[0].slice()),O}function uo(l,d){return l.feature?i({},l.feature,{geometry:d}):mc(d)}function mc(l){return l.type==="Feature"||l.type==="FeatureCollection"?l:{type:"Feature",properties:{},geometry:l}}var Eh={toGeoJSON:function(l){return uo(this,{type:"Point",coordinates:kh(this.getLatLng(),l)})}};uc.include(Eh),wh.include(Eh),dc.include(Eh),Qr.include({toGeoJSON:function(l){var d=!or(this._latlngs),v=pc(this._latlngs,d?1:0,!1,l);return uo(this,{type:(d?"Multi":"")+"LineString",coordinates:v})}}),co.include({toGeoJSON:function(l){var d=!or(this._latlngs),v=d&&!or(this._latlngs[0]),k=pc(this._latlngs,v?2:d?1:0,!0,l);return d||(k=[k]),uo(this,{type:(v?"Multi":"")+"Polygon",coordinates:k})}}),ao.include({toMultiPoint:function(l){var d=[];return this.eachLayer(function(v){d.push(v.toGeoJSON(l).geometry.coordinates)}),uo(this,{type:"MultiPoint",coordinates:d})},toGeoJSON:function(l){var d=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(d==="MultiPoint")return this.toMultiPoint(l);var v=d==="GeometryCollection",k=[];return this.eachLayer(function(O){if(O.toGeoJSON){var U=O.toGeoJSON(l);if(v)k.push(U.geometry);else{var te=mc(U);te.type==="FeatureCollection"?k.push.apply(k,te.features):k.push(te)}}}),v?uo(this,{geometries:k,type:"GeometryCollection"}):{type:"FeatureCollection",features:k}}});function Jg(l,d){return new ei(l,d)}var VS=Jg,gc=xr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(l,d,v){this._url=l,this._bounds=ne(d),_(this,v)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ke(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ct(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(l){return this.options.opacity=l,this._image&&this._updateOpacity(),this},setStyle:function(l){return l.opacity&&this.setOpacity(l.opacity),this},bringToFront:function(){return this._map&&ki(this._image),this},bringToBack:function(){return this._map&&oo(this._image),this},setUrl:function(l){return this._url=l,this._image&&(this._image.src=l),this},setBounds:function(l){return this._bounds=ne(l),this._map&&this._reset(),this},getEvents:function(){var l={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var l=this._url.tagName==="IMG",d=this._image=l?this._url:$e("img");if(Ke(d,"leaflet-image-layer"),this._zoomAnimated&&Ke(d,"leaflet-zoom-animated"),this.options.className&&Ke(d,this.options.className),d.onselectstart=p,d.onmousemove=p,d.onload=o(this.fire,this,"load"),d.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),l){this._url=d.src;return}d.src=this._url,d.alt=this.options.alt},_animateZoom:function(l){var d=this._map.getZoomScale(l.zoom),v=this._map._latLngBoundsToNewLayerBounds(this._bounds,l.zoom,l.center).min;fs(this._image,v,d)},_reset:function(){var l=this._image,d=new K(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),v=d.getSize();Wt(l,d.min),l.style.width=v.x+"px",l.style.height=v.y+"px"},_updateOpacity:function(){sr(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var l=this.options.errorOverlayUrl;l&&this._url!==l&&(this._url=l,this._image.src=l)},getCenter:function(){return this._bounds.getCenter()}}),ZS=function(l,d,v){return new gc(l,d,v)},Xg=gc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var l=this._url.tagName==="VIDEO",d=this._image=l?this._url:$e("video");if(Ke(d,"leaflet-image-layer"),this._zoomAnimated&&Ke(d,"leaflet-zoom-animated"),this.options.className&&Ke(d,this.options.className),d.onselectstart=p,d.onmousemove=p,d.onloadeddata=o(this.fire,this,"load"),l){for(var v=d.getElementsByTagName("source"),k=[],O=0;O<v.length;O++)k.push(v[O].src);this._url=v.length>0?k:[d.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(d.style,"objectFit")&&(d.style.objectFit="fill"),d.autoplay=!!this.options.autoplay,d.loop=!!this.options.loop,d.muted=!!this.options.muted,d.playsInline=!!this.options.playsInline;for(var U=0;U<this._url.length;U++){var te=$e("source");te.src=this._url[U],d.appendChild(te)}}});function YS(l,d,v){return new Xg(l,d,v)}var Qg=gc.extend({_initImage:function(){var l=this._image=this._url;Ke(l,"leaflet-image-layer"),this._zoomAnimated&&Ke(l,"leaflet-zoom-animated"),this.options.className&&Ke(l,this.options.className),l.onselectstart=p,l.onmousemove=p}});function qS(l,d,v){return new Qg(l,d,v)}var zr=xr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(l,d){l&&(l instanceof X||S(l))?(this._latlng=_e(l),_(this,d)):(_(this,l),this._source=d),this.options.content&&(this._content=this.options.content)},openOn:function(l){return l=arguments.length?l:this._source._map,l.hasLayer(this)||l.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(l){return this._map?this.close():(arguments.length?this._source=l:l=this._source,this._prepareOpen(),this.openOn(l._map)),this},onAdd:function(l){this._zoomAnimated=l._zoomAnimated,this._container||this._initLayout(),l._fadeAnimated&&sr(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),l._fadeAnimated&&sr(this._container,1),this.bringToFront(),this.options.interactive&&(Ke(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(l){l._fadeAnimated?(sr(this._container,0),this._removeTimeout=setTimeout(o(ct,void 0,this._container),200)):ct(this._container),this.options.interactive&&(Nt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(l){return this._latlng=_e(l),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(l){return this._content=l,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var l={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ki(this._container),this},bringToBack:function(){return this._map&&oo(this._container),this},_prepareOpen:function(l){var d=this._source;if(!d._map)return!1;if(d instanceof Xr){d=null;var v=this._source._layers;for(var k in v)if(v[k]._map){d=v[k];break}if(!d)return!1;this._source=d}if(!l)if(d.getCenter)l=d.getCenter();else if(d.getLatLng)l=d.getLatLng();else if(d.getBounds)l=d.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(l),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var l=this._contentNode,d=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof d=="string")l.innerHTML=d;else{for(;l.hasChildNodes();)l.removeChild(l.firstChild);l.appendChild(d)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var l=this._map.latLngToLayerPoint(this._latlng),d=H(this.options.offset),v=this._getAnchor();this._zoomAnimated?Wt(this._container,l.add(v)):d=d.add(l).add(v);var k=this._containerBottom=-d.y,O=this._containerLeft=-Math.round(this._containerWidth/2)+d.x;this._container.style.bottom=k+"px",this._container.style.left=O+"px"}},_getAnchor:function(){return[0,0]}});ot.include({_initOverlay:function(l,d,v,k){var O=d;return O instanceof l||(O=new l(k).setContent(d)),v&&O.setLatLng(v),O}}),xr.include({_initOverlay:function(l,d,v,k){var O=v;return O instanceof l?(_(O,k),O._source=this):(O=d&&!k?d:new l(k,this),O.setContent(v)),O}});var yc=zr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(l){return l=arguments.length?l:this._source._map,!l.hasLayer(this)&&l._popup&&l._popup.options.autoClose&&l.removeLayer(l._popup),l._popup=this,zr.prototype.openOn.call(this,l)},onAdd:function(l){zr.prototype.onAdd.call(this,l),l.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ci||this._source.on("preclick",ms))},onRemove:function(l){zr.prototype.onRemove.call(this,l),l.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ci||this._source.off("preclick",ms))},getEvents:function(){var l=zr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(l.preclick=this.close),this.options.keepInView&&(l.moveend=this._adjustPan),l},_initLayout:function(){var l="leaflet-popup",d=this._container=$e("div",l+" "+(this.options.className||"")+" leaflet-zoom-animated"),v=this._wrapper=$e("div",l+"-content-wrapper",d);if(this._contentNode=$e("div",l+"-content",v),xa(d),ph(this._contentNode),qe(d,"contextmenu",ms),this._tipContainer=$e("div",l+"-tip-container",d),this._tip=$e("div",l+"-tip",this._tipContainer),this.options.closeButton){var k=this._closeButton=$e("a",l+"-close-button",d);k.setAttribute("role","button"),k.setAttribute("aria-label","Close popup"),k.href="#close",k.innerHTML='<span aria-hidden="true">&#215;</span>',qe(k,"click",function(O){an(O),this.close()},this)}},_updateLayout:function(){var l=this._contentNode,d=l.style;d.width="",d.whiteSpace="nowrap";var v=l.offsetWidth;v=Math.min(v,this.options.maxWidth),v=Math.max(v,this.options.minWidth),d.width=v+1+"px",d.whiteSpace="",d.height="";var k=l.offsetHeight,O=this.options.maxHeight,U="leaflet-popup-scrolled";O&&k>O?(d.height=O+"px",Ke(l,U)):Nt(l,U),this._containerWidth=this._container.offsetWidth},_animateZoom:function(l){var d=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center),v=this._getAnchor();Wt(this._container,d.add(v))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var l=this._map,d=parseInt(_r(this._container,"marginBottom"),10)||0,v=this._container.offsetHeight+d,k=this._containerWidth,O=new z(this._containerLeft,-v-this._containerBottom);O._add(ps(this._container));var U=l.layerPointToContainerPoint(O),te=H(this.options.autoPanPadding),ue=H(this.options.autoPanPaddingTopLeft||te),me=H(this.options.autoPanPaddingBottomRight||te),we=l.getSize(),Me=0,Ve=0;U.x+k+me.x>we.x&&(Me=U.x+k-we.x+me.x),U.x-Me-ue.x<0&&(Me=U.x-ue.x),U.y+v+me.y>we.y&&(Ve=U.y+v-we.y+me.y),U.y-Ve-ue.y<0&&(Ve=U.y-ue.y),(Me||Ve)&&(this.options.keepInView&&(this._autopanning=!0),l.fire("autopanstart").panBy([Me,Ve]))}},_getAnchor:function(){return H(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),GS=function(l,d){return new yc(l,d)};ot.mergeOptions({closePopupOnClick:!0}),ot.include({openPopup:function(l,d,v){return this._initOverlay(yc,l,d,v).openOn(this),this},closePopup:function(l){return l=arguments.length?l:this._popup,l&&l.close(),this}}),xr.include({bindPopup:function(l,d){return this._popup=this._initOverlay(yc,this._popup,l,d),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(l){return this._popup&&(this instanceof Xr||(this._popup._source=this),this._popup._prepareOpen(l||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(l){return this._popup&&this._popup.setContent(l),this},getPopup:function(){return this._popup},_openPopup:function(l){if(!(!this._popup||!this._map)){gs(l);var d=l.layer||l.target;if(this._popup._source===d&&!(d instanceof Ci)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(l.latlng);return}this._popup._source=d,this.openPopup(l.latlng)}},_movePopup:function(l){this._popup.setLatLng(l.latlng)},_onKeyPress:function(l){l.originalEvent.keyCode===13&&this._openPopup(l)}});var _c=zr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(l){zr.prototype.onAdd.call(this,l),this.setOpacity(this.options.opacity),l.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(l){zr.prototype.onRemove.call(this,l),l.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var l=zr.prototype.getEvents.call(this);return this.options.permanent||(l.preclick=this.close),l},_initLayout:function(){var l="leaflet-tooltip",d=l+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=$e("div",d),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(l){var d,v,k=this._map,O=this._container,U=k.latLngToContainerPoint(k.getCenter()),te=k.layerPointToContainerPoint(l),ue=this.options.direction,me=O.offsetWidth,we=O.offsetHeight,Me=H(this.options.offset),Ve=this._getAnchor();ue==="top"?(d=me/2,v=we):ue==="bottom"?(d=me/2,v=0):ue==="center"?(d=me/2,v=we/2):ue==="right"?(d=0,v=we/2):ue==="left"?(d=me,v=we/2):te.x<U.x?(ue="right",d=0,v=we/2):(ue="left",d=me+(Me.x+Ve.x)*2,v=we/2),l=l.subtract(H(d,v,!0)).add(Me).add(Ve),Nt(O,"leaflet-tooltip-right"),Nt(O,"leaflet-tooltip-left"),Nt(O,"leaflet-tooltip-top"),Nt(O,"leaflet-tooltip-bottom"),Ke(O,"leaflet-tooltip-"+ue),Wt(O,l)},_updatePosition:function(){var l=this._map.latLngToLayerPoint(this._latlng);this._setPosition(l)},setOpacity:function(l){this.options.opacity=l,this._container&&sr(this._container,l)},_animateZoom:function(l){var d=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center);this._setPosition(d)},_getAnchor:function(){return H(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),KS=function(l,d){return new _c(l,d)};ot.include({openTooltip:function(l,d,v){return this._initOverlay(_c,l,d,v).openOn(this),this},closeTooltip:function(l){return l.close(),this}}),xr.include({bindTooltip:function(l,d){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(_c,this._tooltip,l,d),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(l){if(!(!l&&this._tooltipHandlersAdded)){var d=l?"off":"on",v={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?v.add=this._openTooltip:(v.mouseover=this._openTooltip,v.mouseout=this.closeTooltip,v.click=this._openTooltip,this._map?this._addFocusListeners():v.add=this._addFocusListeners),this._tooltip.options.sticky&&(v.mousemove=this._moveTooltip),this[d](v),this._tooltipHandlersAdded=!l}},openTooltip:function(l){return this._tooltip&&(this instanceof Xr||(this._tooltip._source=this),this._tooltip._prepareOpen(l)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(l){return this._tooltip&&this._tooltip.setContent(l),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(l){var d=typeof l.getElement=="function"&&l.getElement();d&&(qe(d,"focus",function(){this._tooltip._source=l,this.openTooltip()},this),qe(d,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(l){var d=typeof l.getElement=="function"&&l.getElement();d&&d.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(l){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var d=this;this._map.once("moveend",function(){d._openOnceFlag=!1,d._openTooltip(l)});return}this._tooltip._source=l.layer||l.target,this.openTooltip(this._tooltip.options.sticky?l.latlng:void 0)}},_moveTooltip:function(l){var d=l.latlng,v,k;this._tooltip.options.sticky&&l.originalEvent&&(v=this._map.mouseEventToContainerPoint(l.originalEvent),k=this._map.containerPointToLayerPoint(v),d=this._map.layerPointToLatLng(k)),this._tooltip.setLatLng(d)}});var ey=lo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(l){var d=l&&l.tagName==="DIV"?l:document.createElement("div"),v=this.options;if(v.html instanceof Element?(hs(d),d.appendChild(v.html)):d.innerHTML=v.html!==!1?v.html:"",v.bgPos){var k=H(v.bgPos);d.style.backgroundPosition=-k.x+"px "+-k.y+"px"}return this._setIconStyles(d,"icon"),d},createShadow:function(){return null}});function JS(l){return new ey(l)}lo.Default=Sa;var ka=xr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:se.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(l){_(this,l)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(l){l._addZoomLimit(this)},onRemove:function(l){this._removeAllTiles(),ct(this._container),l._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ki(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(oo(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(l){return this.options.opacity=l,this._updateOpacity(),this},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var l=this._clampZoom(this._map.getZoom());l!==this._tileZoom&&(this._tileZoom=l,this._updateLevels()),this._update()}return this},getEvents:function(){var l={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u(this._onMoveEnd,this.options.updateInterval,this)),l.move=this._onMove),this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},createTile:function(){return document.createElement("div")},getTileSize:function(){var l=this.options.tileSize;return l instanceof z?l:new z(l,l)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(l){for(var d=this.getPane().children,v=-l(-1/0,1/0),k=0,O=d.length,U;k<O;k++)U=d[k].style.zIndex,d[k]!==this._container&&U&&(v=l(v,+U));isFinite(v)&&(this.options.zIndex=v+l(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!se.ielt9){sr(this._container,this.options.opacity);var l=+new Date,d=!1,v=!1;for(var k in this._tiles){var O=this._tiles[k];if(!(!O.current||!O.loaded)){var U=Math.min(1,(l-O.loaded)/200);sr(O.el,U),U<1?d=!0:(O.active?v=!0:this._onOpaqueTile(O),O.active=!0)}}v&&!this._noPrune&&this._pruneTiles(),d&&(R(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=$e("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var l=this._tileZoom,d=this.options.maxZoom;if(l!==void 0){for(var v in this._levels)v=Number(v),this._levels[v].el.children.length||v===l?(this._levels[v].el.style.zIndex=d-Math.abs(l-v),this._onUpdateLevel(v)):(ct(this._levels[v].el),this._removeTilesAtZoom(v),this._onRemoveLevel(v),delete this._levels[v]);var k=this._levels[l],O=this._map;return k||(k=this._levels[l]={},k.el=$e("div","leaflet-tile-container leaflet-zoom-animated",this._container),k.el.style.zIndex=d,k.origin=O.project(O.unproject(O.getPixelOrigin()),l).round(),k.zoom=l,this._setZoomTransform(k,O.getCenter(),O.getZoom()),p(k.el.offsetWidth),this._onCreateLevel(k)),this._level=k,k}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var l,d,v=this._map.getZoom();if(v>this.options.maxZoom||v<this.options.minZoom){this._removeAllTiles();return}for(l in this._tiles)d=this._tiles[l],d.retain=d.current;for(l in this._tiles)if(d=this._tiles[l],d.current&&!d.active){var k=d.coords;this._retainParent(k.x,k.y,k.z,k.z-5)||this._retainChildren(k.x,k.y,k.z,k.z+2)}for(l in this._tiles)this._tiles[l].retain||this._removeTile(l)}},_removeTilesAtZoom:function(l){for(var d in this._tiles)this._tiles[d].coords.z===l&&this._removeTile(d)},_removeAllTiles:function(){for(var l in this._tiles)this._removeTile(l)},_invalidateAll:function(){for(var l in this._levels)ct(this._levels[l].el),this._onRemoveLevel(Number(l)),delete this._levels[l];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(l,d,v,k){var O=Math.floor(l/2),U=Math.floor(d/2),te=v-1,ue=new z(+O,+U);ue.z=+te;var me=this._tileCoordsToKey(ue),we=this._tiles[me];return we&&we.active?(we.retain=!0,!0):(we&&we.loaded&&(we.retain=!0),te>k?this._retainParent(O,U,te,k):!1)},_retainChildren:function(l,d,v,k){for(var O=2*l;O<2*l+2;O++)for(var U=2*d;U<2*d+2;U++){var te=new z(O,U);te.z=v+1;var ue=this._tileCoordsToKey(te),me=this._tiles[ue];if(me&&me.active){me.retain=!0;continue}else me&&me.loaded&&(me.retain=!0);v+1<k&&this._retainChildren(O,U,v+1,k)}},_resetView:function(l){var d=l&&(l.pinch||l.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),d,d)},_animateZoom:function(l){this._setView(l.center,l.zoom,!0,l.noUpdate)},_clampZoom:function(l){var d=this.options;return d.minNativeZoom!==void 0&&l<d.minNativeZoom?d.minNativeZoom:d.maxNativeZoom!==void 0&&d.maxNativeZoom<l?d.maxNativeZoom:l},_setView:function(l,d,v,k){var O=Math.round(d);this.options.maxZoom!==void 0&&O>this.options.maxZoom||this.options.minZoom!==void 0&&O<this.options.minZoom?O=void 0:O=this._clampZoom(O);var U=this.options.updateWhenZooming&&O!==this._tileZoom;(!k||U)&&(this._tileZoom=O,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),O!==void 0&&this._update(l),v||this._pruneTiles(),this._noPrune=!!v),this._setZoomTransforms(l,d)},_setZoomTransforms:function(l,d){for(var v in this._levels)this._setZoomTransform(this._levels[v],l,d)},_setZoomTransform:function(l,d,v){var k=this._map.getZoomScale(v,l.zoom),O=l.origin.multiplyBy(k).subtract(this._map._getNewPixelOrigin(d,v)).round();se.any3d?fs(l.el,O,k):Wt(l.el,O)},_resetGrid:function(){var l=this._map,d=l.options.crs,v=this._tileSize=this.getTileSize(),k=this._tileZoom,O=this._map.getPixelWorldBounds(this._tileZoom);O&&(this._globalTileRange=this._pxBoundsToTileRange(O)),this._wrapX=d.wrapLng&&!this.options.noWrap&&[Math.floor(l.project([0,d.wrapLng[0]],k).x/v.x),Math.ceil(l.project([0,d.wrapLng[1]],k).x/v.y)],this._wrapY=d.wrapLat&&!this.options.noWrap&&[Math.floor(l.project([d.wrapLat[0],0],k).y/v.x),Math.ceil(l.project([d.wrapLat[1],0],k).y/v.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(l){var d=this._map,v=d._animatingZoom?Math.max(d._animateToZoom,d.getZoom()):d.getZoom(),k=d.getZoomScale(v,this._tileZoom),O=d.project(l,this._tileZoom).floor(),U=d.getSize().divideBy(k*2);return new K(O.subtract(U),O.add(U))},_update:function(l){var d=this._map;if(d){var v=this._clampZoom(d.getZoom());if(l===void 0&&(l=d.getCenter()),this._tileZoom!==void 0){var k=this._getTiledPixelBounds(l),O=this._pxBoundsToTileRange(k),U=O.getCenter(),te=[],ue=this.options.keepBuffer,me=new K(O.getBottomLeft().subtract([ue,-ue]),O.getTopRight().add([ue,-ue]));if(!(isFinite(O.min.x)&&isFinite(O.min.y)&&isFinite(O.max.x)&&isFinite(O.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var we in this._tiles){var Me=this._tiles[we].coords;(Me.z!==this._tileZoom||!me.contains(new z(Me.x,Me.y)))&&(this._tiles[we].current=!1)}if(Math.abs(v-this._tileZoom)>1){this._setView(l,v);return}for(var Ve=O.min.y;Ve<=O.max.y;Ve++)for(var tt=O.min.x;tt<=O.max.x;tt++){var kn=new z(tt,Ve);if(kn.z=this._tileZoom,!!this._isValidTile(kn)){var Qt=this._tiles[this._tileCoordsToKey(kn)];Qt?Qt.current=!0:te.push(kn)}}if(te.sort(function(Mn,fo){return Mn.distanceTo(U)-fo.distanceTo(U)}),te.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ar=document.createDocumentFragment();for(tt=0;tt<te.length;tt++)this._addTile(te[tt],ar);this._level.el.appendChild(ar)}}}},_isValidTile:function(l){var d=this._map.options.crs;if(!d.infinite){var v=this._globalTileRange;if(!d.wrapLng&&(l.x<v.min.x||l.x>v.max.x)||!d.wrapLat&&(l.y<v.min.y||l.y>v.max.y))return!1}if(!this.options.bounds)return!0;var k=this._tileCoordsToBounds(l);return ne(this.options.bounds).overlaps(k)},_keyToBounds:function(l){return this._tileCoordsToBounds(this._keyToTileCoords(l))},_tileCoordsToNwSe:function(l){var d=this._map,v=this.getTileSize(),k=l.scaleBy(v),O=k.add(v),U=d.unproject(k,l.z),te=d.unproject(O,l.z);return[U,te]},_tileCoordsToBounds:function(l){var d=this._tileCoordsToNwSe(l),v=new ce(d[0],d[1]);return this.options.noWrap||(v=this._map.wrapLatLngBounds(v)),v},_tileCoordsToKey:function(l){return l.x+":"+l.y+":"+l.z},_keyToTileCoords:function(l){var d=l.split(":"),v=new z(+d[0],+d[1]);return v.z=+d[2],v},_removeTile:function(l){var d=this._tiles[l];d&&(ct(d.el),delete this._tiles[l],this.fire("tileunload",{tile:d.el,coords:this._keyToTileCoords(l)}))},_initTile:function(l){Ke(l,"leaflet-tile");var d=this.getTileSize();l.style.width=d.x+"px",l.style.height=d.y+"px",l.onselectstart=p,l.onmousemove=p,se.ielt9&&this.options.opacity<1&&sr(l,this.options.opacity)},_addTile:function(l,d){var v=this._getTilePos(l),k=this._tileCoordsToKey(l),O=this.createTile(this._wrapCoords(l),o(this._tileReady,this,l));this._initTile(O),this.createTile.length<2&&V(o(this._tileReady,this,l,null,O)),Wt(O,v),this._tiles[k]={el:O,coords:l,current:!0},d.appendChild(O),this.fire("tileloadstart",{tile:O,coords:l})},_tileReady:function(l,d,v){d&&this.fire("tileerror",{error:d,tile:v,coords:l});var k=this._tileCoordsToKey(l);v=this._tiles[k],v&&(v.loaded=+new Date,this._map._fadeAnimated?(sr(v.el,0),R(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(v.active=!0,this._pruneTiles()),d||(Ke(v.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:v.el,coords:l})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),se.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(l){return l.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(l){var d=new z(this._wrapX?h(l.x,this._wrapX):l.x,this._wrapY?h(l.y,this._wrapY):l.y);return d.z=l.z,d},_pxBoundsToTileRange:function(l){var d=this.getTileSize();return new K(l.min.unscaleBy(d).floor(),l.max.unscaleBy(d).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var l in this._tiles)if(!this._tiles[l].loaded)return!1;return!0}});function XS(l){return new ka(l)}var ho=ka.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(l,d){this._url=l,d=_(this,d),d.detectRetina&&se.retina&&d.maxZoom>0?(d.tileSize=Math.floor(d.tileSize/2),d.zoomReverse?(d.zoomOffset--,d.minZoom=Math.min(d.maxZoom,d.minZoom+1)):(d.zoomOffset++,d.maxZoom=Math.max(d.minZoom,d.maxZoom-1)),d.minZoom=Math.max(0,d.minZoom)):d.zoomReverse?d.minZoom=Math.min(d.maxZoom,d.minZoom):d.maxZoom=Math.max(d.minZoom,d.maxZoom),typeof d.subdomains=="string"&&(d.subdomains=d.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(l,d){return this._url===l&&d===void 0&&(d=!0),this._url=l,d||this.redraw(),this},createTile:function(l,d){var v=document.createElement("img");return qe(v,"load",o(this._tileOnLoad,this,d,v)),qe(v,"error",o(this._tileOnError,this,d,v)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(v.referrerPolicy=this.options.referrerPolicy),v.alt="",v.src=this.getTileUrl(l),v},getTileUrl:function(l){var d={r:se.retina?"@2x":"",s:this._getSubdomain(l),x:l.x,y:l.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var v=this._globalTileRange.max.y-l.y;this.options.tms&&(d.y=v),d["-y"]=v}return w(this._url,i(d,this.options))},_tileOnLoad:function(l,d){se.ielt9?setTimeout(o(l,this,null,d),0):l(null,d)},_tileOnError:function(l,d,v){var k=this.options.errorTileUrl;k&&d.getAttribute("src")!==k&&(d.src=k),l(v,d)},_onTileRemove:function(l){l.tile.onload=null},_getZoomForUrl:function(){var l=this._tileZoom,d=this.options.maxZoom,v=this.options.zoomReverse,k=this.options.zoomOffset;return v&&(l=d-l),l+k},_getSubdomain:function(l){var d=Math.abs(l.x+l.y)%this.options.subdomains.length;return this.options.subdomains[d]},_abortLoading:function(){var l,d;for(l in this._tiles)if(this._tiles[l].coords.z!==this._tileZoom&&(d=this._tiles[l].el,d.onload=p,d.onerror=p,!d.complete)){d.src=j;var v=this._tiles[l].coords;ct(d),delete this._tiles[l],this.fire("tileabort",{tile:d,coords:v})}},_removeTile:function(l){var d=this._tiles[l];if(d)return d.el.setAttribute("src",j),ka.prototype._removeTile.call(this,l)},_tileReady:function(l,d,v){if(!(!this._map||v&&v.getAttribute("src")===j))return ka.prototype._tileReady.call(this,l,d,v)}});function ty(l,d){return new ho(l,d)}var ny=ho.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(l,d){this._url=l;var v=i({},this.defaultWmsParams);for(var k in d)k in this.options||(v[k]=d[k]);d=_(this,d);var O=d.detectRetina&&se.retina?2:1,U=this.getTileSize();v.width=U.x*O,v.height=U.y*O,this.wmsParams=v},onAdd:function(l){this._crs=this.options.crs||l.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var d=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[d]=this._crs.code,ho.prototype.onAdd.call(this,l)},getTileUrl:function(l){var d=this._tileCoordsToNwSe(l),v=this._crs,k=Y(v.project(d[0]),v.project(d[1])),O=k.min,U=k.max,te=(this._wmsVersion>=1.3&&this._crs===qg?[O.y,O.x,U.y,U.x]:[O.x,O.y,U.x,U.y]).join(","),ue=ho.prototype.getTileUrl.call(this,l);return ue+b(this.wmsParams,ue,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+te},setParams:function(l,d){return i(this.wmsParams,l),d||this.redraw(),this}});function QS(l,d){return new ny(l,d)}ho.WMS=ny,ty.wms=QS;var ti=xr.extend({options:{padding:.1},initialize:function(l){_(this,l),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ke(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var l={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(l.zoomanim=this._onAnimZoom),l},_onAnimZoom:function(l){this._updateTransform(l.center,l.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(l,d){var v=this._map.getZoomScale(d,this._zoom),k=this._map.getSize().multiplyBy(.5+this.options.padding),O=this._map.project(this._center,d),U=k.multiplyBy(-v).add(O).subtract(this._map._getNewPixelOrigin(l,d));se.any3d?fs(this._container,U,v):Wt(this._container,U)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var l in this._layers)this._layers[l]._reset()},_onZoomEnd:function(){for(var l in this._layers)this._layers[l]._project()},_updatePaths:function(){for(var l in this._layers)this._layers[l]._update()},_update:function(){var l=this.options.padding,d=this._map.getSize(),v=this._map.containerPointToLayerPoint(d.multiplyBy(-l)).round();this._bounds=new K(v,v.add(d.multiplyBy(1+l*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ry=ti.extend({options:{tolerance:0},getEvents:function(){var l=ti.prototype.getEvents.call(this);return l.viewprereset=this._onViewPreReset,l},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ti.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var l=this._container=document.createElement("canvas");qe(l,"mousemove",this._onMouseMove,this),qe(l,"click dblclick mousedown mouseup contextmenu",this._onClick,this),qe(l,"mouseout",this._handleMouseOut,this),l._leaflet_disable_events=!0,this._ctx=l.getContext("2d")},_destroyContainer:function(){R(this._redrawRequest),delete this._ctx,ct(this._container),_t(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var l;this._redrawBounds=null;for(var d in this._layers)l=this._layers[d],l._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ti.prototype._update.call(this);var l=this._bounds,d=this._container,v=l.getSize(),k=se.retina?2:1;Wt(d,l.min),d.width=k*v.x,d.height=k*v.y,d.style.width=v.x+"px",d.style.height=v.y+"px",se.retina&&this._ctx.scale(2,2),this._ctx.translate(-l.min.x,-l.min.y),this.fire("update")}},_reset:function(){ti.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(l){this._updateDashArray(l),this._layers[c(l)]=l;var d=l._order={layer:l,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=d),this._drawLast=d,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(l){this._requestRedraw(l)},_removePath:function(l){var d=l._order,v=d.next,k=d.prev;v?v.prev=k:this._drawLast=k,k?k.next=v:this._drawFirst=v,delete l._order,delete this._layers[c(l)],this._requestRedraw(l)},_updatePath:function(l){this._extendRedrawBounds(l),l._project(),l._update(),this._requestRedraw(l)},_updateStyle:function(l){this._updateDashArray(l),this._requestRedraw(l)},_updateDashArray:function(l){if(typeof l.options.dashArray=="string"){var d=l.options.dashArray.split(/[, ]+/),v=[],k,O;for(O=0;O<d.length;O++){if(k=Number(d[O]),isNaN(k))return;v.push(k)}l.options._dashArray=v}else l.options._dashArray=l.options.dashArray},_requestRedraw:function(l){this._map&&(this._extendRedrawBounds(l),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(l){if(l._pxBounds){var d=(l.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new K,this._redrawBounds.extend(l._pxBounds.min.subtract([d,d])),this._redrawBounds.extend(l._pxBounds.max.add([d,d]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var l=this._redrawBounds;if(l){var d=l.getSize();this._ctx.clearRect(l.min.x,l.min.y,d.x,d.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var l,d=this._redrawBounds;if(this._ctx.save(),d){var v=d.getSize();this._ctx.beginPath(),this._ctx.rect(d.min.x,d.min.y,v.x,v.y),this._ctx.clip()}this._drawing=!0;for(var k=this._drawFirst;k;k=k.next)l=k.layer,(!d||l._pxBounds&&l._pxBounds.intersects(d))&&l._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(l,d){if(this._drawing){var v,k,O,U,te=l._parts,ue=te.length,me=this._ctx;if(ue){for(me.beginPath(),v=0;v<ue;v++){for(k=0,O=te[v].length;k<O;k++)U=te[v][k],me[k?"lineTo":"moveTo"](U.x,U.y);d&&me.closePath()}this._fillStroke(me,l)}}},_updateCircle:function(l){if(!(!this._drawing||l._empty())){var d=l._point,v=this._ctx,k=Math.max(Math.round(l._radius),1),O=(Math.max(Math.round(l._radiusY),1)||k)/k;O!==1&&(v.save(),v.scale(1,O)),v.beginPath(),v.arc(d.x,d.y/O,k,0,Math.PI*2,!1),O!==1&&v.restore(),this._fillStroke(v,l)}},_fillStroke:function(l,d){var v=d.options;v.fill&&(l.globalAlpha=v.fillOpacity,l.fillStyle=v.fillColor||v.color,l.fill(v.fillRule||"evenodd")),v.stroke&&v.weight!==0&&(l.setLineDash&&l.setLineDash(d.options&&d.options._dashArray||[]),l.globalAlpha=v.opacity,l.lineWidth=v.weight,l.strokeStyle=v.color,l.lineCap=v.lineCap,l.lineJoin=v.lineJoin,l.stroke())},_onClick:function(l){for(var d=this._map.mouseEventToLayerPoint(l),v,k,O=this._drawFirst;O;O=O.next)v=O.layer,v.options.interactive&&v._containsPoint(d)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(v))&&(k=v);this._fireEvent(k?[k]:!1,l)},_onMouseMove:function(l){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var d=this._map.mouseEventToLayerPoint(l);this._handleMouseHover(l,d)}},_handleMouseOut:function(l){var d=this._hoveredLayer;d&&(Nt(this._container,"leaflet-interactive"),this._fireEvent([d],l,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(l,d){if(!this._mouseHoverThrottled){for(var v,k,O=this._drawFirst;O;O=O.next)v=O.layer,v.options.interactive&&v._containsPoint(d)&&(k=v);k!==this._hoveredLayer&&(this._handleMouseOut(l),k&&(Ke(this._container,"leaflet-interactive"),this._fireEvent([k],l,"mouseover"),this._hoveredLayer=k)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,l),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(l,d,v){this._map._fireDOMEvent(d,v||d.type,l)},_bringToFront:function(l){var d=l._order;if(d){var v=d.next,k=d.prev;if(v)v.prev=k;else return;k?k.next=v:v&&(this._drawFirst=v),d.prev=this._drawLast,this._drawLast.next=d,d.next=null,this._drawLast=d,this._requestRedraw(l)}},_bringToBack:function(l){var d=l._order;if(d){var v=d.next,k=d.prev;if(k)k.next=v;else return;v?v.prev=k:k&&(this._drawLast=k),d.prev=null,d.next=this._drawFirst,this._drawFirst.prev=d,this._drawFirst=d,this._requestRedraw(l)}}});function iy(l){return se.canvas?new ry(l):null}var Ea=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(l){return document.createElement("<lvml:"+l+' class="lvml">')}}catch{}return function(l){return document.createElement("<"+l+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),ek={_initContainer:function(){this._container=$e("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ti.prototype._update.call(this),this.fire("update"))},_initPath:function(l){var d=l._container=Ea("shape");Ke(d,"leaflet-vml-shape "+(this.options.className||"")),d.coordsize="1 1",l._path=Ea("path"),d.appendChild(l._path),this._updateStyle(l),this._layers[c(l)]=l},_addPath:function(l){var d=l._container;this._container.appendChild(d),l.options.interactive&&l.addInteractiveTarget(d)},_removePath:function(l){var d=l._container;ct(d),l.removeInteractiveTarget(d),delete this._layers[c(l)]},_updateStyle:function(l){var d=l._stroke,v=l._fill,k=l.options,O=l._container;O.stroked=!!k.stroke,O.filled=!!k.fill,k.stroke?(d||(d=l._stroke=Ea("stroke")),O.appendChild(d),d.weight=k.weight+"px",d.color=k.color,d.opacity=k.opacity,k.dashArray?d.dashStyle=S(k.dashArray)?k.dashArray.join(" "):k.dashArray.replace(/( *, *)/g," "):d.dashStyle="",d.endcap=k.lineCap.replace("butt","flat"),d.joinstyle=k.lineJoin):d&&(O.removeChild(d),l._stroke=null),k.fill?(v||(v=l._fill=Ea("fill")),O.appendChild(v),v.color=k.fillColor||k.color,v.opacity=k.fillOpacity):v&&(O.removeChild(v),l._fill=null)},_updateCircle:function(l){var d=l._point.round(),v=Math.round(l._radius),k=Math.round(l._radiusY||v);this._setPath(l,l._empty()?"M0 0":"AL "+d.x+","+d.y+" "+v+","+k+" 0,"+65535*360)},_setPath:function(l,d){l._path.v=d},_bringToFront:function(l){ki(l._container)},_bringToBack:function(l){oo(l._container)}},vc=se.vml?Ea:he,Ca=ti.extend({_initContainer:function(){this._container=vc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=vc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ct(this._container),_t(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ti.prototype._update.call(this);var l=this._bounds,d=l.getSize(),v=this._container;(!this._svgSize||!this._svgSize.equals(d))&&(this._svgSize=d,v.setAttribute("width",d.x),v.setAttribute("height",d.y)),Wt(v,l.min),v.setAttribute("viewBox",[l.min.x,l.min.y,d.x,d.y].join(" ")),this.fire("update")}},_initPath:function(l){var d=l._path=vc("path");l.options.className&&Ke(d,l.options.className),l.options.interactive&&Ke(d,"leaflet-interactive"),this._updateStyle(l),this._layers[c(l)]=l},_addPath:function(l){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(l._path),l.addInteractiveTarget(l._path)},_removePath:function(l){ct(l._path),l.removeInteractiveTarget(l._path),delete this._layers[c(l)]},_updatePath:function(l){l._project(),l._update()},_updateStyle:function(l){var d=l._path,v=l.options;d&&(v.stroke?(d.setAttribute("stroke",v.color),d.setAttribute("stroke-opacity",v.opacity),d.setAttribute("stroke-width",v.weight),d.setAttribute("stroke-linecap",v.lineCap),d.setAttribute("stroke-linejoin",v.lineJoin),v.dashArray?d.setAttribute("stroke-dasharray",v.dashArray):d.removeAttribute("stroke-dasharray"),v.dashOffset?d.setAttribute("stroke-dashoffset",v.dashOffset):d.removeAttribute("stroke-dashoffset")):d.setAttribute("stroke","none"),v.fill?(d.setAttribute("fill",v.fillColor||v.color),d.setAttribute("fill-opacity",v.fillOpacity),d.setAttribute("fill-rule",v.fillRule||"evenodd")):d.setAttribute("fill","none"))},_updatePoly:function(l,d){this._setPath(l,ae(l._parts,d))},_updateCircle:function(l){var d=l._point,v=Math.max(Math.round(l._radius),1),k=Math.max(Math.round(l._radiusY),1)||v,O="a"+v+","+k+" 0 1,0 ",U=l._empty()?"M0 0":"M"+(d.x-v)+","+d.y+O+v*2+",0 "+O+-v*2+",0 ";this._setPath(l,U)},_setPath:function(l,d){l._path.setAttribute("d",d)},_bringToFront:function(l){ki(l._path)},_bringToBack:function(l){oo(l._path)}});se.vml&&Ca.include(ek);function sy(l){return se.svg||se.vml?new Ca(l):null}ot.include({getRenderer:function(l){var d=l.options.renderer||this._getPaneRenderer(l.options.pane)||this.options.renderer||this._renderer;return d||(d=this._renderer=this._createRenderer()),this.hasLayer(d)||this.addLayer(d),d},_getPaneRenderer:function(l){if(l==="overlayPane"||l===void 0)return!1;var d=this._paneRenderers[l];return d===void 0&&(d=this._createRenderer({pane:l}),this._paneRenderers[l]=d),d},_createRenderer:function(l){return this.options.preferCanvas&&iy(l)||sy(l)}});var oy=co.extend({initialize:function(l,d){co.prototype.initialize.call(this,this._boundsToLatLngs(l),d)},setBounds:function(l){return this.setLatLngs(this._boundsToLatLngs(l))},_boundsToLatLngs:function(l){return l=ne(l),[l.getSouthWest(),l.getNorthWest(),l.getNorthEast(),l.getSouthEast()]}});function tk(l,d){return new oy(l,d)}Ca.create=vc,Ca.pointsToPath=ae,ei.geometryToLayer=hc,ei.coordsToLatLng=Sh,ei.coordsToLatLngs=fc,ei.latLngToCoords=kh,ei.latLngsToCoords=pc,ei.getFeature=uo,ei.asFeature=mc,ot.mergeOptions({boxZoom:!0});var ay=Ir.extend({initialize:function(l){this._map=l,this._container=l._container,this._pane=l._panes.overlayPane,this._resetStateTimeout=0,l.on("unload",this._destroy,this)},addHooks:function(){qe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){_t(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ct(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(l){if(!l.shiftKey||l.which!==1&&l.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ya(),oh(),this._startPoint=this._map.mouseEventToContainerPoint(l),qe(document,{contextmenu:gs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(l){this._moved||(this._moved=!0,this._box=$e("div","leaflet-zoom-box",this._container),Ke(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(l);var d=new K(this._point,this._startPoint),v=d.getSize();Wt(this._box,d.min),this._box.style.width=v.x+"px",this._box.style.height=v.y+"px"},_finish:function(){this._moved&&(ct(this._box),Nt(this._container,"leaflet-crosshair")),_a(),ah(),_t(document,{contextmenu:gs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(l){if(!(l.which!==1&&l.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var d=new ce(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(d).fire("boxzoomend",{boxZoomBounds:d})}},_onKeyDown:function(l){l.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ot.addInitHook("addHandler","boxZoom",ay),ot.mergeOptions({doubleClickZoom:!0});var ly=Ir.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(l){var d=this._map,v=d.getZoom(),k=d.options.zoomDelta,O=l.originalEvent.shiftKey?v-k:v+k;d.options.doubleClickZoom==="center"?d.setZoom(O):d.setZoomAround(l.containerPoint,O)}});ot.addInitHook("addHandler","doubleClickZoom",ly),ot.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var cy=Ir.extend({addHooks:function(){if(!this._draggable){var l=this._map;this._draggable=new Ei(l._mapPane,l._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),l.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),l.on("zoomend",this._onZoomEnd,this),l.whenReady(this._onZoomEnd,this))}Ke(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Nt(this._map._container,"leaflet-grab"),Nt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var l=this._map;if(l._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var d=ne(this._map.options.maxBounds);this._offsetLimit=Y(this._map.latLngToContainerPoint(d.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(d.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;l.fire("movestart").fire("dragstart"),l.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(l){if(this._map.options.inertia){var d=this._lastTime=+new Date,v=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(v),this._times.push(d),this._prunePositions(d)}this._map.fire("move",l).fire("drag",l)},_prunePositions:function(l){for(;this._positions.length>1&&l-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var l=this._map.getSize().divideBy(2),d=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=d.subtract(l).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(l,d){return l-(l-d)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var l=this._draggable._newPos.subtract(this._draggable._startPos),d=this._offsetLimit;l.x<d.min.x&&(l.x=this._viscousLimit(l.x,d.min.x)),l.y<d.min.y&&(l.y=this._viscousLimit(l.y,d.min.y)),l.x>d.max.x&&(l.x=this._viscousLimit(l.x,d.max.x)),l.y>d.max.y&&(l.y=this._viscousLimit(l.y,d.max.y)),this._draggable._newPos=this._draggable._startPos.add(l)}},_onPreDragWrap:function(){var l=this._worldWidth,d=Math.round(l/2),v=this._initialWorldOffset,k=this._draggable._newPos.x,O=(k-d+v)%l+d-v,U=(k+d+v)%l-d-v,te=Math.abs(O+v)<Math.abs(U+v)?O:U;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=te},_onDragEnd:function(l){var d=this._map,v=d.options,k=!v.inertia||l.noInertia||this._times.length<2;if(d.fire("dragend",l),k)d.fire("moveend");else{this._prunePositions(+new Date);var O=this._lastPos.subtract(this._positions[0]),U=(this._lastTime-this._times[0])/1e3,te=v.easeLinearity,ue=O.multiplyBy(te/U),me=ue.distanceTo([0,0]),we=Math.min(v.inertiaMaxSpeed,me),Me=ue.multiplyBy(we/me),Ve=we/(v.inertiaDeceleration*te),tt=Me.multiplyBy(-Ve/2).round();!tt.x&&!tt.y?d.fire("moveend"):(tt=d._limitOffset(tt,d.options.maxBounds),V(function(){d.panBy(tt,{duration:Ve,easeLinearity:te,noMoveStart:!0,animate:!0})}))}}});ot.addInitHook("addHandler","dragging",cy),ot.mergeOptions({keyboard:!0,keyboardPanDelta:80});var uy=Ir.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(l){this._map=l,this._setPanDelta(l.options.keyboardPanDelta),this._setZoomDelta(l.options.zoomDelta)},addHooks:function(){var l=this._map._container;l.tabIndex<=0&&(l.tabIndex="0"),qe(l,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),_t(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var l=document.body,d=document.documentElement,v=l.scrollTop||d.scrollTop,k=l.scrollLeft||d.scrollLeft;this._map._container.focus(),window.scrollTo(k,v)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(l){var d=this._panKeys={},v=this.keyCodes,k,O;for(k=0,O=v.left.length;k<O;k++)d[v.left[k]]=[-1*l,0];for(k=0,O=v.right.length;k<O;k++)d[v.right[k]]=[l,0];for(k=0,O=v.down.length;k<O;k++)d[v.down[k]]=[0,l];for(k=0,O=v.up.length;k<O;k++)d[v.up[k]]=[0,-1*l]},_setZoomDelta:function(l){var d=this._zoomKeys={},v=this.keyCodes,k,O;for(k=0,O=v.zoomIn.length;k<O;k++)d[v.zoomIn[k]]=l;for(k=0,O=v.zoomOut.length;k<O;k++)d[v.zoomOut[k]]=-l},_addHooks:function(){qe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){_t(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(l){if(!(l.altKey||l.ctrlKey||l.metaKey)){var d=l.keyCode,v=this._map,k;if(d in this._panKeys){if(!v._panAnim||!v._panAnim._inProgress)if(k=this._panKeys[d],l.shiftKey&&(k=H(k).multiplyBy(3)),v.options.maxBounds&&(k=v._limitOffset(H(k),v.options.maxBounds)),v.options.worldCopyJump){var O=v.wrapLatLng(v.unproject(v.project(v.getCenter()).add(k)));v.panTo(O)}else v.panBy(k)}else if(d in this._zoomKeys)v.setZoom(v.getZoom()+(l.shiftKey?3:1)*this._zoomKeys[d]);else if(d===27&&v._popup&&v._popup.options.closeOnEscapeKey)v.closePopup();else return;gs(l)}}});ot.addInitHook("addHandler","keyboard",uy),ot.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var dy=Ir.extend({addHooks:function(){qe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){_t(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(l){var d=Lg(l),v=this._map.options.wheelDebounceTime;this._delta+=d,this._lastMousePos=this._map.mouseEventToContainerPoint(l),this._startTime||(this._startTime=+new Date);var k=Math.max(v-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),k),gs(l)},_performZoom:function(){var l=this._map,d=l.getZoom(),v=this._map.options.zoomSnap||0;l._stop();var k=this._delta/(this._map.options.wheelPxPerZoomLevel*4),O=4*Math.log(2/(1+Math.exp(-Math.abs(k))))/Math.LN2,U=v?Math.ceil(O/v)*v:O,te=l._limitZoom(d+(this._delta>0?U:-U))-d;this._delta=0,this._startTime=null,te&&(l.options.scrollWheelZoom==="center"?l.setZoom(d+te):l.setZoomAround(this._lastMousePos,d+te))}});ot.addInitHook("addHandler","scrollWheelZoom",dy);var nk=600;ot.mergeOptions({tapHold:se.touchNative&&se.safari&&se.mobile,tapTolerance:15});var hy=Ir.extend({addHooks:function(){qe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){_t(this._map._container,"touchstart",this._onDown,this)},_onDown:function(l){if(clearTimeout(this._holdTimeout),l.touches.length===1){var d=l.touches[0];this._startPos=this._newPos=new z(d.clientX,d.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(qe(document,"touchend",an),qe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",d))},this),nk),qe(document,"touchend touchcancel contextmenu",this._cancel,this),qe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function l(){_t(document,"touchend",an),_t(document,"touchend touchcancel",l)},_cancel:function(){clearTimeout(this._holdTimeout),_t(document,"touchend touchcancel contextmenu",this._cancel,this),_t(document,"touchmove",this._onMove,this)},_onMove:function(l){var d=l.touches[0];this._newPos=new z(d.clientX,d.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(l,d){var v=new MouseEvent(l,{bubbles:!0,cancelable:!0,view:window,screenX:d.screenX,screenY:d.screenY,clientX:d.clientX,clientY:d.clientY});v._simulated=!0,d.target.dispatchEvent(v)}});ot.addInitHook("addHandler","tapHold",hy),ot.mergeOptions({touchZoom:se.touch,bounceAtZoomLimits:!0});var fy=Ir.extend({addHooks:function(){Ke(this._map._container,"leaflet-touch-zoom"),qe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Nt(this._map._container,"leaflet-touch-zoom"),_t(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(l){var d=this._map;if(!(!l.touches||l.touches.length!==2||d._animatingZoom||this._zooming)){var v=d.mouseEventToContainerPoint(l.touches[0]),k=d.mouseEventToContainerPoint(l.touches[1]);this._centerPoint=d.getSize()._divideBy(2),this._startLatLng=d.containerPointToLatLng(this._centerPoint),d.options.touchZoom!=="center"&&(this._pinchStartLatLng=d.containerPointToLatLng(v.add(k)._divideBy(2))),this._startDist=v.distanceTo(k),this._startZoom=d.getZoom(),this._moved=!1,this._zooming=!0,d._stop(),qe(document,"touchmove",this._onTouchMove,this),qe(document,"touchend touchcancel",this._onTouchEnd,this),an(l)}},_onTouchMove:function(l){if(!(!l.touches||l.touches.length!==2||!this._zooming)){var d=this._map,v=d.mouseEventToContainerPoint(l.touches[0]),k=d.mouseEventToContainerPoint(l.touches[1]),O=v.distanceTo(k)/this._startDist;if(this._zoom=d.getScaleZoom(O,this._startZoom),!d.options.bounceAtZoomLimits&&(this._zoom<d.getMinZoom()&&O<1||this._zoom>d.getMaxZoom()&&O>1)&&(this._zoom=d._limitZoom(this._zoom)),d.options.touchZoom==="center"){if(this._center=this._startLatLng,O===1)return}else{var U=v._add(k)._divideBy(2)._subtract(this._centerPoint);if(O===1&&U.x===0&&U.y===0)return;this._center=d.unproject(d.project(this._pinchStartLatLng,this._zoom).subtract(U),this._zoom)}this._moved||(d._moveStart(!0,!1),this._moved=!0),R(this._animRequest);var te=o(d._move,d,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(te,this,!0),an(l)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,R(this._animRequest),_t(document,"touchmove",this._onTouchMove,this),_t(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ot.addInitHook("addHandler","touchZoom",fy),ot.BoxZoom=ay,ot.DoubleClickZoom=ly,ot.Drag=cy,ot.Keyboard=uy,ot.ScrollWheelZoom=dy,ot.TapHold=hy,ot.TouchZoom=fy,n.Bounds=K,n.Browser=se,n.CRS=Te,n.Canvas=ry,n.Circle=wh,n.CircleMarker=dc,n.Class=E,n.Control=vr,n.DivIcon=ey,n.DivOverlay=zr,n.DomEvent=xS,n.DomUtil=_S,n.Draggable=Ei,n.Evented=I,n.FeatureGroup=Xr,n.GeoJSON=ei,n.GridLayer=ka,n.Handler=Ir,n.Icon=lo,n.ImageOverlay=gc,n.LatLng=X,n.LatLngBounds=ce,n.Layer=xr,n.LayerGroup=ao,n.LineUtil=RS,n.Map=ot,n.Marker=uc,n.Mixin=TS,n.Path=Ci,n.Point=z,n.PolyUtil=jS,n.Polygon=co,n.Polyline=Qr,n.Popup=yc,n.PosAnimation=Ig,n.Projection=MS,n.Rectangle=oy,n.Renderer=ti,n.SVG=Ca,n.SVGOverlay=Qg,n.TileLayer=ho,n.Tooltip=_c,n.Transformation=De,n.Util=B,n.VideoOverlay=Xg,n.bind=o,n.bounds=Y,n.canvas=iy,n.circle=WS,n.circleMarker=US,n.control=ba,n.divIcon=JS,n.extend=i,n.featureGroup=NS,n.geoJSON=Jg,n.geoJson=VS,n.gridLayer=XS,n.icon=FS,n.imageOverlay=ZS,n.latLng=_e,n.latLngBounds=ne,n.layerGroup=zS,n.map=bS,n.marker=BS,n.point=H,n.polygon=HS,n.polyline=$S,n.popup=GS,n.rectangle=tk,n.setOptions=_,n.stamp=c,n.svg=sy,n.svgOverlay=qS,n.tileLayer=ty,n.tooltip=KS,n.transformation=Re,n.version=r,n.videoOverlay=YS;var rk=window.L;n.noConflict=function(){return window.L=rk,this},window.L=n})})(Fp,Fp.exports);var Yd=Fp.exports;function cg(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function ug(t,e){return e==null?function(r,i){const s=q.useRef();return s.current||(s.current=t(r,i)),s}:function(r,i){const s=q.useRef();s.current||(s.current=t(r,i));const o=q.useRef(r),{instance:a}=s.current;return q.useEffect(function(){o.current!==r&&(e(a,r,o.current),o.current=r)},[a,r,i]),s}}function s4(t,e){q.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var s;(s=e.layerContainer)==null||s.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function Iw(t){return function(n){const r=Mw(),i=t(lg(n,r),r);return Ow(r.map,n.attribution),Lw(i.current,n.eventHandlers),s4(i.current,r),i}}function o4(t,e){const n=ug(t,e),r=Iw(n);return t4(r)}function a4(t,e){const n=ug(t),r=i4(n,e);return n4(r)}function l4(t,e){const n=ug(t,e),r=Iw(n);return r4(r)}function c4(t,e,n){const{opacity:r,zIndex:i}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),i!=null&&i!==n.zIndex&&t.setZIndex(i)}function Bp(){return Bp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bp.apply(this,arguments)}function u4({bounds:t,boundsOptions:e,center:n,children:r,className:i,id:s,placeholder:o,style:a,whenReady:c,zoom:u,...h},p){const[m]=q.useState({className:i,id:s,style:a}),[g,y]=q.useState(null);q.useImperativeHandle(p,()=>(g==null?void 0:g.map)??null,[g]);const _=q.useCallback(x=>{if(x!==null&&g===null){const w=new Yd.Map(x,h);n!=null&&u!=null?w.setView(n,u):t!=null&&w.fitBounds(t,e),c!=null&&w.whenReady(c),y(QA(w))}},[]);q.useEffect(()=>()=>{g==null||g.map.remove()},[g]);const b=g?xl.createElement(Rw,{value:g},r):o??null;return xl.createElement("div",Bp({},m,{ref:_}),b)}const zw=q.forwardRef(u4),Nw=o4(function({position:e,...n},r){const i=new Yd.Marker(e,n);return cg(i,e4(r,{overlayContainer:i}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),Fw=a4(function(e,n){const r=new Yd.Popup(e,n.overlayContainer);return cg(r,n)},function(e,n,{position:r},i){q.useEffect(function(){const{instance:o}=e;function a(u){u.popup===o&&(o.update(),i(!0))}function c(u){u.popup===o&&i(!1)}return n.map.on({popupopen:a,popupclose:c}),n.overlayContainer==null?(r!=null&&o.setLatLng(r),o.openOn(n.map)):n.overlayContainer.bindPopup(o),function(){var h;n.map.off({popupopen:a,popupclose:c}),(h=n.overlayContainer)==null||h.unbindPopup(),n.map.removeLayer(o)}},[e,n,i,r])}),Bw=l4(function({url:e,...n},r){const i=new Yd.TileLayer(e,lg(n,r));return cg(i,r)},function(e,n,r){c4(e,n,r);const{url:i}=n;i!=null&&i!==r.url&&e.setUrl(i)});function bo(t,e,n,r){if(r===-1){const i=new Date(t,e+1,0),o=(i.getDay()-n+7)%7;return new Date(t,e,i.getDate()-o)}else{const s=new Date(t,e,1).getDay(),a=1+(n-s+7)%7+(r-1)*7;return new Date(t,e,a)}}function Fr(t){const e=t.getDay();if(e===6){const n=new Date(t);return n.setDate(t.getDate()-1),n}else if(e===0){const n=new Date(t);return n.setDate(t.getDate()+1),n}return t}function d4(t){const e=[],n=new Date(t,0,1);e.push({name:"New Year's Day",date:n,observed:Fr(n),isObserved:n.getTime()!==Fr(n).getTime()});const r=bo(t,0,1,3);e.push({name:"Martin Luther King Jr. Day",date:r,observed:r,isObserved:!1});const i=bo(t,1,1,3);e.push({name:"Presidents' Day",date:i,observed:i,isObserved:!1});const s=bo(t,4,1,-1);e.push({name:"Memorial Day",date:s,observed:s,isObserved:!1});const o=new Date(t,5,19);e.push({name:"Juneteenth",date:o,observed:Fr(o),isObserved:o.getTime()!==Fr(o).getTime()});const a=new Date(t,6,4);e.push({name:"Independence Day",date:a,observed:Fr(a),isObserved:a.getTime()!==Fr(a).getTime()});const c=bo(t,8,1,1);e.push({name:"Labor Day",date:c,observed:c,isObserved:!1});const u=bo(t,9,1,2);e.push({name:"Columbus Day",date:u,observed:u,isObserved:!1});const h=new Date(t,10,11);e.push({name:"Veterans Day",date:h,observed:Fr(h),isObserved:h.getTime()!==Fr(h).getTime()});const p=bo(t,10,4,4);e.push({name:"Thanksgiving Day",date:p,observed:p,isObserved:!1});const m=new Date(t,11,25);return e.push({name:"Christmas Day",date:m,observed:Fr(m),isObserved:m.getTime()!==Fr(m).getTime()}),e}function ku(t){const e=t.getFullYear(),n=d4(e),r=new Date(t.getFullYear(),t.getMonth(),t.getDate());for(const i of n){const s=new Date(i.observed.getFullYear(),i.observed.getMonth(),i.observed.getDate());if(r.getTime()===s.getTime())return i}return null}function No(t){return t.isObserved?`${t.name} (observed)`:t.name}function w_(t){if(!t)return null;const e=new Date(t);return ku(e)}const h4=(()=>{let t=0;return async()=>{const n=Date.now()-t;n<1100&&await new Promise(r=>setTimeout(r,1100-n)),t=Date.now()}})();async function S_(t){await h4();const e=new URL("https://nominatim.openstreetmap.org/search");e.searchParams.set("q",t),e.searchParams.set("format","json"),e.searchParams.set("limit","1");const r=await(await fetch(e.toString(),{headers:{"Accept-Language":"en","User-Agent":"auto-appraisal-mvp"}})).json();return r&&r[0]?{lat:parseFloat(r[0].lat),lng:parseFloat(r[0].lon)}:{lat:null,lng:null}}function f4(){const t={padding:12,fontSize:16,border:"1px solid #4a5568",borderRadius:6,background:"#2d3748",color:"#e2e8f0"},[e,n]=q.useState({claim_number:"",customer_name:"",address_line1:"",status:"IN_PROGRESS"}),[r,i]=q.useState([]),[s,o]=q.useState([]),[a,c]=q.useState(null),[u,h]=q.useState(!1),p=ls();q.useEffect(()=>{(async()=>{const{data:y}=await Ne.from("profiles").select("user_id, full_name, role");i(y||[])})(),(async()=>{const{data:y}=await Ne.from("vendors").select("id, name, pay_amount").eq("active",!0).order("name");o(y||[])})()},[]);const m=async()=>{const y=`${e.address_line1} ${e.address_line2||""} ${e.city||""} ${e.state||""} ${e.postal_code||""}`.trim();if(!y)return alert("Please enter an address first");h(!0);const _=await S_(y);h(!1),_.lat&&_.lng?c(_):alert("Could not geocode address. Please verify it is correct.")},g=async(y=!1)=>{if(!e.claim_number){alert("Please enter a Claim Number");return}if(!e.customer_name){alert("Please enter a Customer Name");return}if(!e.address_line1){alert("Please enter an Address");return}const _=`${e.address_line1} ${e.address_line2||""} ${e.city||""} ${e.state||""} ${e.postal_code||""}`.trim();let b={lat:null,lng:null};if(_&&(b=await S_(_)),y){const{error:w}=await Ne.from("claims").update({...e,...b}).eq("claim_number",e.claim_number);w?alert(`Error updating claim: ${w.message}`):(alert(" Claim updated successfully!"),p("/admin/claims"));return}const{error:x}=await Ne.from("claims").insert([{...e,...b}]);x?x.code==="23505"?confirm(` A claim with the number "${e.claim_number}" already exists!

Click OK to UPDATE the existing claim with this new data.
Click Cancel to go back and change the claim number.`)&&g(!0):alert(`Error: ${x.message}`):(alert(" Claim saved successfully!"),p("/admin/claims"))};return f.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a202c 0%, #2d3748 100%)",padding:16},children:f.jsxs("div",{style:{maxWidth:800,margin:"0 auto",display:"grid",gap:8},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,background:"#2d3748",border:"1px solid #4a5568",padding:16,borderRadius:8},children:[f.jsx("h3",{style:{margin:0,color:"#e2e8f0"},children:"New Claim"}),f.jsxs("div",{style:{display:"flex",gap:8},children:[f.jsx(Zt,{to:"/admin/claims",style:{padding:"8px 16px",background:"#4a5568",color:"white",textDecoration:"none",borderRadius:4,fontWeight:"bold"},children:" Back to Claims"}),f.jsx(Zt,{to:"/",style:{padding:"8px 16px",background:"#4a5568",color:"white",textDecoration:"none",borderRadius:4,fontWeight:"bold"},children:" Home"})]})]}),f.jsx("h4",{style:{color:"#e2e8f0",marginTop:16},children:"Claim Information"}),f.jsx("input",{placeholder:"Claim #",value:e.claim_number,onChange:y=>n({...e,claim_number:y.target.value}),style:{padding:12,fontSize:16,border:"1px solid #4a5568",borderRadius:6,background:"#2d3748",color:"#e2e8f0"}}),f.jsx("input",{placeholder:"Customer name",value:e.customer_name,onChange:y=>n({...e,customer_name:y.target.value}),style:t}),f.jsx("input",{placeholder:"Phone",value:e.phone||"",onChange:y=>n({...e,phone:y.target.value}),style:t}),f.jsx("input",{placeholder:"Email",value:e.email||"",onChange:y=>n({...e,email:y.target.value}),style:t}),f.jsx("h4",{style:{color:"#e2e8f0",marginTop:16},children:"Vehicle Information"}),f.jsx("input",{placeholder:"VIN",value:e.vin||"",onChange:y=>n({...e,vin:y.target.value}),style:t}),f.jsx("input",{placeholder:"Year",type:"number",value:e.vehicle_year||"",onChange:y=>n({...e,vehicle_year:y.target.value?parseInt(y.target.value):void 0}),style:t}),f.jsx("input",{placeholder:"Make",value:e.vehicle_make||"",onChange:y=>n({...e,vehicle_make:y.target.value}),style:t}),f.jsx("input",{placeholder:"Model",value:e.vehicle_model||"",onChange:y=>n({...e,vehicle_model:y.target.value}),style:t}),f.jsx("h4",{style:{color:"#e2e8f0",marginTop:16},children:"Accident Description"}),f.jsx("textarea",{placeholder:"Describe the accident and damage...",value:e.notes||"",onChange:y=>n({...e,notes:y.target.value}),rows:4,style:{...t,resize:"vertical"}}),f.jsx("h4",{style:{color:"#e2e8f0",marginTop:16},children:"Location"}),f.jsx("input",{placeholder:"Address line 1",value:e.address_line1,onChange:y=>n({...e,address_line1:y.target.value}),style:t}),f.jsx("input",{placeholder:"Address line 2 (optional)",value:e.address_line2||"",onChange:y=>n({...e,address_line2:y.target.value}),style:t}),f.jsx("input",{placeholder:"City",value:e.city||"",onChange:y=>n({...e,city:y.target.value}),style:t}),f.jsx("input",{placeholder:"State",value:e.state||"",onChange:y=>n({...e,state:y.target.value}),style:t}),f.jsx("input",{placeholder:"Postal code",value:e.postal_code||"",onChange:y=>n({...e,postal_code:y.target.value}),style:t}),f.jsx("button",{onClick:m,disabled:u,style:{padding:12,fontSize:16,fontWeight:"bold",background:u?"#4a5568":"#3b82f6",color:"white",border:"none",borderRadius:6,cursor:u?"not-allowed":"pointer"},children:u?"Loading map...":"Preview Map Location"}),a&&f.jsx("div",{style:{height:300,marginTop:8},children:f.jsxs(zw,{center:[a.lat,a.lng],zoom:15,style:{height:"100%",width:"100%"},children:[f.jsx(Bw,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:" OpenStreetMap contributors"}),f.jsx(Nw,{position:[a.lat,a.lng],children:f.jsx(Fw,{children:"Claim Location"})})]})}),f.jsx("h4",{style:{color:"#e2e8f0",marginTop:16},children:"Status"}),f.jsxs("select",{value:e.status||"IN_PROGRESS",onChange:y=>n({...e,status:y.target.value}),style:{padding:12,fontSize:16,border:"1px solid #4a5568",borderRadius:6,background:"#2d3748",color:"#e2e8f0"},children:[f.jsx("option",{value:"IN_PROGRESS",children:" In Progress (Not Scheduled Yet)"}),f.jsx("option",{value:"SCHEDULED",children:" Scheduled"})]}),f.jsxs("h4",{style:{color:"#e2e8f0",marginTop:16},children:["Appointment Schedule ",e.status==="IN_PROGRESS"?"(Optional)":""]}),f.jsxs("div",{style:{display:"grid",gap:8},children:[f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"#e2e8f0"},children:"Appointment Start (Date & Time)"}),f.jsx("input",{type:"datetime-local",value:e.appointment_start?(()=>{const y=new Date(e.appointment_start),_=y.getFullYear(),b=String(y.getMonth()+1).padStart(2,"0"),x=String(y.getDate()).padStart(2,"0"),w=String(y.getHours()).padStart(2,"0"),S=String(y.getMinutes()).padStart(2,"0");return`${_}-${b}-${x}T${w}:${S}`})():"",onChange:y=>{if(!y.target.value){n({...e,appointment_start:void 0});return}const[_,b]=y.target.value.split("T"),[x,w,S]=_.split("-").map(Number),[C,j]=b.split(":").map(Number),D=new Date(x,w-1,S,C,j,0);n({...e,appointment_start:D.toISOString()})},style:t}),e.appointment_start&&(()=>{const y=w_(e.appointment_start);return y?f.jsxs("div",{style:{marginTop:8,padding:12,background:"#f59e0b",border:"2px solid #d97706",borderRadius:6,color:"#1a202c",fontWeight:"bold",display:"flex",alignItems:"center",gap:8},children:[f.jsx("span",{style:{fontSize:20},children:""}),f.jsxs("span",{children:["Warning: This appointment is scheduled on ",No(y)," (Federal Holiday)"]})]}):null})()]}),f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"#e2e8f0"},children:"Appointment End (Date & Time)"}),f.jsx("input",{type:"datetime-local",value:e.appointment_end?(()=>{const y=new Date(e.appointment_end),_=y.getFullYear(),b=String(y.getMonth()+1).padStart(2,"0"),x=String(y.getDate()).padStart(2,"0"),w=String(y.getHours()).padStart(2,"0"),S=String(y.getMinutes()).padStart(2,"0");return`${_}-${b}-${x}T${w}:${S}`})():"",onChange:y=>{if(!y.target.value){n({...e,appointment_end:void 0});return}const[_,b]=y.target.value.split("T"),[x,w,S]=_.split("-").map(Number),[C,j]=b.split(":").map(Number),D=new Date(x,w-1,S,C,j,0);n({...e,appointment_end:D.toISOString()})},style:t}),e.appointment_end&&(()=>{const y=w_(e.appointment_end);return y?f.jsxs("div",{style:{marginTop:8,padding:12,background:"#f59e0b",border:"2px solid #d97706",borderRadius:6,color:"#1a202c",fontWeight:"bold",display:"flex",alignItems:"center",gap:8},children:[f.jsx("span",{style:{fontSize:20},children:""}),f.jsxs("span",{children:["Warning: This appointment is scheduled on ",No(y)," (Federal Holiday)"]})]}):null})()]})]}),f.jsx("h4",{style:{color:"#e2e8f0",marginTop:16},children:"Firm"}),f.jsxs("select",{value:e.firm_name||"",onChange:y=>{const _=y.target.value||void 0,b=s.find(x=>x.name===_);n({...e,firm_name:_,pay_amount:(b==null?void 0:b.pay_amount)||null})},style:{padding:12,fontSize:16,border:"1px solid #4a5568",borderRadius:6,background:"#2d3748",color:"#e2e8f0"},children:[f.jsx("option",{value:"",children:"No Firm"}),s.map(y=>f.jsx("option",{value:y.name,children:y.name},y.id))]}),f.jsx("h4",{style:{color:"#e2e8f0",marginTop:16},children:"Pay Amount"}),f.jsx("input",{type:"number",step:"0.01",placeholder:"Pay amount",value:e.pay_amount||"",onChange:y=>{const _=y.target.value;n({...e,pay_amount:_?parseFloat(_):null})},style:{padding:12,fontSize:16,border:"1px solid #4a5568",borderRadius:6,background:"#2d3748",color:"#e2e8f0"}}),f.jsx("h4",{style:{color:"#e2e8f0",marginTop:16},children:"Assignment"}),f.jsxs("select",{value:e.assigned_to||"",onChange:y=>n({...e,assigned_to:y.target.value||null}),style:{padding:12,fontSize:16,border:"1px solid #4a5568",borderRadius:6,background:"#2d3748",color:"#e2e8f0"},children:[f.jsx("option",{value:"",children:"Unassigned"}),r==null?void 0:r.map(y=>f.jsxs("option",{value:y.user_id,children:[y.full_name||y.user_id," (",y.role,")"]},y.user_id))]}),f.jsx("button",{onClick:()=>g(!1),style:{marginTop:16,padding:12,fontSize:16,fontWeight:"bold",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:6,cursor:"pointer"},children:"Save Claim"})]})})}class p4{constructor(e){ze(this,"supabaseClient");ze(this,"currentUser",null);ze(this,"userProfile",null);ze(this,"initialized",!1);this.supabaseClient=e}get isAdmin(){var e;return this.initialized&&((e=this.userProfile)==null?void 0:e.role)==="admin"}get isInitialized(){return this.initialized}async initialize(){try{console.log("Initializing React Supabase authorization...");const{data:{session:e},error:n}=await this.supabaseClient.auth.getSession();if(n)return console.error("Session error:",n),{success:!1,error:"Authentication failed"};if(!e)return console.warn("No active session"),{success:!1,error:"No active session"};this.currentUser=e.user,console.log("Current user ID:",this.currentUser.id);const{data:r,error:i}=await this.supabaseClient.from("profiles").select("user_id, role, full_name").eq("user_id",this.currentUser.id).single();return i?(console.error("Profile fetch error:",i),{success:!1,error:"Unable to load user profile"}):r?(this.userProfile=r,this.initialized=!0,console.log("React authorization initialized:",{userId:this.currentUser.id,role:r.role,isAdmin:this.isAdmin,fullName:r.full_name}),{success:!0}):(console.error("No profile found for user"),{success:!1,error:"User profile not found"})}catch(e){return console.error("Authorization initialization failed:",e),{success:!1,error:e.message}}}scopedClaimsQuery(e){var n;if(!this.initialized)throw new Error("Authorization not initialized. Call initialize() first.");return console.log("Applying query scoping:",{isAdmin:this.isAdmin,userId:(n=this.currentUser)==null?void 0:n.id}),this.isAdmin?(console.log("Admin access: returning unfiltered query"),e):(console.log("Appraiser access: filtering by assigned_to =",this.currentUser.id),e.eq("assigned_to",this.currentUser.id))}canAccessClaim(e){return this.initialized?this.isAdmin?!0:e.assigned_to===this.currentUser.id:!1}getCurrentUser(){return this.initialized?{id:this.currentUser.id,email:this.currentUser.email,role:this.userProfile.role,fullName:this.userProfile.full_name,isAdmin:this.isAdmin}:null}handleAuthError(e){var n,r;return console.error("Authentication error:",e),(n=e.message)!=null&&n.includes("JWT")||e.code==="PGRST301"||(r=e.message)!=null&&r.includes("401")?{shouldRedirect:!0,message:"Your session has expired. Please log in again."}:e.code==="PGRST116"?{shouldRedirect:!1,message:"Access denied. You do not have permission to view this data."}:{shouldRedirect:!1,message:`Error: ${e.message}`}}}let Ja=null;async function qd(t){Ja||(Ja=new p4(t));const e=await Ja.initialize();if(!e.success)throw new Error(e.error);return Ja}function nn(){return Ja}const Yn={Sedgwick:"#9CA3AF",ACD:"#F59E0B",ClaimSolution:"#EC4899","Complete Claims":"#EF4444",Doan:"#10B981",Legacy:"#3B82F6",AMA:"#FACC15",IANET:"#92400E","A-TEAM":"#06B6D4",HEA:"#6366F1",Frontline:"#1F2937",SCA:"#78350F"},Bi=t=>{if(!t)return"#9CA3AF";const e=t.toUpperCase().trim();return e.includes("SEDGWK")||e.includes("SEDGWICK")?Yn.Sedgwick:e.includes("AUTOCLAIMSDI")||e.includes("AUTOCLAIMS")||e.includes("ACD")?Yn.ACD:e==="CS"||e==="CCS"||e.includes("CLAIMSOLUTION")||e.includes("CLAIM SOLUTION")?Yn.ClaimSolution:e.includes("COMPLETE CLAIMS")?Yn["Complete Claims"]:e.includes("SL APPRAISAL")||e.includes("DOAN")?Yn.Doan:e.includes("G T APPRAISALS")||e.includes("LEGACY")?Yn.Legacy:e.includes("AMA")?Yn.AMA:e.includes("IANET")?Yn.IANET:e.includes("A TEAM")||e.includes("A-TEAM")||e.includes("ATEAM")?Yn["A-TEAM"]:e.includes("HEAVY EQUIPMENT")||e.includes("HEA")?Yn.HEA:e.includes("FRONTLINE")?Yn.Frontline:e.includes("SCA")?Yn.SCA:"#9CA3AF"},m4=t=>{const e=["Claim Number","Customer Name","Phone","Email","VIN","Vehicle Year","Vehicle Make","Vehicle Model","Address Line 1","Address Line 2","City","State","Postal Code","Status","Assigned To","Appointment Start","Appointment End","Notes","Firm Name","Created At"],n=t.map(a=>{var c,u;return[a.claim_number||"",a.customer_name||"",a.phone||"",a.email||"",a.vin||"",((c=a.vehicle_year)==null?void 0:c.toString())||"",a.vehicle_make||"",a.vehicle_model||"",a.address_line1||"",a.address_line2||"",a.city||"",a.state||"",a.postal_code||"",a.status||"",((u=a.profiles)==null?void 0:u.full_name)||"Unassigned",a.appointment_start||"",a.appointment_end||"",a.notes||"",a.firm_name||"",a.created_at||""].map(h=>`"${String(h).replace(/"/g,'""')}"`)}),r=[e.join(","),...n.map(a=>a.join(","))].join(`
`),i=new Blob([r],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),o=URL.createObjectURL(i);s.setAttribute("href",o),s.setAttribute("download",`claims_${new Date().toISOString().split("T")[0]}.csv`),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(o)},g4=3;function Uw({claims:t,onClaimUpdate:e}){const n=ls(),[r,i]=q.useState(new Date),[s,o]=q.useState(null),[a,c]=q.useState(null),[u,h]=q.useState(null),[p,m]=q.useState(null),[g,y]=q.useState("09:00"),[_,b]=q.useState(""),[x,w]=q.useState(""),[S,C]=q.useState([]),j=nn(),D=j==null?void 0:j.getCurrentUser(),P=(D==null?void 0:D.role)==="admin",T=["January","February","March","April","May","June","July","August","September","October","November","December"],A=r.getFullYear(),F=r.getMonth();q.useEffect(()=>{(async()=>{const{data:ke,error:De}=await Ne.from("profiles").select("user_id, full_name").eq("role","appraiser").order("full_name");!De&&ke&&C(ke)})()},[]);const V=t.filter(le=>le.appointment_start),R=t.filter(le=>!le.appointment_start),B=new Date(A,F,1),Z=new Date(A,F+1,0).getDate(),$=B.getDay(),I=()=>{i(new Date(A,F-1,1))},z=()=>{i(new Date(A,F+1,1))},N=(le,ke)=>{le.dataTransfer.effectAllowed="move",le.dataTransfer.setData("text/claim-id",ke),o(ke)},H=()=>{o(null)},K=le=>{le.preventDefault(),le.dataTransfer.dropEffect="move"},Y=(le,ke)=>{le.preventDefault(),le.stopPropagation();const De=le.dataTransfer.getData("text/claim-id");De&&(h(De),m(ke),y("09:00"),b(""),w(""))},ce=async()=>{if(!u||!p)return;const[le,ke,De]=p.split("-").map(Number),[Re,Ge]=g.split(":").map(Number),M=new Date(le,ke-1,De,Re,Ge,0),he=new Date(M.getTime()+2*60*60*1e3);try{const ae={appointment_start:M.toISOString(),appointment_end:he.toISOString(),status:"SCHEDULED"};_.trim()&&(ae.notes=_.trim()),x&&(ae.assigned_to=x);const{error:J}=await Ne.from("claims").update(ae).eq("id",u);if(J)throw J;h(null),m(null),e()}catch(ae){alert(`Error scheduling claim: ${ae.message}`)}},ne=()=>{h(null),m(null),y("09:00"),b(""),w("")},X=async le=>{le.preventDefault(),le.stopPropagation();const ke=le.dataTransfer.getData("text/claim-id");if(!ke)return;const De=t.find(Re=>Re.id===ke);if(!De){alert("Claim not found");return}if(!De.appointment_start){alert("Claim is already unscheduled");return}try{const{error:Re}=await Ne.from("claims").update({appointment_start:null,appointment_end:null,status:"IN_PROGRESS"}).eq("id",ke);if(Re)throw Re;e()}catch(Re){alert(`Error unscheduling claim: ${Re.message}`)}},_e=le=>{const ke=Bi(le.firm_name),De=le.appointment_start?new Date(le.appointment_start).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):"";return f.jsxs("div",{draggable:!0,onDragStart:Re=>N(Re,le.id),onDragEnd:H,onClick:Re=>{Re.stopPropagation(),n(`/claim/${le.id}?from=calendar`)},style:{cursor:"grab",padding:"6px 8px",margin:"4px 0",background:"#2d3748",border:`2px solid ${ke}`,borderRadius:"4px",fontSize:"12px",color:"#e2e8f0",opacity:s===le.id?.5:1,userSelect:"none"},children:[f.jsxs("div",{style:{fontWeight:"bold",marginBottom:"2px",fontSize:"13px"},children:["#",le.claim_number]}),f.jsx("div",{style:{fontSize:"11px",color:"#a0aec0",marginBottom:"2px"},children:le.customer_name}),De&&f.jsxs("div",{style:{fontSize:"10px",color:"#cbd5e0"},children:[" ",De]})]},le.id)},Te=le=>{const ke=Bi(le.firm_name);return f.jsxs("div",{draggable:!0,onDragStart:De=>N(De,le.id),onDragEnd:H,onClick:De=>{De.stopPropagation(),window.open(`/CipherDispatch/claim/${le.id}`,"_blank")},style:{cursor:"grab",padding:"10px",margin:"6px 0",background:"#2d3748",borderLeft:`4px solid ${ke}`,borderRadius:"6px",fontSize:"14px",color:"#e2e8f0",opacity:s===le.id?.5:1,transition:"transform 0.2s"},onMouseEnter:De=>De.currentTarget.style.transform="translateX(4px)",onMouseLeave:De=>De.currentTarget.style.transform="translateX(0)",children:[f.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px",fontSize:"15px"},children:le.customer_name}),f.jsxs("div",{style:{fontSize:"12px",color:"#a0aec0",marginBottom:"2px"},children:["#",le.claim_number]}),f.jsx("div",{style:{fontSize:"11px",color:"#718096"},children:le.city||"No location"}),le.firm_name&&f.jsx("div",{style:{marginTop:"4px",fontSize:"10px",color:ke,fontWeight:"bold"},children:le.firm_name})]},le.id)},Pe=()=>{const le=[];for(let ke=0;ke<$;ke++)le.push(f.jsx("div",{style:{background:"#1a202c"}},`empty-${ke}`));for(let ke=1;ke<=Z;ke++){const De=new Date(A,F,ke),Re=De.toDateString()===new Date().toDateString(),Ge=`${A}-${String(F+1).padStart(2,"0")}-${String(ke).padStart(2,"0")}`,M=ku(De),he=V.filter(de=>{if(!de.appointment_start)return!1;const ge=new Date(de.appointment_start);return ge.getFullYear()===A&&ge.getMonth()===F&&ge.getDate()===ke}).sort((de,ge)=>{const oe=new Date(de.appointment_start).getTime(),ee=new Date(ge.appointment_start).getTime();return oe-ee}),ae=he.slice(0,g4),J=he.length-ae.length,G=he.reduce((de,ge)=>de+(ge.pay_amount||0),0),re=he.reduce((de,ge)=>de+(ge.file_total||0),0);le.push(f.jsxs("div",{onDragOver:K,onDrop:de=>Y(de,Ge),onClick:()=>c({date:Ge,claims:he}),style:{background:Re?"#2d3748":"#1e2938",border:Re?"2px solid #667eea":"1px solid #4a5568",padding:"6px",minHeight:"120px",cursor:"pointer",transition:"all 0.2s",position:"relative"},onMouseEnter:de=>de.currentTarget.style.borderColor="#667eea",onMouseLeave:de=>de.currentTarget.style.borderColor=Re?"#667eea":"#4a5568",children:[f.jsx("div",{style:{fontWeight:"bold",fontSize:"16px",color:Re?"#667eea":"#e2e8f0",marginBottom:"6px"},children:ke}),M&&f.jsxs("div",{style:{background:"linear-gradient(135deg, #dc2626 0%, #991b1b 100%)",color:"#ffffff",fontSize:"9px",padding:"3px 6px",borderRadius:"4px",marginBottom:"6px",fontWeight:"bold",textAlign:"center",boxShadow:"0 2px 4px rgba(220, 38, 38, 0.3)",border:"1px solid #7f1d1d"},title:No(M),children:[" ",No(M)]}),he.length>0&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{fontSize:"10px",color:"#a0aec0",marginBottom:"2px"},children:[he.length," claim",he.length>1?"s":""]}),P&&G>0&&f.jsxs("div",{style:{fontSize:"10px",color:"#10b981",marginBottom:"2px",fontWeight:"bold"},children:[" $",G.toFixed(2)]}),P&&re>0&&f.jsxs("div",{style:{fontSize:"10px",color:"#3b82f6",marginBottom:"4px",fontWeight:"bold"},children:[" $",re.toFixed(2)]})]}),f.jsx("div",{children:ae.map(de=>_e(de))}),J>0&&f.jsxs("div",{style:{fontSize:"11px",color:"#667eea",textAlign:"center",marginTop:"4px",fontWeight:"bold"},children:["+ ",J," more"]})]},ke))}return le};return f.jsxs("div",{style:{display:"flex",gap:"16px",minHeight:"80vh"},children:[f.jsxs("div",{style:{width:"280px",background:"#1a202c",border:"2px solid #4a5568",borderRadius:"8px",padding:"16px",flexShrink:0,position:"sticky",top:"16px",alignSelf:"flex-start",maxHeight:"calc(100vh - 32px)",display:"flex",flexDirection:"column"},onDragOver:K,onDrop:X,children:[f.jsxs("div",{style:{marginBottom:"16px",flexShrink:0},children:[f.jsx("h3",{style:{margin:0,color:"#e2e8f0",fontSize:"18px",fontWeight:"bold"},children:" Needs Scheduling"}),f.jsxs("div",{style:{fontSize:"14px",color:"#a0aec0",marginTop:"4px"},children:[R.length," claim",R.length!==1?"s":""]})]}),f.jsxs("div",{style:{overflowY:"auto",flex:1,minHeight:0},children:[R.map(le=>Te(le)),R.length===0&&f.jsx("div",{style:{textAlign:"center",color:"#718096",fontSize:"14px",padding:"20px"},children:"All claims scheduled!"})]})]}),f.jsxs("div",{style:{flex:1},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px",background:"#2d3748",padding:"12px 16px",borderRadius:"8px"},children:[f.jsx("button",{onClick:I,style:{background:"#4a5568",color:"#e2e8f0",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"18px",fontWeight:"bold"},children:""}),f.jsxs("h3",{style:{margin:0,color:"#e2e8f0",fontSize:"20px",fontWeight:"bold"},children:[T[F]," ",A]}),f.jsx("button",{onClick:z,style:{background:"#4a5568",color:"#e2e8f0",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"18px",fontWeight:"bold"},children:""})]}),f.jsxs("div",{style:{background:"#2d3748",padding:"12px 16px",borderRadius:"8px",marginBottom:"12px"},children:[f.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",marginBottom:"8px",fontWeight:"bold"},children:" Firm Color Legend"}),f.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:Object.entries(Yn).map(([le,ke])=>f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px 10px",background:"#1a202c",borderRadius:"6px",fontSize:"12px"},children:[f.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"3px",background:ke,border:"1px solid rgba(255,255,255,0.2)"}}),f.jsx("span",{style:{color:"#e2e8f0"},children:le})]},le))})]}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"2px",marginBottom:"2px"},children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(le=>f.jsx("div",{style:{background:"#2d3748",padding:"12px 6px",textAlign:"center",fontWeight:"bold",fontSize:"14px",color:"#a0aec0"},children:le},le))}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"2px",background:"#4a5568"},children:Pe()})]}),a&&f.jsx("div",{onClick:()=>c(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:f.jsxs("div",{onClick:le=>le.stopPropagation(),style:{background:"#1a202c",border:"2px solid #4a5568",borderRadius:"12px",maxWidth:"600px",width:"100%",maxHeight:"80vh",overflow:"auto",padding:"24px"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"16px"},children:[f.jsx("h3",{style:{margin:0,color:"#e2e8f0",fontSize:"20px"},children:new Date(a.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),f.jsx("button",{onClick:()=>c(null),style:{background:"#ef4444",color:"white",border:"none",borderRadius:"6px",padding:"8px 16px",cursor:"pointer",fontSize:"16px",fontWeight:"bold"},children:""})]}),(()=>{const le=ku(new Date(a.date));return le?f.jsxs("div",{style:{background:"linear-gradient(135deg, #dc2626 0%, #991b1b 100%)",color:"#ffffff",padding:"12px 16px",borderRadius:"8px",marginBottom:"16px",fontWeight:"bold",textAlign:"center",boxShadow:"0 4px 6px rgba(220, 38, 38, 0.3)",border:"2px solid #7f1d1d",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[f.jsx("span",{style:{fontSize:"20px"},children:""}),f.jsxs("span",{style:{fontSize:"15px"},children:[No(le)," - Federal Holiday"]})]}):null})(),f.jsxs("div",{style:{fontSize:"14px",color:"#a0aec0",marginBottom:"16px"},children:[a.claims.length," claim",a.claims.length!==1?"s":""," scheduled"]}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[a.claims.map(le=>f.jsxs("div",{onClick:()=>n(`/claim/${le.id}?from=calendar`),style:{background:"#2d3748",borderLeft:`4px solid ${Bi(le.firm_name)}`,borderRadius:"6px",padding:"16px",cursor:"pointer",transition:"transform 0.2s"},onMouseEnter:ke=>ke.currentTarget.style.transform="translateX(4px)",onMouseLeave:ke=>ke.currentTarget.style.transform="translateX(0)",children:[f.jsxs("div",{style:{fontSize:"18px",fontWeight:"bold",color:"#e2e8f0",marginBottom:"8px"},children:["#",le.claim_number]}),f.jsx("div",{style:{fontSize:"15px",color:"#e2e8f0",marginBottom:"8px"},children:le.customer_name}),f.jsxs("div",{style:{fontSize:"13px",color:"#a0aec0",marginBottom:"4px"},children:[le.vehicle_year," ",le.vehicle_make," ",le.vehicle_model]}),le.appointment_start&&f.jsxs("div",{style:{fontSize:"13px",color:"#cbd5e0"},children:[" ",new Date(le.appointment_start).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})]})]},le.id)),a.claims.length===0&&f.jsx("div",{style:{textAlign:"center",color:"#718096",padding:"40px"},children:"No claims scheduled for this day"})]})]})}),u&&p&&f.jsx("div",{onClick:ne,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:f.jsxs("div",{onClick:le=>le.stopPropagation(),style:{background:"#1a202c",border:"2px solid #4a5568",borderRadius:"12px",maxWidth:"500px",width:"100%",padding:"24px"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},children:[f.jsx("h3",{style:{margin:0,color:"#e2e8f0",fontSize:"20px",fontWeight:"bold"},children:" Schedule Appointment"}),f.jsx("button",{onClick:ne,style:{background:"transparent",color:"#a0aec0",border:"none",cursor:"pointer",fontSize:"24px",padding:0,lineHeight:1},children:""})]}),f.jsxs("div",{style:{marginBottom:"20px",padding:"12px",background:"#2d3748",borderRadius:"8px"},children:[f.jsx("div",{style:{fontSize:"14px",color:"#a0aec0",marginBottom:"4px"},children:"Selected Date"}),f.jsx("div",{style:{fontSize:"16px",color:"#e2e8f0",fontWeight:"bold"},children:new Date(p).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),(()=>{const le=ku(new Date(p));return le?f.jsxs("div",{style:{marginBottom:"20px",padding:"12px 16px",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",border:"2px solid #92400e",borderRadius:"8px",color:"#1a202c",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 6px rgba(245, 158, 11, 0.3)"},children:[f.jsx("span",{style:{fontSize:"20px"},children:""}),f.jsxs("span",{style:{fontSize:"14px"},children:["Warning: ",No(le)," - Federal Holiday"]})]}):null})(),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("label",{style:{display:"block",fontSize:"14px",color:"#cbd5e1",marginBottom:"8px",fontWeight:"600"},children:"Appointment Time"}),f.jsx("input",{type:"time",value:g,onChange:le=>y(le.target.value),style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff"}})]}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("label",{style:{display:"block",fontSize:"14px",color:"#cbd5e1",marginBottom:"8px",fontWeight:"600"},children:"Assign Appraiser (Optional)"}),f.jsxs("select",{value:x,onChange:le=>w(le.target.value),style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",cursor:"pointer"},children:[f.jsx("option",{value:"",children:"-- Select Appraiser --"}),S.map(le=>f.jsx("option",{value:le.user_id,children:le.full_name},le.user_id))]})]}),f.jsxs("div",{style:{marginBottom:"24px"},children:[f.jsx("label",{style:{display:"block",fontSize:"14px",color:"#cbd5e1",marginBottom:"8px",fontWeight:"600"},children:"Additional Notes (Optional)"}),f.jsx("textarea",{value:_,onChange:le=>b(le.target.value),placeholder:"Add any notes about this appointment...",rows:4,style:{width:"100%",padding:"12px",fontSize:"15px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",fontFamily:"inherit",resize:"vertical"}})]}),f.jsxs("div",{style:{display:"flex",gap:"12px"},children:[f.jsx("button",{onClick:ce,style:{flex:1,padding:"14px 24px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",fontSize:"16px",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},onMouseEnter:le=>{le.currentTarget.style.transform="translateY(-1px)",le.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)"},onMouseLeave:le=>{le.currentTarget.style.transform="translateY(0)",le.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)"},children:" Save Schedule"}),f.jsx("button",{onClick:ne,style:{flex:1,padding:"14px 24px",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",fontSize:"16px",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},onMouseEnter:le=>{le.currentTarget.style.background="#4b5563",le.currentTarget.style.transform="translateY(-1px)",le.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)"},onMouseLeave:le=>{le.currentTarget.style.background="#6b7280",le.currentTarget.style.transform="translateY(0)",le.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)"},children:" Cancel"})]})]})})]})}const y4={Sedgwick:{type:"weekly",payDay:4},Legacy:{type:"bi-weekly",payDay:4},"Complete Claims":{type:"bi-weekly",payDay:4},ClaimSolution:{type:"bi-weekly",payDay:5},Doan:{type:"bi-weekly",payDay:5},HEA:{type:"monthly",payDate:15},ACD:{type:"semi-monthly",payDates:[15,30]},IANET:{type:"last-day"}};function _4(t,e){const n=y4[t];if(!n)return null;if(new Date().setHours(0,0,0,0),n.type==="weekly"&&"payDay"in n){const i=new Date(e),s=(n.payDay-i.getDay()+7)%7;return i.setDate(i.getDate()+s),s===0&&i.setDate(i.getDate()+7),i}if(n.type==="bi-weekly"&&"payDay"in n){const i=new Date(e),s=(n.payDay-i.getDay()+7)%7;return i.setDate(i.getDate()+s),s===0&&i.setDate(i.getDate()+14),i}if(n.type==="monthly"&&"payDate"in n)return new Date(e.getFullYear(),e.getMonth()+1,n.payDate);if(n.type==="semi-monthly"&&"payDates"in n){const i=e.getDate();if(i>=1&&i<=15)return new Date(e.getFullYear(),e.getMonth(),15);{const s=new Date(e.getFullYear(),e.getMonth()+1,0).getDate();return new Date(e.getFullYear(),e.getMonth(),s)}}return n.type==="last-day"?new Date(e.getFullYear(),e.getMonth()+1,0):null}function v4(t){if(!t)return!1;const e=new Date;e.setHours(0,0,0,0);const n=new Date(e);n.setDate(e.getDate()-e.getDay());const r=new Date(n);return r.setDate(n.getDate()+6),t>=n&&t<=r}function x4({claims:t}){const e=q.useMemo(()=>{const r=new Map;return t.filter(s=>s.pay_amount&&s.appointment_start&&(s.status==="SCHEDULED"||s.status==="COMPLETED")).forEach(s=>{if(!s.firm_name||!s.pay_amount||!s.appointment_start)return;const o=new Date(s.appointment_start),a=_4(s.firm_name,o);if(!a||!v4(a))return;const c=r.get(s.firm_name)||{firmName:s.firm_name,amount:0,claimCount:0};r.set(s.firm_name,{firmName:s.firm_name,amount:c.amount+s.pay_amount,claimCount:c.claimCount+1})}),Array.from(r.values()).sort((s,o)=>o.amount-s.amount)},[t]),n=e.reduce((r,i)=>r+i.amount,0);return e.length===0?f.jsxs("div",{style:{background:"#1a202c",border:"2px solid #4a5568",borderRadius:"12px",padding:"20px"},children:[f.jsx("h3",{style:{margin:"0 0 12px 0",color:"#e2e8f0",fontSize:"20px",fontWeight:"bold"},children:" Expected Payout This Week"}),f.jsx("p",{style:{color:"#a0aec0",fontSize:"14px",textAlign:"center",padding:"20px"},children:"No payouts scheduled for this week"})]}):f.jsxs("div",{style:{background:"#1a202c",border:"2px solid #4a5568",borderRadius:"12px",padding:"20px"},children:[f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("h3",{style:{margin:"0 0 8px 0",color:"#e2e8f0",fontSize:"20px",fontWeight:"bold"},children:" Expected Payout This Week"}),f.jsxs("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#10b981",marginTop:"12px"},children:["$",n.toFixed(2)]})]}),f.jsxs("div",{style:{borderTop:"1px solid #4a5568",paddingTop:"16px"},children:[f.jsx("h4",{style:{margin:"0 0 12px 0",color:"#cbd5e1",fontSize:"14px",fontWeight:"600"},children:"Breakdown by Firm"}),f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:e.map(r=>f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",background:"#2d3748",borderRadius:"8px",borderLeft:"4px solid #667eea"},children:[f.jsxs("div",{children:[f.jsx("div",{style:{color:"#e2e8f0",fontSize:"15px",fontWeight:"600"},children:r.firmName}),f.jsxs("div",{style:{color:"#a0aec0",fontSize:"12px",marginTop:"2px"},children:[r.claimCount," claim",r.claimCount>1?"s":""]})]}),f.jsxs("div",{style:{color:"#10b981",fontSize:"18px",fontWeight:"bold"},children:["$",r.amount.toFixed(2)]})]},r.firmName))})]})]})}function qc(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ww={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,i,s){function o(u,h){if(!i[u]){if(!r[u]){var p=typeof qc=="function"&&qc;if(!h&&p)return p(u,!0);if(a)return a(u,!0);var m=new Error("Cannot find module '"+u+"'");throw m.code="MODULE_NOT_FOUND",m}var g=i[u]={exports:{}};r[u][0].call(g.exports,function(y){var _=r[u][1][y];return o(_||y)},g,g.exports,n,r,i,s)}return i[u].exports}for(var a=typeof qc=="function"&&qc,c=0;c<s.length;c++)o(s[c]);return o}({1:[function(n,r,i){var s=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(c){for(var u,h,p,m,g,y,_,b=[],x=0,w=c.length,S=w,C=s.getTypeOf(c)!=="string";x<c.length;)S=w-x,p=C?(u=c[x++],h=x<w?c[x++]:0,x<w?c[x++]:0):(u=c.charCodeAt(x++),h=x<w?c.charCodeAt(x++):0,x<w?c.charCodeAt(x++):0),m=u>>2,g=(3&u)<<4|h>>4,y=1<S?(15&h)<<2|p>>6:64,_=2<S?63&p:64,b.push(a.charAt(m)+a.charAt(g)+a.charAt(y)+a.charAt(_));return b.join("")},i.decode=function(c){var u,h,p,m,g,y,_=0,b=0,x="data:";if(c.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var w,S=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===a.charAt(64)&&S--,c.charAt(c.length-2)===a.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(w=o.uint8array?new Uint8Array(0|S):new Array(0|S);_<c.length;)u=a.indexOf(c.charAt(_++))<<2|(m=a.indexOf(c.charAt(_++)))>>4,h=(15&m)<<4|(g=a.indexOf(c.charAt(_++)))>>2,p=(3&g)<<6|(y=a.indexOf(c.charAt(_++))),w[b++]=u,g!==64&&(w[b++]=h),y!==64&&(w[b++]=p);return w}},{"./support":30,"./utils":32}],2:[function(n,r,i){var s=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),c=n("./stream/DataLengthProbe");function u(h,p,m,g,y){this.compressedSize=h,this.uncompressedSize=p,this.crc32=m,this.compression=g,this.compressedContent=y}u.prototype={getContentWorker:function(){var h=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),p=this;return h.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),h},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(h,p,m){return h.pipe(new a).pipe(new c("uncompressedSize")).pipe(p.compressWorker(m)).pipe(new c("compressedSize")).withStreamInfo("compression",p)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var s=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var s=n("./utils"),o=function(){for(var a,c=[],u=0;u<256;u++){a=u;for(var h=0;h<8;h++)a=1&a?3988292384^a>>>1:a>>>1;c[u]=a}return c}();r.exports=function(a,c){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?function(u,h,p,m){var g=o,y=m+p;u^=-1;for(var _=m;_<y;_++)u=u>>>8^g[255&(u^h[_])];return-1^u}(0|c,a,a.length,0):function(u,h,p,m){var g=o,y=m+p;u^=-1;for(var _=m;_<y;_++)u=u>>>8^g[255&(u^h.charCodeAt(_))];return-1^u}(0|c,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var s=null;s=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:s}},{lie:37}],7:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),c=n("./stream/GenericWorker"),u=s?"uint8array":"array";function h(p,m){c.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=m,this.meta={}}i.magic="\b\0",a.inherits(h,c),h.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(u,p.data),!1)},h.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(m){p.push({data:m,meta:p.meta})}},i.compressWorker=function(p){return new h("Deflate",p)},i.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){function s(g,y){var _,b="";for(_=0;_<y;_++)b+=String.fromCharCode(255&g),g>>>=8;return b}function o(g,y,_,b,x,w){var S,C,j=g.file,D=g.compression,P=w!==u.utf8encode,T=a.transformTo("string",w(j.name)),A=a.transformTo("string",u.utf8encode(j.name)),F=j.comment,V=a.transformTo("string",w(F)),R=a.transformTo("string",u.utf8encode(F)),B=A.length!==j.name.length,E=R.length!==F.length,Z="",$="",I="",z=j.dir,N=j.date,H={crc32:0,compressedSize:0,uncompressedSize:0};y&&!_||(H.crc32=g.crc32,H.compressedSize=g.compressedSize,H.uncompressedSize=g.uncompressedSize);var K=0;y&&(K|=8),P||!B&&!E||(K|=2048);var Y=0,ce=0;z&&(Y|=16),x==="UNIX"?(ce=798,Y|=function(X,_e){var Te=X;return X||(Te=_e?16893:33204),(65535&Te)<<16}(j.unixPermissions,z)):(ce=20,Y|=function(X){return 63&(X||0)}(j.dosPermissions)),S=N.getUTCHours(),S<<=6,S|=N.getUTCMinutes(),S<<=5,S|=N.getUTCSeconds()/2,C=N.getUTCFullYear()-1980,C<<=4,C|=N.getUTCMonth()+1,C<<=5,C|=N.getUTCDate(),B&&($=s(1,1)+s(h(T),4)+A,Z+="up"+s($.length,2)+$),E&&(I=s(1,1)+s(h(V),4)+R,Z+="uc"+s(I.length,2)+I);var ne="";return ne+=`
\0`,ne+=s(K,2),ne+=D.magic,ne+=s(S,2),ne+=s(C,2),ne+=s(H.crc32,4),ne+=s(H.compressedSize,4),ne+=s(H.uncompressedSize,4),ne+=s(T.length,2),ne+=s(Z.length,2),{fileRecord:p.LOCAL_FILE_HEADER+ne+T+Z,dirRecord:p.CENTRAL_FILE_HEADER+s(ce,2)+ne+s(V.length,2)+"\0\0\0\0"+s(Y,4)+s(b,4)+T+Z+V}}var a=n("../utils"),c=n("../stream/GenericWorker"),u=n("../utf8"),h=n("../crc32"),p=n("../signature");function m(g,y,_,b){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=_,this.encodeFileName=b,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(m,c),m.prototype.push=function(g){var y=g.meta.percent||0,_=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,c.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:_?(y+100*(_-b-1))/_:100}}))},m.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var y=this.streamFiles&&!g.file.dir;if(y){var _=o(g,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:_.fileRecord,meta:{percent:0}})}else this.accumulate=!0},m.prototype.closedSource=function(g){this.accumulate=!1;var y=this.streamFiles&&!g.file.dir,_=o(g,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(_.dirRecord),y)this.push({data:function(b){return p.DATA_DESCRIPTOR+s(b.crc32,4)+s(b.compressedSize,4)+s(b.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:_.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},m.prototype.flush=function(){for(var g=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var _=this.bytesWritten-g,b=function(x,w,S,C,j){var D=a.transformTo("string",j(C));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(x,2)+s(x,2)+s(w,4)+s(S,4)+s(D.length,2)+D}(this.dirRecords.length,_,g,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},m.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},m.prototype.registerPrevious=function(g){this._sources.push(g);var y=this;return g.on("data",function(_){y.processChunk(_)}),g.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),g.on("error",function(_){y.error(_)}),this},m.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},m.prototype.error=function(g){var y=this._sources;if(!c.prototype.error.call(this,g))return!1;for(var _=0;_<y.length;_++)try{y[_].error(g)}catch{}return!0},m.prototype.lock=function(){c.prototype.lock.call(this);for(var g=this._sources,y=0;y<g.length;y++)g[y].lock()},r.exports=m},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var s=n("../compressions"),o=n("./ZipFileWorker");i.generateWorker=function(a,c,u){var h=new o(c.streamFiles,u,c.platform,c.encodeFileName),p=0;try{a.forEach(function(m,g){p++;var y=function(w,S){var C=w||S,j=s[C];if(!j)throw new Error(C+" is not a valid compression method !");return j}(g.options.compression,c.compression),_=g.options.compressionOptions||c.compressionOptions||{},b=g.dir,x=g.date;g._compressWorker(y,_).withStreamInfo("file",{name:m,dir:b,date:x,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(h)}),h.entriesCount=p}catch(m){h.error(m)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(s.prototype=n("./object")).loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(o,a){return new s().loadAsync(o,a)},s.external=n("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var s=n("./utils"),o=n("./external"),a=n("./utf8"),c=n("./zipEntries"),u=n("./stream/Crc32Probe"),h=n("./nodejsUtils");function p(m){return new o.Promise(function(g,y){var _=m.decompressed.getContentWorker().pipe(new u);_.on("error",function(b){y(b)}).on("end",function(){_.streamInfo.crc32!==m.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}r.exports=function(m,g){var y=this;return g=s.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),h.isNode&&h.isStream(m)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",m,!0,g.optimizedBinaryString,g.base64).then(function(_){var b=new c(g);return b.load(_),b}).then(function(_){var b=[o.Promise.resolve(_)],x=_.files;if(g.checkCRC32)for(var w=0;w<x.length;w++)b.push(p(x[w]));return o.Promise.all(b)}).then(function(_){for(var b=_.shift(),x=b.files,w=0;w<x.length;w++){var S=x[w],C=S.fileNameStr,j=s.resolve(S.fileNameStr);y.file(j,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:g.createFolders}),S.dir||(y.file(j).unsafeOriginalName=C)}return b.zipComment.length&&(y.comment=b.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var s=n("../utils"),o=n("../stream/GenericWorker");function a(c,u){o.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(u)}s.inherits(a,o),a.prototype._bindStream=function(c){var u=this;(this._stream=c).pause(),c.on("data",function(h){u.push({data:h,meta:{percent:0}})}).on("error",function(h){u.isPaused?this.generatedError=h:u.error(h)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var s=n("readable-stream").Readable;function o(a,c,u){s.call(this,c),this._helper=a;var h=this;a.on("data",function(p,m){h.push(p)||h._helper.pause(),u&&u(m)}).on("error",function(p){h.emit("error",p)}).on("end",function(){h.push(null)})}n("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,o)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var o=new Buffer(s);return o.fill(0),o},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,r,i){function s(j,D,P){var T,A=a.getTypeOf(D),F=a.extend(P||{},h);F.date=F.date||new Date,F.compression!==null&&(F.compression=F.compression.toUpperCase()),typeof F.unixPermissions=="string"&&(F.unixPermissions=parseInt(F.unixPermissions,8)),F.unixPermissions&&16384&F.unixPermissions&&(F.dir=!0),F.dosPermissions&&16&F.dosPermissions&&(F.dir=!0),F.dir&&(j=x(j)),F.createFolders&&(T=b(j))&&w.call(this,T,!0);var V=A==="string"&&F.binary===!1&&F.base64===!1;P&&P.binary!==void 0||(F.binary=!V),(D instanceof p&&D.uncompressedSize===0||F.dir||!D||D.length===0)&&(F.base64=!1,F.binary=!0,D="",F.compression="STORE",A="string");var R=null;R=D instanceof p||D instanceof c?D:y.isNode&&y.isStream(D)?new _(j,D):a.prepareContent(j,D,F.binary,F.optimizedBinaryString,F.base64);var B=new m(j,R,F);this.files[j]=B}var o=n("./utf8"),a=n("./utils"),c=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),h=n("./defaults"),p=n("./compressedObject"),m=n("./zipObject"),g=n("./generate"),y=n("./nodejsUtils"),_=n("./nodejs/NodejsStreamInputAdapter"),b=function(j){j.slice(-1)==="/"&&(j=j.substring(0,j.length-1));var D=j.lastIndexOf("/");return 0<D?j.substring(0,D):""},x=function(j){return j.slice(-1)!=="/"&&(j+="/"),j},w=function(j,D){return D=D!==void 0?D:h.createFolders,j=x(j),this.files[j]||s.call(this,j,null,{dir:!0,createFolders:D}),this.files[j]};function S(j){return Object.prototype.toString.call(j)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(j){var D,P,T;for(D in this.files)T=this.files[D],(P=D.slice(this.root.length,D.length))&&D.slice(0,this.root.length)===this.root&&j(P,T)},filter:function(j){var D=[];return this.forEach(function(P,T){j(P,T)&&D.push(T)}),D},file:function(j,D,P){if(arguments.length!==1)return j=this.root+j,s.call(this,j,D,P),this;if(S(j)){var T=j;return this.filter(function(F,V){return!V.dir&&T.test(F)})}var A=this.files[this.root+j];return A&&!A.dir?A:null},folder:function(j){if(!j)return this;if(S(j))return this.filter(function(A,F){return F.dir&&j.test(A)});var D=this.root+j,P=w.call(this,D),T=this.clone();return T.root=P.name,T},remove:function(j){j=this.root+j;var D=this.files[j];if(D||(j.slice(-1)!=="/"&&(j+="/"),D=this.files[j]),D&&!D.dir)delete this.files[j];else for(var P=this.filter(function(A,F){return F.name.slice(0,j.length)===j}),T=0;T<P.length;T++)delete this.files[P[T].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(j){var D,P={};try{if((P=a.extend(j||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=P.type.toLowerCase(),P.compression=P.compression.toUpperCase(),P.type==="binarystring"&&(P.type="string"),!P.type)throw new Error("No output type specified.");a.checkSupport(P.type),P.platform!=="darwin"&&P.platform!=="freebsd"&&P.platform!=="linux"&&P.platform!=="sunos"||(P.platform="UNIX"),P.platform==="win32"&&(P.platform="DOS");var T=P.comment||this.comment||"";D=g.generateWorker(this,P,T)}catch(A){(D=new c("error")).error(A)}return new u(D,P.type||"string",P.mimeType)},generateAsync:function(j,D){return this.generateInternalStream(j).accumulate(D)},generateNodeStream:function(j,D){return(j=j||{}).type||(j.type="nodebuffer"),this.generateInternalStream(j).toNodejsStream(D)}};r.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var s=n("./DataReader");function o(a){s.call(this,a);for(var c=0;c<this.data.length;c++)a[c]=255&a[c]}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var c=a.charCodeAt(0),u=a.charCodeAt(1),h=a.charCodeAt(2),p=a.charCodeAt(3),m=this.length-4;0<=m;--m)if(this.data[m]===c&&this.data[m+1]===u&&this.data[m+2]===h&&this.data[m+3]===p)return m-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var c=a.charCodeAt(0),u=a.charCodeAt(1),h=a.charCodeAt(2),p=a.charCodeAt(3),m=this.readData(4);return c===m[0]&&u===m[1]&&h===m[2]&&p===m[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var s=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var c,u=0;for(this.checkOffset(a),c=this.index+a-1;c>=this.index;c--)u=(u<<8)+this.byteAt(c);return this.index+=a,u},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,i){var s=n("./Uint8ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){this.checkOffset(a);var c=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var s=n("./DataReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var c=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var s=n("./ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var s=n("../utils"),o=n("../support"),a=n("./ArrayReader"),c=n("./StringReader"),u=n("./NodeBufferReader"),h=n("./Uint8ArrayReader");r.exports=function(p){var m=s.getTypeOf(p);return s.checkSupport(m),m!=="string"||o.uint8array?m==="nodebuffer"?new u(p):o.uint8array?new h(s.transformTo("uint8array",p)):new a(s.transformTo("array",p)):new c(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var s=n("./GenericWorker"),o=n("../utils");function a(c){s.call(this,"ConvertWorker to "+c),this.destType=c}o.inherits(a,s),a.prototype.processChunk=function(c){this.push({data:o.transformTo(this.destType,c.data),meta:c.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var s=n("./GenericWorker"),o=n("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,s),a.prototype.processChunk=function(c){this.streamInfo.crc32=o(c.data,this.streamInfo.crc32||0),this.push(c)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function a(c){o.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}s.inherits(a,o),a.prototype.processChunk=function(c){if(c){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+c.data.length}o.prototype.processChunk.call(this,c)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function a(c){o.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(h){u.dataIsReady=!0,u.data=h,u.max=h&&h.length||0,u.type=s.getTypeOf(h),u.isPaused||u._tickAndRepeat()},function(h){u.error(h)})}s.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,u);break;case"uint8array":c=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":c=this.data.slice(this.index,u)}return this.index=u,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var c=0;c<this._listeners[o].length;c++)this._listeners[o][c].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(c){a.processChunk(c)}),o.on("end",function(){a.end()}),o.on("error",function(c){a.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=s},{}],29:[function(n,r,i){var s=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),c=n("../base64"),u=n("../support"),h=n("../external"),p=null;if(u.nodestream)try{p=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function m(y,_){return new h.Promise(function(b,x){var w=[],S=y._internalType,C=y._outputType,j=y._mimeType;y.on("data",function(D,P){w.push(D),_&&_(P)}).on("error",function(D){w=[],x(D)}).on("end",function(){try{var D=function(P,T,A){switch(P){case"blob":return s.newBlob(s.transformTo("arraybuffer",T),A);case"base64":return c.encode(T);default:return s.transformTo(P,T)}}(C,function(P,T){var A,F=0,V=null,R=0;for(A=0;A<T.length;A++)R+=T[A].length;switch(P){case"string":return T.join("");case"array":return Array.prototype.concat.apply([],T);case"uint8array":for(V=new Uint8Array(R),A=0;A<T.length;A++)V.set(T[A],F),F+=T[A].length;return V;case"nodebuffer":return Buffer.concat(T);default:throw new Error("concat : unsupported type '"+P+"'")}}(S,w),j);b(D)}catch(P){x(P)}w=[]}).resume()})}function g(y,_,b){var x=_;switch(_){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=_,this._mimeType=b,s.checkSupport(x),this._worker=y.pipe(new o(x)),y.lock()}catch(w){this._worker=new a("error"),this._worker.error(w)}}g.prototype={accumulate:function(y){return m(this,y)},on:function(y,_){var b=this;return y==="data"?this._worker.on(y,function(x){_.call(b,x.data,x.meta)}):this._worker.on(y,function(){s.delay(_,arguments,b)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},y)}},r.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var s=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),c=n("./stream/GenericWorker"),u=new Array(256),h=0;h<256;h++)u[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;u[254]=u[254]=1;function p(){c.call(this,"utf-8 decode"),this.leftOver=null}function m(){c.call(this,"utf-8 encode")}i.utf8encode=function(g){return o.nodebuffer?a.newBufferFrom(g,"utf-8"):function(y){var _,b,x,w,S,C=y.length,j=0;for(w=0;w<C;w++)(64512&(b=y.charCodeAt(w)))==55296&&w+1<C&&(64512&(x=y.charCodeAt(w+1)))==56320&&(b=65536+(b-55296<<10)+(x-56320),w++),j+=b<128?1:b<2048?2:b<65536?3:4;for(_=o.uint8array?new Uint8Array(j):new Array(j),w=S=0;S<j;w++)(64512&(b=y.charCodeAt(w)))==55296&&w+1<C&&(64512&(x=y.charCodeAt(w+1)))==56320&&(b=65536+(b-55296<<10)+(x-56320),w++),b<128?_[S++]=b:(b<2048?_[S++]=192|b>>>6:(b<65536?_[S++]=224|b>>>12:(_[S++]=240|b>>>18,_[S++]=128|b>>>12&63),_[S++]=128|b>>>6&63),_[S++]=128|63&b);return _}(g)},i.utf8decode=function(g){return o.nodebuffer?s.transformTo("nodebuffer",g).toString("utf-8"):function(y){var _,b,x,w,S=y.length,C=new Array(2*S);for(_=b=0;_<S;)if((x=y[_++])<128)C[b++]=x;else if(4<(w=u[x]))C[b++]=65533,_+=w-1;else{for(x&=w===2?31:w===3?15:7;1<w&&_<S;)x=x<<6|63&y[_++],w--;1<w?C[b++]=65533:x<65536?C[b++]=x:(x-=65536,C[b++]=55296|x>>10&1023,C[b++]=56320|1023&x)}return C.length!==b&&(C.subarray?C=C.subarray(0,b):C.length=b),s.applyFromCharCode(C)}(g=s.transformTo(o.uint8array?"uint8array":"array",g))},s.inherits(p,c),p.prototype.processChunk=function(g){var y=s.transformTo(o.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var _=y;(y=new Uint8Array(_.length+this.leftOver.length)).set(this.leftOver,0),y.set(_,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var b=function(w,S){var C;for((S=S||w.length)>w.length&&(S=w.length),C=S-1;0<=C&&(192&w[C])==128;)C--;return C<0||C===0?S:C+u[w[C]]>S?C:S}(y),x=y;b!==y.length&&(o.uint8array?(x=y.subarray(0,b),this.leftOver=y.subarray(b,y.length)):(x=y.slice(0,b),this.leftOver=y.slice(b,y.length))),this.push({data:i.utf8decode(x),meta:g.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=p,s.inherits(m,c),m.prototype.processChunk=function(g){this.push({data:i.utf8encode(g.data),meta:g.meta})},i.Utf8EncodeWorker=m},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var s=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),c=n("./external");function u(_){return _}function h(_,b){for(var x=0;x<_.length;++x)b[x]=255&_.charCodeAt(x);return b}n("setimmediate"),i.newBlob=function(_,b){i.checkSupport("blob");try{return new Blob([_],{type:b})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(_),x.getBlob(b)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(_,b,x){var w=[],S=0,C=_.length;if(C<=x)return String.fromCharCode.apply(null,_);for(;S<C;)b==="array"||b==="nodebuffer"?w.push(String.fromCharCode.apply(null,_.slice(S,Math.min(S+x,C)))):w.push(String.fromCharCode.apply(null,_.subarray(S,Math.min(S+x,C)))),S+=x;return w.join("")},stringifyByChar:function(_){for(var b="",x=0;x<_.length;x++)b+=String.fromCharCode(_[x]);return b},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function m(_){var b=65536,x=i.getTypeOf(_),w=!0;if(x==="uint8array"?w=p.applyCanBeUsed.uint8array:x==="nodebuffer"&&(w=p.applyCanBeUsed.nodebuffer),w)for(;1<b;)try{return p.stringifyByChunk(_,x,b)}catch{b=Math.floor(b/2)}return p.stringifyByChar(_)}function g(_,b){for(var x=0;x<_.length;x++)b[x]=_[x];return b}i.applyFromCharCode=m;var y={};y.string={string:u,array:function(_){return h(_,new Array(_.length))},arraybuffer:function(_){return y.string.uint8array(_).buffer},uint8array:function(_){return h(_,new Uint8Array(_.length))},nodebuffer:function(_){return h(_,a.allocBuffer(_.length))}},y.array={string:m,array:u,arraybuffer:function(_){return new Uint8Array(_).buffer},uint8array:function(_){return new Uint8Array(_)},nodebuffer:function(_){return a.newBufferFrom(_)}},y.arraybuffer={string:function(_){return m(new Uint8Array(_))},array:function(_){return g(new Uint8Array(_),new Array(_.byteLength))},arraybuffer:u,uint8array:function(_){return new Uint8Array(_)},nodebuffer:function(_){return a.newBufferFrom(new Uint8Array(_))}},y.uint8array={string:m,array:function(_){return g(_,new Array(_.length))},arraybuffer:function(_){return _.buffer},uint8array:u,nodebuffer:function(_){return a.newBufferFrom(_)}},y.nodebuffer={string:m,array:function(_){return g(_,new Array(_.length))},arraybuffer:function(_){return y.nodebuffer.uint8array(_).buffer},uint8array:function(_){return g(_,new Uint8Array(_.length))},nodebuffer:u},i.transformTo=function(_,b){if(b=b||"",!_)return b;i.checkSupport(_);var x=i.getTypeOf(b);return y[x][_](b)},i.resolve=function(_){for(var b=_.split("/"),x=[],w=0;w<b.length;w++){var S=b[w];S==="."||S===""&&w!==0&&w!==b.length-1||(S===".."?x.pop():x.push(S))}return x.join("/")},i.getTypeOf=function(_){return typeof _=="string"?"string":Object.prototype.toString.call(_)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(_)?"nodebuffer":s.uint8array&&_ instanceof Uint8Array?"uint8array":s.arraybuffer&&_ instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(_){if(!s[_.toLowerCase()])throw new Error(_+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(_){var b,x,w="";for(x=0;x<(_||"").length;x++)w+="\\x"+((b=_.charCodeAt(x))<16?"0":"")+b.toString(16).toUpperCase();return w},i.delay=function(_,b,x){setImmediate(function(){_.apply(x||null,b||[])})},i.inherits=function(_,b){function x(){}x.prototype=b.prototype,_.prototype=new x},i.extend=function(){var _,b,x={};for(_=0;_<arguments.length;_++)for(b in arguments[_])Object.prototype.hasOwnProperty.call(arguments[_],b)&&x[b]===void 0&&(x[b]=arguments[_][b]);return x},i.prepareContent=function(_,b,x,w,S){return c.Promise.resolve(b).then(function(C){return s.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new c.Promise(function(j,D){var P=new FileReader;P.onload=function(T){j(T.target.result)},P.onerror=function(T){D(T.target.error)},P.readAsArrayBuffer(C)}):C}).then(function(C){var j=i.getTypeOf(C);return j?(j==="arraybuffer"?C=i.transformTo("uint8array",C):j==="string"&&(S?C=o.decode(C):x&&w!==!0&&(C=function(D){return h(D,s.uint8array?new Uint8Array(D.length):new Array(D.length))}(C))),C):c.Promise.reject(new Error("Can't read the data of '"+_+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),c=n("./zipEntry"),u=n("./support");function h(p){this.files=[],this.loadOptions=p}h.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var m=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(m)+", expected "+o.pretty(p)+")")}},isSignature:function(p,m){var g=this.reader.index;this.reader.setIndex(p);var y=this.reader.readString(4)===m;return this.reader.setIndex(g),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),m=u.uint8array?"uint8array":"array",g=o.transformTo(m,p);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,m,g,y=this.zip64EndOfCentralSize-44;0<y;)p=this.reader.readInt(2),m=this.reader.readInt(4),g=this.reader.readData(m),this.zip64ExtensibleData[p]={id:p,length:m,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,m;for(p=0;p<this.files.length;p++)m=this.files[p],this.reader.setIndex(m.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),m.readLocalPart(this.reader),m.handleUTF8(),m.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(p=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var m=p;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var y=m-g;if(0<y)this.isSignature(m,a.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(p){this.reader=s(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),c=n("./crc32"),u=n("./utf8"),h=n("./compressions"),p=n("./support");function m(g,y){this.options=g,this.loadOptions=y}m.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var y,_;if(g.skip(22),this.fileNameLength=g.readInt(2),_=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(_),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=function(b){for(var x in h)if(Object.prototype.hasOwnProperty.call(h,x)&&h[x].magic===b)return h[x];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,y,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var y=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(y),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var y,_,b,x=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<x;)y=g.readInt(2),_=g.readInt(2),b=g.readData(_),this.extraFields[y]={id:y,length:_,value:b};g.setIndex(x)},handleUTF8:function(){var g=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var _=o.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(_)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var x=o.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var y=s(g.value);return y.readInt(1)!==1||c(this.fileName)!==y.readInt(4)?null:u.utf8decode(y.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var y=s(g.value);return y.readInt(1)!==1||c(this.fileComment)!==y.readInt(4)?null:u.utf8decode(y.readData(g.length-5))}return null}},r.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){function s(y,_,b){this.name=y,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=_,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),c=n("./utf8"),u=n("./compressedObject"),h=n("./stream/GenericWorker");s.prototype={internalStream:function(y){var _=null,b="string";try{if(!y)throw new Error("No output type specified.");var x=(b=y.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),_=this._decompressWorker();var w=!this._dataBinary;w&&!x&&(_=_.pipe(new c.Utf8EncodeWorker)),!w&&x&&(_=_.pipe(new c.Utf8DecodeWorker))}catch(S){(_=new h("error")).error(S)}return new o(_,b,"")},async:function(y,_){return this.internalStream(y).accumulate(_)},nodeStream:function(y,_){return this.internalStream(y||"nodebuffer").toNodejsStream(_)},_compressWorker:function(y,_){if(this._data instanceof u&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new c.Utf8EncodeWorker)),u.createWorkerFrom(b,y,_)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof h?this._data:new a(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],m=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<p.length;g++)s.prototype[p[g]]=m;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(s){var o,a,c=s.MutationObserver||s.WebKitMutationObserver;if(c){var u=0,h=new c(y),p=s.document.createTextNode("");h.observe(p,{characterData:!0}),o=function(){p.data=u=++u%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var _=s.document.createElement("script");_.onreadystatechange=function(){y(),_.onreadystatechange=null,_.parentNode.removeChild(_),_=null},s.document.documentElement.appendChild(_)}:function(){setTimeout(y,0)};else{var m=new s.MessageChannel;m.port1.onmessage=y,o=function(){m.port2.postMessage(0)}}var g=[];function y(){var _,b;a=!0;for(var x=g.length;x;){for(b=g,g=[],_=-1;++_<x;)b[_]();x=g.length}a=!1}r.exports=function(_){g.push(_)!==1||a||o()}}).call(this,typeof Ha<"u"?Ha:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var s=n("immediate");function o(){}var a={},c=["REJECTED"],u=["FULFILLED"],h=["PENDING"];function p(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,x!==o&&_(this,x)}function m(x,w,S){this.promise=x,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function g(x,w,S){s(function(){var C;try{C=w(S)}catch(j){return a.reject(x,j)}C===x?a.reject(x,new TypeError("Cannot resolve promise with itself")):a.resolve(x,C)})}function y(x){var w=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof w=="function")return function(){w.apply(x,arguments)}}function _(x,w){var S=!1;function C(P){S||(S=!0,a.reject(x,P))}function j(P){S||(S=!0,a.resolve(x,P))}var D=b(function(){w(j,C)});D.status==="error"&&C(D.value)}function b(x,w){var S={};try{S.value=x(w),S.status="success"}catch(C){S.status="error",S.value=C}return S}(r.exports=p).prototype.finally=function(x){if(typeof x!="function")return this;var w=this.constructor;return this.then(function(S){return w.resolve(x()).then(function(){return S})},function(S){return w.resolve(x()).then(function(){throw S})})},p.prototype.catch=function(x){return this.then(null,x)},p.prototype.then=function(x,w){if(typeof x!="function"&&this.state===u||typeof w!="function"&&this.state===c)return this;var S=new this.constructor(o);return this.state!==h?g(S,this.state===u?x:w,this.outcome):this.queue.push(new m(S,x,w)),S},m.prototype.callFulfilled=function(x){a.resolve(this.promise,x)},m.prototype.otherCallFulfilled=function(x){g(this.promise,this.onFulfilled,x)},m.prototype.callRejected=function(x){a.reject(this.promise,x)},m.prototype.otherCallRejected=function(x){g(this.promise,this.onRejected,x)},a.resolve=function(x,w){var S=b(y,w);if(S.status==="error")return a.reject(x,S.value);var C=S.value;if(C)_(x,C);else{x.state=u,x.outcome=w;for(var j=-1,D=x.queue.length;++j<D;)x.queue[j].callFulfilled(w)}return x},a.reject=function(x,w){x.state=c,x.outcome=w;for(var S=-1,C=x.queue.length;++S<C;)x.queue[S].callRejected(w);return x},p.resolve=function(x){return x instanceof this?x:a.resolve(new this(o),x)},p.reject=function(x){var w=new this(o);return a.reject(w,x)},p.all=function(x){var w=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=x.length,C=!1;if(!S)return this.resolve([]);for(var j=new Array(S),D=0,P=-1,T=new this(o);++P<S;)A(x[P],P);return T;function A(F,V){w.resolve(F).then(function(R){j[V]=R,++D!==S||C||(C=!0,a.resolve(T,j))},function(R){C||(C=!0,a.reject(T,R))})}},p.race=function(x){var w=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=x.length,C=!1;if(!S)return this.resolve([]);for(var j=-1,D=new this(o);++j<S;)P=x[j],w.resolve(P).then(function(T){C||(C=!0,a.resolve(D,T))},function(T){C||(C=!0,a.reject(D,T))});var P;return D}},{immediate:36}],38:[function(n,r,i){var s={};(0,n("./lib/utils/common").assign)(s,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var s=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),c=n("./zlib/messages"),u=n("./zlib/zstream"),h=Object.prototype.toString,p=0,m=-1,g=0,y=8;function _(x){if(!(this instanceof _))return new _(x);this.options=o.assign({level:m,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},x||{});var w=this.options;w.raw&&0<w.windowBits?w.windowBits=-w.windowBits:w.gzip&&0<w.windowBits&&w.windowBits<16&&(w.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var S=s.deflateInit2(this.strm,w.level,w.method,w.windowBits,w.memLevel,w.strategy);if(S!==p)throw new Error(c[S]);if(w.header&&s.deflateSetHeader(this.strm,w.header),w.dictionary){var C;if(C=typeof w.dictionary=="string"?a.string2buf(w.dictionary):h.call(w.dictionary)==="[object ArrayBuffer]"?new Uint8Array(w.dictionary):w.dictionary,(S=s.deflateSetDictionary(this.strm,C))!==p)throw new Error(c[S]);this._dict_set=!0}}function b(x,w){var S=new _(w);if(S.push(x,!0),S.err)throw S.msg||c[S.err];return S.result}_.prototype.push=function(x,w){var S,C,j=this.strm,D=this.options.chunkSize;if(this.ended)return!1;C=w===~~w?w:w===!0?4:0,typeof x=="string"?j.input=a.string2buf(x):h.call(x)==="[object ArrayBuffer]"?j.input=new Uint8Array(x):j.input=x,j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0&&(j.output=new o.Buf8(D),j.next_out=0,j.avail_out=D),(S=s.deflate(j,C))!==1&&S!==p)return this.onEnd(S),!(this.ended=!0);j.avail_out!==0&&(j.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(j.output,j.next_out))):this.onData(o.shrinkBuf(j.output,j.next_out)))}while((0<j.avail_in||j.avail_out===0)&&S!==1);return C===4?(S=s.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===p):C!==2||(this.onEnd(p),!(j.avail_out=0))},_.prototype.onData=function(x){this.chunks.push(x)},_.prototype.onEnd=function(x){x===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},i.Deflate=_,i.deflate=b,i.deflateRaw=function(x,w){return(w=w||{}).raw=!0,b(x,w)},i.gzip=function(x,w){return(w=w||{}).gzip=!0,b(x,w)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var s=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),c=n("./zlib/constants"),u=n("./zlib/messages"),h=n("./zlib/zstream"),p=n("./zlib/gzheader"),m=Object.prototype.toString;function g(_){if(!(this instanceof g))return new g(_);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},_||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||_&&_.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&!(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var x=s.inflateInit2(this.strm,b.windowBits);if(x!==c.Z_OK)throw new Error(u[x]);this.header=new p,s.inflateGetHeader(this.strm,this.header)}function y(_,b){var x=new g(b);if(x.push(_,!0),x.err)throw x.msg||u[x.err];return x.result}g.prototype.push=function(_,b){var x,w,S,C,j,D,P=this.strm,T=this.options.chunkSize,A=this.options.dictionary,F=!1;if(this.ended)return!1;w=b===~~b?b:b===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof _=="string"?P.input=a.binstring2buf(_):m.call(_)==="[object ArrayBuffer]"?P.input=new Uint8Array(_):P.input=_,P.next_in=0,P.avail_in=P.input.length;do{if(P.avail_out===0&&(P.output=new o.Buf8(T),P.next_out=0,P.avail_out=T),(x=s.inflate(P,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&A&&(D=typeof A=="string"?a.string2buf(A):m.call(A)==="[object ArrayBuffer]"?new Uint8Array(A):A,x=s.inflateSetDictionary(this.strm,D)),x===c.Z_BUF_ERROR&&F===!0&&(x=c.Z_OK,F=!1),x!==c.Z_STREAM_END&&x!==c.Z_OK)return this.onEnd(x),!(this.ended=!0);P.next_out&&(P.avail_out!==0&&x!==c.Z_STREAM_END&&(P.avail_in!==0||w!==c.Z_FINISH&&w!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=a.utf8border(P.output,P.next_out),C=P.next_out-S,j=a.buf2string(P.output,S),P.next_out=C,P.avail_out=T-C,C&&o.arraySet(P.output,P.output,S,C,0),this.onData(j)):this.onData(o.shrinkBuf(P.output,P.next_out)))),P.avail_in===0&&P.avail_out===0&&(F=!0)}while((0<P.avail_in||P.avail_out===0)&&x!==c.Z_STREAM_END);return x===c.Z_STREAM_END&&(w=c.Z_FINISH),w===c.Z_FINISH?(x=s.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===c.Z_OK):w!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(P.avail_out=0))},g.prototype.onData=function(_){this.chunks.push(_)},g.prototype.onEnd=function(_){_===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},i.Inflate=g,i.inflate=y,i.inflateRaw=function(_,b){return(b=b||{}).raw=!0,y(_,b)},i.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(c){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var h=u.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var p in h)h.hasOwnProperty(p)&&(c[p]=h[p])}}return c},i.shrinkBuf=function(c,u){return c.length===u?c:c.subarray?c.subarray(0,u):(c.length=u,c)};var o={arraySet:function(c,u,h,p,m){if(u.subarray&&c.subarray)c.set(u.subarray(h,h+p),m);else for(var g=0;g<p;g++)c[m+g]=u[h+g]},flattenChunks:function(c){var u,h,p,m,g,y;for(u=p=0,h=c.length;u<h;u++)p+=c[u].length;for(y=new Uint8Array(p),u=m=0,h=c.length;u<h;u++)g=c[u],y.set(g,m),m+=g.length;return y}},a={arraySet:function(c,u,h,p,m){for(var g=0;g<p;g++)c[m+g]=u[h+g]},flattenChunks:function(c){return[].concat.apply([],c)}};i.setTyped=function(c){c?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(s)},{}],42:[function(n,r,i){var s=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var c=new s.Buf8(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function h(p,m){if(m<65537&&(p.subarray&&a||!p.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(p,m));for(var g="",y=0;y<m;y++)g+=String.fromCharCode(p[y]);return g}c[254]=c[254]=1,i.string2buf=function(p){var m,g,y,_,b,x=p.length,w=0;for(_=0;_<x;_++)(64512&(g=p.charCodeAt(_)))==55296&&_+1<x&&(64512&(y=p.charCodeAt(_+1)))==56320&&(g=65536+(g-55296<<10)+(y-56320),_++),w+=g<128?1:g<2048?2:g<65536?3:4;for(m=new s.Buf8(w),_=b=0;b<w;_++)(64512&(g=p.charCodeAt(_)))==55296&&_+1<x&&(64512&(y=p.charCodeAt(_+1)))==56320&&(g=65536+(g-55296<<10)+(y-56320),_++),g<128?m[b++]=g:(g<2048?m[b++]=192|g>>>6:(g<65536?m[b++]=224|g>>>12:(m[b++]=240|g>>>18,m[b++]=128|g>>>12&63),m[b++]=128|g>>>6&63),m[b++]=128|63&g);return m},i.buf2binstring=function(p){return h(p,p.length)},i.binstring2buf=function(p){for(var m=new s.Buf8(p.length),g=0,y=m.length;g<y;g++)m[g]=p.charCodeAt(g);return m},i.buf2string=function(p,m){var g,y,_,b,x=m||p.length,w=new Array(2*x);for(g=y=0;g<x;)if((_=p[g++])<128)w[y++]=_;else if(4<(b=c[_]))w[y++]=65533,g+=b-1;else{for(_&=b===2?31:b===3?15:7;1<b&&g<x;)_=_<<6|63&p[g++],b--;1<b?w[y++]=65533:_<65536?w[y++]=_:(_-=65536,w[y++]=55296|_>>10&1023,w[y++]=56320|1023&_)}return h(w,y)},i.utf8border=function(p,m){var g;for((m=m||p.length)>p.length&&(m=p.length),g=m-1;0<=g&&(192&p[g])==128;)g--;return g<0||g===0?m:g+c[p[g]]>m?g:m}},{"./common":41}],43:[function(n,r,i){r.exports=function(s,o,a,c){for(var u=65535&s|0,h=s>>>16&65535|0,p=0;a!==0;){for(a-=p=2e3<a?2e3:a;h=h+(u=u+o[c++]|0)|0,--p;);u%=65521,h%=65521}return u|h<<16|0}},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){var s=function(){for(var o,a=[],c=0;c<256;c++){o=c;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;a[c]=o}return a}();r.exports=function(o,a,c,u){var h=s,p=u+c;o^=-1;for(var m=u;m<p;m++)o=o>>>8^h[255&(o^a[m])];return-1^o}},{}],46:[function(n,r,i){var s,o=n("../utils/common"),a=n("./trees"),c=n("./adler32"),u=n("./crc32"),h=n("./messages"),p=0,m=4,g=0,y=-2,_=-1,b=4,x=2,w=8,S=9,C=286,j=30,D=19,P=2*C+1,T=15,A=3,F=258,V=F+A+1,R=42,B=113,E=1,Z=2,$=3,I=4;function z(M,he){return M.msg=h[he],he}function N(M){return(M<<1)-(4<M?9:0)}function H(M){for(var he=M.length;0<=--he;)M[he]=0}function K(M){var he=M.state,ae=he.pending;ae>M.avail_out&&(ae=M.avail_out),ae!==0&&(o.arraySet(M.output,he.pending_buf,he.pending_out,ae,M.next_out),M.next_out+=ae,he.pending_out+=ae,M.total_out+=ae,M.avail_out-=ae,he.pending-=ae,he.pending===0&&(he.pending_out=0))}function Y(M,he){a._tr_flush_block(M,0<=M.block_start?M.block_start:-1,M.strstart-M.block_start,he),M.block_start=M.strstart,K(M.strm)}function ce(M,he){M.pending_buf[M.pending++]=he}function ne(M,he){M.pending_buf[M.pending++]=he>>>8&255,M.pending_buf[M.pending++]=255&he}function X(M,he){var ae,J,G=M.max_chain_length,re=M.strstart,de=M.prev_length,ge=M.nice_match,oe=M.strstart>M.w_size-V?M.strstart-(M.w_size-V):0,ee=M.window,fe=M.w_mask,ye=M.prev,be=M.strstart+F,Le=ee[re+de-1],Ae=ee[re+de];M.prev_length>=M.good_match&&(G>>=2),ge>M.lookahead&&(ge=M.lookahead);do if(ee[(ae=he)+de]===Ae&&ee[ae+de-1]===Le&&ee[ae]===ee[re]&&ee[++ae]===ee[re+1]){re+=2,ae++;do;while(ee[++re]===ee[++ae]&&ee[++re]===ee[++ae]&&ee[++re]===ee[++ae]&&ee[++re]===ee[++ae]&&ee[++re]===ee[++ae]&&ee[++re]===ee[++ae]&&ee[++re]===ee[++ae]&&ee[++re]===ee[++ae]&&re<be);if(J=F-(be-re),re=be-F,de<J){if(M.match_start=he,ge<=(de=J))break;Le=ee[re+de-1],Ae=ee[re+de]}}while((he=ye[he&fe])>oe&&--G!=0);return de<=M.lookahead?de:M.lookahead}function _e(M){var he,ae,J,G,re,de,ge,oe,ee,fe,ye=M.w_size;do{if(G=M.window_size-M.lookahead-M.strstart,M.strstart>=ye+(ye-V)){for(o.arraySet(M.window,M.window,ye,ye,0),M.match_start-=ye,M.strstart-=ye,M.block_start-=ye,he=ae=M.hash_size;J=M.head[--he],M.head[he]=ye<=J?J-ye:0,--ae;);for(he=ae=ye;J=M.prev[--he],M.prev[he]=ye<=J?J-ye:0,--ae;);G+=ye}if(M.strm.avail_in===0)break;if(de=M.strm,ge=M.window,oe=M.strstart+M.lookahead,ee=G,fe=void 0,fe=de.avail_in,ee<fe&&(fe=ee),ae=fe===0?0:(de.avail_in-=fe,o.arraySet(ge,de.input,de.next_in,fe,oe),de.state.wrap===1?de.adler=c(de.adler,ge,fe,oe):de.state.wrap===2&&(de.adler=u(de.adler,ge,fe,oe)),de.next_in+=fe,de.total_in+=fe,fe),M.lookahead+=ae,M.lookahead+M.insert>=A)for(re=M.strstart-M.insert,M.ins_h=M.window[re],M.ins_h=(M.ins_h<<M.hash_shift^M.window[re+1])&M.hash_mask;M.insert&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[re+A-1])&M.hash_mask,M.prev[re&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=re,re++,M.insert--,!(M.lookahead+M.insert<A)););}while(M.lookahead<V&&M.strm.avail_in!==0)}function Te(M,he){for(var ae,J;;){if(M.lookahead<V){if(_e(M),M.lookahead<V&&he===p)return E;if(M.lookahead===0)break}if(ae=0,M.lookahead>=A&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+A-1])&M.hash_mask,ae=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),ae!==0&&M.strstart-ae<=M.w_size-V&&(M.match_length=X(M,ae)),M.match_length>=A)if(J=a._tr_tally(M,M.strstart-M.match_start,M.match_length-A),M.lookahead-=M.match_length,M.match_length<=M.max_lazy_match&&M.lookahead>=A){for(M.match_length--;M.strstart++,M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+A-1])&M.hash_mask,ae=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart,--M.match_length!=0;);M.strstart++}else M.strstart+=M.match_length,M.match_length=0,M.ins_h=M.window[M.strstart],M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+1])&M.hash_mask;else J=a._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++;if(J&&(Y(M,!1),M.strm.avail_out===0))return E}return M.insert=M.strstart<A-1?M.strstart:A-1,he===m?(Y(M,!0),M.strm.avail_out===0?$:I):M.last_lit&&(Y(M,!1),M.strm.avail_out===0)?E:Z}function Pe(M,he){for(var ae,J,G;;){if(M.lookahead<V){if(_e(M),M.lookahead<V&&he===p)return E;if(M.lookahead===0)break}if(ae=0,M.lookahead>=A&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+A-1])&M.hash_mask,ae=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),M.prev_length=M.match_length,M.prev_match=M.match_start,M.match_length=A-1,ae!==0&&M.prev_length<M.max_lazy_match&&M.strstart-ae<=M.w_size-V&&(M.match_length=X(M,ae),M.match_length<=5&&(M.strategy===1||M.match_length===A&&4096<M.strstart-M.match_start)&&(M.match_length=A-1)),M.prev_length>=A&&M.match_length<=M.prev_length){for(G=M.strstart+M.lookahead-A,J=a._tr_tally(M,M.strstart-1-M.prev_match,M.prev_length-A),M.lookahead-=M.prev_length-1,M.prev_length-=2;++M.strstart<=G&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+A-1])&M.hash_mask,ae=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),--M.prev_length!=0;);if(M.match_available=0,M.match_length=A-1,M.strstart++,J&&(Y(M,!1),M.strm.avail_out===0))return E}else if(M.match_available){if((J=a._tr_tally(M,0,M.window[M.strstart-1]))&&Y(M,!1),M.strstart++,M.lookahead--,M.strm.avail_out===0)return E}else M.match_available=1,M.strstart++,M.lookahead--}return M.match_available&&(J=a._tr_tally(M,0,M.window[M.strstart-1]),M.match_available=0),M.insert=M.strstart<A-1?M.strstart:A-1,he===m?(Y(M,!0),M.strm.avail_out===0?$:I):M.last_lit&&(Y(M,!1),M.strm.avail_out===0)?E:Z}function le(M,he,ae,J,G){this.good_length=M,this.max_lazy=he,this.nice_length=ae,this.max_chain=J,this.func=G}function ke(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=w,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*P),this.dyn_dtree=new o.Buf16(2*(2*j+1)),this.bl_tree=new o.Buf16(2*(2*D+1)),H(this.dyn_ltree),H(this.dyn_dtree),H(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(T+1),this.heap=new o.Buf16(2*C+1),H(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*C+1),H(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function De(M){var he;return M&&M.state?(M.total_in=M.total_out=0,M.data_type=x,(he=M.state).pending=0,he.pending_out=0,he.wrap<0&&(he.wrap=-he.wrap),he.status=he.wrap?R:B,M.adler=he.wrap===2?0:1,he.last_flush=p,a._tr_init(he),g):z(M,y)}function Re(M){var he=De(M);return he===g&&function(ae){ae.window_size=2*ae.w_size,H(ae.head),ae.max_lazy_match=s[ae.level].max_lazy,ae.good_match=s[ae.level].good_length,ae.nice_match=s[ae.level].nice_length,ae.max_chain_length=s[ae.level].max_chain,ae.strstart=0,ae.block_start=0,ae.lookahead=0,ae.insert=0,ae.match_length=ae.prev_length=A-1,ae.match_available=0,ae.ins_h=0}(M.state),he}function Ge(M,he,ae,J,G,re){if(!M)return y;var de=1;if(he===_&&(he=6),J<0?(de=0,J=-J):15<J&&(de=2,J-=16),G<1||S<G||ae!==w||J<8||15<J||he<0||9<he||re<0||b<re)return z(M,y);J===8&&(J=9);var ge=new ke;return(M.state=ge).strm=M,ge.wrap=de,ge.gzhead=null,ge.w_bits=J,ge.w_size=1<<ge.w_bits,ge.w_mask=ge.w_size-1,ge.hash_bits=G+7,ge.hash_size=1<<ge.hash_bits,ge.hash_mask=ge.hash_size-1,ge.hash_shift=~~((ge.hash_bits+A-1)/A),ge.window=new o.Buf8(2*ge.w_size),ge.head=new o.Buf16(ge.hash_size),ge.prev=new o.Buf16(ge.w_size),ge.lit_bufsize=1<<G+6,ge.pending_buf_size=4*ge.lit_bufsize,ge.pending_buf=new o.Buf8(ge.pending_buf_size),ge.d_buf=1*ge.lit_bufsize,ge.l_buf=3*ge.lit_bufsize,ge.level=he,ge.strategy=re,ge.method=ae,Re(M)}s=[new le(0,0,0,0,function(M,he){var ae=65535;for(ae>M.pending_buf_size-5&&(ae=M.pending_buf_size-5);;){if(M.lookahead<=1){if(_e(M),M.lookahead===0&&he===p)return E;if(M.lookahead===0)break}M.strstart+=M.lookahead,M.lookahead=0;var J=M.block_start+ae;if((M.strstart===0||M.strstart>=J)&&(M.lookahead=M.strstart-J,M.strstart=J,Y(M,!1),M.strm.avail_out===0)||M.strstart-M.block_start>=M.w_size-V&&(Y(M,!1),M.strm.avail_out===0))return E}return M.insert=0,he===m?(Y(M,!0),M.strm.avail_out===0?$:I):(M.strstart>M.block_start&&(Y(M,!1),M.strm.avail_out),E)}),new le(4,4,8,4,Te),new le(4,5,16,8,Te),new le(4,6,32,32,Te),new le(4,4,16,16,Pe),new le(8,16,32,32,Pe),new le(8,16,128,128,Pe),new le(8,32,128,256,Pe),new le(32,128,258,1024,Pe),new le(32,258,258,4096,Pe)],i.deflateInit=function(M,he){return Ge(M,he,w,15,8,0)},i.deflateInit2=Ge,i.deflateReset=Re,i.deflateResetKeep=De,i.deflateSetHeader=function(M,he){return M&&M.state?M.state.wrap!==2?y:(M.state.gzhead=he,g):y},i.deflate=function(M,he){var ae,J,G,re;if(!M||!M.state||5<he||he<0)return M?z(M,y):y;if(J=M.state,!M.output||!M.input&&M.avail_in!==0||J.status===666&&he!==m)return z(M,M.avail_out===0?-5:y);if(J.strm=M,ae=J.last_flush,J.last_flush=he,J.status===R)if(J.wrap===2)M.adler=0,ce(J,31),ce(J,139),ce(J,8),J.gzhead?(ce(J,(J.gzhead.text?1:0)+(J.gzhead.hcrc?2:0)+(J.gzhead.extra?4:0)+(J.gzhead.name?8:0)+(J.gzhead.comment?16:0)),ce(J,255&J.gzhead.time),ce(J,J.gzhead.time>>8&255),ce(J,J.gzhead.time>>16&255),ce(J,J.gzhead.time>>24&255),ce(J,J.level===9?2:2<=J.strategy||J.level<2?4:0),ce(J,255&J.gzhead.os),J.gzhead.extra&&J.gzhead.extra.length&&(ce(J,255&J.gzhead.extra.length),ce(J,J.gzhead.extra.length>>8&255)),J.gzhead.hcrc&&(M.adler=u(M.adler,J.pending_buf,J.pending,0)),J.gzindex=0,J.status=69):(ce(J,0),ce(J,0),ce(J,0),ce(J,0),ce(J,0),ce(J,J.level===9?2:2<=J.strategy||J.level<2?4:0),ce(J,3),J.status=B);else{var de=w+(J.w_bits-8<<4)<<8;de|=(2<=J.strategy||J.level<2?0:J.level<6?1:J.level===6?2:3)<<6,J.strstart!==0&&(de|=32),de+=31-de%31,J.status=B,ne(J,de),J.strstart!==0&&(ne(J,M.adler>>>16),ne(J,65535&M.adler)),M.adler=1}if(J.status===69)if(J.gzhead.extra){for(G=J.pending;J.gzindex<(65535&J.gzhead.extra.length)&&(J.pending!==J.pending_buf_size||(J.gzhead.hcrc&&J.pending>G&&(M.adler=u(M.adler,J.pending_buf,J.pending-G,G)),K(M),G=J.pending,J.pending!==J.pending_buf_size));)ce(J,255&J.gzhead.extra[J.gzindex]),J.gzindex++;J.gzhead.hcrc&&J.pending>G&&(M.adler=u(M.adler,J.pending_buf,J.pending-G,G)),J.gzindex===J.gzhead.extra.length&&(J.gzindex=0,J.status=73)}else J.status=73;if(J.status===73)if(J.gzhead.name){G=J.pending;do{if(J.pending===J.pending_buf_size&&(J.gzhead.hcrc&&J.pending>G&&(M.adler=u(M.adler,J.pending_buf,J.pending-G,G)),K(M),G=J.pending,J.pending===J.pending_buf_size)){re=1;break}re=J.gzindex<J.gzhead.name.length?255&J.gzhead.name.charCodeAt(J.gzindex++):0,ce(J,re)}while(re!==0);J.gzhead.hcrc&&J.pending>G&&(M.adler=u(M.adler,J.pending_buf,J.pending-G,G)),re===0&&(J.gzindex=0,J.status=91)}else J.status=91;if(J.status===91)if(J.gzhead.comment){G=J.pending;do{if(J.pending===J.pending_buf_size&&(J.gzhead.hcrc&&J.pending>G&&(M.adler=u(M.adler,J.pending_buf,J.pending-G,G)),K(M),G=J.pending,J.pending===J.pending_buf_size)){re=1;break}re=J.gzindex<J.gzhead.comment.length?255&J.gzhead.comment.charCodeAt(J.gzindex++):0,ce(J,re)}while(re!==0);J.gzhead.hcrc&&J.pending>G&&(M.adler=u(M.adler,J.pending_buf,J.pending-G,G)),re===0&&(J.status=103)}else J.status=103;if(J.status===103&&(J.gzhead.hcrc?(J.pending+2>J.pending_buf_size&&K(M),J.pending+2<=J.pending_buf_size&&(ce(J,255&M.adler),ce(J,M.adler>>8&255),M.adler=0,J.status=B)):J.status=B),J.pending!==0){if(K(M),M.avail_out===0)return J.last_flush=-1,g}else if(M.avail_in===0&&N(he)<=N(ae)&&he!==m)return z(M,-5);if(J.status===666&&M.avail_in!==0)return z(M,-5);if(M.avail_in!==0||J.lookahead!==0||he!==p&&J.status!==666){var ge=J.strategy===2?function(oe,ee){for(var fe;;){if(oe.lookahead===0&&(_e(oe),oe.lookahead===0)){if(ee===p)return E;break}if(oe.match_length=0,fe=a._tr_tally(oe,0,oe.window[oe.strstart]),oe.lookahead--,oe.strstart++,fe&&(Y(oe,!1),oe.strm.avail_out===0))return E}return oe.insert=0,ee===m?(Y(oe,!0),oe.strm.avail_out===0?$:I):oe.last_lit&&(Y(oe,!1),oe.strm.avail_out===0)?E:Z}(J,he):J.strategy===3?function(oe,ee){for(var fe,ye,be,Le,Ae=oe.window;;){if(oe.lookahead<=F){if(_e(oe),oe.lookahead<=F&&ee===p)return E;if(oe.lookahead===0)break}if(oe.match_length=0,oe.lookahead>=A&&0<oe.strstart&&(ye=Ae[be=oe.strstart-1])===Ae[++be]&&ye===Ae[++be]&&ye===Ae[++be]){Le=oe.strstart+F;do;while(ye===Ae[++be]&&ye===Ae[++be]&&ye===Ae[++be]&&ye===Ae[++be]&&ye===Ae[++be]&&ye===Ae[++be]&&ye===Ae[++be]&&ye===Ae[++be]&&be<Le);oe.match_length=F-(Le-be),oe.match_length>oe.lookahead&&(oe.match_length=oe.lookahead)}if(oe.match_length>=A?(fe=a._tr_tally(oe,1,oe.match_length-A),oe.lookahead-=oe.match_length,oe.strstart+=oe.match_length,oe.match_length=0):(fe=a._tr_tally(oe,0,oe.window[oe.strstart]),oe.lookahead--,oe.strstart++),fe&&(Y(oe,!1),oe.strm.avail_out===0))return E}return oe.insert=0,ee===m?(Y(oe,!0),oe.strm.avail_out===0?$:I):oe.last_lit&&(Y(oe,!1),oe.strm.avail_out===0)?E:Z}(J,he):s[J.level].func(J,he);if(ge!==$&&ge!==I||(J.status=666),ge===E||ge===$)return M.avail_out===0&&(J.last_flush=-1),g;if(ge===Z&&(he===1?a._tr_align(J):he!==5&&(a._tr_stored_block(J,0,0,!1),he===3&&(H(J.head),J.lookahead===0&&(J.strstart=0,J.block_start=0,J.insert=0))),K(M),M.avail_out===0))return J.last_flush=-1,g}return he!==m?g:J.wrap<=0?1:(J.wrap===2?(ce(J,255&M.adler),ce(J,M.adler>>8&255),ce(J,M.adler>>16&255),ce(J,M.adler>>24&255),ce(J,255&M.total_in),ce(J,M.total_in>>8&255),ce(J,M.total_in>>16&255),ce(J,M.total_in>>24&255)):(ne(J,M.adler>>>16),ne(J,65535&M.adler)),K(M),0<J.wrap&&(J.wrap=-J.wrap),J.pending!==0?g:1)},i.deflateEnd=function(M){var he;return M&&M.state?(he=M.state.status)!==R&&he!==69&&he!==73&&he!==91&&he!==103&&he!==B&&he!==666?z(M,y):(M.state=null,he===B?z(M,-3):g):y},i.deflateSetDictionary=function(M,he){var ae,J,G,re,de,ge,oe,ee,fe=he.length;if(!M||!M.state||(re=(ae=M.state).wrap)===2||re===1&&ae.status!==R||ae.lookahead)return y;for(re===1&&(M.adler=c(M.adler,he,fe,0)),ae.wrap=0,fe>=ae.w_size&&(re===0&&(H(ae.head),ae.strstart=0,ae.block_start=0,ae.insert=0),ee=new o.Buf8(ae.w_size),o.arraySet(ee,he,fe-ae.w_size,ae.w_size,0),he=ee,fe=ae.w_size),de=M.avail_in,ge=M.next_in,oe=M.input,M.avail_in=fe,M.next_in=0,M.input=he,_e(ae);ae.lookahead>=A;){for(J=ae.strstart,G=ae.lookahead-(A-1);ae.ins_h=(ae.ins_h<<ae.hash_shift^ae.window[J+A-1])&ae.hash_mask,ae.prev[J&ae.w_mask]=ae.head[ae.ins_h],ae.head[ae.ins_h]=J,J++,--G;);ae.strstart=J,ae.lookahead=A-1,_e(ae)}return ae.strstart+=ae.lookahead,ae.block_start=ae.strstart,ae.insert=ae.lookahead,ae.lookahead=0,ae.match_length=ae.prev_length=A-1,ae.match_available=0,M.next_in=ge,M.input=oe,M.avail_in=de,ae.wrap=re,g},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,i){r.exports=function(s,o){var a,c,u,h,p,m,g,y,_,b,x,w,S,C,j,D,P,T,A,F,V,R,B,E,Z;a=s.state,c=s.next_in,E=s.input,u=c+(s.avail_in-5),h=s.next_out,Z=s.output,p=h-(o-s.avail_out),m=h+(s.avail_out-257),g=a.dmax,y=a.wsize,_=a.whave,b=a.wnext,x=a.window,w=a.hold,S=a.bits,C=a.lencode,j=a.distcode,D=(1<<a.lenbits)-1,P=(1<<a.distbits)-1;e:do{S<15&&(w+=E[c++]<<S,S+=8,w+=E[c++]<<S,S+=8),T=C[w&D];t:for(;;){if(w>>>=A=T>>>24,S-=A,(A=T>>>16&255)===0)Z[h++]=65535&T;else{if(!(16&A)){if(!(64&A)){T=C[(65535&T)+(w&(1<<A)-1)];continue t}if(32&A){a.mode=12;break e}s.msg="invalid literal/length code",a.mode=30;break e}F=65535&T,(A&=15)&&(S<A&&(w+=E[c++]<<S,S+=8),F+=w&(1<<A)-1,w>>>=A,S-=A),S<15&&(w+=E[c++]<<S,S+=8,w+=E[c++]<<S,S+=8),T=j[w&P];n:for(;;){if(w>>>=A=T>>>24,S-=A,!(16&(A=T>>>16&255))){if(!(64&A)){T=j[(65535&T)+(w&(1<<A)-1)];continue n}s.msg="invalid distance code",a.mode=30;break e}if(V=65535&T,S<(A&=15)&&(w+=E[c++]<<S,(S+=8)<A&&(w+=E[c++]<<S,S+=8)),g<(V+=w&(1<<A)-1)){s.msg="invalid distance too far back",a.mode=30;break e}if(w>>>=A,S-=A,(A=h-p)<V){if(_<(A=V-A)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break e}if(B=x,(R=0)===b){if(R+=y-A,A<F){for(F-=A;Z[h++]=x[R++],--A;);R=h-V,B=Z}}else if(b<A){if(R+=y+b-A,(A-=b)<F){for(F-=A;Z[h++]=x[R++],--A;);if(R=0,b<F){for(F-=A=b;Z[h++]=x[R++],--A;);R=h-V,B=Z}}}else if(R+=b-A,A<F){for(F-=A;Z[h++]=x[R++],--A;);R=h-V,B=Z}for(;2<F;)Z[h++]=B[R++],Z[h++]=B[R++],Z[h++]=B[R++],F-=3;F&&(Z[h++]=B[R++],1<F&&(Z[h++]=B[R++]))}else{for(R=h-V;Z[h++]=Z[R++],Z[h++]=Z[R++],Z[h++]=Z[R++],2<(F-=3););F&&(Z[h++]=Z[R++],1<F&&(Z[h++]=Z[R++]))}break}}break}}while(c<u&&h<m);c-=F=S>>3,w&=(1<<(S-=F<<3))-1,s.next_in=c,s.next_out=h,s.avail_in=c<u?u-c+5:5-(c-u),s.avail_out=h<m?m-h+257:257-(h-m),a.hold=w,a.bits=S}},{}],49:[function(n,r,i){var s=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),c=n("./inffast"),u=n("./inftrees"),h=1,p=2,m=0,g=-2,y=1,_=852,b=592;function x(R){return(R>>>24&255)+(R>>>8&65280)+((65280&R)<<8)+((255&R)<<24)}function w(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(R){var B;return R&&R.state?(B=R.state,R.total_in=R.total_out=B.total=0,R.msg="",B.wrap&&(R.adler=1&B.wrap),B.mode=y,B.last=0,B.havedict=0,B.dmax=32768,B.head=null,B.hold=0,B.bits=0,B.lencode=B.lendyn=new s.Buf32(_),B.distcode=B.distdyn=new s.Buf32(b),B.sane=1,B.back=-1,m):g}function C(R){var B;return R&&R.state?((B=R.state).wsize=0,B.whave=0,B.wnext=0,S(R)):g}function j(R,B){var E,Z;return R&&R.state?(Z=R.state,B<0?(E=0,B=-B):(E=1+(B>>4),B<48&&(B&=15)),B&&(B<8||15<B)?g:(Z.window!==null&&Z.wbits!==B&&(Z.window=null),Z.wrap=E,Z.wbits=B,C(R))):g}function D(R,B){var E,Z;return R?(Z=new w,(R.state=Z).window=null,(E=j(R,B))!==m&&(R.state=null),E):g}var P,T,A=!0;function F(R){if(A){var B;for(P=new s.Buf32(512),T=new s.Buf32(32),B=0;B<144;)R.lens[B++]=8;for(;B<256;)R.lens[B++]=9;for(;B<280;)R.lens[B++]=7;for(;B<288;)R.lens[B++]=8;for(u(h,R.lens,0,288,P,0,R.work,{bits:9}),B=0;B<32;)R.lens[B++]=5;u(p,R.lens,0,32,T,0,R.work,{bits:5}),A=!1}R.lencode=P,R.lenbits=9,R.distcode=T,R.distbits=5}function V(R,B,E,Z){var $,I=R.state;return I.window===null&&(I.wsize=1<<I.wbits,I.wnext=0,I.whave=0,I.window=new s.Buf8(I.wsize)),Z>=I.wsize?(s.arraySet(I.window,B,E-I.wsize,I.wsize,0),I.wnext=0,I.whave=I.wsize):(Z<($=I.wsize-I.wnext)&&($=Z),s.arraySet(I.window,B,E-Z,$,I.wnext),(Z-=$)?(s.arraySet(I.window,B,E-Z,Z,0),I.wnext=Z,I.whave=I.wsize):(I.wnext+=$,I.wnext===I.wsize&&(I.wnext=0),I.whave<I.wsize&&(I.whave+=$))),0}i.inflateReset=C,i.inflateReset2=j,i.inflateResetKeep=S,i.inflateInit=function(R){return D(R,15)},i.inflateInit2=D,i.inflate=function(R,B){var E,Z,$,I,z,N,H,K,Y,ce,ne,X,_e,Te,Pe,le,ke,De,Re,Ge,M,he,ae,J,G=0,re=new s.Buf8(4),de=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!R||!R.state||!R.output||!R.input&&R.avail_in!==0)return g;(E=R.state).mode===12&&(E.mode=13),z=R.next_out,$=R.output,H=R.avail_out,I=R.next_in,Z=R.input,N=R.avail_in,K=E.hold,Y=E.bits,ce=N,ne=H,he=m;e:for(;;)switch(E.mode){case y:if(E.wrap===0){E.mode=13;break}for(;Y<16;){if(N===0)break e;N--,K+=Z[I++]<<Y,Y+=8}if(2&E.wrap&&K===35615){re[E.check=0]=255&K,re[1]=K>>>8&255,E.check=a(E.check,re,2,0),Y=K=0,E.mode=2;break}if(E.flags=0,E.head&&(E.head.done=!1),!(1&E.wrap)||(((255&K)<<8)+(K>>8))%31){R.msg="incorrect header check",E.mode=30;break}if((15&K)!=8){R.msg="unknown compression method",E.mode=30;break}if(Y-=4,M=8+(15&(K>>>=4)),E.wbits===0)E.wbits=M;else if(M>E.wbits){R.msg="invalid window size",E.mode=30;break}E.dmax=1<<M,R.adler=E.check=1,E.mode=512&K?10:12,Y=K=0;break;case 2:for(;Y<16;){if(N===0)break e;N--,K+=Z[I++]<<Y,Y+=8}if(E.flags=K,(255&E.flags)!=8){R.msg="unknown compression method",E.mode=30;break}if(57344&E.flags){R.msg="unknown header flags set",E.mode=30;break}E.head&&(E.head.text=K>>8&1),512&E.flags&&(re[0]=255&K,re[1]=K>>>8&255,E.check=a(E.check,re,2,0)),Y=K=0,E.mode=3;case 3:for(;Y<32;){if(N===0)break e;N--,K+=Z[I++]<<Y,Y+=8}E.head&&(E.head.time=K),512&E.flags&&(re[0]=255&K,re[1]=K>>>8&255,re[2]=K>>>16&255,re[3]=K>>>24&255,E.check=a(E.check,re,4,0)),Y=K=0,E.mode=4;case 4:for(;Y<16;){if(N===0)break e;N--,K+=Z[I++]<<Y,Y+=8}E.head&&(E.head.xflags=255&K,E.head.os=K>>8),512&E.flags&&(re[0]=255&K,re[1]=K>>>8&255,E.check=a(E.check,re,2,0)),Y=K=0,E.mode=5;case 5:if(1024&E.flags){for(;Y<16;){if(N===0)break e;N--,K+=Z[I++]<<Y,Y+=8}E.length=K,E.head&&(E.head.extra_len=K),512&E.flags&&(re[0]=255&K,re[1]=K>>>8&255,E.check=a(E.check,re,2,0)),Y=K=0}else E.head&&(E.head.extra=null);E.mode=6;case 6:if(1024&E.flags&&(N<(X=E.length)&&(X=N),X&&(E.head&&(M=E.head.extra_len-E.length,E.head.extra||(E.head.extra=new Array(E.head.extra_len)),s.arraySet(E.head.extra,Z,I,X,M)),512&E.flags&&(E.check=a(E.check,Z,X,I)),N-=X,I+=X,E.length-=X),E.length))break e;E.length=0,E.mode=7;case 7:if(2048&E.flags){if(N===0)break e;for(X=0;M=Z[I+X++],E.head&&M&&E.length<65536&&(E.head.name+=String.fromCharCode(M)),M&&X<N;);if(512&E.flags&&(E.check=a(E.check,Z,X,I)),N-=X,I+=X,M)break e}else E.head&&(E.head.name=null);E.length=0,E.mode=8;case 8:if(4096&E.flags){if(N===0)break e;for(X=0;M=Z[I+X++],E.head&&M&&E.length<65536&&(E.head.comment+=String.fromCharCode(M)),M&&X<N;);if(512&E.flags&&(E.check=a(E.check,Z,X,I)),N-=X,I+=X,M)break e}else E.head&&(E.head.comment=null);E.mode=9;case 9:if(512&E.flags){for(;Y<16;){if(N===0)break e;N--,K+=Z[I++]<<Y,Y+=8}if(K!==(65535&E.check)){R.msg="header crc mismatch",E.mode=30;break}Y=K=0}E.head&&(E.head.hcrc=E.flags>>9&1,E.head.done=!0),R.adler=E.check=0,E.mode=12;break;case 10:for(;Y<32;){if(N===0)break e;N--,K+=Z[I++]<<Y,Y+=8}R.adler=E.check=x(K),Y=K=0,E.mode=11;case 11:if(E.havedict===0)return R.next_out=z,R.avail_out=H,R.next_in=I,R.avail_in=N,E.hold=K,E.bits=Y,2;R.adler=E.check=1,E.mode=12;case 12:if(B===5||B===6)break e;case 13:if(E.last){K>>>=7&Y,Y-=7&Y,E.mode=27;break}for(;Y<3;){if(N===0)break e;N--,K+=Z[I++]<<Y,Y+=8}switch(E.last=1&K,Y-=1,3&(K>>>=1)){case 0:E.mode=14;break;case 1:if(F(E),E.mode=20,B!==6)break;K>>>=2,Y-=2;break e;case 2:E.mode=17;break;case 3:R.msg="invalid block type",E.mode=30}K>>>=2,Y-=2;break;case 14:for(K>>>=7&Y,Y-=7&Y;Y<32;){if(N===0)break e;N--,K+=Z[I++]<<Y,Y+=8}if((65535&K)!=(K>>>16^65535)){R.msg="invalid stored block lengths",E.mode=30;break}if(E.length=65535&K,Y=K=0,E.mode=15,B===6)break e;case 15:E.mode=16;case 16:if(X=E.length){if(N<X&&(X=N),H<X&&(X=H),X===0)break e;s.arraySet($,Z,I,X,z),N-=X,I+=X,H-=X,z+=X,E.length-=X;break}E.mode=12;break;case 17:for(;Y<14;){if(N===0)break e;N--,K+=Z[I++]<<Y,Y+=8}if(E.nlen=257+(31&K),K>>>=5,Y-=5,E.ndist=1+(31&K),K>>>=5,Y-=5,E.ncode=4+(15&K),K>>>=4,Y-=4,286<E.nlen||30<E.ndist){R.msg="too many length or distance symbols",E.mode=30;break}E.have=0,E.mode=18;case 18:for(;E.have<E.ncode;){for(;Y<3;){if(N===0)break e;N--,K+=Z[I++]<<Y,Y+=8}E.lens[de[E.have++]]=7&K,K>>>=3,Y-=3}for(;E.have<19;)E.lens[de[E.have++]]=0;if(E.lencode=E.lendyn,E.lenbits=7,ae={bits:E.lenbits},he=u(0,E.lens,0,19,E.lencode,0,E.work,ae),E.lenbits=ae.bits,he){R.msg="invalid code lengths set",E.mode=30;break}E.have=0,E.mode=19;case 19:for(;E.have<E.nlen+E.ndist;){for(;le=(G=E.lencode[K&(1<<E.lenbits)-1])>>>16&255,ke=65535&G,!((Pe=G>>>24)<=Y);){if(N===0)break e;N--,K+=Z[I++]<<Y,Y+=8}if(ke<16)K>>>=Pe,Y-=Pe,E.lens[E.have++]=ke;else{if(ke===16){for(J=Pe+2;Y<J;){if(N===0)break e;N--,K+=Z[I++]<<Y,Y+=8}if(K>>>=Pe,Y-=Pe,E.have===0){R.msg="invalid bit length repeat",E.mode=30;break}M=E.lens[E.have-1],X=3+(3&K),K>>>=2,Y-=2}else if(ke===17){for(J=Pe+3;Y<J;){if(N===0)break e;N--,K+=Z[I++]<<Y,Y+=8}Y-=Pe,M=0,X=3+(7&(K>>>=Pe)),K>>>=3,Y-=3}else{for(J=Pe+7;Y<J;){if(N===0)break e;N--,K+=Z[I++]<<Y,Y+=8}Y-=Pe,M=0,X=11+(127&(K>>>=Pe)),K>>>=7,Y-=7}if(E.have+X>E.nlen+E.ndist){R.msg="invalid bit length repeat",E.mode=30;break}for(;X--;)E.lens[E.have++]=M}}if(E.mode===30)break;if(E.lens[256]===0){R.msg="invalid code -- missing end-of-block",E.mode=30;break}if(E.lenbits=9,ae={bits:E.lenbits},he=u(h,E.lens,0,E.nlen,E.lencode,0,E.work,ae),E.lenbits=ae.bits,he){R.msg="invalid literal/lengths set",E.mode=30;break}if(E.distbits=6,E.distcode=E.distdyn,ae={bits:E.distbits},he=u(p,E.lens,E.nlen,E.ndist,E.distcode,0,E.work,ae),E.distbits=ae.bits,he){R.msg="invalid distances set",E.mode=30;break}if(E.mode=20,B===6)break e;case 20:E.mode=21;case 21:if(6<=N&&258<=H){R.next_out=z,R.avail_out=H,R.next_in=I,R.avail_in=N,E.hold=K,E.bits=Y,c(R,ne),z=R.next_out,$=R.output,H=R.avail_out,I=R.next_in,Z=R.input,N=R.avail_in,K=E.hold,Y=E.bits,E.mode===12&&(E.back=-1);break}for(E.back=0;le=(G=E.lencode[K&(1<<E.lenbits)-1])>>>16&255,ke=65535&G,!((Pe=G>>>24)<=Y);){if(N===0)break e;N--,K+=Z[I++]<<Y,Y+=8}if(le&&!(240&le)){for(De=Pe,Re=le,Ge=ke;le=(G=E.lencode[Ge+((K&(1<<De+Re)-1)>>De)])>>>16&255,ke=65535&G,!(De+(Pe=G>>>24)<=Y);){if(N===0)break e;N--,K+=Z[I++]<<Y,Y+=8}K>>>=De,Y-=De,E.back+=De}if(K>>>=Pe,Y-=Pe,E.back+=Pe,E.length=ke,le===0){E.mode=26;break}if(32&le){E.back=-1,E.mode=12;break}if(64&le){R.msg="invalid literal/length code",E.mode=30;break}E.extra=15&le,E.mode=22;case 22:if(E.extra){for(J=E.extra;Y<J;){if(N===0)break e;N--,K+=Z[I++]<<Y,Y+=8}E.length+=K&(1<<E.extra)-1,K>>>=E.extra,Y-=E.extra,E.back+=E.extra}E.was=E.length,E.mode=23;case 23:for(;le=(G=E.distcode[K&(1<<E.distbits)-1])>>>16&255,ke=65535&G,!((Pe=G>>>24)<=Y);){if(N===0)break e;N--,K+=Z[I++]<<Y,Y+=8}if(!(240&le)){for(De=Pe,Re=le,Ge=ke;le=(G=E.distcode[Ge+((K&(1<<De+Re)-1)>>De)])>>>16&255,ke=65535&G,!(De+(Pe=G>>>24)<=Y);){if(N===0)break e;N--,K+=Z[I++]<<Y,Y+=8}K>>>=De,Y-=De,E.back+=De}if(K>>>=Pe,Y-=Pe,E.back+=Pe,64&le){R.msg="invalid distance code",E.mode=30;break}E.offset=ke,E.extra=15&le,E.mode=24;case 24:if(E.extra){for(J=E.extra;Y<J;){if(N===0)break e;N--,K+=Z[I++]<<Y,Y+=8}E.offset+=K&(1<<E.extra)-1,K>>>=E.extra,Y-=E.extra,E.back+=E.extra}if(E.offset>E.dmax){R.msg="invalid distance too far back",E.mode=30;break}E.mode=25;case 25:if(H===0)break e;if(X=ne-H,E.offset>X){if((X=E.offset-X)>E.whave&&E.sane){R.msg="invalid distance too far back",E.mode=30;break}_e=X>E.wnext?(X-=E.wnext,E.wsize-X):E.wnext-X,X>E.length&&(X=E.length),Te=E.window}else Te=$,_e=z-E.offset,X=E.length;for(H<X&&(X=H),H-=X,E.length-=X;$[z++]=Te[_e++],--X;);E.length===0&&(E.mode=21);break;case 26:if(H===0)break e;$[z++]=E.length,H--,E.mode=21;break;case 27:if(E.wrap){for(;Y<32;){if(N===0)break e;N--,K|=Z[I++]<<Y,Y+=8}if(ne-=H,R.total_out+=ne,E.total+=ne,ne&&(R.adler=E.check=E.flags?a(E.check,$,ne,z-ne):o(E.check,$,ne,z-ne)),ne=H,(E.flags?K:x(K))!==E.check){R.msg="incorrect data check",E.mode=30;break}Y=K=0}E.mode=28;case 28:if(E.wrap&&E.flags){for(;Y<32;){if(N===0)break e;N--,K+=Z[I++]<<Y,Y+=8}if(K!==(4294967295&E.total)){R.msg="incorrect length check",E.mode=30;break}Y=K=0}E.mode=29;case 29:he=1;break e;case 30:he=-3;break e;case 31:return-4;case 32:default:return g}return R.next_out=z,R.avail_out=H,R.next_in=I,R.avail_in=N,E.hold=K,E.bits=Y,(E.wsize||ne!==R.avail_out&&E.mode<30&&(E.mode<27||B!==4))&&V(R,R.output,R.next_out,ne-R.avail_out)?(E.mode=31,-4):(ce-=R.avail_in,ne-=R.avail_out,R.total_in+=ce,R.total_out+=ne,E.total+=ne,E.wrap&&ne&&(R.adler=E.check=E.flags?a(E.check,$,ne,R.next_out-ne):o(E.check,$,ne,R.next_out-ne)),R.data_type=E.bits+(E.last?64:0)+(E.mode===12?128:0)+(E.mode===20||E.mode===15?256:0),(ce==0&&ne===0||B===4)&&he===m&&(he=-5),he)},i.inflateEnd=function(R){if(!R||!R.state)return g;var B=R.state;return B.window&&(B.window=null),R.state=null,m},i.inflateGetHeader=function(R,B){var E;return R&&R.state&&2&(E=R.state).wrap?((E.head=B).done=!1,m):g},i.inflateSetDictionary=function(R,B){var E,Z=B.length;return R&&R.state?(E=R.state).wrap!==0&&E.mode!==11?g:E.mode===11&&o(1,B,Z,0)!==E.check?-3:V(R,B,Z,Z)?(E.mode=31,-4):(E.havedict=1,m):g},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var s=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(h,p,m,g,y,_,b,x){var w,S,C,j,D,P,T,A,F,V=x.bits,R=0,B=0,E=0,Z=0,$=0,I=0,z=0,N=0,H=0,K=0,Y=null,ce=0,ne=new s.Buf16(16),X=new s.Buf16(16),_e=null,Te=0;for(R=0;R<=15;R++)ne[R]=0;for(B=0;B<g;B++)ne[p[m+B]]++;for($=V,Z=15;1<=Z&&ne[Z]===0;Z--);if(Z<$&&($=Z),Z===0)return y[_++]=20971520,y[_++]=20971520,x.bits=1,0;for(E=1;E<Z&&ne[E]===0;E++);for($<E&&($=E),R=N=1;R<=15;R++)if(N<<=1,(N-=ne[R])<0)return-1;if(0<N&&(h===0||Z!==1))return-1;for(X[1]=0,R=1;R<15;R++)X[R+1]=X[R]+ne[R];for(B=0;B<g;B++)p[m+B]!==0&&(b[X[p[m+B]]++]=B);if(P=h===0?(Y=_e=b,19):h===1?(Y=o,ce-=257,_e=a,Te-=257,256):(Y=c,_e=u,-1),R=E,D=_,z=B=K=0,C=-1,j=(H=1<<(I=$))-1,h===1&&852<H||h===2&&592<H)return 1;for(;;){for(T=R-z,F=b[B]<P?(A=0,b[B]):b[B]>P?(A=_e[Te+b[B]],Y[ce+b[B]]):(A=96,0),w=1<<R-z,E=S=1<<I;y[D+(K>>z)+(S-=w)]=T<<24|A<<16|F|0,S!==0;);for(w=1<<R-1;K&w;)w>>=1;if(w!==0?(K&=w-1,K+=w):K=0,B++,--ne[R]==0){if(R===Z)break;R=p[m+b[B]]}if($<R&&(K&j)!==C){for(z===0&&(z=$),D+=E,N=1<<(I=R-z);I+z<Z&&!((N-=ne[I+z])<=0);)I++,N<<=1;if(H+=1<<I,h===1&&852<H||h===2&&592<H)return 1;y[C=K&j]=$<<24|I<<16|D-_|0}}return K!==0&&(y[D+K]=R-z<<24|64<<16|0),x.bits=$,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var s=n("../utils/common"),o=0,a=1;function c(G){for(var re=G.length;0<=--re;)G[re]=0}var u=0,h=29,p=256,m=p+1+h,g=30,y=19,_=2*m+1,b=15,x=16,w=7,S=256,C=16,j=17,D=18,P=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],T=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V=new Array(2*(m+2));c(V);var R=new Array(2*g);c(R);var B=new Array(512);c(B);var E=new Array(256);c(E);var Z=new Array(h);c(Z);var $,I,z,N=new Array(g);function H(G,re,de,ge,oe){this.static_tree=G,this.extra_bits=re,this.extra_base=de,this.elems=ge,this.max_length=oe,this.has_stree=G&&G.length}function K(G,re){this.dyn_tree=G,this.max_code=0,this.stat_desc=re}function Y(G){return G<256?B[G]:B[256+(G>>>7)]}function ce(G,re){G.pending_buf[G.pending++]=255&re,G.pending_buf[G.pending++]=re>>>8&255}function ne(G,re,de){G.bi_valid>x-de?(G.bi_buf|=re<<G.bi_valid&65535,ce(G,G.bi_buf),G.bi_buf=re>>x-G.bi_valid,G.bi_valid+=de-x):(G.bi_buf|=re<<G.bi_valid&65535,G.bi_valid+=de)}function X(G,re,de){ne(G,de[2*re],de[2*re+1])}function _e(G,re){for(var de=0;de|=1&G,G>>>=1,de<<=1,0<--re;);return de>>>1}function Te(G,re,de){var ge,oe,ee=new Array(b+1),fe=0;for(ge=1;ge<=b;ge++)ee[ge]=fe=fe+de[ge-1]<<1;for(oe=0;oe<=re;oe++){var ye=G[2*oe+1];ye!==0&&(G[2*oe]=_e(ee[ye]++,ye))}}function Pe(G){var re;for(re=0;re<m;re++)G.dyn_ltree[2*re]=0;for(re=0;re<g;re++)G.dyn_dtree[2*re]=0;for(re=0;re<y;re++)G.bl_tree[2*re]=0;G.dyn_ltree[2*S]=1,G.opt_len=G.static_len=0,G.last_lit=G.matches=0}function le(G){8<G.bi_valid?ce(G,G.bi_buf):0<G.bi_valid&&(G.pending_buf[G.pending++]=G.bi_buf),G.bi_buf=0,G.bi_valid=0}function ke(G,re,de,ge){var oe=2*re,ee=2*de;return G[oe]<G[ee]||G[oe]===G[ee]&&ge[re]<=ge[de]}function De(G,re,de){for(var ge=G.heap[de],oe=de<<1;oe<=G.heap_len&&(oe<G.heap_len&&ke(re,G.heap[oe+1],G.heap[oe],G.depth)&&oe++,!ke(re,ge,G.heap[oe],G.depth));)G.heap[de]=G.heap[oe],de=oe,oe<<=1;G.heap[de]=ge}function Re(G,re,de){var ge,oe,ee,fe,ye=0;if(G.last_lit!==0)for(;ge=G.pending_buf[G.d_buf+2*ye]<<8|G.pending_buf[G.d_buf+2*ye+1],oe=G.pending_buf[G.l_buf+ye],ye++,ge===0?X(G,oe,re):(X(G,(ee=E[oe])+p+1,re),(fe=P[ee])!==0&&ne(G,oe-=Z[ee],fe),X(G,ee=Y(--ge),de),(fe=T[ee])!==0&&ne(G,ge-=N[ee],fe)),ye<G.last_lit;);X(G,S,re)}function Ge(G,re){var de,ge,oe,ee=re.dyn_tree,fe=re.stat_desc.static_tree,ye=re.stat_desc.has_stree,be=re.stat_desc.elems,Le=-1;for(G.heap_len=0,G.heap_max=_,de=0;de<be;de++)ee[2*de]!==0?(G.heap[++G.heap_len]=Le=de,G.depth[de]=0):ee[2*de+1]=0;for(;G.heap_len<2;)ee[2*(oe=G.heap[++G.heap_len]=Le<2?++Le:0)]=1,G.depth[oe]=0,G.opt_len--,ye&&(G.static_len-=fe[2*oe+1]);for(re.max_code=Le,de=G.heap_len>>1;1<=de;de--)De(G,ee,de);for(oe=be;de=G.heap[1],G.heap[1]=G.heap[G.heap_len--],De(G,ee,1),ge=G.heap[1],G.heap[--G.heap_max]=de,G.heap[--G.heap_max]=ge,ee[2*oe]=ee[2*de]+ee[2*ge],G.depth[oe]=(G.depth[de]>=G.depth[ge]?G.depth[de]:G.depth[ge])+1,ee[2*de+1]=ee[2*ge+1]=oe,G.heap[1]=oe++,De(G,ee,1),2<=G.heap_len;);G.heap[--G.heap_max]=G.heap[1],function(Ae,We){var Qe,Xe,gt,He,yt,zt,Lt=We.dyn_tree,sn=We.max_code,On=We.stat_desc.static_tree,dn=We.stat_desc.has_stree,Sn=We.stat_desc.extra_bits,Vn=We.stat_desc.extra_base,Ct=We.stat_desc.max_length,Ut=0;for(He=0;He<=b;He++)Ae.bl_count[He]=0;for(Lt[2*Ae.heap[Ae.heap_max]+1]=0,Qe=Ae.heap_max+1;Qe<_;Qe++)Ct<(He=Lt[2*Lt[2*(Xe=Ae.heap[Qe])+1]+1]+1)&&(He=Ct,Ut++),Lt[2*Xe+1]=He,sn<Xe||(Ae.bl_count[He]++,yt=0,Vn<=Xe&&(yt=Sn[Xe-Vn]),zt=Lt[2*Xe],Ae.opt_len+=zt*(He+yt),dn&&(Ae.static_len+=zt*(On[2*Xe+1]+yt)));if(Ut!==0){do{for(He=Ct-1;Ae.bl_count[He]===0;)He--;Ae.bl_count[He]--,Ae.bl_count[He+1]+=2,Ae.bl_count[Ct]--,Ut-=2}while(0<Ut);for(He=Ct;He!==0;He--)for(Xe=Ae.bl_count[He];Xe!==0;)sn<(gt=Ae.heap[--Qe])||(Lt[2*gt+1]!==He&&(Ae.opt_len+=(He-Lt[2*gt+1])*Lt[2*gt],Lt[2*gt+1]=He),Xe--)}}(G,re),Te(ee,Le,G.bl_count)}function M(G,re,de){var ge,oe,ee=-1,fe=re[1],ye=0,be=7,Le=4;for(fe===0&&(be=138,Le=3),re[2*(de+1)+1]=65535,ge=0;ge<=de;ge++)oe=fe,fe=re[2*(ge+1)+1],++ye<be&&oe===fe||(ye<Le?G.bl_tree[2*oe]+=ye:oe!==0?(oe!==ee&&G.bl_tree[2*oe]++,G.bl_tree[2*C]++):ye<=10?G.bl_tree[2*j]++:G.bl_tree[2*D]++,ee=oe,Le=(ye=0)===fe?(be=138,3):oe===fe?(be=6,3):(be=7,4))}function he(G,re,de){var ge,oe,ee=-1,fe=re[1],ye=0,be=7,Le=4;for(fe===0&&(be=138,Le=3),ge=0;ge<=de;ge++)if(oe=fe,fe=re[2*(ge+1)+1],!(++ye<be&&oe===fe)){if(ye<Le)for(;X(G,oe,G.bl_tree),--ye!=0;);else oe!==0?(oe!==ee&&(X(G,oe,G.bl_tree),ye--),X(G,C,G.bl_tree),ne(G,ye-3,2)):ye<=10?(X(G,j,G.bl_tree),ne(G,ye-3,3)):(X(G,D,G.bl_tree),ne(G,ye-11,7));ee=oe,Le=(ye=0)===fe?(be=138,3):oe===fe?(be=6,3):(be=7,4)}}c(N);var ae=!1;function J(G,re,de,ge){ne(G,(u<<1)+(ge?1:0),3),function(oe,ee,fe,ye){le(oe),ce(oe,fe),ce(oe,~fe),s.arraySet(oe.pending_buf,oe.window,ee,fe,oe.pending),oe.pending+=fe}(G,re,de)}i._tr_init=function(G){ae||(function(){var re,de,ge,oe,ee,fe=new Array(b+1);for(oe=ge=0;oe<h-1;oe++)for(Z[oe]=ge,re=0;re<1<<P[oe];re++)E[ge++]=oe;for(E[ge-1]=oe,oe=ee=0;oe<16;oe++)for(N[oe]=ee,re=0;re<1<<T[oe];re++)B[ee++]=oe;for(ee>>=7;oe<g;oe++)for(N[oe]=ee<<7,re=0;re<1<<T[oe]-7;re++)B[256+ee++]=oe;for(de=0;de<=b;de++)fe[de]=0;for(re=0;re<=143;)V[2*re+1]=8,re++,fe[8]++;for(;re<=255;)V[2*re+1]=9,re++,fe[9]++;for(;re<=279;)V[2*re+1]=7,re++,fe[7]++;for(;re<=287;)V[2*re+1]=8,re++,fe[8]++;for(Te(V,m+1,fe),re=0;re<g;re++)R[2*re+1]=5,R[2*re]=_e(re,5);$=new H(V,P,p+1,m,b),I=new H(R,T,0,g,b),z=new H(new Array(0),A,0,y,w)}(),ae=!0),G.l_desc=new K(G.dyn_ltree,$),G.d_desc=new K(G.dyn_dtree,I),G.bl_desc=new K(G.bl_tree,z),G.bi_buf=0,G.bi_valid=0,Pe(G)},i._tr_stored_block=J,i._tr_flush_block=function(G,re,de,ge){var oe,ee,fe=0;0<G.level?(G.strm.data_type===2&&(G.strm.data_type=function(ye){var be,Le=4093624447;for(be=0;be<=31;be++,Le>>>=1)if(1&Le&&ye.dyn_ltree[2*be]!==0)return o;if(ye.dyn_ltree[18]!==0||ye.dyn_ltree[20]!==0||ye.dyn_ltree[26]!==0)return a;for(be=32;be<p;be++)if(ye.dyn_ltree[2*be]!==0)return a;return o}(G)),Ge(G,G.l_desc),Ge(G,G.d_desc),fe=function(ye){var be;for(M(ye,ye.dyn_ltree,ye.l_desc.max_code),M(ye,ye.dyn_dtree,ye.d_desc.max_code),Ge(ye,ye.bl_desc),be=y-1;3<=be&&ye.bl_tree[2*F[be]+1]===0;be--);return ye.opt_len+=3*(be+1)+5+5+4,be}(G),oe=G.opt_len+3+7>>>3,(ee=G.static_len+3+7>>>3)<=oe&&(oe=ee)):oe=ee=de+5,de+4<=oe&&re!==-1?J(G,re,de,ge):G.strategy===4||ee===oe?(ne(G,2+(ge?1:0),3),Re(G,V,R)):(ne(G,4+(ge?1:0),3),function(ye,be,Le,Ae){var We;for(ne(ye,be-257,5),ne(ye,Le-1,5),ne(ye,Ae-4,4),We=0;We<Ae;We++)ne(ye,ye.bl_tree[2*F[We]+1],3);he(ye,ye.dyn_ltree,be-1),he(ye,ye.dyn_dtree,Le-1)}(G,G.l_desc.max_code+1,G.d_desc.max_code+1,fe+1),Re(G,G.dyn_ltree,G.dyn_dtree)),Pe(G),ge&&le(G)},i._tr_tally=function(G,re,de){return G.pending_buf[G.d_buf+2*G.last_lit]=re>>>8&255,G.pending_buf[G.d_buf+2*G.last_lit+1]=255&re,G.pending_buf[G.l_buf+G.last_lit]=255&de,G.last_lit++,re===0?G.dyn_ltree[2*de]++:(G.matches++,re--,G.dyn_ltree[2*(E[de]+p+1)]++,G.dyn_dtree[2*Y(re)]++),G.last_lit===G.lit_bufsize-1},i._tr_align=function(G){ne(G,2,3),X(G,S,V),function(re){re.bi_valid===16?(ce(re,re.bi_buf),re.bi_buf=0,re.bi_valid=0):8<=re.bi_valid&&(re.pending_buf[re.pending++]=255&re.bi_buf,re.bi_buf>>=8,re.bi_valid-=8)}(G)}},{"../utils/common":41}],53:[function(n,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,i){(function(s){(function(o,a){if(!o.setImmediate){var c,u,h,p,m=1,g={},y=!1,_=o.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(o);b=b&&b.setTimeout?b:o,c={}.toString.call(o.process)==="[object process]"?function(C){process.nextTick(function(){w(C)})}:function(){if(o.postMessage&&!o.importScripts){var C=!0,j=o.onmessage;return o.onmessage=function(){C=!1},o.postMessage("","*"),o.onmessage=j,C}}()?(p="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",S,!1):o.attachEvent("onmessage",S),function(C){o.postMessage(p+C,"*")}):o.MessageChannel?((h=new MessageChannel).port1.onmessage=function(C){w(C.data)},function(C){h.port2.postMessage(C)}):_&&"onreadystatechange"in _.createElement("script")?(u=_.documentElement,function(C){var j=_.createElement("script");j.onreadystatechange=function(){w(C),j.onreadystatechange=null,u.removeChild(j),j=null},u.appendChild(j)}):function(C){setTimeout(w,0,C)},b.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var j=new Array(arguments.length-1),D=0;D<j.length;D++)j[D]=arguments[D+1];var P={callback:C,args:j};return g[m]=P,c(m),m++},b.clearImmediate=x}function x(C){delete g[C]}function w(C){if(y)setTimeout(w,0,C);else{var j=g[C];if(j){y=!0;try{(function(D){var P=D.callback,T=D.args;switch(T.length){case 0:P();break;case 1:P(T[0]);break;case 2:P(T[0],T[1]);break;case 3:P(T[0],T[1],T[2]);break;default:P.apply(a,T)}})(j)}finally{x(C),y=!1}}}}function S(C){C.source===o&&typeof C.data=="string"&&C.data.indexOf(p)===0&&w(+C.data.slice(p.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Ha<"u"?Ha:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Ww);var b4=Ww.exports;const $w=em(b4);function w4(){const[t]=Hn(),[e,n]=q.useState([]),[r,i]=q.useState([]),[s,o]=q.useState(!0),[a,c]=q.useState(null),[u,h]=q.useState(!1),[p,m]=q.useState(t.get("archived")==="true"),[g,y]=q.useState(t.get("view")==="calendar"),[_,b]=q.useState("ALL"),[x,w]=q.useState(null),S=async()=>{try{console.log("Initializing authorization for Claims component..."),await qd(Ne),h(!0),console.log("Authorization initialized successfully")}catch(I){console.error("Authorization initialization failed:",I),c(I.message),o(!1)}},C=async()=>{if(!u){console.log("Authorization not ready, skipping load");return}try{o(!0),c(null);const I=nn();if(!I||!I.isInitialized)throw new Error("Authorization not properly initialized");const z=I.getCurrentUser();console.log(`Loading claims for ${z==null?void 0:z.role}: ${z==null?void 0:z.fullName}`);let N=Ne.from("claims").select("id,claim_number,customer_name,status,vin,vehicle_year,vehicle_make,vehicle_model,assigned_to,appointment_start,appointment_end,firm_name,notes,created_at,address_line1,city,state,postal_code,lat,lng,pay_amount,file_total,profiles:assigned_to(full_name)").order("created_at",{ascending:!1});N=I.scopedClaimsQuery(N),p?N=N.eq("status","CANCELED"):N=N.or("status.is.null,status.in.(SCHEDULED,IN_PROGRESS,COMPLETED)");const{data:H,error:K}=await N;if(K){console.error("Error loading claims:",K);const ce=I.handleAuthError(K);if(ce.shouldRedirect){c(`${ce.message} Redirecting to login...`),setTimeout(()=>{window.location.href="/CipherDispatch/"},2e3);return}throw new Error(ce.message)}console.log(`Loaded ${(H==null?void 0:H.length)||0} claims for ${z==null?void 0:z.role}`);const Y=H||[];i(Y),j(Y)}catch(I){console.error("Error in load function:",I),c(I.message)}finally{o(!1)}},j=I=>{let z=[...I];_!=="ALL"&&(_==="UNASSIGNED"?z=z.filter(N=>!N.assigned_to):z=z.filter(N=>N.status===_)),n(z)},D=async(I,z)=>{try{const{data:N,error:H}=await Ne.from("claim_photos").select("*").eq("claim_id",I).order("created_at",{ascending:!1});if(H){alert(`Error fetching photos: ${H.message}`);return}if(!N||N.length===0){alert("No photos to download for this claim");return}const K=new $w,Y=K.folder("photos");for(let _e=0;_e<N.length;_e++){const Te=N[_e],Pe=Ne.storage.from("claim-photos").getPublicUrl(Te.storage_path).data.publicUrl,ke=await(await fetch(Pe)).blob(),De=`photo-${_e+1}.jpg`;Y==null||Y.file(De,ke)}const ce=await K.generateAsync({type:"blob"}),ne=URL.createObjectURL(ce),X=document.createElement("a");X.href=ne,X.download=`claim_${z}_photos.zip`,document.body.appendChild(X),X.click(),document.body.removeChild(X),URL.revokeObjectURL(ne)}catch(N){alert(`Error creating zip file: ${N.message}`)}},P=(I,z)=>{w(z.id);const N={id:z.id,claimNumber:z.claim_number,firmName:z.firm_name||"",customerName:z.customer_name,addressLine1:z.address_line1||"",city:z.city||"",state:z.state||"",zip:z.postal_code||"",lat:z.lat||null,lng:z.lng||null,vin:z.vin||"",vehicleYear:z.vehicle_year||null,vehicleMake:z.vehicle_make||"",vehicleModel:z.vehicle_model||"",status:z.status||"",appointmentStart:z.appointment_start||null},H=JSON.stringify(N);I.dataTransfer.setData("application/json",H),I.dataTransfer.setData("text/plain",H),I.dataTransfer.effectAllowed="copy"},T=()=>{w(null)};if(q.useEffect(()=>{S()},[]),q.useEffect(()=>{if(u){C();const I=nn();if(I!=null&&I.isInitialized){const z=Ne.channel("claims-list").on("postgres_changes",{event:"*",schema:"public",table:"claims"},()=>{console.log("Real-time update received, reloading claims..."),C()}).subscribe();return()=>{Ne.removeChannel(z)}}}},[p,u]),q.useEffect(()=>{r.length>0&&j(r)},[_,r]),s)return f.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a202c 0%, #2d3748 100%)",padding:16,display:"flex",alignItems:"center",justifyContent:"center"},children:f.jsx("div",{style:{color:"#e2e8f0",fontSize:"18px"},children:"Loading claims..."})});if(a)return f.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a202c 0%, #2d3748 100%)",padding:16,display:"flex",alignItems:"center",justifyContent:"center"},children:f.jsxs("div",{style:{color:"#ef4444",fontSize:"18px",textAlign:"center",background:"#2d3748",padding:"24px",borderRadius:"8px",border:"2px solid #ef4444"},children:[f.jsx("h3",{children:"Unable to load claims"}),f.jsx("p",{children:a}),f.jsx("button",{onClick:()=>window.location.reload(),style:{background:"#ef4444",color:"white",border:"none",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",marginTop:"12px"},children:"Retry"})]})});const A=r.reduce((I,z)=>{const N=z.status||"UNASSIGNED";return I[N]=(I[N]||0)+1,I},{}),F=r.filter(I=>!I.assigned_to).length,R=(()=>{const I={};return e.forEach(z=>{const N=z.firm_name||"No Firm";I[N]||(I[N]=[]),I[N].push(z)}),I})(),B=I=>I.filter(z=>z.status!=="COMPLETED"&&z.status!=="CANCELED").length,E=nn(),Z=E==null?void 0:E.getCurrentUser(),$=(Z==null?void 0:Z.role)==="admin";return f.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a202c 0%, #2d3748 100%)",padding:16},children:[!p&&!g&&f.jsxs("div",{style:{display:"flex",gap:12,marginBottom:24,flexWrap:"wrap",justifyContent:"center"},children:[f.jsxs("button",{onClick:()=>b("ALL"),style:{padding:"12px 20px",background:_==="ALL"?"#667eea":"#374151",color:"white",border:_==="ALL"?"2px solid #818cf8":"2px solid transparent",borderRadius:8,fontWeight:"bold",cursor:"pointer",fontSize:"14px",display:"flex",flexDirection:"column",alignItems:"center",transition:"all 0.2s",minWidth:"120px"},children:[f.jsx("div",{style:{fontSize:"20px",marginBottom:4},children:r.length}),f.jsx("div",{style:{fontSize:"12px",opacity:.9},children:"All Active"})]}),f.jsxs("button",{onClick:()=>b("UNASSIGNED"),style:{padding:"12px 20px",background:_==="UNASSIGNED"?"#9E9E9E":"#374151",color:"white",border:_==="UNASSIGNED"?"2px solid #bdbdbd":"2px solid transparent",borderRadius:8,fontWeight:"bold",cursor:"pointer",fontSize:"14px",display:"flex",flexDirection:"column",alignItems:"center",transition:"all 0.2s",minWidth:"120px"},children:[f.jsx("div",{style:{fontSize:"20px",marginBottom:4},children:F}),f.jsx("div",{style:{fontSize:"12px",opacity:.9},children:"Unassigned"})]}),f.jsxs("button",{onClick:()=>b("SCHEDULED"),style:{padding:"12px 20px",background:_==="SCHEDULED"?"#2196F3":"#374151",color:"white",border:_==="SCHEDULED"?"2px solid #64b5f6":"2px solid transparent",borderRadius:8,fontWeight:"bold",cursor:"pointer",fontSize:"14px",display:"flex",flexDirection:"column",alignItems:"center",transition:"all 0.2s",minWidth:"120px"},children:[f.jsx("div",{style:{fontSize:"20px",marginBottom:4},children:A.SCHEDULED||0}),f.jsx("div",{style:{fontSize:"12px",opacity:.9},children:"Scheduled"})]}),f.jsxs("button",{onClick:()=>b("IN_PROGRESS"),style:{padding:"12px 20px",background:_==="IN_PROGRESS"?"#FF9800":"#374151",color:"white",border:_==="IN_PROGRESS"?"2px solid #ffb74d":"2px solid transparent",borderRadius:8,fontWeight:"bold",cursor:"pointer",fontSize:"14px",display:"flex",flexDirection:"column",alignItems:"center",transition:"all 0.2s",minWidth:"120px"},children:[f.jsx("div",{style:{fontSize:"20px",marginBottom:4},children:A.IN_PROGRESS||0}),f.jsx("div",{style:{fontSize:"12px",opacity:.9},children:"In Progress"})]}),f.jsxs("button",{onClick:()=>b("COMPLETED"),style:{padding:"12px 20px",background:_==="COMPLETED"?"#4CAF50":"#374151",color:"white",border:_==="COMPLETED"?"2px solid #81c784":"2px solid transparent",borderRadius:8,fontWeight:"bold",cursor:"pointer",fontSize:"14px",display:"flex",flexDirection:"column",alignItems:"center",transition:"all 0.2s",minWidth:"120px"},children:[f.jsx("div",{style:{fontSize:"20px",marginBottom:4},children:A.COMPLETED||0}),f.jsx("div",{style:{fontSize:"12px",opacity:.9},children:"Completed"})]}),f.jsxs("button",{onClick:()=>b("CANCELED"),style:{padding:"12px 20px",background:_==="CANCELED"?"#ef4444":"#374151",color:"white",border:_==="CANCELED"?"2px solid #f87171":"2px solid transparent",borderRadius:8,fontWeight:"bold",cursor:"pointer",fontSize:"14px",display:"flex",flexDirection:"column",alignItems:"center",transition:"all 0.2s",minWidth:"120px"},children:[f.jsx("div",{style:{fontSize:"20px",marginBottom:4},children:A.CANCELED||0}),f.jsx("div",{style:{fontSize:"12px",opacity:.9},children:"Canceled"})]})]}),f.jsxs("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",marginBottom:24,gap:16},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,flexWrap:"wrap"},children:[f.jsx(Zt,{to:"/",style:{padding:"8px 16px",background:"#4a5568",color:"white",textDecoration:"none",borderRadius:4,fontWeight:"bold"},children:" Home"}),f.jsx("h3",{style:{margin:0,color:"#e2e8f0",fontSize:"20px"},children:g?"Monthly Scheduling Calendar":p?"Archived Claims":"Active Claims"})]}),f.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[f.jsx("button",{onClick:()=>{y(!g),p&&m(!1),b("ALL")},style:{padding:"8px 16px",background:g?"#667eea":"#4a5568",color:"white",border:"none",borderRadius:4,fontWeight:"bold",cursor:"pointer"},children:g?" List View":" Calendar View"}),f.jsx("button",{onClick:()=>{m(!p),g&&y(!1),b("ALL")},style:{padding:"8px 16px",background:p?"#4a5568":"#f59e0b",color:"white",border:"none",borderRadius:4,fontWeight:"bold",cursor:"pointer"},children:p?" View Active Claims":" View Archived"}),p&&f.jsx("button",{onClick:()=>m4(e),style:{padding:"8px 16px",background:"#10b981",color:"white",border:"none",borderRadius:4,fontWeight:"bold",cursor:"pointer"},children:" Download CSV"}),f.jsx(Zt,{to:"/admin/claims/new",style:{padding:"8px 16px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",textDecoration:"none",borderRadius:4,fontWeight:"bold"},children:"+ New Claim"})]})]}),$&&!p&&f.jsx("div",{style:{marginBottom:24},children:f.jsx(x4,{claims:r})}),g&&!p?f.jsx(Uw,{claims:e,onClaimUpdate:C}):e.length===0?f.jsx("div",{style:{textAlign:"center",padding:48,color:"#a0aec0"},children:"No claims found matching your filters."}):f.jsx("div",{children:Object.entries(R).map(([I,z])=>{const N=B(z);return f.jsxs("div",{style:{marginBottom:32},children:[f.jsxs("div",{style:{fontSize:"18px",fontWeight:"bold",color:"#e2e8f0",marginBottom:16,paddingBottom:8,borderBottom:`3px solid ${Bi(I)}`,display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[f.jsx("span",{style:{display:"inline-block",width:12,height:12,borderRadius:"50%",background:Bi(I)}}),f.jsx("span",{children:I})]}),N>0&&f.jsxs("span",{style:{fontSize:"14px",opacity:.7,fontWeight:"normal",background:"#374151",padding:"4px 12px",borderRadius:12},children:[N," pending"]}),f.jsxs("span",{style:{fontSize:"14px",opacity:.7,fontWeight:"normal"},children:["(",z.length," total)"]})]}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:16},children:z.map(H=>{var K;return f.jsxs(Zt,{to:`/claim/${H.id}`,draggable:!0,onDragStart:Y=>P(Y,H),onDragEnd:T,style:{border:"1px solid #4a5568",borderLeft:`4px solid ${Bi(H.firm_name)}`,borderRadius:8,padding:16,background:"#2d3748",boxShadow:"0 2px 4px rgba(0,0,0,0.5)",textDecoration:"none",color:"#e2e8f0",transition:"transform 0.2s, box-shadow 0.2s, opacity 0.2s",cursor:x===H.id?"grabbing":"pointer",opacity:x===H.id?.5:1},onMouseOver:Y=>{x!==H.id&&(Y.currentTarget.style.transform="translateY(-4px)",Y.currentTarget.style.boxShadow="0 6px 12px rgba(0,0,0,0.7)")},onMouseOut:Y=>{x!==H.id&&(Y.currentTarget.style.transform="translateY(0)",Y.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.5)")},children:[f.jsxs("div",{style:{marginBottom:12},children:[f.jsxs("div",{style:{fontSize:20,fontWeight:"bold",marginBottom:8,color:"#e2e8f0"},children:["#",H.claim_number]}),f.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[f.jsx("div",{style:{display:"inline-block",padding:"4px 12px",borderRadius:4,fontSize:11,fontWeight:"bold",background:H.status==="COMPLETED"?"#4CAF50":H.status==="IN_PROGRESS"?"#FF9800":H.status==="SCHEDULED"?"#2196F3":H.status==="CANCELED"?"#ef4444":"#9E9E9E",color:"white"},children:H.status}),H.firm_name&&f.jsx("div",{style:{display:"inline-block",padding:"4px 12px",borderRadius:4,fontSize:11,fontWeight:"bold",background:Bi(H.firm_name),color:"white"},children:H.firm_name}),H.notes&&f.jsx("div",{style:{display:"inline-block",padding:"4px 8px",borderRadius:4,fontSize:11,fontWeight:"bold",background:"rgba(102, 126, 234, 0.2)",color:"#667eea",border:"1px solid #667eea"},title:H.notes.substring(0,100)+(H.notes.length>100?"...":""),children:" Note"})]})]}),f.jsx("div",{style:{fontSize:16,marginBottom:12,paddingBottom:12,borderBottom:"1px solid #4a5568"},children:f.jsxs("div",{style:{color:"#e2e8f0",marginBottom:4},children:[f.jsx("strong",{children:"Customer:"})," ",H.customer_name]})}),f.jsxs("div",{style:{fontSize:15,marginBottom:12},children:[f.jsx("div",{style:{color:"#e2e8f0",fontWeight:"bold",marginBottom:6},children:" Appointment"}),H.appointment_start?f.jsxs("div",{style:{color:"#cbd5e0",fontSize:14},children:[f.jsx("strong",{children:"Start:"})," ",new Date(H.appointment_start).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})]}):f.jsx("div",{style:{color:"#718096",fontSize:12,fontStyle:"italic"},children:"No appointment scheduled"})]}),f.jsxs("div",{style:{fontSize:13,marginBottom:12},children:[f.jsx("div",{style:{color:"#e2e8f0",fontWeight:"bold",marginBottom:6},children:" Vehicle Info"}),H.vin&&f.jsxs("div",{style:{color:"#a0aec0",fontSize:12,marginBottom:2},children:[f.jsx("strong",{children:"VIN:"})," ",H.vin.substring(0,10),"..."]}),H.vehicle_year||H.vehicle_make||H.vehicle_model?f.jsxs("div",{style:{color:"#a0aec0",fontSize:12},children:[H.vehicle_year&&`${H.vehicle_year} `,H.vehicle_make&&`${H.vehicle_make} `,H.vehicle_model&&H.vehicle_model]}):f.jsx("div",{style:{color:"#718096",fontSize:12,fontStyle:"italic"},children:"No vehicle info"})]}),f.jsxs("div",{style:{fontSize:15,paddingTop:12,borderTop:"1px solid #4a5568"},children:[f.jsxs("div",{style:{color:"#e2e8f0",marginBottom:$?12:0},children:[f.jsx("strong",{children:" Assigned:"})," ",((K=H.profiles)==null?void 0:K.full_name)||(H.assigned_to?"Unknown User":"Unassigned")]}),$&&f.jsx("button",{onClick:Y=>{Y.preventDefault(),Y.stopPropagation(),D(H.id,H.claim_number)},style:{width:"100%",padding:"10px 16px",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"white",border:"none",borderRadius:6,fontWeight:"600",fontSize:14,cursor:"pointer",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},onMouseEnter:Y=>{Y.currentTarget.style.background="linear-gradient(135deg, #d97706 0%, #b45309 100%)",Y.currentTarget.style.transform="translateY(-1px)",Y.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)"},onMouseLeave:Y=>{Y.currentTarget.style.background="linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",Y.currentTarget.style.transform="translateY(0)",Y.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)"},children:" Download All Photos (ZIP)"})]})]},H.id)})})]},I)})})]})}function S4(){const[t,e]=q.useState([]),[n,r]=q.useState(!0),[i,s]=q.useState(null),[o,a]=q.useState(!1),[c,u]=q.useState(!1),[h,p]=q.useState(null),[m,g]=q.useState(""),[y,_]=q.useState("#9CA3AF"),[b,x]=q.useState("weekly_thu_fri_thu"),[w,S]=q.useState(""),[C,j]=q.useState(!0),D=async()=>{try{console.log("Initializing authorization for Vendors component..."),await qd(Ne),a(!0),console.log("Authorization initialized successfully")}catch(B){console.error("Authorization initialization failed:",B),s(B.message),r(!1)}},P=async()=>{if(!o){console.log("Authorization not ready, skipping load");return}try{r(!0),s(null);const B=nn();if(!B||!B.isInitialized)throw new Error("Authorization not properly initialized");const E=B.getCurrentUser();console.log(`Loading vendors for ${E==null?void 0:E.role}: ${E==null?void 0:E.fullName}`);const{data:Z,error:$}=await Ne.from("vendors").select("*").order("name",{ascending:!0});if($)throw console.error("Error loading vendors:",$),new Error($.message);console.log(`Loaded ${(Z==null?void 0:Z.length)||0} vendors`),e(Z||[])}catch(B){console.error("Error in loadVendors function:",B),s(B.message)}finally{r(!1)}};q.useEffect(()=>{D()},[]),q.useEffect(()=>{o&&P()},[o]);const T=()=>{u(!0),p(null),g(""),_("#9CA3AF"),x("weekly_thu_fri_thu"),S(""),j(!0)},A=B=>{u(!0),p(B),g(B.name),_(B.color),x(B.pay_cycle_type||"weekly_thu_fri_thu"),S(B.reference_pay_date||""),j(B.active!==!1)},F=()=>{u(!1),p(null),g(""),_("#9CA3AF"),x("weekly_thu_fri_thu"),S(""),j(!0)},V=async()=>{if(!m.trim()){alert("Vendor name is required");return}if(b.startsWith("biweekly")&&!w){alert("Reference pay date is required for bi-weekly pay cycles");return}try{const B={name:m.trim(),color:y,pay_cycle_type:b,reference_pay_date:w||null,active:C};if(h){const{error:E}=await Ne.from("vendors").update(B).eq("id",h.id);if(E)throw E}else{const{error:E}=await Ne.from("vendors").insert([B]);if(E)throw E}F(),P()}catch(B){alert(`Error saving vendor: ${B.message}`)}},R=async B=>{if(confirm("Are you sure you want to delete this vendor?"))try{const{error:E}=await Ne.from("vendors").delete().eq("id",B);if(E)throw E;P()}catch(E){alert(`Error deleting vendor: ${E.message}`)}};return n?f.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a202c 0%, #2d3748 100%)",padding:16,display:"flex",alignItems:"center",justifyContent:"center"},children:f.jsx("div",{style:{color:"#e2e8f0",fontSize:"18px"},children:"Loading vendors..."})}):i?f.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a202c 0%, #2d3748 100%)",padding:16,display:"flex",alignItems:"center",justifyContent:"center"},children:f.jsxs("div",{style:{color:"#ef4444",fontSize:"18px",textAlign:"center",background:"#2d3748",padding:"24px",borderRadius:"8px",border:"2px solid #ef4444"},children:[f.jsx("h3",{children:"Unable to load vendors"}),f.jsx("p",{children:i}),f.jsx("button",{onClick:()=>window.location.reload(),style:{background:"#ef4444",color:"white",border:"none",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",marginTop:"12px"},children:"Retry"})]})}):f.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a202c 0%, #2d3748 100%)",padding:16},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[f.jsx(Zt,{to:"/",style:{padding:"8px 16px",background:"#4a5568",color:"white",textDecoration:"none",borderRadius:4,fontWeight:"bold",fontSize:"15px"},children:" Home"}),f.jsx("h3",{style:{margin:0,color:"#e2e8f0",fontSize:"22px",fontWeight:"bold"},children:"Manage Vendors"})]}),f.jsx("button",{onClick:T,style:{padding:"10px 20px",background:"#10b981",color:"white",border:"none",borderRadius:6,fontWeight:"bold",cursor:"pointer",fontSize:"15px"},children:"+ Add Vendor"})]}),c&&f.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:F,children:f.jsxs("div",{style:{background:"#2d3748",border:"1px solid #4a5568",borderRadius:12,padding:32,maxWidth:500,width:"90%"},onClick:B=>B.stopPropagation(),children:[f.jsx("h3",{style:{margin:"0 0 24px 0",color:"#e2e8f0"},children:h?"Edit Vendor":"Add New Vendor"}),f.jsxs("div",{style:{marginBottom:20},children:[f.jsx("label",{style:{display:"block",marginBottom:8,color:"#e2e8f0",fontWeight:"bold"},children:"Vendor Name"}),f.jsx("input",{type:"text",value:m,onChange:B=>g(B.target.value),placeholder:"Enter vendor name",style:{width:"100%",padding:"10px",background:"#1a202c",border:"1px solid #4a5568",borderRadius:6,color:"#e2e8f0",fontSize:"15px"}})]}),f.jsxs("div",{style:{marginBottom:20},children:[f.jsx("label",{style:{display:"block",marginBottom:8,color:"#e2e8f0",fontWeight:"bold"},children:"Color"}),f.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[f.jsx("input",{type:"color",value:y,onChange:B=>_(B.target.value),style:{width:60,height:40,border:"1px solid #4a5568",borderRadius:6,cursor:"pointer"}}),f.jsx("input",{type:"text",value:y,onChange:B=>_(B.target.value),placeholder:"#9CA3AF",style:{flex:1,padding:"10px",background:"#1a202c",border:"1px solid #4a5568",borderRadius:6,color:"#e2e8f0",fontSize:"15px"}})]})]}),f.jsxs("div",{style:{marginBottom:20},children:[f.jsx("label",{style:{display:"block",marginBottom:8,color:"#e2e8f0",fontWeight:"bold"},children:"Pay Cycle Type"}),f.jsxs("select",{value:b,onChange:B=>x(B.target.value),style:{width:"100%",padding:"10px",background:"#1a202c",border:"1px solid #4a5568",borderRadius:6,color:"#e2e8f0",fontSize:"15px"},children:[f.jsx("option",{value:"weekly_thu_fri_thu",children:"Weekly Thu (FriThu work, paid Thu)"}),f.jsx("option",{value:"biweekly_thu_fri_thu",children:"Bi-weekly Wed (2-week period, paid Wed)"}),f.jsx("option",{value:"biweekly_fri_sat_fri",children:"Bi-weekly Thu (2-week period, paid Thu)"}),f.jsx("option",{value:"monthly_15th_prev_month",children:"Monthly 15th (previous month work)"}),f.jsx("option",{value:"semimonthly_15th_end",children:"Semi-monthly: 15th & End-of-Month"}),f.jsx("option",{value:"monthly_last_same_month",children:"Monthly EOM (same month work)"})]})]}),b.startsWith("biweekly")&&f.jsxs("div",{style:{marginBottom:20},children:[f.jsx("label",{style:{display:"block",marginBottom:8,color:"#e2e8f0",fontWeight:"bold"},children:"Reference Pay Date (for bi-weekly calculation)"}),f.jsx("input",{type:"date",value:w,onChange:B=>S(B.target.value),style:{width:"100%",padding:"10px",background:"#1a202c",border:"1px solid #4a5568",borderRadius:6,color:"#e2e8f0",fontSize:"15px"}}),f.jsx("div",{style:{color:"#a0aec0",fontSize:"13px",marginTop:4},children:"Enter a known pay date to calculate bi-weekly schedule"})]}),f.jsx("div",{style:{marginBottom:24},children:f.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,color:"#e2e8f0",fontWeight:"bold",cursor:"pointer"},children:[f.jsx("input",{type:"checkbox",checked:C,onChange:B=>j(B.target.checked),style:{width:20,height:20,cursor:"pointer"}}),"Active Vendor"]})}),f.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"flex-end"},children:[f.jsx("button",{onClick:F,style:{padding:"10px 20px",background:"#4a5568",color:"white",border:"none",borderRadius:6,fontWeight:"bold",cursor:"pointer"},children:"Cancel"}),f.jsx("button",{onClick:V,style:{padding:"10px 20px",background:"#10b981",color:"white",border:"none",borderRadius:6,fontWeight:"bold",cursor:"pointer"},children:"Save"})]})]})}),f.jsx("div",{style:{background:"#2d3748",border:"1px solid #4a5568",borderRadius:12,padding:24},children:t.length===0?f.jsx("div",{style:{textAlign:"center",padding:48,color:"#a0aec0"},children:'No vendors found. Click "Add Vendor" to create one.'}):f.jsx("div",{style:{display:"grid",gap:12},children:t.map(B=>f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"#1a202c",border:"1px solid #4a5568",borderRadius:8,padding:16},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[f.jsx("div",{style:{width:40,height:40,background:B.color,borderRadius:6,border:"1px solid #4a5568"}}),f.jsxs("div",{children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[f.jsx("div",{style:{color:"#e2e8f0",fontSize:"16px",fontWeight:"bold"},children:B.name}),B.active===!1&&f.jsx("span",{style:{color:"#ef4444",fontSize:"12px",background:"#7f1d1d",padding:"2px 8px",borderRadius:4},children:"Inactive"})]}),f.jsx("div",{style:{color:"#a0aec0",fontSize:"14px"},children:B.pay_cycle_type?B.pay_cycle_type.replace(/_/g," ").replace(/\b\w/g,E=>E.toUpperCase()):"No pay cycle set"})]})]}),f.jsxs("div",{style:{display:"flex",gap:8},children:[f.jsx("button",{onClick:()=>A(B),style:{padding:"8px 16px",background:"#667eea",color:"white",border:"none",borderRadius:6,fontWeight:"bold",cursor:"pointer",fontSize:"14px"},children:"Edit"}),f.jsx("button",{onClick:()=>R(B.id),style:{padding:"8px 16px",background:"#ef4444",color:"white",border:"none",borderRadius:6,fontWeight:"bold",cursor:"pointer",fontSize:"14px"},children:"Delete"})]})]},B.id))})})]})}const Hw={Sedgwick:{baseFee:200,perMileRate:.75,notes:"Pays weekly on Wednesday for Fri-Thu work"},Doan:{baseFee:180,perMileRate:.7,notes:"Pays weekly on Thursday"},Legacy:{baseFee:190,perMileRate:.72,notes:"Pays bi-weekly on Wednesday"},ClaimSolution:{baseFee:195,perMileRate:.73,notes:"Pays bi-weekly on Thursday"},"Complete Claims":{baseFee:185,perMileRate:.71,notes:"Pays bi-weekly on Wednesday"},AMA:{baseFee:175,perMileRate:.68,notes:"Pays bi-weekly"},"A-TEAM":{baseFee:180,perMileRate:.7,notes:"Pays bi-weekly"},ACD:{baseFee:200,perMileRate:.75,notes:"Pays semi-monthly on 15th and EOM"},HEA:{baseFee:210,perMileRate:.78,notes:"Pays monthly on 15th for previous month"},IANET:{baseFee:195,perMileRate:.73,notes:"Pays monthly at end of month"},Frontline:{baseFee:185,perMileRate:.71,notes:"Pays monthly"},SCA:{baseFee:170,perMileRate:.65,notes:"Irregular payer - low volume"}};function dg(t){if(!t)return"";const e=t.toUpperCase().trim();return e.includes("G T APPRAISALS")||e==="LEGACY"?"Legacy":e.includes("SL APPRAISAL")||e==="DOAN"?"Doan":e.includes("AUTOCLAIMSDI")||e.includes("AUTOCLAIMS")?"ACD":e.includes("HEAVY EQUIPMENT")||e==="HEA"?"HEA":e==="CS"||e==="CCS"||e.includes("CLAIMSOLUTION")||e.includes("CLAIM SOLUTION")?"ClaimSolution":e.includes("AMA")?"AMA":e.includes("A TEAM")||e.includes("A-TEAM")||e.includes("ATEAM")?"A-TEAM":e.includes("IANET")?"IANET":e.includes("SEDGWK")||e==="SEDGWICK"?"Sedgwick":e.includes("COMPLETE CLAIMS")?"Complete Claims":e.includes("SCA")?"SCA":e.includes("FRONTLINE")?"Frontline":t}function dd(t,e){if(e&&e>0)return e;const n=dg(t),r=Hw[n];return(r==null?void 0:r.baseFee)||0}function k4(t){const e=dg(t);return e in Hw&&e!=="SCA"}function vi(t){return dg(t)||"Unknown"}function dt(t,e){const n=new Date(t);return n.setDate(n.getDate()+e),n}function Na(t,e){const r=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),i=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());return Math.floor((i-r)/864e5)}function xs(t){const e=t.getDay();return e===0?dt(t,1):e===6?dt(t,2):t}function E4(t){const e=t.getDay(),n=e===0?-6:1-e;return dt(t,n)}function Up(t,e){const n=vi(t),r=e.getDay();switch(n){case"Sedgwick":{const i=(3-r+7)%7||7,s=dt(e,i);return{periodStart:dt(s,-5),periodEnd:dt(s,-1),payoutDate:s}}case"Legacy":{const i=new Date("2024-12-18"),s=(3-r+7)%7||7;let o=dt(e,s);const a=Na(i,o);return Math.floor(a/7)%2!==0&&(o=dt(o,7)),{periodStart:dt(o,-13),periodEnd:dt(o,-1),payoutDate:o}}case"ClaimSolution":{const i=new Date("2024-12-12"),s=(r-4+7)%7,o=dt(e,-s),a=Na(i,o),c=Math.floor(a/7);let u;c%2===0?u=o:u=dt(o,-7);const h=dt(u,13),p=dt(u,21);return{periodStart:u,periodEnd:h,payoutDate:p}}case"Complete Claims":{const i=new Date("2024-12-04"),s=(3-r+7)%7||7;let o=dt(e,s);const a=Na(i,o);return Math.floor(a/7)%2!==0&&(o=dt(o,7)),{periodStart:dt(o,-13),periodEnd:dt(o,-1),payoutDate:o}}case"Doan":{const i=(4-r+7)%7||7,s=dt(e,i);return{periodStart:dt(s,-6),periodEnd:s,payoutDate:s}}case"ACD":{const i=e.getMonth(),s=e.getFullYear();if(e.getDate()<=15){const a=new Date(s,i,15);return{periodStart:new Date(s,i,1,0,0,0),periodEnd:new Date(s,i,15,23,59,59),payoutDate:xs(a)}}else{const a=new Date(s,i+1,0).getDate(),c=new Date(s,i,a);return{periodStart:new Date(s,i,16,0,0,0),periodEnd:new Date(s,i,a,23,59,59),payoutDate:xs(c)}}}case"HEA":{const i=e.getMonth(),s=e.getFullYear();if(e.getDate()<15){const a=new Date(s,i,15);return{periodStart:new Date(s,i-1,1,0,0,0),periodEnd:new Date(s,i,0,23,59,59),payoutDate:xs(a)}}else{const a=new Date(s,i+1,15);return{periodStart:new Date(s,i,1,0,0,0),periodEnd:new Date(s,i+1,0,23,59,59),payoutDate:xs(a)}}}case"IANET":{const i=e.getMonth(),s=e.getFullYear(),o=new Date(s,i+1,0).getDate(),a=new Date(s,i,o);return{periodStart:new Date(s,i,1,0,0,0),periodEnd:new Date(s,i,o,23,59,59),payoutDate:xs(a)}}case"AMA":{const i=new Date("2024-12-04"),s=(3-r+7)%7||7;let o=dt(e,s);const a=Na(i,o);return Math.floor(a/7)%2!==0&&(o=dt(o,7)),{periodStart:dt(o,-13),periodEnd:dt(o,-1),payoutDate:o}}case"A-TEAM":{const i=new Date("2024-12-19"),s=(4-r+7)%7||7;let o=dt(e,s);const a=Na(i,o);return Math.floor(a/7)%2!==0&&(o=dt(o,7)),{periodStart:dt(o,-13),periodEnd:o,payoutDate:o}}case"Frontline":{const i=e.getMonth(),s=e.getFullYear(),o=new Date(s,i+1,0).getDate(),a=new Date(s,i,o);return{periodStart:new Date(s,i,1,0,0,0),periodEnd:new Date(s,i,o,23,59,59),payoutDate:xs(a)}}case"SCA":{const i=e.getMonth(),s=e.getFullYear(),o=new Date(s,i+1,0).getDate(),a=new Date(s,i,o);return{periodStart:new Date(s,i,1,0,0,0),periodEnd:new Date(s,i,o,23,59,59),payoutDate:xs(a)}}default:throw new Error(`Unknown or excluded firm: ${n}`)}}function hg(t,e=new Date){const n=new Map;for(const r of t){const i=vi(r.firm_name);if(!k4(r.firm_name))continue;let s=null,o=0;if(r.status==="COMPLETED"&&r.completion_date?(s=new Date(r.completion_date),o=r.file_total||r.pay_amount||0):r.appointment_start&&(s=new Date(r.appointment_start),o=r.pay_amount||dd(r.firm_name)||0),!(!s||o<=0))try{const a=Up(i,s);if(s>=a.periodStart&&s<=a.periodEnd){const c=a.payoutDate.toISOString().split("T")[0],u=`${i}|${c}`;n.has(u)||n.set(u,{payoutDate:a.payoutDate,firm:i,totalExpected:0,claimIds:[],claimCount:0,periodStart:a.periodStart,periodEnd:a.periodEnd});const h=n.get(u);h.totalExpected+=o,h.claimIds.push(r.id),h.claimCount++}}catch(a){console.warn(`Could not process claim ${r.id} for firm ${i}:`,a)}}return Array.from(n.values()).sort((r,i)=>r.payoutDate.getTime()-i.payoutDate.getTime())}function C4(t){const e=new Map;for(const n of t){const r=E4(n.payoutDate),i=r.toISOString().split("T")[0];e.has(i)||e.set(i,{weekStart:r,weekEnd:dt(r,6),totalAmount:0,payouts:[]});const s=e.get(i);s.totalAmount+=n.totalExpected,s.payouts.push(n)}return Array.from(e.values()).sort((n,r)=>n.weekStart.getTime()-r.weekStart.getTime())}function T4(t){const e=new Map,n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(const r of t){const i=r.payoutDate.getFullYear(),s=r.payoutDate.getMonth(),o=`${i}-${s}`;e.has(o)||e.set(o,{year:i,month:s,monthName:n[s],totalAmount:0,byFirm:{}});const a=e.get(o);a.totalAmount+=r.totalExpected,a.byFirm[r.firm]=(a.byFirm[r.firm]||0)+r.totalExpected}return Array.from(e.values()).sort((r,i)=>r.year*12+r.month-(i.year*12+i.month))}function j4(t,e=30){const n=new Date;n.setHours(0,0,0,0);const r=dt(n,e);return t.filter(i=>i.payoutDate>=n&&i.payoutDate<=r)}function Vw(t,e,n){return t>=e&&t<=n}function P4(t,e,n){return t.filter(r=>r.payoutDate.getFullYear()===e&&r.payoutDate.getMonth()===n)}function A4(t){const e=new Date;e.setHours(0,0,0,0);const n=new Date(e);return n.setDate(e.getDate()+7),n.setHours(23,59,59,999),t.filter(r=>Vw(r.payoutDate,e,n))}function O4(t){const e=new Date;e.setDate(e.getDate()+7),e.setHours(0,0,0,0);const n=new Date(e);return n.setDate(e.getDate()+7),n.setHours(23,59,59,999),t.filter(r=>Vw(r.payoutDate,e,n))}function D4(t){const e=new Date,n=e.getMonth(),r=e.getFullYear();return P4(t,r,n)}function hf(t){return t.reduce((e,n)=>e+n.totalExpected,0)}function R4({payouts:t}){const e=A4(t),n=O4(t),r=D4(t),i=hf(e),s=hf(n),o=hf(r);return f.jsxs("div",{className:"payout-dashboard__summary-grid",children:[f.jsxs("div",{className:"payout-dashboard__summary-card payout-dashboard__summary-card--this-week",children:[f.jsx("div",{className:"payout-dashboard__summary-label",children:"Payouts Occurring This Week"}),f.jsxs("div",{className:"payout-dashboard__summary-amount payout-dashboard__summary-amount--this-week",children:["$",i.toFixed(2)]}),f.jsxs("div",{className:"payout-dashboard__summary-count",children:[e.length," payout",e.length!==1?"s":""]})]}),f.jsxs("div",{className:"payout-dashboard__summary-card payout-dashboard__summary-card--next-week",children:[f.jsx("div",{className:"payout-dashboard__summary-label",children:"Payouts Occurring Next Week"}),f.jsxs("div",{className:"payout-dashboard__summary-amount payout-dashboard__summary-amount--next-week",children:["$",s.toFixed(2)]}),f.jsxs("div",{className:"payout-dashboard__summary-count",children:[n.length," payout",n.length!==1?"s":""]})]}),f.jsxs("div",{className:"payout-dashboard__summary-card payout-dashboard__summary-card--this-month",children:[f.jsx("div",{className:"payout-dashboard__summary-label",children:"Payouts Occurring This Month (work may be from prior periods)"}),f.jsxs("div",{className:"payout-dashboard__summary-amount payout-dashboard__summary-amount--this-month",children:["$",o.toFixed(2)]}),f.jsxs("div",{className:"payout-dashboard__summary-count",children:[r.length," payout",r.length!==1?"s":""]})]})]})}function M4({payouts:t,onPayoutClick:e}){return t.length===0?f.jsx("div",{className:"payout-dashboard__empty-state",children:"No upcoming payouts in the next 30 days"}):f.jsx(f.Fragment,{children:t.map((n,r)=>f.jsxs("div",{className:"payout-card",onClick:()=>e(n),children:[f.jsxs("div",{children:[f.jsx("div",{className:"payout-card__field-label",children:"Firm"}),f.jsx("div",{className:"payout-card__firm-name",children:n.firm})]}),f.jsxs("div",{children:[f.jsx("div",{className:"payout-card__field-label",children:"Work Period"}),f.jsxs("div",{className:"payout-card__period",children:[n.periodStart.toLocaleDateString()," - ",n.periodEnd.toLocaleDateString()]})]}),f.jsxs("div",{children:[f.jsx("div",{className:"payout-card__field-label",children:"Payout Date"}),f.jsx("div",{className:"payout-card__date",children:n.payoutDate.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})]}),f.jsxs("div",{className:"payout-card__amount-section",children:[f.jsxs("div",{className:"payout-card__claim-count",children:[n.claimCount," claim",n.claimCount!==1?"s":""," "]}),f.jsxs("div",{className:"payout-card__amount",children:["$",n.totalExpected.toFixed(2)]})]})]},r))})}function L4({weeklyView:t,maxWeeks:e=12}){const n=t.slice(0,e);return f.jsx(f.Fragment,{children:n.map((r,i)=>f.jsxs("div",{className:"period-card",children:[f.jsxs("div",{className:"period-card__header",children:[f.jsxs("div",{children:[f.jsx("div",{className:"period-card__period-label",children:"Week of"}),f.jsxs("div",{className:"period-card__period-value",children:[r.weekStart.toLocaleDateString()," - ",r.weekEnd.toLocaleDateString()]})]}),f.jsxs("div",{children:[f.jsx("div",{className:"period-card__total-label",children:"Payouts Occurring This Week"}),f.jsxs("div",{className:"period-card__total-amount",children:["$",r.totalAmount.toFixed(2)]})]})]}),f.jsx("div",{className:"period-card__payout-list",children:r.payouts.map((s,o)=>f.jsxs("div",{className:"period-card__payout-item",children:[f.jsxs("div",{children:[f.jsx("span",{className:"period-card__payout-firm",children:s.firm}),f.jsx("span",{className:"period-card__payout-date",children:s.payoutDate.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})]}),f.jsxs("div",{className:"period-card__payout-amount",children:["$",s.totalExpected.toFixed(2)]})]},o))})]},i))})}function I4({monthlyView:t,maxMonths:e=6}){const n=t.slice(0,e);return f.jsx(f.Fragment,{children:n.map((r,i)=>f.jsxs("div",{className:"period-card",children:[f.jsxs("div",{className:"period-card__header",children:[f.jsxs("div",{children:[f.jsx("div",{className:"period-card__period-label",children:"Month"}),f.jsxs("div",{className:"period-card__period-value",children:[r.monthName," ",r.year]})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"period-card__total-label",children:["Payouts Occurring in ",r.monthName," (work may be from prior periods)"]}),f.jsxs("div",{className:"period-card__total-amount",children:["$",r.totalAmount.toFixed(2)]})]})]}),f.jsx("div",{className:"period-card__payout-list",children:Object.entries(r.byFirm).map(([s,o],a)=>f.jsxs("div",{className:"period-card__payout-item",children:[f.jsx("div",{className:"period-card__payout-firm",children:s}),f.jsxs("div",{className:"period-card__payout-amount",children:["$",o.toFixed(2)]})]},a))})]},i))})}function z4({payout:t,claims:e,onClose:n,onUpdateAmount:r}){const[i,s]=q.useState(null),[o,a]=q.useState(""),[c,u]=q.useState(null),h=(y,_)=>{s(y.id),u(y),a(_.toString())},p=async()=>{if(!c)return;const y=parseFloat(o);if(isNaN(y)||y<0){alert("Please enter a valid amount");return}await r(c.id,y,c),s(null),u(null),a("")},m=()=>{s(null),u(null),a("")},g=e.reduce((y,_)=>_.status==="COMPLETED"?y+(_.file_total||_.pay_amount||0):y+(_.pay_amount||dd(_.firm_name)||0),0);return f.jsx("div",{className:"payout-modal-overlay",onClick:n,children:f.jsxs("div",{className:"payout-modal",onClick:y=>y.stopPropagation(),children:[f.jsxs("div",{className:"payout-modal__header",children:[f.jsxs("div",{children:[f.jsxs("h3",{className:"payout-modal__title",children:[t.firm," - Payout Details"]}),f.jsxs("div",{className:"payout-modal__subtitle",children:["Pay Date: ",t.payoutDate.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})]}),f.jsxs("div",{className:"payout-modal__subtitle",children:["Work Period: ",t.periodStart.toLocaleDateString()," - ",t.periodEnd.toLocaleDateString()]})]}),f.jsx("button",{className:"payout-modal__close-button",onClick:n,children:""})]}),f.jsxs("div",{className:"payout-modal__summary",children:[f.jsxs("div",{children:[f.jsx("div",{className:"payout-dashboard__summary-label",children:"Total Claims"}),f.jsx("div",{className:"payout-modal__summary-count",children:e.length})]}),f.jsxs("div",{className:"payout-modal__summary-total",children:[f.jsx("div",{className:"payout-modal__summary-total-label",children:"Total Expected Payout"}),f.jsxs("div",{className:"payout-modal__summary-total-amount",children:["$",g.toFixed(2)]})]})]}),f.jsx("h4",{className:"payout-modal__claims-header",children:"Claims Included in This Payout"}),f.jsx("div",{className:"payout-modal__claims-list",children:e.map(y=>{const _=y.status==="COMPLETED"?y.file_total||y.pay_amount||0:y.pay_amount||dd(y.firm_name)||0,b=i===y.id,x=y.status==="COMPLETED"?"claim-card__status--completed":"claim-card__status--scheduled";return f.jsxs("div",{className:"claim-card",children:[f.jsxs("div",{className:"claim-card__grid",children:[f.jsxs("div",{children:[f.jsx("div",{className:"claim-card__field-label",children:"Claim Number"}),f.jsxs("div",{className:"claim-card__claim-number",children:["#",y.claim_number||"N/A"]})]}),f.jsxs("div",{children:[f.jsx("div",{className:"claim-card__field-label",children:"Customer"}),f.jsx("div",{className:"claim-card__customer",children:y.customer_name||"Unknown"})]}),f.jsxs("div",{children:[f.jsx("div",{className:"claim-card__field-label",children:"Status"}),f.jsx("div",{className:`claim-card__status ${x}`,children:y.status})]}),f.jsx("div",{className:"claim-card__amount-section",children:b?f.jsxs("div",{className:"claim-card__edit-controls",children:[f.jsx("input",{type:"number",className:"claim-card__edit-input",value:o,onChange:w=>a(w.target.value),onClick:w=>w.stopPropagation()}),f.jsx("button",{className:"claim-card__save-button",onClick:w=>{w.stopPropagation(),p()},children:""}),f.jsx("button",{className:"claim-card__cancel-button",onClick:w=>{w.stopPropagation(),m()},children:""})]}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"claim-card__field-label",children:"Amount"}),f.jsxs("div",{className:"claim-card__edit-controls",children:[f.jsxs("div",{className:"claim-card__amount",children:["$",_.toFixed(2)]}),f.jsx("button",{className:"claim-card__edit-button",onClick:w=>{w.stopPropagation(),h(y,_)},children:"Edit"})]})]})})]}),f.jsxs("div",{className:"claim-card__footer",children:[f.jsxs("div",{children:["Date: ",f.jsx("span",{className:"claim-card__footer-value",children:y.completion_date?new Date(y.completion_date).toLocaleDateString():y.appointment_start?new Date(y.appointment_start).toLocaleDateString():"N/A"})]}),f.jsxs("div",{children:["Type: ",f.jsx("span",{className:"claim-card__footer-value",children:y.status==="COMPLETED"?y.file_total?"file_total":"pay_amount":y.pay_amount?"pay_amount (scheduled)":"base fee (scheduled)"})]})]})]},y.id)})})]})})}function N4(){const[t,e]=q.useState([]),[n,r]=q.useState([]),[i,s]=q.useState([]),[o,a]=q.useState([]),[c,u]=q.useState(!0),[h,p]=q.useState("upcoming"),[m,g]=q.useState(null),[y,_]=q.useState([]);q.useEffect(()=>{b()},[]);const b=async()=>{try{const{data:C,error:j}=await Ne.from("claims").select("id, firm_name, completion_date, appointment_start, file_total, pay_amount, status").or("status.eq.COMPLETED,status.eq.SCHEDULED,status.eq.IN_PROGRESS").or("completion_date.not.is.null,appointment_start.not.is.null");if(j)throw j;const D=C||[];e(D);const P=hg(D);r(P),s(C4(P)),a(T4(P))}catch(C){console.error("Error loading payout data:",C),alert(`Error: ${C.message}`)}finally{u(!1)}},x=async C=>{g(C);try{const{data:j,error:D}=await Ne.from("claims").select("id, claim_number, customer_name, firm_name, pay_amount, file_total, status, appointment_start, completion_date").in("id",C.claimIds);if(D)throw D;_(j||[])}catch(j){console.error("Error loading claim details:",j),alert(`Error: ${j.message}`)}},w=async(C,j,D)=>{try{const P={};D.status==="COMPLETED"&&D.file_total!=null?P.file_total=j:P.pay_amount=j;const{error:T}=await Ne.from("claims").update(P).eq("id",C);if(T)throw T;if(_(A=>A.map(F=>F.id===C?{...F,...P}:F)),await b(),m){const{data:A}=await Ne.from("claims").select("id, claim_number, customer_name, firm_name, pay_amount, file_total, status, appointment_start, completion_date").in("id",m.claimIds);_(A||[])}}catch(P){console.error("Error updating amount:",P),alert(`Error: ${P.message}`)}},S=j4(n,30);return c?f.jsx("div",{className:"payout-dashboard__loading",children:"Loading payout forecasts..."}):f.jsxs("div",{className:"payout-dashboard",children:[f.jsx("div",{className:"payout-dashboard__header",children:f.jsxs("div",{className:"payout-dashboard__header-content",children:[f.jsx(Zt,{to:"/",className:"payout-dashboard__home-link",children:" Home"}),f.jsx("h3",{className:"payout-dashboard__title",children:"Payout Forecast Dashboard"})]})}),f.jsx(R4,{payouts:n}),f.jsx("div",{className:"payout-dashboard__view-buttons",children:["upcoming","weekly","monthly"].map(C=>f.jsx("button",{onClick:()=>p(C),className:`payout-dashboard__view-button ${h===C?"payout-dashboard__view-button--active":""}`,children:C.charAt(0).toUpperCase()+C.slice(1)},C))}),f.jsxs("div",{className:"payout-dashboard__view-container",children:[h==="upcoming"&&f.jsxs(f.Fragment,{children:[f.jsxs("h4",{className:"payout-dashboard__view-header",children:["Next 30 Days - Payouts Occurring (",S.length," payouts)"]}),f.jsx(M4,{payouts:S,onPayoutClick:x})]}),h==="weekly"&&f.jsxs(f.Fragment,{children:[f.jsxs("h4",{className:"payout-dashboard__view-header",children:["Weekly Totals - Grouped by Payout Date (",i.length," weeks)"]}),f.jsx(L4,{weeklyView:i})]}),h==="monthly"&&f.jsxs(f.Fragment,{children:[f.jsxs("h4",{className:"payout-dashboard__view-header",children:["Monthly Totals - Grouped by Payout Date (",o.length," months)"]}),f.jsx(I4,{monthlyView:o})]})]}),m&&f.jsx(z4,{payout:m,claims:y,onClose:()=>g(null),onUpdateAmount:w}),f.jsxs("div",{className:"payout-dashboard__info-box",children:[f.jsx("div",{className:"payout-dashboard__info-title",children:"Payout Forecast Details"}),f.jsxs("div",{className:"payout-dashboard__info-text",children:["This forecast includes both ",f.jsx("strong",{children:"completed claims"})," awaiting payment and ",f.jsx("strong",{children:"scheduled appointments"})," for future work."]}),f.jsxs("div",{className:"payout-dashboard__info-text",children:[" Completed claims: Uses actual ",f.jsx("strong",{children:"file_total"})," or ",f.jsx("strong",{children:"pay_amount"})]}),f.jsxs("div",{className:"payout-dashboard__info-text",children:[" Scheduled claims: Uses ",f.jsx("strong",{children:"pay_amount"})," set in the calendar"]}),f.jsxs("div",{className:"payout-dashboard__info-text",children:[f.jsx("strong",{children:"IMPORTANT:"})," All views display payouts grouped by ",f.jsx("strong",{children:"when the payout occurs"}),", not when the work was performed. For example, December work for firms like ACD, IANET, and Legacy typically pays out in January."]}),f.jsx("div",{className:"payout-dashboard__info-text",children:"Payout dates calculated from historical deposit patterns for each firm. All recurring firms included (Sedgwick, Legacy, ACD, ClaimSolution, Complete Claims, Doan, HEA, IANET, AMA, A-TEAM, Frontline)."})]})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ic(t){return t+.5|0}const Ui=(t,e,n)=>Math.max(Math.min(t,n),e);function Xa(t){return Ui(ic(t*2.55),0,255)}function Qi(t){return Ui(ic(t*255),0,255)}function li(t){return Ui(ic(t/2.55)/100,0,1)}function k_(t){return Ui(ic(t*100),0,100)}const lr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Wp=[..."0123456789ABCDEF"],F4=t=>Wp[t&15],B4=t=>Wp[(t&240)>>4]+Wp[t&15],Gc=t=>(t&240)>>4===(t&15),U4=t=>Gc(t.r)&&Gc(t.g)&&Gc(t.b)&&Gc(t.a);function W4(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&lr[t[1]]*17,g:255&lr[t[2]]*17,b:255&lr[t[3]]*17,a:e===5?lr[t[4]]*17:255}:(e===7||e===9)&&(n={r:lr[t[1]]<<4|lr[t[2]],g:lr[t[3]]<<4|lr[t[4]],b:lr[t[5]]<<4|lr[t[6]],a:e===9?lr[t[7]]<<4|lr[t[8]]:255})),n}const $4=(t,e)=>t<255?e(t):"";function H4(t){var e=U4(t)?F4:B4;return t?"#"+e(t.r)+e(t.g)+e(t.b)+$4(t.a,e):void 0}const V4=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Zw(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function Z4(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function Y4(t,e,n){const r=Zw(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function q4(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function fg(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let c,u,h;return s!==o&&(h=s-o,u=a>.5?h/(2-s-o):h/(s+o),c=q4(n,r,i,h,s),c=c*60+.5),[c|0,u||0,a]}function pg(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Qi)}function mg(t,e,n){return pg(Zw,t,e,n)}function G4(t,e,n){return pg(Y4,t,e,n)}function K4(t,e,n){return pg(Z4,t,e,n)}function Yw(t){return(t%360+360)%360}function J4(t){const e=V4.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Xa(+e[5]):Qi(+e[5]));const i=Yw(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=G4(i,s,o):e[1]==="hsv"?r=K4(i,s,o):r=mg(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function X4(t,e){var n=fg(t);n[0]=Yw(n[0]+e),n=mg(n),t.r=n[0],t.g=n[1],t.b=n[2]}function Q4(t){if(!t)return;const e=fg(t),n=e[0],r=k_(e[1]),i=k_(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${li(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const E_={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},C_={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function eO(){const t={},e=Object.keys(C_),n=Object.keys(E_);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,E_[s]);s=parseInt(C_[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let Kc;function tO(t){Kc||(Kc=eO(),Kc.transparent=[0,0,0,0]);const e=Kc[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const nO=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function rO(t){const e=nO.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Xa(o):Ui(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?Xa(r):Ui(r,0,255)),i=255&(e[4]?Xa(i):Ui(i,0,255)),s=255&(e[6]?Xa(s):Ui(s,0,255)),{r,g:i,b:s,a:n}}}function iO(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${li(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const ff=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,wo=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function sO(t,e,n){const r=wo(li(t.r)),i=wo(li(t.g)),s=wo(li(t.b));return{r:Qi(ff(r+n*(wo(li(e.r))-r))),g:Qi(ff(i+n*(wo(li(e.g))-i))),b:Qi(ff(s+n*(wo(li(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Jc(t,e,n){if(t){let r=fg(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=mg(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function qw(t,e){return t&&Object.assign(e||{},t)}function T_(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Qi(t[3]))):(e=qw(t,{r:0,g:0,b:0,a:1}),e.a=Qi(e.a)),e}function oO(t){return t.charAt(0)==="r"?rO(t):J4(t)}class Hl{constructor(e){if(e instanceof Hl)return e;const n=typeof e;let r;n==="object"?r=T_(e):n==="string"&&(r=W4(e)||tO(e)||oO(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=qw(this._rgb);return e&&(e.a=li(e.a)),e}set rgb(e){this._rgb=T_(e)}rgbString(){return this._valid?iO(this._rgb):void 0}hexString(){return this._valid?H4(this._rgb):void 0}hslString(){return this._valid?Q4(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,c=r.a-i.a,u=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;s=1-u,r.r=255&u*r.r+s*i.r+.5,r.g=255&u*r.g+s*i.g+.5,r.b=255&u*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=sO(this._rgb,e._rgb,n)),this}clone(){return new Hl(this.rgb)}alpha(e){return this._rgb.a=Qi(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=ic(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Jc(this._rgb,2,e),this}darken(e){return Jc(this._rgb,2,-e),this}saturate(e){return Jc(this._rgb,1,e),this}desaturate(e){return Jc(this._rgb,1,-e),this}rotate(e){return X4(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ni(){}const aO=(()=>{let t=0;return()=>t++})();function ut(t){return t==null}function qt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function it(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function wn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Br(t,e){return wn(t)?t:e}function Je(t,e){return typeof t>"u"?e:t}const lO=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,Gw=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function kt(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ft(t,e,n,r){let i,s,o;if(qt(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(it(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function hd(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function fd(t){if(qt(t))return t.map(fd);if(it(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=fd(t[n[i]]);return e}return t}function Kw(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function cO(t,e,n,r){if(!Kw(t))return;const i=e[t],s=n[t];it(i)&&it(s)?Vl(i,s,r):e[t]=fd(s)}function Vl(t,e,n){const r=qt(e)?e:[e],i=r.length;if(!it(t))return t;n=n||{};const s=n.merger||cO;let o;for(let a=0;a<i;++a){if(o=r[a],!it(o))continue;const c=Object.keys(o);for(let u=0,h=c.length;u<h;++u)s(c[u],t,o,n)}return t}function ml(t,e){return Vl(t,e,{merger:uO})}function uO(t,e,n){if(!Kw(t))return;const r=e[t],i=n[t];it(r)&&it(i)?ml(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=fd(i))}const j_={"":t=>t,x:t=>t.x,y:t=>t.y};function dO(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function hO(t){const e=dO(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Js(t,e){return(j_[e]||(j_[e]=hO(e)))(t)}function gg(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Zl=t=>typeof t<"u",ns=t=>typeof t=="function",P_=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function fO(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const pt=Math.PI,Dt=2*pt,pO=Dt+pt,pd=Number.POSITIVE_INFINITY,mO=pt/180,Xt=pt/2,bs=pt/4,A_=pt*2/3,Jw=Math.log10,qr=Math.sign;function gl(t,e,n){return Math.abs(t-e)<n}function O_(t){const e=Math.round(t);t=gl(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Jw(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function gO(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function yO(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Yl(t){return!yO(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function _O(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function vO(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function di(t){return t*(pt/180)}function xO(t){return t*(180/pt)}function D_(t){if(!wn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function Xw(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*pt&&(s+=Dt),{angle:s,distance:i}}function $p(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function bO(t,e){return(t-e+pO)%Dt-pt}function Kn(t){return(t%Dt+Dt)%Dt}function ql(t,e,n,r){const i=Kn(t),s=Kn(e),o=Kn(n),a=Kn(s-i),c=Kn(o-i),u=Kn(i-s),h=Kn(i-o);return i===s||i===o||r&&s===o||a>c&&u<h}function vn(t,e,n){return Math.max(e,Math.min(n,t))}function wO(t){return vn(t,-32768,32767)}function hi(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function yg(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const Fs=(t,e,n,r)=>yg(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),SO=(t,e,n)=>yg(t,n,r=>t[r][e]>=n);function kO(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const Qw=["push","pop","shift","splice","unshift"];function EO(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Qw.forEach(n=>{const r="_onData"+gg(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function R_(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(Qw.forEach(s=>{delete t[s]}),delete t._chartjs)}function e2(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const t2=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function n2(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,t2.call(window,()=>{r=!1,t.apply(e,n)}))}}function CO(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const _g=t=>t==="start"?"left":t==="end"?"right":"center",yn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,TO=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function jO(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:c}=t,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,h=o.axis,{min:p,max:m,minDefined:g,maxDefined:y}=o.getUserBounds();if(g){if(i=Math.min(Fs(c,h,p).lo,n?r:Fs(e,h,o.getPixelForValue(p)).lo),u){const _=c.slice(0,i+1).reverse().findIndex(b=>!ut(b[a.axis]));i-=Math.max(0,_)}i=vn(i,0,r-1)}if(y){let _=Math.max(Fs(c,o.axis,m,!0).hi+1,n?0:Fs(e,h,o.getPixelForValue(m),!0).hi+1);if(u){const b=c.slice(_-1).findIndex(x=>!ut(x[a.axis]));_+=Math.max(0,b)}s=vn(_,i,r)-i}else s=r-i}return{start:i,count:s}}function PO(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const Xc=t=>t===0||t===1,M_=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Dt/n)),L_=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Dt/n)+1,yl={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Xt)+1,easeOutSine:t=>Math.sin(t*Xt),easeInOutSine:t=>-.5*(Math.cos(pt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Xc(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Xc(t)?t:M_(t,.075,.3),easeOutElastic:t=>Xc(t)?t:L_(t,.075,.3),easeInOutElastic(t){return Xc(t)?t:t<.5?.5*M_(t*2,.1125,.45):.5+.5*L_(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-yl.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?yl.easeInBounce(t*2)*.5:yl.easeOutBounce(t*2-1)*.5+.5};function vg(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function I_(t){return vg(t)?t:new Hl(t)}function pf(t){return vg(t)?t:new Hl(t).saturate(.5).darken(.1).hexString()}const AO=["x","y","borderWidth","radius","tension"],OO=["color","borderColor","backgroundColor"];function DO(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:OO},numbers:{type:"number",properties:AO}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function RO(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const z_=new Map;function MO(t,e){e=e||{};const n=t+JSON.stringify(e);let r=z_.get(n);return r||(r=new Intl.NumberFormat(t,e),z_.set(n,r)),r}function xg(t,e,n){return MO(e,n).format(t)}const LO={values(t){return qt(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(i="scientific"),s=IO(t,n)}const o=Jw(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),xg(t,r,c)}};function IO(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var r2={formatters:LO};function zO(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:r2.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Xs=Object.create(null),Hp=Object.create(null);function _l(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function mf(t,e,n){return typeof e=="string"?Vl(_l(t,e),n):Vl(_l(t,""),e)}class NO{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>pf(i.backgroundColor),this.hoverBorderColor=(r,i)=>pf(i.borderColor),this.hoverColor=(r,i)=>pf(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return mf(this,e,n)}get(e){return _l(this,e)}describe(e,n){return mf(Hp,e,n)}override(e,n){return mf(Xs,e,n)}route(e,n,r,i){const s=_l(this,e),o=_l(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const c=this[a],u=o[i];return it(c)?Object.assign({},u,c):Je(c,u)},set(c){this[a]=c}}})}apply(e){e.forEach(n=>n(this))}}var Bt=new NO({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[DO,RO,zO]);function FO(t){return!t||ut(t.size)||ut(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function N_(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function ws(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function F_(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Vp(t,e,n,r){i2(t,e,n,r,null)}function i2(t,e,n,r,i){let s,o,a,c,u,h,p,m;const g=e.pointStyle,y=e.rotation,_=e.radius;let b=(y||0)*mO;if(g&&typeof g=="object"&&(s=g.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(b),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(_)||_<=0)){switch(t.beginPath(),g){default:i?t.ellipse(n,r,i/2,_,0,0,Dt):t.arc(n,r,_,0,Dt),t.closePath();break;case"triangle":h=i?i/2:_,t.moveTo(n+Math.sin(b)*h,r-Math.cos(b)*_),b+=A_,t.lineTo(n+Math.sin(b)*h,r-Math.cos(b)*_),b+=A_,t.lineTo(n+Math.sin(b)*h,r-Math.cos(b)*_),t.closePath();break;case"rectRounded":u=_*.516,c=_-u,o=Math.cos(b+bs)*c,p=Math.cos(b+bs)*(i?i/2-u:c),a=Math.sin(b+bs)*c,m=Math.sin(b+bs)*(i?i/2-u:c),t.arc(n-p,r-a,u,b-pt,b-Xt),t.arc(n+m,r-o,u,b-Xt,b),t.arc(n+p,r+a,u,b,b+Xt),t.arc(n-m,r+o,u,b+Xt,b+pt),t.closePath();break;case"rect":if(!y){c=Math.SQRT1_2*_,h=i?i/2:c,t.rect(n-h,r-c,2*h,2*c);break}b+=bs;case"rectRot":p=Math.cos(b)*(i?i/2:_),o=Math.cos(b)*_,a=Math.sin(b)*_,m=Math.sin(b)*(i?i/2:_),t.moveTo(n-p,r-a),t.lineTo(n+m,r-o),t.lineTo(n+p,r+a),t.lineTo(n-m,r+o),t.closePath();break;case"crossRot":b+=bs;case"cross":p=Math.cos(b)*(i?i/2:_),o=Math.cos(b)*_,a=Math.sin(b)*_,m=Math.sin(b)*(i?i/2:_),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"star":p=Math.cos(b)*(i?i/2:_),o=Math.cos(b)*_,a=Math.sin(b)*_,m=Math.sin(b)*(i?i/2:_),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o),b+=bs,p=Math.cos(b)*(i?i/2:_),o=Math.cos(b)*_,a=Math.sin(b)*_,m=Math.sin(b)*(i?i/2:_),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"line":o=i?i/2:Math.cos(b)*_,a=Math.sin(b)*_,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(b)*(i?i/2:_),r+Math.sin(b)*_);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Gl(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Gd(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Kd(t){t.restore()}function BO(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function UO(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function WO(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ut(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function $O(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,c=n-s.actualBoundingBoxAscent,u=n+s.actualBoundingBoxDescent,h=i.strikethrough?(c+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function HO(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Kl(t,e,n,r,i,s={}){const o=qt(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let c,u;for(t.save(),t.font=i.string,WO(t,s),c=0;c<o.length;++c)u=o[c],s.backdrop&&HO(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),ut(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(u,n,r,s.maxWidth)),t.fillText(u,n,r,s.maxWidth),$O(t,n,r,u,s),r+=Number(i.lineHeight);t.restore()}function md(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*pt,pt,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,pt,Xt,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Xt,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-Xt,!0),t.lineTo(n+o.topLeft,r)}const VO=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,ZO=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function YO(t,e){const n=(""+t).match(VO);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const qO=t=>+t||0;function bg(t,e){const n={},r=it(e),i=r?Object.keys(e):e,s=it(t)?r?o=>Je(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=qO(s(o));return n}function s2(t){return bg(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Yo(t){return bg(t,["topLeft","topRight","bottomLeft","bottomRight"])}function gr(t){const e=s2(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function xn(t,e){t=t||{},e=e||Bt.font;let n=Je(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=Je(t.style,e.style);r&&!(""+r).match(ZO)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:Je(t.family,e.family),lineHeight:YO(Je(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:Je(t.weight,e.weight),string:""};return i.string=FO(i),i}function Qc(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function GO(t,e,n){const{min:r,max:i}=t,s=Gw(e,(i-r)/2),o=(a,c)=>n&&a===0?0:a+c;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function io(t,e){return Object.assign(Object.create(t),e)}function wg(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=c2("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>wg([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,c){return delete a[c],delete a._keys,delete t[0][c],!0},get(a,c){return a2(a,c,()=>rD(c,e,t,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,c){return U_(a).includes(c)},ownKeys(a){return U_(a)},set(a,c,u){const h=a._storage||(a._storage=i());return a[c]=h[c]=u,delete a._keys,!0}})}function sa(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:o2(t,r),setContext:s=>sa(t,s,n,r),override:s=>sa(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return a2(s,o,()=>JO(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function o2(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:ns(n)?n:()=>n,isIndexable:ns(r)?r:()=>r}}const KO=(t,e)=>t?t+gg(e):e,Sg=(t,e)=>it(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function a2(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function JO(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return ns(a)&&o.isScriptable(e)&&(a=XO(e,a,t,n)),qt(a)&&a.length&&(a=QO(e,a,t,o.isIndexable)),Sg(e,a)&&(a=sa(a,i,s&&s[e],o)),a}function XO(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let c=e(s,o||r);return a.delete(t),Sg(t,c)&&(c=kg(i._scopes,i,t,c)),c}function QO(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(it(e[0])){const c=e,u=i._scopes.filter(h=>h!==c);e=[];for(const h of c){const p=kg(u,i,t,h);e.push(sa(p,s,o&&o[t],a))}}return e}function l2(t,e,n){return ns(t)?t(e,n):t}const eD=(t,e)=>t===!0?e:typeof t=="string"?Js(e,t):void 0;function tD(t,e,n,r,i){for(const s of e){const o=eD(n,s);if(o){t.add(o);const a=l2(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function kg(t,e,n,r){const i=e._rootScopes,s=l2(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let c=B_(a,o,n,s||n,r);return c===null||typeof s<"u"&&s!==n&&(c=B_(a,o,s,c,r),c===null)?!1:wg(Array.from(a),[""],i,s,()=>nD(e,n,r))}function B_(t,e,n,r,i){for(;n;)n=tD(t,e,n,r,i);return n}function nD(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return qt(i)&&it(n)?n:i||{}}function rD(t,e,n,r){let i;for(const s of e)if(i=c2(KO(s,t),n),typeof i<"u")return Sg(t,i)?kg(n,r,t,i):i}function c2(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function U_(t){let e=t._keys;return e||(e=t._keys=iD(t._scopes)),e}function iD(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const sD=Number.EPSILON||1e-14,oa=(t,e)=>e<t.length&&!t[e].skip&&t[e],u2=t=>t==="x"?"y":"x";function oD(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=$p(s,i),c=$p(o,s);let u=a/(a+c),h=c/(a+c);u=isNaN(u)?0:u,h=isNaN(h)?0:h;const p=r*u,m=r*h;return{previous:{x:s.x-p*(o.x-i.x),y:s.y-p*(o.y-i.y)},next:{x:s.x+m*(o.x-i.x),y:s.y+m*(o.y-i.y)}}}function aD(t,e,n){const r=t.length;let i,s,o,a,c,u=oa(t,0);for(let h=0;h<r-1;++h)if(c=u,u=oa(t,h+1),!(!c||!u)){if(gl(e[h],0,sD)){n[h]=n[h+1]=0;continue}i=n[h]/e[h],s=n[h+1]/e[h],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=i*o*e[h],n[h+1]=s*o*e[h])}}function lD(t,e,n="x"){const r=u2(n),i=t.length;let s,o,a,c=oa(t,0);for(let u=0;u<i;++u){if(o=a,a=c,c=oa(t,u+1),!a)continue;const h=a[n],p=a[r];o&&(s=(h-o[n])/3,a[`cp1${n}`]=h-s,a[`cp1${r}`]=p-s*e[u]),c&&(s=(c[n]-h)/3,a[`cp2${n}`]=h+s,a[`cp2${r}`]=p+s*e[u])}}function cD(t,e="x"){const n=u2(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,c,u=oa(t,0);for(o=0;o<r;++o)if(a=c,c=u,u=oa(t,o+1),!!c){if(u){const h=u[e]-c[e];i[o]=h!==0?(u[n]-c[n])/h:0}s[o]=a?u?qr(i[o-1])!==qr(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}aD(t,i,s),lD(t,s,e)}function eu(t,e,n){return Math.max(Math.min(t,n),e)}function uD(t,e){let n,r,i,s,o,a=Gl(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&Gl(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=eu(i.cp1x,e.left,e.right),i.cp1y=eu(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=eu(i.cp2x,e.left,e.right),i.cp2y=eu(i.cp2y,e.top,e.bottom)))}function dD(t,e,n,r,i){let s,o,a,c;if(e.spanGaps&&(t=t.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")cD(t,i);else{let u=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],c=oD(u,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,u=a}e.capBezierPoints&&uD(t,n)}function Eg(){return typeof window<"u"&&typeof document<"u"}function Cg(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function gd(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Jd=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function hD(t,e){return Jd(t).getPropertyValue(e)}const fD=["top","right","bottom","left"];function $s(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=fD[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const pD=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function mD(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,c;if(pD(i,s,t.target))a=i,c=s;else{const u=e.getBoundingClientRect();a=r.clientX-u.left,c=r.clientY-u.top,o=!0}return{x:a,y:c,box:o}}function js(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=Jd(n),s=i.boxSizing==="border-box",o=$s(i,"padding"),a=$s(i,"border","width"),{x:c,y:u,box:h}=mD(t,n),p=o.left+(h&&a.left),m=o.top+(h&&a.top);let{width:g,height:y}=e;return s&&(g-=o.width+a.width,y-=o.height+a.height),{x:Math.round((c-p)/g*n.width/r),y:Math.round((u-m)/y*n.height/r)}}function gD(t,e,n){let r,i;if(e===void 0||n===void 0){const s=t&&Cg(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Jd(s),c=$s(a,"border","width"),u=$s(a,"padding");e=o.width-u.width-c.width,n=o.height-u.height-c.height,r=gd(a.maxWidth,s,"clientWidth"),i=gd(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||pd,maxHeight:i||pd}}const Wi=t=>Math.round(t*10)/10;function yD(t,e,n,r){const i=Jd(t),s=$s(i,"margin"),o=gd(i.maxWidth,t,"clientWidth")||pd,a=gd(i.maxHeight,t,"clientHeight")||pd,c=gD(t,e,n);let{width:u,height:h}=c;if(i.boxSizing==="content-box"){const m=$s(i,"border","width"),g=$s(i,"padding");u-=g.width+m.width,h-=g.height+m.height}return u=Math.max(0,u-s.width),h=Math.max(0,r?u/r:h-s.height),u=Wi(Math.min(u,o,c.maxWidth)),h=Wi(Math.min(h,a,c.maxHeight)),u&&!h&&(h=Wi(u/2)),(e!==void 0||n!==void 0)&&r&&c.height&&h>c.height&&(h=c.height,u=Wi(Math.floor(h*r))),{width:u,height:h}}function W_(t,e,n){const r=e||1,i=Wi(t.height*r),s=Wi(t.width*r);t.height=Wi(t.height),t.width=Wi(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const _D=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Eg()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function $_(t,e){const n=hD(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Ps(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function vD(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function xD(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Ps(t,i,n),a=Ps(i,s,n),c=Ps(s,e,n),u=Ps(o,a,n),h=Ps(a,c,n);return Ps(u,h,n)}const bD=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},wD=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function qo(t,e,n){return t?bD(e,n):wD()}function d2(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function h2(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function f2(t){return t==="angle"?{between:ql,compare:bO,normalize:Kn}:{between:hi,compare:(e,n)=>e-n,normalize:e=>e}}function H_({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function SD(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=f2(r),c=e.length;let{start:u,end:h,loop:p}=t,m,g;if(p){for(u+=c,h+=c,m=0,g=c;m<g&&o(a(e[u%c][r]),i,s);++m)u--,h--;u%=c,h%=c}return h<u&&(h+=c),{start:u,end:h,loop:p,style:t.style}}function p2(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:c,normalize:u}=f2(r),{start:h,end:p,loop:m,style:g}=SD(t,e,n),y=[];let _=!1,b=null,x,w,S;const C=()=>c(i,S,x)&&a(i,S)!==0,j=()=>a(s,x)===0||c(s,S,x),D=()=>_||C(),P=()=>!_||j();for(let T=h,A=h;T<=p;++T)w=e[T%o],!w.skip&&(x=u(w[r]),x!==S&&(_=c(x,i,s),b===null&&D()&&(b=a(x,i)===0?T:A),b!==null&&P()&&(y.push(H_({start:b,end:T,loop:m,count:o,style:g})),b=null),A=T,S=x));return b!==null&&y.push(H_({start:b,end:p,loop:m,count:o,style:g})),y}function m2(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=p2(r[i],t.points,e);s.length&&n.push(...s)}return n}function kD(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function ED(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],c;for(c=e+1;c<=n;++c){const u=t[c%i];u.skip||u.stop?a.skip||(r=!1,s.push({start:e%i,end:(c-1)%i,loop:r}),e=o=u.stop?c:null):(o=c,a.skip&&(e=c)),a=u}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function CD(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=kD(n,i,s,r);if(r===!0)return V_(t,[{start:o,end:a,loop:s}],n,e);const c=a<o?a+i:a,u=!!t._fullLoop&&o===0&&a===i-1;return V_(t,ED(n,o,c,u),n,e)}function V_(t,e,n,r){return!r||!r.setContext||!n?e:TD(t,e,n,r)}function TD(t,e,n,r){const i=t._chart.getContext(),s=Z_(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,c=n.length,u=[];let h=s,p=e[0].start,m=p;function g(y,_,b,x){const w=a?-1:1;if(y!==_){for(y+=c;n[y%c].skip;)y-=w;for(;n[_%c].skip;)_+=w;y%c!==_%c&&(u.push({start:y%c,end:_%c,loop:b,style:x}),h=x,p=_%c)}}for(const y of e){p=a?p:y.start;let _=n[p%c],b;for(m=p+1;m<=y.end;m++){const x=n[m%c];b=Z_(r.setContext(io(i,{type:"segment",p0:_,p1:x,p0DataIndex:(m-1)%c,p1DataIndex:m%c,datasetIndex:o}))),jD(b,h)&&g(p,m-1,y.loop,h),_=x,h=b}p<m-1&&g(p,m-1,y.loop,h)}return u}function Z_(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function jD(t,e){if(!e)return!1;const n=[],r=function(i,s){return vg(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function tu(t,e,n){return t.options.clip?t[n]:e[n]}function PD(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:tu(n,e,"left"),right:tu(n,e,"right"),top:tu(r,e,"top"),bottom:tu(r,e,"bottom")}:e}function g2(t,e){const n=e._clip;if(n.disabled)return!1;const r=PD(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class AD{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=t2.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,c;for(;o>=0;--o)c=s[o],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ri=new AD;const Y_="transparent",OD={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=I_(t||Y_),i=r.valid&&I_(e||Y_);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class DD{constructor(e,n,r,i){const s=n[r];i=Qc([e.to,i,s,e.from]);const o=Qc([e.from,s,i]);this._active=!0,this._fn=e.fn||OD[e.type||typeof o],this._easing=yl[e.easing]||yl.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Qc([e.to,n,i,e.from]),this._from=Qc([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let c;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}c=n/r%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[i]=this._fn(s,a,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class y2{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!it(e))return;const n=Object.keys(Bt.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!it(s))return;const o={};for(const a of n)o[a]=s[a];(qt(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=MD(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&RD(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let c;for(c=o.length-1;c>=0;--c){const u=o[c];if(u.charAt(0)==="$")continue;if(u==="options"){i.push(...this._animateOptions(e,n));continue}const h=n[u];let p=s[u];const m=r.get(u);if(p)if(m&&p.active()){p.update(m,h,a);continue}else p.cancel();if(!m||!m.duration){e[u]=h;continue}s[u]=p=new DD(m,e,u,h),i.push(p)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return ri.add(this._chart,r),!0}}function RD(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function MD(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function q_(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function LD(t,e,n){if(n===!1)return!1;const r=q_(t,n),i=q_(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function ID(t){let e,n,r,i;return it(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function _2(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function G_(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,c,u;if(e===null)return;let h=!1;for(o=0,a=i.length;o<a;++o){if(c=+i[o],c===n){if(h=!0,r.all)continue;break}u=t.values[c],wn(u)&&(s||e===0||qr(e)===qr(u))&&(e+=u)}return!h&&!r.all?0:e}function zD(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let c,u,h;for(c=0,u=o.length;c<u;++c)h=o[c],a[c]={[i]:h,[s]:t[h]};return a}function gf(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function ND(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function FD(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function BD(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function K_(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function J_(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,c=s.axis,u=o.axis,h=ND(s,o,r),p=e.length;let m;for(let g=0;g<p;++g){const y=e[g],{[c]:_,[u]:b}=y,x=y._stacks||(y._stacks={});m=x[u]=BD(i,h,_),m[a]=b,m._top=K_(m,o,!0,r.type),m._bottom=K_(m,o,!1,r.type);const w=m._visualValues||(m._visualValues={});w[a]=b}}function yf(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function UD(t,e){return io(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function WD(t,e,n){return io(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Fa(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const _f=t=>t==="reset"||t==="none",X_=(t,e)=>e?t:Object.assign({},t),$D=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:_2(n,!0),values:null};class Hs{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=gf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Fa(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(p,m,g,y)=>p==="x"?m:p==="r"?y:g,s=n.xAxisID=Je(r.xAxisID,yf(e,"x")),o=n.yAxisID=Je(r.yAxisID,yf(e,"y")),a=n.rAxisID=Je(r.rAxisID,yf(e,"r")),c=n.indexAxis,u=n.iAxisID=i(c,s,o,a),h=n.vAxisID=i(c,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&R_(this._data,this),e._stacked&&Fa(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(it(n)){const i=this._cachedMeta;this._data=zD(n,i)}else if(r!==n){if(r){R_(r,this);const i=this._cachedMeta;Fa(i),i._parsed=[]}n&&Object.isExtensible(n)&&EO(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=gf(n.vScale,n),n.stack!==r.stack&&(i=!0,Fa(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&(J_(this,n._parsed),n._stacked=gf(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let c=e===0&&n===i.length?!0:r._sorted,u=e>0&&r._parsed[e-1],h,p,m;if(this._parsing===!1)r._parsed=i,r._sorted=!0,m=i;else{qt(i[e])?m=this.parseArrayData(r,i,e,n):it(i[e])?m=this.parseObjectData(r,i,e,n):m=this.parsePrimitiveData(r,i,e,n);const g=()=>p[a]===null||u&&p[a]<u[a];for(h=0;h<n;++h)r._parsed[h+e]=p=m[h],c&&(g()&&(c=!1),u=p);r._sorted=c}o&&J_(this,m)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,c=o.axis,u=s.getLabels(),h=s===o,p=new Array(i);let m,g,y;for(m=0,g=i;m<g;++m)y=m+r,p[m]={[a]:h||s.parse(u[y],y),[c]:o.parse(n[y],y)};return p}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let c,u,h,p;for(c=0,u=i;c<u;++c)h=c+r,p=n[h],a[c]={x:s.parse(p[0],h),y:o.parse(p[1],h)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:c="y"}=this._parsing,u=new Array(i);let h,p,m,g;for(h=0,p=i;h<p;++h)m=h+r,g=n[m],u[h]={x:s.parse(Js(g,a),m),y:o.parse(Js(g,c),m)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:_2(i,!0),values:n._stacks[e.axis]._visualValues};return G_(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=G_(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),c=$D(n,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:p}=FD(a);let m,g;function y(){g=i[m];const _=g[a.axis];return!wn(g[e.axis])||h>_||p<_}for(m=0;m<o&&!(!y()&&(this.updateRangeFromParsed(u,e,g,c),s));++m);if(s){for(m=o-1;m>=0;--m)if(!y()){this.updateRangeFromParsed(u,e,g,c);break}}return u}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],wn(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=ID(Je(this.options.clip,LD(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,c=this._drawCount||i.length-a,u=this.options.drawActiveElementsOnTop;let h;for(r.dataset&&r.dataset.draw(e,s,a,c),h=a;h<a+c;++h){const p=i[h];p.hidden||(p.active&&u?o.push(p):p.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=WD(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=UD(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],c=this.enableOptionSharing&&Zl(r);if(a)return X_(a,c);const u=this.chart.config,h=u.datasetElementScopeKeys(this._type,e),p=i?[`${e}Hover`,"hover",e,""]:[e,""],m=u.getOptionScopes(this.getDataset(),h),g=Object.keys(Bt.elements[e]),y=()=>this.getContext(r,i,n),_=u.resolveNamedOptions(m,g,y,p);return _.$shared&&(_.$shared=c,s[o]=Object.freeze(X_(_,c))),_}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let c;if(i.options.animation!==!1){const h=this.chart.config,p=h.datasetAnimationScopeKeys(this._type,n),m=h.getOptionScopes(this.getDataset(),p);c=h.createResolver(m,this.getContext(e,r,n))}const u=new y2(i,c&&c.animations);return c&&c._cacheable&&(s[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||_f(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){_f(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!_f(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,c,u]of this._syncList)this[a](c,u);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const c=u=>{for(u.length+=n,a=u.length-1;a>=o;a--)u[a]=u[a-n]};for(c(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&c(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&Fa(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ze(Hs,"defaults",{}),ze(Hs,"datasetElementType",null),ze(Hs,"dataElementType",null);function HD(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=e2(r.sort((i,s)=>i-s))}return t._cache.$bar}function VD(t){const e=t.iScale,n=HD(e,t.type);let r=e._length,i,s,o,a;const c=()=>{o===32767||o===-32768||(Zl(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),c();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),c();return r}function ZD(t,e,n,r){const i=n.barThickness;let s,o;return ut(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function YD(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const c=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const u=s-(s-Math.min(o,a))/2*c;return{chunk:Math.abs(a-o)/2*c/r,ratio:n.barPercentage,start:u}}function qD(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let c=o,u=a;Math.abs(o)>Math.abs(a)&&(c=a,u=o),e[n.axis]=u,e._custom={barStart:c,barEnd:u,start:i,end:s,min:o,max:a}}function v2(t,e,n,r){return qt(t)?qD(t,e,n,r):e[n.axis]=n.parse(t,r),e}function Q_(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,c=[];let u,h,p,m;for(u=n,h=n+r;u<h;++u)m=e[u],p={},p[i.axis]=a||i.parse(o[u],u),c.push(v2(m,p,s,u));return c}function vf(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function GD(t,e,n){return t!==0?qr(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function KD(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function JD(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:c,top:u,bottom:h}=KD(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=u:(n._bottom||0)===r?i=h:(s[ev(h,o,a,c)]=!0,i=u)),s[ev(i,o,a,c)]=!0,t.borderSkipped=s}function ev(t,e,n,r){return r?(t=XD(t,e,n),t=tv(t,n,e)):t=tv(t,e,n),t}function XD(t,e,n){return t===e?n:t===n?e:t}function tv(t,e,n){return t==="start"?e:t==="end"?n:t}function QD(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class Eu extends Hs{parsePrimitiveData(e,n,r,i){return Q_(e,n,r,i)}parseArrayData(e,n,r,i){return Q_(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:c="y"}=this._parsing,u=s.axis==="x"?a:c,h=o.axis==="x"?a:c,p=[];let m,g,y,_;for(m=r,g=r+i;m<g;++m)_=n[m],y={},y[s.axis]=s.parse(Js(_,u),m),p.push(v2(Js(_,h),y,o,m));return p}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=vf(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,c=a.getBasePixel(),u=a.isHorizontal(),h=this._getRuler(),{sharedOptions:p,includeOptions:m}=this._getSharedOptions(n,i);for(let g=n;g<n+r;g++){const y=this.getParsed(g),_=s||ut(y[a.axis])?{base:c,head:c}:this._calculateBarValuePixels(g),b=this._calculateBarIndexPixels(g,h),x=(y._stacks||{})[a.axis],w={horizontal:u,base:_.base,enableBorderRadius:!x||vf(y._custom)||o===x._top||o===x._bottom,x:u?_.head:b.center,y:u?b.center:_.head,height:u?b.size:Math.abs(_.size),width:u?Math.abs(_.size):b.size};m&&(w.options=p||this.resolveDataElementOptions(g,e[g].active?"active":i));const S=w.options||e[g].options;JD(w,S,x,o),QD(w,S,h.ratio),this.updateElement(e[g],g,w,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),s=r.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),c=a&&a[r.axis],u=h=>{const p=h._parsed.find(g=>g[r.axis]===c),m=p&&p[h.vScale.axis];if(ut(m)||isNaN(m))return!0};for(const h of i)if(!(n!==void 0&&u(h))&&((s===!1||o.indexOf(h.stack)===-1||s===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[Je(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||VD(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,c=this.getParsed(e),u=c._custom,h=vf(u);let p=c[n.axis],m=0,g=r?this.applyStack(n,c,r):p,y,_;g!==p&&(m=g-p,g=p),h&&(p=u.barStart,g=u.barEnd-u.barStart,p!==0&&qr(p)!==qr(u.barEnd)&&(m=0),m+=p);const b=!ut(s)&&!h?s:m;let x=n.getPixelForValue(b);if(this.chart.getDataVisibility(e)?y=n.getPixelForValue(m+g):y=x,_=y-x,Math.abs(_)<o){_=GD(_,n,a)*o,p===a&&(x-=_/2);const w=n.getPixelForDecimal(0),S=n.getPixelForDecimal(1),C=Math.min(w,S),j=Math.max(w,S);x=Math.max(Math.min(x,j),C),y=x+_,r&&!h&&(c._stacks[n.axis]._visualValues[i]=n.getValueForPixel(y)-n.getValueForPixel(x))}if(x===n.getPixelForValue(a)){const w=qr(_)*n.getLineWidthForValue(a)/2;x+=w,_-=w}return{size:_,base:x,head:y,center:y+_/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=Je(i.maxBarThickness,1/0);let a,c;const u=this._getAxisCount();if(n.grouped){const h=s?this._getStackCount(e):n.stackCount,p=i.barThickness==="flex"?YD(e,n,i,h*u):ZD(e,n,i,h*u),m=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,g=this._getAxis().indexOf(Je(m,this.getFirstScaleIdForIndexAxis())),y=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0)+g;a=p.start+p.chunk*y+p.chunk/2,c=Math.min(o,p.chunk*p.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),c=Math.min(o,n.min*n.ratio);return{base:a-c/2,head:a+c/2,center:a,size:c}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}ze(Eu,"id","bar"),ze(Eu,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ze(Eu,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function eR(t,e,n){let r=1,i=1,s=0,o=0;if(e<Dt){const a=t,c=a+e,u=Math.cos(a),h=Math.sin(a),p=Math.cos(c),m=Math.sin(c),g=(S,C,j)=>ql(S,a,c,!0)?1:Math.max(C,C*n,j,j*n),y=(S,C,j)=>ql(S,a,c,!0)?-1:Math.min(C,C*n,j,j*n),_=g(0,u,p),b=g(Xt,h,m),x=y(pt,u,p),w=y(pt+Xt,h,m);r=(_-x)/2,i=(b-w)/2,s=-(_+x)/2,o=-(b+w)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class Qa extends Hs{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=c=>+r[c];if(it(r[e])){const{key:c="value"}=this._parsing;s=u=>+Js(r[u],c)}let o,a;for(o=e,a=e+n;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return di(this.options.rotation-90)}_getCircumference(){return di(this.options.circumference)}_getRotationExtents(){let e=Dt,n=-Dt;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),c=Math.min(lO(this.options.cutout,a),1),u=this._getRingWeight(this.index),{circumference:h,rotation:p}=this._getRotationExtents(),{ratioX:m,ratioY:g,offsetX:y,offsetY:_}=eR(p,h,c),b=(r.width-o)/m,x=(r.height-o)/g,w=Math.max(Math.min(b,x)/2,0),S=Gw(this.options.radius,w),C=Math.max(S*c,0),j=(S-C)/this._getVisibleDatasetWeightTotal();this.offsetX=y*S,this.offsetY=_*S,i.total=this.calculateTotal(),this.outerRadius=S-j*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-j*u,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/Dt)}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,u=o.options.animation,h=(a.left+a.right)/2,p=(a.top+a.bottom)/2,m=s&&u.animateScale,g=m?0:this.innerRadius,y=m?0:this.outerRadius,{sharedOptions:_,includeOptions:b}=this._getSharedOptions(n,i);let x=this._getRotation(),w;for(w=0;w<n;++w)x+=this._circumference(w,s);for(w=n;w<n+r;++w){const S=this._circumference(w,s),C=e[w],j={x:h+this.offsetX,y:p+this.offsetY,startAngle:x,endAngle:x+S,circumference:S,outerRadius:y,innerRadius:g};b&&(j.options=_||this.resolveDataElementOptions(w,C.active?"active":i)),x+=S,this.updateElement(C,w,j,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Dt*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=xg(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,o,a,c;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)c=a.resolveDataElementOptions(i),c.borderAlign!=="inner"&&(n=Math.max(n,c.borderWidth||0,c.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(Je(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ze(Qa,"id","doughnut"),ze(Qa,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ze(Qa,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),ze(Qa,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((c,u)=>{const p=e.getDatasetMeta(0).controller.getStyle(u);return{text:c,fillStyle:p.backgroundColor,fontColor:s,hidden:!e.getDataVisibility(u),lineDash:p.borderDash,lineDashOffset:p.borderDashOffset,lineJoin:p.borderJoinStyle,lineWidth:p.borderWidth,strokeStyle:p.borderColor,textAlign:i,pointStyle:r,borderRadius:o&&(a||p.borderRadius),index:u}}):[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class Cu extends Hs{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:c}=jO(n,i,o);this._drawStart=a,this._drawCount=c,PO(n)&&(a=0,c=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:u},e),this.updateElements(i,a,c,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:h,includeOptions:p}=this._getSharedOptions(n,i),m=o.axis,g=a.axis,{spanGaps:y,segment:_}=this.options,b=Yl(y)?y:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||s||i==="none",w=n+r,S=e.length;let C=n>0&&this.getParsed(n-1);for(let j=0;j<S;++j){const D=e[j],P=x?D:{};if(j<n||j>=w){P.skip=!0;continue}const T=this.getParsed(j),A=ut(T[g]),F=P[m]=o.getPixelForValue(T[m],j),V=P[g]=s||A?a.getBasePixel():a.getPixelForValue(c?this.applyStack(a,T,c):T[g],j);P.skip=isNaN(F)||isNaN(V)||A,P.stop=j>0&&Math.abs(T[m]-C[m])>b,_&&(P.parsed=T,P.raw=u.data[j]),p&&(P.options=h||this.resolveDataElementOptions(j,D.active?"active":i)),x||this.updateElement(D,j,P,i),C=T}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ze(Cu,"id","line"),ze(Cu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ze(Cu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Ss(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Tg{constructor(e){ze(this,"options");this.options=e||{}}static override(e){Object.assign(Tg.prototype,e)}init(){}formats(){return Ss()}parse(){return Ss()}format(){return Ss()}add(){return Ss()}diff(){return Ss()}startOf(){return Ss()}endOf(){return Ss()}}var tR={_date:Tg};function nR(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const u=a._reversePixels?SO:Fs;if(r){if(i._sharedOptions){const h=s[0],p=typeof h.getRange=="function"&&h.getRange(e);if(p){const m=u(s,e,n-p),g=u(s,e,n+p);return{lo:m.lo,hi:g.hi}}}}else{const h=u(s,e,n);if(c){const{vScale:p}=i._cachedMeta,{_parsed:m}=t,g=m.slice(0,h.lo+1).reverse().findIndex(_=>!ut(_[p.axis]));h.lo-=Math.max(0,g);const y=m.slice(h.hi).findIndex(_=>!ut(_[p.axis]));h.hi+=Math.max(0,y)}return h}}return{lo:0,hi:s.length-1}}function Xd(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,c=s.length;a<c;++a){const{index:u,data:h}=s[a],{lo:p,hi:m}=nR(s[a],e,o,i);for(let g=p;g<=m;++g){const y=h[g];y.skip||r(y,u,g)}}}function rR(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function xf(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||Xd(t,n,e,function(a,c,u){!i&&!Gl(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:c,index:u})},!0),s}function iR(t,e,n,r){let i=[];function s(o,a,c){const{startAngle:u,endAngle:h}=o.getProps(["startAngle","endAngle"],r),{angle:p}=Xw(o,{x:e.x,y:e.y});ql(p,u,h)&&i.push({element:o,datasetIndex:a,index:c})}return Xd(t,n,e,s),i}function sR(t,e,n,r,i,s){let o=[];const a=rR(n);let c=Number.POSITIVE_INFINITY;function u(h,p,m){const g=h.inRange(e.x,e.y,i);if(r&&!g)return;const y=h.getCenterPoint(i);if(!(!!s||t.isPointInArea(y))&&!g)return;const b=a(e,y);b<c?(o=[{element:h,datasetIndex:p,index:m}],c=b):b===c&&o.push({element:h,datasetIndex:p,index:m})}return Xd(t,n,e,u),o}function bf(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?iR(t,e,n,i):sR(t,e,n,r,i,s)}function nv(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Xd(t,n,e,(c,u,h)=>{c[o]&&c[o](e[n],i)&&(s.push({element:c,datasetIndex:u,index:h}),a=a||c.inRange(e.x,e.y,i))}),r&&!a?[]:s}var oR={modes:{index(t,e,n,r){const i=js(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?xf(t,i,s,r,o):bf(t,i,s,!1,r,o),c=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const h=a[0].index,p=u.data[h];p&&!p.skip&&c.push({element:p,datasetIndex:u.index,index:h})}),c):[]},dataset(t,e,n,r){const i=js(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?xf(t,i,s,r,o):bf(t,i,s,!1,r,o);if(a.length>0){const c=a[0].datasetIndex,u=t.getDatasetMeta(c).data;a=[];for(let h=0;h<u.length;++h)a.push({element:u[h],datasetIndex:c,index:h})}return a},point(t,e,n,r){const i=js(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return xf(t,i,s,r,o)},nearest(t,e,n,r){const i=js(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return bf(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=js(e,t);return nv(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=js(e,t);return nv(t,i,"y",n.intersect,r)}}};const x2=["left","top","right","bottom"];function Ba(t,e){return t.filter(n=>n.pos===e)}function rv(t,e){return t.filter(n=>x2.indexOf(n.pos)===-1&&n.box.axis===e)}function Ua(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function aR(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function lR(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!x2.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function cR(t,e){const n=lR(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:c}=a.box,u=n[a.stack],h=u&&a.stackWeight/u.weight;a.horizontal?(a.width=h?h*r:c&&e.availableWidth,a.height=i):(a.width=r,a.height=h?h*i:c&&e.availableHeight)}return n}function uR(t){const e=aR(t),n=Ua(e.filter(u=>u.box.fullSize),!0),r=Ua(Ba(e,"left"),!0),i=Ua(Ba(e,"right")),s=Ua(Ba(e,"top"),!0),o=Ua(Ba(e,"bottom")),a=rv(e,"x"),c=rv(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(c).concat(o).concat(a),chartArea:Ba(e,"chartArea"),vertical:r.concat(i).concat(c),horizontal:s.concat(o).concat(a)}}function iv(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function b2(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function dR(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!it(i)){n.size&&(t[i]-=n.size);const p=r[n.stack]||{size:0,count:1};p.size=Math.max(p.size,n.horizontal?s.height:s.width),n.size=p.size/p.count,t[i]+=n.size}s.getPadding&&b2(o,s.getPadding());const a=Math.max(0,e.outerWidth-iv(o,t,"left","right")),c=Math.max(0,e.outerHeight-iv(o,t,"top","bottom")),u=a!==t.w,h=c!==t.h;return t.w=a,t.h=c,n.horizontal?{same:u,other:h}:{same:h,other:u}}function hR(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function fR(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function el(t,e,n,r){const i=[];let s,o,a,c,u,h;for(s=0,o=t.length,u=0;s<o;++s){a=t[s],c=a.box,c.update(a.width||e.w,a.height||e.h,fR(a.horizontal,e));const{same:p,other:m}=dR(e,n,a,r);u|=p&&i.length,h=h||m,c.fullSize||i.push(a)}return u&&el(i,e,n,r)||h}function nu(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function sv(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const c=a.box,u=r[a.stack]||{placed:0,weight:1},h=a.stackWeight/u.weight||1;if(a.horizontal){const p=e.w*h,m=u.size||c.height;Zl(u.start)&&(o=u.start),c.fullSize?nu(c,i.left,o,n.outerWidth-i.right-i.left,m):nu(c,e.left+u.placed,o,p,m),u.start=o,u.placed+=p,o=c.bottom}else{const p=e.h*h,m=u.size||c.width;Zl(u.start)&&(s=u.start),c.fullSize?nu(c,s,i.top,m,n.outerHeight-i.bottom-i.top):nu(c,s,e.top+u.placed,m,p),u.start=s,u.placed+=p,s=c.right}}e.x=s,e.y=o}var hr={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=gr(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=uR(t.boxes),c=a.vertical,u=a.horizontal;ft(t.boxes,_=>{typeof _.beforeLayout=="function"&&_.beforeLayout()});const h=c.reduce((_,b)=>b.box.options&&b.box.options.display===!1?_:_+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),m=Object.assign({},i);b2(m,gr(r));const g=Object.assign({maxPadding:m,w:s,h:o,x:i.left,y:i.top},i),y=cR(c.concat(u),p);el(a.fullSize,g,p,y),el(c,g,p,y),el(u,g,p,y)&&el(c,g,p,y),hR(g),sv(a.leftAndTop,g,p,y),g.x+=g.w,g.y+=g.h,sv(a.rightAndBottom,g,p,y),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},ft(a.chartArea,_=>{const b=_.box;Object.assign(b,t.chartArea),b.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class w2{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class pR extends w2{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Tu="$chartjs",mR={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ov=t=>t===null||t==="";function gR(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[Tu]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",ov(i)){const s=$_(t,"width");s!==void 0&&(t.width=s)}if(ov(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=$_(t,"height");s!==void 0&&(t.height=s)}return t}const S2=_D?{passive:!0}:!1;function yR(t,e,n){t&&t.addEventListener(e,n,S2)}function _R(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,S2)}function vR(t,e){const n=mR[t.type]||t.type,{x:r,y:i}=js(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function yd(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function xR(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||yd(a.addedNodes,r),o=o&&!yd(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function bR(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||yd(a.removedNodes,r),o=o&&!yd(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const Jl=new Map;let av=0;function k2(){const t=window.devicePixelRatio;t!==av&&(av=t,Jl.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function wR(t,e){Jl.size||window.addEventListener("resize",k2),Jl.set(t,e)}function SR(t){Jl.delete(t),Jl.size||window.removeEventListener("resize",k2)}function kR(t,e,n){const r=t.canvas,i=r&&Cg(r);if(!i)return;const s=n2((a,c)=>{const u=i.clientWidth;n(a,c),u<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const c=a[0],u=c.contentRect.width,h=c.contentRect.height;u===0&&h===0||s(u,h)});return o.observe(i),wR(t,s),o}function wf(t,e,n){n&&n.disconnect(),e==="resize"&&SR(t)}function ER(t,e,n){const r=t.canvas,i=n2(s=>{t.ctx!==null&&n(vR(s,t))},t);return yR(r,e,i),i}class CR extends w2{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(gR(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Tu])return!1;const r=n[Tu].initial;["height","width"].forEach(s=>{const o=r[s];ut(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[Tu],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:xR,detach:bR,resize:kR}[n]||ER;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:wf,detach:wf,resize:wf}[n]||_R)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return yD(e,n,r,i)}isAttached(e){const n=e&&Cg(e);return!!(n&&n.isConnected)}}function TR(t){return!Eg()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?pR:CR}var uu;let wi=(uu=class{constructor(){ze(this,"x");ze(this,"y");ze(this,"active",!1);ze(this,"options");ze(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Yl(this.x)&&Yl(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},ze(uu,"defaults",{}),ze(uu,"defaultRoutes"),uu);function jR(t,e){const n=t.options.ticks,r=PR(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?OR(e):[],o=s.length,a=s[0],c=s[o-1],u=[];if(o>i)return DR(e,u,s,o/i),u;const h=AR(s,e,i);if(o>0){let p,m;const g=o>1?Math.round((c-a)/(o-1)):null;for(ru(e,u,h,ut(g)?0:a-g,a),p=0,m=o-1;p<m;p++)ru(e,u,h,s[p],s[p+1]);return ru(e,u,h,c,ut(g)?e.length:c+g),u}return ru(e,u,h),u}function PR(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function AR(t,e,n){const r=RR(t),i=e.length/n;if(!r)return Math.max(i,1);const s=gO(r);for(let o=0,a=s.length-1;o<a;o++){const c=s[o];if(c>i)return c}return Math.max(i,1)}function OR(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function DR(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function ru(t,e,n,r,i){const s=Je(r,0),o=Math.min(Je(i,t.length),t.length);let a=0,c,u,h;for(n=Math.ceil(n),i&&(c=i-r,n=c/Math.floor(c/n)),h=s;h<0;)a++,h=Math.round(s+a*n);for(u=Math.max(s,0);u<o;u++)u===h&&(e.push(t[u]),a++,h=Math.round(s+a*n))}function RR(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const MR=t=>t==="left"?"right":t==="right"?"left":t,lv=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,cv=(t,e)=>Math.min(e||t,t);function uv(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function LR(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let c=t.getPixelForTick(i),u;if(!(n&&(r===1?u=Math.max(c-s,o-c):e===0?u=(t.getPixelForTick(1)-c)/2:u=(c-t.getPixelForTick(i-1))/2,c+=i<e?u:-u,c<s-a||c>o+a)))return c}function IR(t,e){ft(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function Wa(t){return t.drawTicks?t.tickLength:0}function dv(t,e){if(!t.display)return 0;const n=xn(t.font,e),r=gr(t.padding);return(qt(t.text)?t.text.length:1)*n.lineHeight+r.height}function zR(t,e){return io(t,{scale:e,type:"scale"})}function NR(t,e,n){return io(t,{tick:n,index:e,type:"tick"})}function FR(t,e,n){let r=_g(t);return(n&&e!=="right"||!n&&e==="right")&&(r=MR(r)),r}function BR(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:c}=t,{chartArea:u,scales:h}=c;let p=0,m,g,y;const _=o-i,b=a-s;if(t.isHorizontal()){if(g=yn(r,s,a),it(n)){const x=Object.keys(n)[0],w=n[x];y=h[x].getPixelForValue(w)+_-e}else n==="center"?y=(u.bottom+u.top)/2+_-e:y=lv(t,n,e);m=a-s}else{if(it(n)){const x=Object.keys(n)[0],w=n[x];g=h[x].getPixelForValue(w)-b+e}else n==="center"?g=(u.left+u.right)/2-b+e:g=lv(t,n,e);y=yn(r,o,i),p=n==="left"?-Xt:Xt}return{titleX:g,titleY:y,maxWidth:m,rotation:p}}class ma extends wi{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=Br(e,Number.POSITIVE_INFINITY),n=Br(n,Number.NEGATIVE_INFINITY),r=Br(r,Number.POSITIVE_INFINITY),i=Br(i,Number.NEGATIVE_INFINITY),{min:Br(e,r),max:Br(n,i),minDefined:wn(e),maxDefined:wn(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let c=0,u=a.length;c<u;++c)o=a[c].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:Br(n,Br(r,n)),max:Br(r,Br(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){kt(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=GO(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=a<this.ticks.length;this._convertTicksToLabels(c?uv(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=jR(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){kt(this.options.afterUpdate,[this])}beforeSetDimensions(){kt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){kt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),kt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){kt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=kt(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){kt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){kt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=cv(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,c,u;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const h=this._getLabelSizes(),p=h.widest.width,m=h.highest.height,g=vn(this.chart.width-p,0,this.maxWidth);a=e.offset?this.maxWidth/r:g/(r-1),p+6>a&&(a=g/(r-(e.offset?.5:1)),c=this.maxHeight-Wa(e.grid)-n.padding-dv(e.title,this.chart.options.font),u=Math.sqrt(p*p+m*m),o=xO(Math.min(Math.asin(vn((h.highest.height+6)/a,-1,1)),Math.asin(vn(c/u,-1,1))-Math.asin(vn(m/u,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){kt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){kt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const c=dv(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=Wa(s)+c):(e.height=this.maxHeight,e.width=Wa(s)+c),r.display&&this.ticks.length){const{first:u,last:h,widest:p,highest:m}=this._getLabelSizes(),g=r.padding*2,y=di(this.labelRotation),_=Math.cos(y),b=Math.sin(y);if(a){const x=r.mirror?0:b*p.width+_*m.height;e.height=Math.min(this.maxHeight,e.height+x+g)}else{const x=r.mirror?0:_*p.width+b*m.height;e.width=Math.min(this.maxWidth,e.width+x+g)}this._calculatePadding(u,h,b,_)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,c=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,g=0;c?u?(m=i*e.width,g=r*n.height):(m=r*e.height,g=i*n.width):s==="start"?g=n.width:s==="end"?m=e.width:s!=="inner"&&(m=e.width/2,g=n.width/2),this.paddingLeft=Math.max((m-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((g-p+o)*this.width/(this.width-p),0)}else{let h=n.height/2,p=e.height/2;s==="start"?(h=0,p=e.height):s==="end"&&(h=n.height,p=0),this.paddingTop=h+o,this.paddingBottom=p+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){kt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)ut(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=uv(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],c=Math.floor(n/cv(n,r));let u=0,h=0,p,m,g,y,_,b,x,w,S,C,j;for(p=0;p<n;p+=c){if(y=e[p].label,_=this._resolveTickFontOptions(p),i.font=b=_.string,x=s[b]=s[b]||{data:{},gc:[]},w=_.lineHeight,S=C=0,!ut(y)&&!qt(y))S=N_(i,x.data,x.gc,S,y),C=w;else if(qt(y))for(m=0,g=y.length;m<g;++m)j=y[m],!ut(j)&&!qt(j)&&(S=N_(i,x.data,x.gc,S,j),C+=w);o.push(S),a.push(C),u=Math.max(S,u),h=Math.max(C,h)}IR(s,n);const D=o.indexOf(u),P=a.indexOf(h),T=A=>({width:o[A]||0,height:a[A]||0});return{first:T(0),last:T(n-1),widest:T(D),highest:T(P),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return wO(this._alignToPixels?ws(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=NR(this.getContext(),e,r))}return this.$context||(this.$context=zR(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=di(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,c=s?s.highest.height+o:0;return this.isHorizontal()?c*r>a*i?a/r:c/i:c*i<a*r?c/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,c=s.offset,u=this.isHorizontal(),p=this.ticks.length+(c?1:0),m=Wa(s),g=[],y=a.setContext(this.getContext()),_=y.display?y.width:0,b=_/2,x=function($){return ws(r,$,_)};let w,S,C,j,D,P,T,A,F,V,R,B;if(o==="top")w=x(this.bottom),P=this.bottom-m,A=w-b,V=x(e.top)+b,B=e.bottom;else if(o==="bottom")w=x(this.top),V=e.top,B=x(e.bottom)-b,P=w+b,A=this.top+m;else if(o==="left")w=x(this.right),D=this.right-m,T=w-b,F=x(e.left)+b,R=e.right;else if(o==="right")w=x(this.left),F=e.left,R=x(e.right)-b,D=w+b,T=this.left+m;else if(n==="x"){if(o==="center")w=x((e.top+e.bottom)/2+.5);else if(it(o)){const $=Object.keys(o)[0],I=o[$];w=x(this.chart.scales[$].getPixelForValue(I))}V=e.top,B=e.bottom,P=w+b,A=P+m}else if(n==="y"){if(o==="center")w=x((e.left+e.right)/2);else if(it(o)){const $=Object.keys(o)[0],I=o[$];w=x(this.chart.scales[$].getPixelForValue(I))}D=w-b,T=D-m,F=e.left,R=e.right}const E=Je(i.ticks.maxTicksLimit,p),Z=Math.max(1,Math.ceil(p/E));for(S=0;S<p;S+=Z){const $=this.getContext(S),I=s.setContext($),z=a.setContext($),N=I.lineWidth,H=I.color,K=z.dash||[],Y=z.dashOffset,ce=I.tickWidth,ne=I.tickColor,X=I.tickBorderDash||[],_e=I.tickBorderDashOffset;C=LR(this,S,c),C!==void 0&&(j=ws(r,C,N),u?D=T=F=R=j:P=A=V=B=j,g.push({tx1:D,ty1:P,tx2:T,ty2:A,x1:F,y1:V,x2:R,y2:B,width:N,color:H,borderDash:K,borderDashOffset:Y,tickWidth:ce,tickColor:ne,tickBorderDash:X,tickBorderDashOffset:_e}))}return this._ticksLength=p,this._borderValue=w,g}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:u,padding:h,mirror:p}=s,m=Wa(r.grid),g=m+h,y=p?-h:g,_=-di(this.labelRotation),b=[];let x,w,S,C,j,D,P,T,A,F,V,R,B="middle";if(i==="top")D=this.bottom-y,P=this._getXAxisLabelAlignment();else if(i==="bottom")D=this.top+y,P=this._getXAxisLabelAlignment();else if(i==="left"){const Z=this._getYAxisLabelAlignment(m);P=Z.textAlign,j=Z.x}else if(i==="right"){const Z=this._getYAxisLabelAlignment(m);P=Z.textAlign,j=Z.x}else if(n==="x"){if(i==="center")D=(e.top+e.bottom)/2+g;else if(it(i)){const Z=Object.keys(i)[0],$=i[Z];D=this.chart.scales[Z].getPixelForValue($)+g}P=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")j=(e.left+e.right)/2-g;else if(it(i)){const Z=Object.keys(i)[0],$=i[Z];j=this.chart.scales[Z].getPixelForValue($)}P=this._getYAxisLabelAlignment(m).textAlign}n==="y"&&(c==="start"?B="top":c==="end"&&(B="bottom"));const E=this._getLabelSizes();for(x=0,w=a.length;x<w;++x){S=a[x],C=S.label;const Z=s.setContext(this.getContext(x));T=this.getPixelForTick(x)+s.labelOffset,A=this._resolveTickFontOptions(x),F=A.lineHeight,V=qt(C)?C.length:1;const $=V/2,I=Z.color,z=Z.textStrokeColor,N=Z.textStrokeWidth;let H=P;o?(j=T,P==="inner"&&(x===w-1?H=this.options.reverse?"left":"right":x===0?H=this.options.reverse?"right":"left":H="center"),i==="top"?u==="near"||_!==0?R=-V*F+F/2:u==="center"?R=-E.highest.height/2-$*F+F:R=-E.highest.height+F/2:u==="near"||_!==0?R=F/2:u==="center"?R=E.highest.height/2-$*F:R=E.highest.height-V*F,p&&(R*=-1),_!==0&&!Z.showLabelBackdrop&&(j+=F/2*Math.sin(_))):(D=T,R=(1-V)*F/2);let K;if(Z.showLabelBackdrop){const Y=gr(Z.backdropPadding),ce=E.heights[x],ne=E.widths[x];let X=R-Y.top,_e=0-Y.left;switch(B){case"middle":X-=ce/2;break;case"bottom":X-=ce;break}switch(P){case"center":_e-=ne/2;break;case"right":_e-=ne;break;case"inner":x===w-1?_e-=ne:x>0&&(_e-=ne/2);break}K={left:_e,top:X,width:ne+Y.width,height:ce+Y.height,color:Z.backdropColor}}b.push({label:C,font:A,textOffset:R,options:{rotation:_,color:I,strokeColor:z,strokeWidth:N,textAlign:H,textBaseline:B,translation:[j,D],backdrop:K}})}return b}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-di(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,c=o.widest.width;let u,h;return n==="left"?i?(h=this.right+s,r==="near"?u="left":r==="center"?(u="center",h+=c/2):(u="right",h+=c)):(h=this.right-a,r==="near"?u="right":r==="center"?(u="center",h-=c/2):(u="left",h=this.left)):n==="right"?i?(h=this.left+s,r==="near"?u="right":r==="center"?(u="center",h-=c/2):(u="left",h-=c)):(h=this.left+a,r==="near"?u="left":r==="center"?(u="center",h+=c/2):(u="right",h=this.right)):u="right",{textAlign:u,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(c,u,h)=>{!h.width||!h.color||(r.save(),r.lineWidth=h.width,r.strokeStyle=h.color,r.setLineDash(h.borderDash||[]),r.lineDashOffset=h.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(u.x,u.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const c=i[s];n.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),n.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,h,p,m;this.isHorizontal()?(u=ws(e,this.left,o)-o/2,h=ws(e,this.right,a)+a/2,p=m=c):(p=ws(e,this.top,o)-o/2,m=ws(e,this.bottom,a)+a/2,u=h=c),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(u,p),n.lineTo(h,m),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Gd(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,c=o.font,u=o.label,h=o.textOffset;Kl(r,u,0,h,c,a)}i&&Kd(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=xn(r.font),o=gr(r.padding),a=r.align;let c=s.lineHeight/2;n==="bottom"||n==="center"||it(n)?(c+=o.bottom,qt(r.text)&&(c+=s.lineHeight*(r.text.length-1))):c+=o.top;const{titleX:u,titleY:h,maxWidth:p,rotation:m}=BR(this,c,n,a);Kl(e,r.text,0,0,s,{color:r.color,maxWidth:p,rotation:m,textAlign:FR(a,n,i),textBaseline:"middle",translation:[u,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=Je(e.grid&&e.grid.z,-1),i=Je(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==ma.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return xn(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class iu{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;$R(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,UR(e,o,r),this.override&&Bt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in Bt[i]&&(delete Bt[i][r],this.override&&delete Xs[r])}}function UR(t,e,n){const r=Vl(Object.create(null),[n?Bt.get(n):{},Bt.get(e),t.defaults]);Bt.set(e,r),t.defaultRoutes&&WR(e,t.defaultRoutes),t.descriptors&&Bt.describe(e,t.descriptors)}function WR(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),c=o.join(".");Bt.route(s,i,c,a)})}function $R(t){return"id"in t&&"defaults"in t}class HR{constructor(){this.controllers=new iu(Hs,"datasets",!0),this.elements=new iu(wi,"elements"),this.plugins=new iu(Object,"plugins"),this.scales=new iu(ma,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):ft(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=gg(e);kt(r["before"+i],[],r),n[e](r),kt(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var $r=new HR;class VR{constructor(){this._init=void 0}notify(e,n,r,i){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],c=[n,i,s.options];if(kt(a,c,o)===!1&&i.cancelable)return!1}return!0}invalidate(){ut(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=Je(r.options&&r.options.plugins,{}),s=ZR(r);return i===!1&&!n?[]:qR(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(c=>a.plugin.id===c.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function ZR(t){const e={},n=[],r=Object.keys($r.plugins.items);for(let s=0;s<r.length;s++)n.push($r.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function YR(t,e){return!e&&t===!1?null:t===!0?{}:t}function qR(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const c=a.id,u=YR(r[c],i);u!==null&&s.push({plugin:a,options:GR(t.config,{plugin:a,local:n[c]},u,o)})}return s}function GR(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Zp(t,e){const n=Bt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function KR(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function JR(t,e){return t===e?"_index_":"_value_"}function hv(t){if(t==="x"||t==="y"||t==="r")return t}function XR(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Yp(t,...e){if(hv(t))return t;for(const n of e){const r=n.axis||XR(n.position)||t.length>1&&hv(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function fv(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function QR(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return fv(t,"x",n[0])||fv(t,"y",n[0])}return{}}function e5(t,e){const n=Xs[t.type]||{scales:{}},r=e.scales||{},i=Zp(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!it(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=Yp(o,a,QR(o,t),Bt.scales[a.type]),u=JR(c,i),h=n.scales||{};s[o]=ml(Object.create(null),[{axis:c},a,h[c],h[u]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,c=o.indexAxis||Zp(a,e),h=(Xs[a]||{}).scales||{};Object.keys(h).forEach(p=>{const m=KR(p,c),g=o[m+"AxisID"]||m;s[g]=s[g]||Object.create(null),ml(s[g],[{axis:m},r[g],h[p]])})}),Object.keys(s).forEach(o=>{const a=s[o];ml(a,[Bt.scales[a.type],Bt.scale])}),s}function E2(t){const e=t.options||(t.options={});e.plugins=Je(e.plugins,{}),e.scales=e5(t,e)}function C2(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function t5(t){return t=t||{},t.data=C2(t.data),E2(t),t}const pv=new Map,T2=new Set;function su(t,e){let n=pv.get(t);return n||(n=e(),pv.set(t,n),T2.add(n)),n}const $a=(t,e,n)=>{const r=Js(e,n);r!==void 0&&t.add(r)};class n5{constructor(e){this._config=t5(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=C2(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),E2(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return su(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return su(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return su(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return su(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const c=new Set;n.forEach(h=>{e&&(c.add(e),h.forEach(p=>$a(c,e,p))),h.forEach(p=>$a(c,i,p)),h.forEach(p=>$a(c,Xs[s]||{},p)),h.forEach(p=>$a(c,Bt,p)),h.forEach(p=>$a(c,Hp,p))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),T2.has(n)&&o.set(n,u),u}chartOptionScopes(){const{options:e,type:n}=this;return[e,Xs[n]||{},Bt.datasets[n]||{},{type:n},Bt,Hp]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=mv(this._resolverCache,e,i);let c=o;if(i5(o,n)){s.$shared=!1,r=ns(r)?r():r;const u=this.createResolver(e,r,a);c=sa(o,r,u)}for(const u of n)s[u]=c[u];return s}createResolver(e,n,r=[""],i){const{resolver:s}=mv(this._resolverCache,e,r);return it(n)?sa(s,n,void 0,i):s}}function mv(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:wg(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const r5=t=>it(t)&&Object.getOwnPropertyNames(t).some(e=>ns(t[e]));function i5(t,e){const{isScriptable:n,isIndexable:r}=o2(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(ns(a)||r5(a))||o&&qt(a))return!0}return!1}var s5="4.5.1";const o5=["top","bottom","left","right","chartArea"];function gv(t,e){return t==="top"||t==="bottom"||o5.indexOf(t)===-1&&e==="x"}function yv(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function _v(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),kt(n&&n.onComplete,[t],e)}function a5(t){const e=t.chart,n=e.options.animation;kt(n&&n.onProgress,[t],e)}function j2(t){return Eg()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const ju={},vv=t=>{const e=j2(t);return Object.values(ju).filter(n=>n.canvas===e).pop()};function l5(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function c5(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var Ai;let Qd=(Ai=class{static register(...e){$r.add(...e),xv()}static unregister(...e){$r.remove(...e),xv()}constructor(e,n){const r=this.config=new n5(n),i=j2(e),s=vv(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||TR(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),c=a&&a.canvas,u=c&&c.height,h=c&&c.width;if(this.id=aO(),this.ctx=a,this.canvas=c,this.width=h,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new VR,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=CO(p=>this.update(p),o.resizeDelay||0),this._dataChanges=[],ju[this.id]=this,!a||!c){console.error("Failed to create chart: can't acquire context from the given item");return}ri.listen(this,"complete",_v),ri.listen(this,"progress",a5),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return ut(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return $r}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():W_(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return F_(this.canvas,this.ctx),this}stop(){return ri.stop(this),this}resize(e,n){ri.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,W_(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),kt(r.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ft(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],c=Yp(o,a),u=c==="r",h=c==="x";return{options:a,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),ft(s,o=>{const a=o.options,c=a.id,u=Yp(c,a),h=Je(a.type,o.dtype);(a.position===void 0||gv(a.position,u)!==gv(o.dposition))&&(a.position=o.dposition),i[c]=!0;let p=null;if(c in r&&r[c].type===h)p=r[c];else{const m=$r.getScale(h);p=new m({id:c,type:h,ctx:this.ctx,chart:this}),r[p.id]=p}p.init(a,e)}),ft(i,(o,a)=>{o||delete r[a]}),ft(r,o=>{hr.configure(this,o,o.options),hr.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(yv("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||Zp(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const c=$r.getController(a),{datasetElementType:u,dataElementType:h}=Bt.datasets[a];Object.assign(c,{dataElementType:$r.getElement(h),datasetElementType:u&&$r.getElement(u)}),o.controller=new c(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ft(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,h=this.data.datasets.length;u<h;u++){const{controller:p}=this.getDatasetMeta(u),m=!i&&s.indexOf(p)===-1;p.buildOrUpdateElements(m),o=Math.max(+p.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||ft(s,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(yv("z","_idx"));const{_active:a,_lastEvent:c}=this;c?this._eventHandler(c,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ft(this.scales,e=>{hr.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!P_(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;l5(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!P_(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;hr.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],ft(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,ns(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ri.has(this)?this.attached&&!ri.running(this)&&ri.start(this):(this.draw(),_v({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=g2(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&Gd(n,i),e.controller.draw(),i&&Kd(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Gl(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=oR.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=io(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);Zl(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),ri.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),F_(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete ju[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};ft(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(c,u)=>{n.addEventListener(this,c,u),e[c]=u},i=(c,u)=>{e[c]&&(n.removeEventListener(this,c,u),delete e[c])},s=(c,u)=>{this.canvas&&this.resize(c,u)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){ft(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ft(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,c;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,c=e.length;a<c;++a){o=e[a];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!hd(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(c,u)=>c.filter(h=>!u.some(p=>h.datasetIndex===p.datasetIndex&&h.index===p.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),c=fO(e),u=c5(e,this._lastEvent,r,c);r&&(this._lastEvent=null,kt(s.onHover,[e,a,this],this),c&&kt(s.onClick,[e,a,this],this));const h=!hd(a,i);return(h||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=u,h}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}},ze(Ai,"defaults",Bt),ze(Ai,"instances",ju),ze(Ai,"overrides",Xs),ze(Ai,"registry",$r),ze(Ai,"version",s5),ze(Ai,"getChart",vv),Ai);function xv(){return ft(Qd.instances,t=>t._plugins.invalidate())}function u5(t,e,n){const{startAngle:r,x:i,y:s,outerRadius:o,innerRadius:a,options:c}=e,{borderWidth:u,borderJoinStyle:h}=c,p=Math.min(u/o,Kn(r-n));if(t.beginPath(),t.arc(i,s,o-u/2,r+p/2,n-p/2),a>0){const m=Math.min(u/a,Kn(r-n));t.arc(i,s,a+u/2,n-m/2,r+m/2,!0)}else{const m=Math.min(u/2,o*Kn(r-n));if(h==="round")t.arc(i,s,m,n-pt/2,r+pt/2,!0);else if(h==="bevel"){const g=2*m*m,y=-g*Math.cos(n+pt/2)+i,_=-g*Math.sin(n+pt/2)+s,b=g*Math.cos(r+pt/2)+i,x=g*Math.sin(r+pt/2)+s;t.lineTo(y,_),t.lineTo(b,x)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function d5(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:c}=e;let u=i/a;t.beginPath(),t.arc(s,o,a,r-u,n+u),c>i?(u=i/c,t.arc(s,o,c,n+u,r-u,!0)):t.arc(s,o,i,n+Xt,r-Xt),t.closePath(),t.clip()}function h5(t){return bg(t,["outerStart","outerEnd","innerStart","innerEnd"])}function f5(t,e,n,r){const i=h5(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,r*e/2),a=c=>{const u=(n-Math.min(s,c))*r/2;return vn(c,0,Math.min(s,u))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:vn(i.innerStart,0,o),innerEnd:vn(i.innerEnd,0,o)}}function So(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function _d(t,e,n,r,i,s){const{x:o,y:a,startAngle:c,pixelMargin:u,innerRadius:h}=e,p=Math.max(e.outerRadius+r+n-u,0),m=h>0?h+r+n+u:0;let g=0;const y=i-c;if(r){const Z=h>0?h-r:0,$=p>0?p-r:0,I=(Z+$)/2,z=I!==0?y*I/(I+r):y;g=(y-z)/2}const _=Math.max(.001,y*p-n/pt)/p,b=(y-_)/2,x=c+b+g,w=i-b-g,{outerStart:S,outerEnd:C,innerStart:j,innerEnd:D}=f5(e,m,p,w-x),P=p-S,T=p-C,A=x+S/P,F=w-C/T,V=m+j,R=m+D,B=x+j/V,E=w-D/R;if(t.beginPath(),s){const Z=(A+F)/2;if(t.arc(o,a,p,A,Z),t.arc(o,a,p,Z,F),C>0){const N=So(T,F,o,a);t.arc(N.x,N.y,C,F,w+Xt)}const $=So(R,w,o,a);if(t.lineTo($.x,$.y),D>0){const N=So(R,E,o,a);t.arc(N.x,N.y,D,w+Xt,E+Math.PI)}const I=(w-D/m+(x+j/m))/2;if(t.arc(o,a,m,w-D/m,I,!0),t.arc(o,a,m,I,x+j/m,!0),j>0){const N=So(V,B,o,a);t.arc(N.x,N.y,j,B+Math.PI,x-Xt)}const z=So(P,x,o,a);if(t.lineTo(z.x,z.y),S>0){const N=So(P,A,o,a);t.arc(N.x,N.y,S,x-Xt,A)}}else{t.moveTo(o,a);const Z=Math.cos(A)*p+o,$=Math.sin(A)*p+a;t.lineTo(Z,$);const I=Math.cos(F)*p+o,z=Math.sin(F)*p+a;t.lineTo(I,z)}t.closePath()}function p5(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let c=e.endAngle;if(s){_d(t,e,n,r,c,i);for(let u=0;u<s;++u)t.fill();isNaN(a)||(c=o+(a%Dt||Dt))}return _d(t,e,n,r,c,i),t.fill(),c}function m5(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:c}=e,{borderWidth:u,borderJoinStyle:h,borderDash:p,borderDashOffset:m,borderRadius:g}=c,y=c.borderAlign==="inner";if(!u)return;t.setLineDash(p||[]),t.lineDashOffset=m,y?(t.lineWidth=u*2,t.lineJoin=h||"round"):(t.lineWidth=u,t.lineJoin=h||"bevel");let _=e.endAngle;if(s){_d(t,e,n,r,_,i);for(let b=0;b<s;++b)t.stroke();isNaN(a)||(_=o+(a%Dt||Dt))}y&&d5(t,e,_),c.selfJoin&&_-o>=pt&&g===0&&h!=="miter"&&u5(t,e,_),s||(_d(t,e,n,r,_,i),t.stroke())}class tl extends wi{constructor(n){super();ze(this,"circumference");ze(this,"endAngle");ze(this,"fullCircles");ze(this,"innerRadius");ze(this,"outerRadius");ze(this,"pixelMargin");ze(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:a}=Xw(s,{x:n,y:r}),{startAngle:c,endAngle:u,innerRadius:h,outerRadius:p,circumference:m}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),g=(this.options.spacing+this.options.borderWidth)/2,y=Je(m,u-c),_=ql(o,c,u)&&c!==u,b=y>=Dt||_,x=hi(a,h+g,p+g);return b&&x}getCenterPoint(n){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:a,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:u,spacing:h}=this.options,p=(s+o)/2,m=(a+c+h+u)/2;return{x:r+Math.cos(p)*m,y:i+Math.sin(p)*m}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>Dt?Math.floor(i/Dt):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const c=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(c)*s,Math.sin(c)*s);const u=1-Math.sin(Math.min(pt,i||0)),h=s*u;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,p5(n,this,h,o,a),m5(n,this,h,o,a),n.restore()}}ze(tl,"id","arc"),ze(tl,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),ze(tl,"defaultRoutes",{backgroundColor:"backgroundColor"}),ze(tl,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function P2(t,e,n=e){t.lineCap=Je(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Je(n.borderDash,e.borderDash)),t.lineDashOffset=Je(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Je(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Je(n.borderWidth,e.borderWidth),t.strokeStyle=Je(n.borderColor,e.borderColor)}function g5(t,e,n){t.lineTo(n.x,n.y)}function y5(t){return t.stepped?BO:t.tension||t.cubicInterpolationMode==="monotone"?UO:g5}function A2(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,c=Math.max(i,o),u=Math.min(s,a),h=i<o&&s<o||i>a&&s>a;return{count:r,start:c,loop:e.loop,ilen:u<c&&!h?r+u-c:u-c}}function _5(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:c,ilen:u}=A2(i,n,r),h=y5(s);let{move:p=!0,reverse:m}=r||{},g,y,_;for(g=0;g<=u;++g)y=i[(a+(m?u-g:g))%o],!y.skip&&(p?(t.moveTo(y.x,y.y),p=!1):h(t,_,y,m,s.stepped),_=y);return c&&(y=i[(a+(m?u:0))%o],h(t,_,y,m,s.stepped)),!!c}function v5(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=A2(i,n,r),{move:c=!0,reverse:u}=r||{};let h=0,p=0,m,g,y,_,b,x;const w=C=>(o+(u?a-C:C))%s,S=()=>{_!==b&&(t.lineTo(h,b),t.lineTo(h,_),t.lineTo(h,x))};for(c&&(g=i[w(0)],t.moveTo(g.x,g.y)),m=0;m<=a;++m){if(g=i[w(m)],g.skip)continue;const C=g.x,j=g.y,D=C|0;D===y?(j<_?_=j:j>b&&(b=j),h=(p*h+C)/++p):(S(),t.lineTo(C,j),y=D,p=0,_=b=j),x=j}S()}function qp(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?v5:_5}function x5(t){return t.stepped?vD:t.tension||t.cubicInterpolationMode==="monotone"?xD:Ps}function b5(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),P2(t,e.options),t.stroke(i)}function w5(t,e,n,r){const{segments:i,options:s}=e,o=qp(e);for(const a of i)P2(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const S5=typeof Path2D=="function";function k5(t,e,n,r){S5&&!e.options.segment?b5(t,e,n,r):w5(t,e,n,r)}class $i extends wi{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;dD(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=CD(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=m2(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],c=x5(r);let u,h;for(u=0,h=o.length;u<h;++u){const{start:p,end:m}=o[u],g=s[p],y=s[m];if(g===y){a.push(g);continue}const _=Math.abs((i-g[n])/(y[n]-g[n])),b=c(g,y,_,r.stepped);b[n]=e[n],a.push(b)}return a.length===1?a[0]:a}pathSegment(e,n,r){return qp(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=qp(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),k5(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ze($i,"id","line"),ze($i,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ze($i,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ze($i,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function bv(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class Pu extends wi{constructor(n){super();ze(this,"parsed");ze(this,"skip");ze(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return bv(this,n,"x",r)}inYRange(n,r){return bv(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!Gl(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,Vp(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ze(Pu,"id","point"),ze(Pu,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ze(Pu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function O2(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,c,u,h,p;return t.horizontal?(p=o/2,a=Math.min(n,i),c=Math.max(n,i),u=r-p,h=r+p):(p=s/2,a=n-p,c=n+p,u=Math.min(r,i),h=Math.max(r,i)),{left:a,top:u,right:c,bottom:h}}function Hi(t,e,n,r){return t?0:vn(e,n,r)}function E5(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=s2(r);return{t:Hi(i.top,s.top,0,n),r:Hi(i.right,s.right,0,e),b:Hi(i.bottom,s.bottom,0,n),l:Hi(i.left,s.left,0,e)}}function C5(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=Yo(i),o=Math.min(e,n),a=t.borderSkipped,c=r||it(i);return{topLeft:Hi(!c||a.top||a.left,s.topLeft,0,o),topRight:Hi(!c||a.top||a.right,s.topRight,0,o),bottomLeft:Hi(!c||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Hi(!c||a.bottom||a.right,s.bottomRight,0,o)}}function T5(t){const e=O2(t),n=e.right-e.left,r=e.bottom-e.top,i=E5(t,n/2,r/2),s=C5(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function Sf(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&O2(t,r);return a&&(i||hi(e,a.left,a.right))&&(s||hi(n,a.top,a.bottom))}function j5(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function P5(t,e){t.rect(e.x,e.y,e.w,e.h)}function kf(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class Au extends wi{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=T5(this),a=j5(o.radius)?md:P5;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,kf(o,n,s)),e.clip(),a(e,kf(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,kf(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return Sf(this,e,n,r)}inXRange(e,n){return Sf(this,e,null,n)}inYRange(e,n){return Sf(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}ze(Au,"id","bar"),ze(Au,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ze(Au,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function A5(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const a of r){let{start:c,end:u}=a;u=eh(c,u,i);const h=Gp(n,i[c],i[u],a.loop);if(!e.segments){o.push({source:a,target:h,start:i[c],end:i[u]});continue}const p=m2(e,h);for(const m of p){const g=Gp(n,s[m.start],s[m.end],m.loop),y=p2(a,i,g);for(const _ of y)o.push({source:_,target:m,start:{[n]:wv(h,g,"start",Math.max)},end:{[n]:wv(h,g,"end",Math.min)}})}}return o}function Gp(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=Kn(i),s=Kn(s)),{property:t,start:i,end:s}}function O5(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=eh(o,a,i);const c=i[o],u=i[a];r!==null?(s.push({x:c.x,y:r}),s.push({x:u.x,y:r})):n!==null&&(s.push({x:n,y:c.y}),s.push({x:n,y:u.y}))}),s}function eh(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function wv(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function D2(t,e){let n=[],r=!1;return qt(t)?(r=!0,n=t):n=O5(t,e),n.length?new $i({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function Sv(t){return t&&t.fill!==!1}function D5(t,e,n){let i=t[e].fill;const s=[e];let o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!wn(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function R5(t,e,n){const r=z5(t);if(it(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return wn(i)&&Math.floor(i)===i?M5(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function M5(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function L5(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:it(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function I5(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:it(t)?r=t.value:r=e.getBaseValue(),r}function z5(t){const e=t.options,n=e.fill;let r=Je(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function N5(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=F5(e,n);a.push(D2({x:null,y:e.bottom},r));for(let c=0;c<s.length;c++){const u=s[c];for(let h=u.start;h<=u.end;h++)B5(i,o[h],a)}return new $i({points:i,options:{}})}function F5(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function B5(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:c}=U5(s,e,"x");if(!(!c||o&&a)){if(o)r.unshift(c);else if(t.push(c),!a)break}}t.push(...r)}function U5(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,c=!1;for(let u=0;u<s.length;u++){const h=s[u],p=o[h.start][n],m=o[h.end][n];if(hi(i,p,m)){a=i===p,c=i===m;break}}return{first:a,last:c,point:r}}class R2{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:o}=this;return n=n||{start:0,end:Dt},e.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function W5(t){const{chart:e,fill:n,line:r}=t;if(wn(n))return $5(e,n);if(n==="stack")return N5(t);if(n==="shape")return!0;const i=H5(t);return i instanceof R2?i:D2(i,r)}function $5(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function H5(t){return(t.scale||{}).getPointPositionForValue?Z5(t):V5(t)}function V5(t){const{scale:e={},fill:n}=t,r=L5(n,e);if(wn(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function Z5(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=I5(n,e,s),a=[];if(r.grid.circular){const c=e.getPointPositionForValue(0,s);return new R2({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<i;++c)a.push(e.getPointPositionForValue(c,o));return a}function Ef(t,e,n){const r=W5(e),{chart:i,index:s,line:o,scale:a,axis:c}=e,u=o.options,h=u.fill,p=u.backgroundColor,{above:m=p,below:g=p}=h||{},y=i.getDatasetMeta(s),_=g2(i,y);r&&o.points.length&&(Gd(t,n),Y5(t,{line:o,target:r,above:m,below:g,area:n,scale:a,axis:c,clip:_}),Kd(t))}function Y5(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a,clip:c}=e,u=n._loop?"angle":e.axis;t.save();let h=s;s!==i&&(u==="x"?(kv(t,r,o.top),Cf(t,{line:n,target:r,color:i,scale:a,property:u,clip:c}),t.restore(),t.save(),kv(t,r,o.bottom)):u==="y"&&(Ev(t,r,o.left),Cf(t,{line:n,target:r,color:s,scale:a,property:u,clip:c}),t.restore(),t.save(),Ev(t,r,o.right),h=i)),Cf(t,{line:n,target:r,color:h,scale:a,property:u,clip:c}),t.restore()}function kv(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:c,end:u}=a,h=i[c],p=i[eh(c,u,i)];s?(t.moveTo(h.x,h.y),s=!1):(t.lineTo(h.x,n),t.lineTo(h.x,h.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(p.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function Ev(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:c,end:u}=a,h=i[c],p=i[eh(c,u,i)];s?(t.moveTo(h.x,h.y),s=!1):(t.lineTo(n,h.y),t.lineTo(h.x,h.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(n,p.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function Cf(t,e){const{line:n,target:r,property:i,color:s,scale:o,clip:a}=e,c=A5(n,r,i);for(const{source:u,target:h,start:p,end:m}of c){const{style:{backgroundColor:g=s}={}}=u,y=r!==!0;t.save(),t.fillStyle=g,q5(t,o,a,y&&Gp(i,p,m)),t.beginPath();const _=!!n.pathSegment(t,u);let b;if(y){_?t.closePath():Cv(t,r,m,i);const x=!!r.pathSegment(t,h,{move:_,reverse:!0});b=_&&x,b||Cv(t,r,p,i)}t.closePath(),t.fill(b?"evenodd":"nonzero"),t.restore()}}function q5(t,e,n,r){const i=e.chart.chartArea,{property:s,start:o,end:a}=r||{};if(s==="x"||s==="y"){let c,u,h,p;s==="x"?(c=o,u=i.top,h=a,p=i.bottom):(c=i.left,u=o,h=i.right,p=a),t.beginPath(),n&&(c=Math.max(c,n.left),h=Math.min(h,n.right),u=Math.max(u,n.top),p=Math.min(p,n.bottom)),t.rect(c,u,h-c,p-u),t.clip()}}function Cv(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var G5={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,c;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,c=null,a&&a.options&&a instanceof $i&&(c={visible:t.isDatasetVisible(o),index:o,fill:R5(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=c,i.push(c);for(o=0;o<r;++o)c=i[o],!(!c||c.fill===!1)&&(c.fill=D5(i,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&Ef(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;Sv(s)&&Ef(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!Sv(r)||n.drawTime!=="beforeDatasetDraw"||Ef(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Tv=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},K5=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class jv extends wi{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=kt(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=xn(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=Tv(r,s);let u,h;n.font=i.string,this.isHorizontal()?(u=this.maxWidth,h=this._fitRows(o,s,a,c)+10):(h=this.maxHeight,u=this._fitCols(o,i,a,c)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],u=this.lineWidths=[0],h=i+a;let p=e;s.textAlign="left",s.textBaseline="middle";let m=-1,g=-h;return this.legendItems.forEach((y,_)=>{const b=r+n/2+s.measureText(y.text).width;(_===0||u[u.length-1]+b+2*a>o)&&(p+=h,u[u.length-(_>0?0:1)]=0,g+=h,m++),c[_]={left:0,top:g,row:m,width:b,height:i},u[u.length-1]+=b+a}),p}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],u=this.columnSizes=[],h=o-e;let p=a,m=0,g=0,y=0,_=0;return this.legendItems.forEach((b,x)=>{const{itemWidth:w,itemHeight:S}=J5(r,n,s,b,i);x>0&&g+S+2*a>h&&(p+=m+a,u.push({width:m,height:g}),y+=m+a,_++,m=g=0),c[x]={left:y,top:g,col:_,width:w,height:S},m=Math.max(m,w),g+=S+a}),p+=m,u.push({width:m,height:g}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=qo(s,this.left,this.width);if(this.isHorizontal()){let a=0,c=yn(r,this.left+i,this.right-this.lineWidths[a]);for(const u of n)a!==u.row&&(a=u.row,c=yn(r,this.left+i,this.right-this.lineWidths[a])),u.top+=this.top+e+i,u.left=o.leftForLtr(o.x(c),u.width),c+=u.width+i}else{let a=0,c=yn(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const u of n)u.col!==a&&(a=u.col,c=yn(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),u.top=c,u.left+=this.left+i,u.left=o.leftForLtr(o.x(u.left),u.width),c+=u.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Gd(e,this),this._draw(),Kd(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=Bt.color,c=qo(e.rtl,this.left,this.width),u=xn(o.font),{padding:h}=o,p=u.size,m=p/2;let g;this.drawTitle(),i.textAlign=c.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=u.string;const{boxWidth:y,boxHeight:_,itemHeight:b}=Tv(o,p),x=function(D,P,T){if(isNaN(y)||y<=0||isNaN(_)||_<0)return;i.save();const A=Je(T.lineWidth,1);if(i.fillStyle=Je(T.fillStyle,a),i.lineCap=Je(T.lineCap,"butt"),i.lineDashOffset=Je(T.lineDashOffset,0),i.lineJoin=Je(T.lineJoin,"miter"),i.lineWidth=A,i.strokeStyle=Je(T.strokeStyle,a),i.setLineDash(Je(T.lineDash,[])),o.usePointStyle){const F={radius:_*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:A},V=c.xPlus(D,y/2),R=P+m;i2(i,F,V,R,o.pointStyleWidth&&y)}else{const F=P+Math.max((p-_)/2,0),V=c.leftForLtr(D,y),R=Yo(T.borderRadius);i.beginPath(),Object.values(R).some(B=>B!==0)?md(i,{x:V,y:F,w:y,h:_,radius:R}):i.rect(V,F,y,_),i.fill(),A!==0&&i.stroke()}i.restore()},w=function(D,P,T){Kl(i,T.text,D,P+b/2,u,{strikethrough:T.hidden,textAlign:c.textAlign(T.textAlign)})},S=this.isHorizontal(),C=this._computeTitleHeight();S?g={x:yn(s,this.left+h,this.right-r[0]),y:this.top+h+C,line:0}:g={x:this.left+h,y:yn(s,this.top+C+h,this.bottom-n[0].height),line:0},d2(this.ctx,e.textDirection);const j=b+h;this.legendItems.forEach((D,P)=>{i.strokeStyle=D.fontColor,i.fillStyle=D.fontColor;const T=i.measureText(D.text).width,A=c.textAlign(D.textAlign||(D.textAlign=o.textAlign)),F=y+m+T;let V=g.x,R=g.y;c.setWidth(this.width),S?P>0&&V+F+h>this.right&&(R=g.y+=j,g.line++,V=g.x=yn(s,this.left+h,this.right-r[g.line])):P>0&&R+j>this.bottom&&(V=g.x=V+n[g.line].width+h,g.line++,R=g.y=yn(s,this.top+C+h,this.bottom-n[g.line].height));const B=c.x(V);if(x(B,R,D),V=TO(A,V+y+m,S?V+F:this.right,e.rtl),w(c.x(V),R,D),S)g.x+=F+h;else if(typeof D.text!="string"){const E=u.lineHeight;g.y+=M2(D,E)+h}else g.y+=j}),h2(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=xn(n.font),i=gr(n.padding);if(!n.display)return;const s=qo(e.rtl,this.left,this.width),o=this.ctx,a=n.position,c=r.size/2,u=i.top+c;let h,p=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),h=this.top+u,p=yn(e.align,p,this.right-m);else{const y=this.columnSizes.reduce((_,b)=>Math.max(_,b.height),0);h=u+yn(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const g=yn(a,p,p+m);o.textAlign=s.textAlign(_g(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Kl(o,n.text,g,h,r)}_computeTitleHeight(){const e=this.options.title,n=xn(e.font),r=gr(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(hi(e,this.left,this.right)&&hi(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],hi(e,i.left,i.left+i.width)&&hi(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!eM(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=K5(i,r);i&&!s&&kt(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&kt(n.onHover,[e,r,this],this)}else r&&kt(n.onClick,[e,r,this],this)}}function J5(t,e,n,r,i){const s=X5(r,t,e,n),o=Q5(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function X5(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function Q5(t,e,n){let r=t;return typeof e.text!="string"&&(r=M2(e,n)),r}function M2(t,e){const n=t.text?t.text.length:0;return e*n}function eM(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var tM={id:"legend",_element:jv,start(t,e,n){const r=t.legend=new jv({ctx:t.ctx,options:n,chart:t});hr.configure(t,r,n),hr.addBox(t,r)},stop(t){hr.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;hr.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{const u=c.controller.getStyle(n?0:void 0),h=gr(u.borderWidth);return{text:e[c.index].label,fillStyle:u.backgroundColor,fontColor:s,hidden:!c.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:u.borderColor,pointStyle:r||u.pointStyle,rotation:u.rotation,textAlign:i||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class L2 extends wi{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=qt(r.text)?r.text.length:1;this._padding=gr(r.padding);const s=i*xn(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let c=0,u,h,p;return this.isHorizontal()?(h=yn(a,r,s),p=n+e,u=s-r):(o.position==="left"?(h=r+e,p=yn(a,i,n),c=pt*-.5):(h=s-e,p=yn(a,n,i),c=pt*.5),u=i-n),{titleX:h,titleY:p,maxWidth:u,rotation:c}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=xn(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:c,rotation:u}=this._drawArgs(s);Kl(e,n.text,0,0,r,{color:n.color,maxWidth:c,rotation:u,textAlign:_g(n.align),textBaseline:"middle",translation:[o,a]})}}function nM(t,e){const n=new L2({ctx:t.ctx,options:e,chart:t});hr.configure(t,n,e),hr.addBox(t,n),t.titleBlock=n}var rM={id:"title",_element:L2,start(t,e,n){nM(t,n)},stop(t){const e=t.titleBlock;hr.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;hr.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const nl={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const c=a.tooltipPosition();r.add(c.x),i+=c.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,c)=>a+c)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const c=t[s].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),h=$p(e,u);h<i&&(i=h,a=c)}}if(a){const c=a.tooltipPosition();n=c.x,r=c.y}return{x:n,y:r}}};function Ur(t,e){return e&&(qt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function ii(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function iM(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function Pv(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,c=xn(e.bodyFont),u=xn(e.titleFont),h=xn(e.footerFont),p=s.length,m=i.length,g=r.length,y=gr(e.padding);let _=y.height,b=0,x=r.reduce((C,j)=>C+j.before.length+j.lines.length+j.after.length,0);if(x+=t.beforeBody.length+t.afterBody.length,p&&(_+=p*u.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),x){const C=e.displayColors?Math.max(a,c.lineHeight):c.lineHeight;_+=g*C+(x-g)*c.lineHeight+(x-1)*e.bodySpacing}m&&(_+=e.footerMarginTop+m*h.lineHeight+(m-1)*e.footerSpacing);let w=0;const S=function(C){b=Math.max(b,n.measureText(C).width+w)};return n.save(),n.font=u.string,ft(t.title,S),n.font=c.string,ft(t.beforeBody.concat(t.afterBody),S),w=e.displayColors?o+2+e.boxPadding:0,ft(r,C=>{ft(C.before,S),ft(C.lines,S),ft(C.after,S)}),w=0,n.font=h.string,ft(t.footer,S),n.restore(),b+=y.width,{width:b,height:_}}function sM(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function oM(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function aM(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:c}}=t;let u="center";return r==="center"?u=i<=(a+c)/2?"left":"right":i<=s/2?u="left":i>=o-s/2&&(u="right"),oM(u,t,e,n)&&(u="center"),u}function Av(t,e,n){const r=n.yAlign||e.yAlign||sM(t,n);return{xAlign:n.xAlign||e.xAlign||aM(t,e,n,r),yAlign:r}}function lM(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function cM(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function Ov(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:c}=n,u=i+s,{topLeft:h,topRight:p,bottomLeft:m,bottomRight:g}=Yo(o);let y=lM(e,a);const _=cM(e,c,u);return c==="center"?a==="left"?y+=u:a==="right"&&(y-=u):a==="left"?y-=Math.max(h,m)+i:a==="right"&&(y+=Math.max(p,g)+i),{x:vn(y,0,r.width-e.width),y:vn(_,0,r.height-e.height)}}function ou(t,e,n){const r=gr(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function Dv(t){return Ur([],ii(t))}function uM(t,e,n){return io(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Rv(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const I2={beforeTitle:ni,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:ni,beforeBody:ni,beforeLabel:ni,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return ut(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ni,afterBody:ni,beforeFooter:ni,footer:ni,afterFooter:ni};function Ln(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?I2[e].call(n,r):i}class Kp extends wi{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new y2(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=uM(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=Ln(r,"beforeTitle",this,e),s=Ln(r,"title",this,e),o=Ln(r,"afterTitle",this,e);let a=[];return a=Ur(a,ii(i)),a=Ur(a,ii(s)),a=Ur(a,ii(o)),a}getBeforeBody(e,n){return Dv(Ln(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return ft(e,s=>{const o={before:[],lines:[],after:[]},a=Rv(r,s);Ur(o.before,ii(Ln(a,"beforeLabel",this,s))),Ur(o.lines,Ln(a,"label",this,s)),Ur(o.after,ii(Ln(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return Dv(Ln(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=Ln(r,"beforeFooter",this,e),s=Ln(r,"footer",this,e),o=Ln(r,"afterFooter",this,e);let a=[];return a=Ur(a,ii(i)),a=Ur(a,ii(s)),a=Ur(a,ii(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],c,u;for(c=0,u=n.length;c<u;++c)a.push(iM(this.chart,n[c]));return e.filter&&(a=a.filter((h,p,m)=>e.filter(h,p,m,r))),e.itemSort&&(a=a.sort((h,p)=>e.itemSort(h,p,r))),ft(a,h=>{const p=Rv(e.callbacks,h);i.push(Ln(p,"labelColor",this,h)),s.push(Ln(p,"labelPointStyle",this,h)),o.push(Ln(p,"labelTextColor",this,h))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=nl[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const c=this._size=Pv(this,r),u=Object.assign({},a,c),h=Av(this.chart,r,u),p=Ov(r,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:p.x,y:p.y,width:c.width,height:c.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:c,topRight:u,bottomLeft:h,bottomRight:p}=Yo(a),{x:m,y:g}=e,{width:y,height:_}=n;let b,x,w,S,C,j;return s==="center"?(C=g+_/2,i==="left"?(b=m,x=b-o,S=C+o,j=C-o):(b=m+y,x=b+o,S=C-o,j=C+o),w=b):(i==="left"?x=m+Math.max(c,h)+o:i==="right"?x=m+y-Math.max(u,p)-o:x=this.caretX,s==="top"?(S=g,C=S-o,b=x-o,w=x+o):(S=g+_,C=S+o,b=x+o,w=x-o),j=S),{x1:b,x2:x,x3:w,y1:S,y2:C,y3:j}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,c;if(s){const u=qo(r.rtl,this.x,this.width);for(e.x=ou(this,r.titleAlign,r),n.textAlign=u.textAlign(r.titleAlign),n.textBaseline="middle",o=xn(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,c=0;c<s;++c)n.fillText(i[c],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,c+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:c,boxWidth:u}=s,h=xn(s.bodyFont),p=ou(this,"left",s),m=i.x(p),g=c<h.lineHeight?(h.lineHeight-c)/2:0,y=n.y+g;if(s.usePointStyle){const _={radius:Math.min(u,c)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},b=i.leftForLtr(m,u)+u/2,x=y+c/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Vp(e,_,b,x),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Vp(e,_,b,x)}else{e.lineWidth=it(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const _=i.leftForLtr(m,u),b=i.leftForLtr(i.xPlus(m,1),u-2),x=Yo(o.borderRadius);Object.values(x).some(w=>w!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,md(e,{x:_,y,w:u,h:c,radius:x}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),md(e,{x:b,y:y+1,w:u-2,h:c-2,radius:x}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(_,y,u,c),e.strokeRect(_,y,u,c),e.fillStyle=o.backgroundColor,e.fillRect(b,y+1,u-2,c-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:c,boxWidth:u,boxPadding:h}=r,p=xn(r.bodyFont);let m=p.lineHeight,g=0;const y=qo(r.rtl,this.x,this.width),_=function(T){n.fillText(T,y.x(e.x+g),e.y+m/2),e.y+=m+s},b=y.textAlign(o);let x,w,S,C,j,D,P;for(n.textAlign=o,n.textBaseline="middle",n.font=p.string,e.x=ou(this,b,r),n.fillStyle=r.bodyColor,ft(this.beforeBody,_),g=a&&b!=="right"?o==="center"?u/2+h:u+2+h:0,C=0,D=i.length;C<D;++C){for(x=i[C],w=this.labelTextColors[C],n.fillStyle=w,ft(x.before,_),S=x.lines,a&&S.length&&(this._drawColorBox(n,e,C,y,r),m=Math.max(p.lineHeight,c)),j=0,P=S.length;j<P;++j)_(S[j]),m=p.lineHeight;ft(x.after,_)}g=0,m=p.lineHeight,ft(this.afterBody,_),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const c=qo(r.rtl,this.x,this.width);for(e.x=ou(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=c.textAlign(r.footerAlign),n.textBaseline="middle",o=xn(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:c}=e,{width:u,height:h}=r,{topLeft:p,topRight:m,bottomLeft:g,bottomRight:y}=Yo(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+p,c),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+u-m,c),n.quadraticCurveTo(a+u,c,a+u,c+m),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+u,c+h-y),n.quadraticCurveTo(a+u,c+h,a+u-y,c+h),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+g,c+h),n.quadraticCurveTo(a,c+h,a,c+h-g),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,c+p),n.quadraticCurveTo(a,c,a+p,c),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=nl[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Pv(this,e),c=Object.assign({},o,this._size),u=Av(n,e,c),h=Ov(e,c,u,n);(i._to!==h.x||s._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=gr(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),d2(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),h2(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:c})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[c],index:c}}),s=!hd(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),c=n||!hd(o,s)||a;return c&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),c}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=nl[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}ze(Kp,"positioners",nl);var dM={id:"tooltip",_element:Kp,positioners:nl,afterInit(t,e,n){n&&(t.tooltip=new Kp({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:I2},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const hM=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function fM(t,e,n,r){const i=t.indexOf(e);if(i===-1)return hM(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const pM=(t,e)=>t===null?null:vn(Math.round(t),0,e);function Mv(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Jp extends ma{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(ut(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:fM(r,e,Je(n,e),this._addedLabels),pM(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return Mv.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ze(Jp,"id","category"),ze(Jp,"defaults",{ticks:{callback:Mv}});function mM(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:c,count:u,maxTicks:h,maxDigits:p,includeBounds:m}=t,g=s||1,y=h-1,{min:_,max:b}=e,x=!ut(o),w=!ut(a),S=!ut(u),C=(b-_)/(p+1);let j=O_((b-_)/y/g)*g,D,P,T,A;if(j<1e-14&&!x&&!w)return[{value:_},{value:b}];A=Math.ceil(b/j)-Math.floor(_/j),A>y&&(j=O_(A*j/y/g)*g),ut(c)||(D=Math.pow(10,c),j=Math.ceil(j*D)/D),i==="ticks"?(P=Math.floor(_/j)*j,T=Math.ceil(b/j)*j):(P=_,T=b),x&&w&&s&&_O((a-o)/s,j/1e3)?(A=Math.round(Math.min((a-o)/j,h)),j=(a-o)/A,P=o,T=a):S?(P=x?o:P,T=w?a:T,A=u-1,j=(T-P)/A):(A=(T-P)/j,gl(A,Math.round(A),j/1e3)?A=Math.round(A):A=Math.ceil(A));const F=Math.max(D_(j),D_(P));D=Math.pow(10,ut(c)?F:c),P=Math.round(P*D)/D,T=Math.round(T*D)/D;let V=0;for(x&&(m&&P!==o?(n.push({value:o}),P<o&&V++,gl(Math.round((P+V*j)*D)/D,o,Lv(o,C,t))&&V++):P<o&&V++);V<A;++V){const R=Math.round((P+V*j)*D)/D;if(w&&R>a)break;n.push({value:R})}return w&&m&&T!==a?n.length&&gl(n[n.length-1].value,a,Lv(a,C,t))?n[n.length-1].value=a:n.push({value:a}):(!w||T===a)&&n.push({value:T}),n}function Lv(t,e,{horizontal:n,minRotation:r}){const i=di(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class gM extends ma{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return ut(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=c=>i=n?i:c,a=c=>s=r?s:c;if(e){const c=qr(i),u=qr(s);c<0&&u<0?a(0):c>0&&u>0&&o(0)}if(i===s){let c=s===0?1:Math.abs(s*.05);a(s+c),e||o(i-c)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=mM(i,s);return e.bounds==="ticks"&&vO(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return xg(e,this.chart.options.locale,this.options.ticks.format)}}class Xp extends gM{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=wn(e)?e:0,this.max=wn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=di(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ze(Xp,"id","linear"),ze(Xp,"defaults",{ticks:{callback:r2.formatters.numeric}});const th={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Fn=Object.keys(th);function Iv(t,e){return t-e}function zv(t,e){if(ut(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),wn(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Yl(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function Nv(t,e,n,r){const i=Fn.length;for(let s=Fn.indexOf(t);s<i-1;++s){const o=th[Fn[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return Fn[s]}return Fn[i-1]}function yM(t,e,n,r,i){for(let s=Fn.length-1;s>=Fn.indexOf(n);s--){const o=Fn[s];if(th[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return Fn[n?Fn.indexOf(n):0]}function _M(t){for(let e=Fn.indexOf(t)+1,n=Fn.length;e<n;++e)if(th[Fn[e]].common)return Fn[e]}function Fv(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=yg(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function vM(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,c;for(a=s;a<=o;a=+i.add(a,1,r))c=n[a],c>=0&&(e[c].major=!0);return e}function Bv(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:vM(t,r,i,n)}class vd extends ma{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new tR._date(e.adapters.date);i.init(n),ml(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:zv(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function c(u){!o&&!isNaN(u.min)&&(i=Math.min(i,u.min)),!a&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!o||!a)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),i=wn(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=wn(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=kO(i,s,o);return this._unit=n.unit||(r.autoSkip?Nv(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):yM(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:_M(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),Bv(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=vn(n,0,o),r=vn(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||Nv(s.minUnit,n,r,this._getLabelCapacity(n)),a=Je(i.ticks.stepSize,1),c=o==="week"?s.isoWeekday:!1,u=Yl(c)||c===!0,h={};let p=n,m,g;if(u&&(p=+e.startOf(p,"isoWeek",c)),p=+e.startOf(p,u?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const y=i.ticks.source==="data"&&this.getDataTimestamps();for(m=p,g=0;m<r;m=+e.add(m,a,o),g++)Fv(h,m,y);return(m===r||i.bounds==="ticks"||g===1)&&Fv(h,m,y),Object.keys(h).sort(Iv).map(_=>+_)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return kt(o,[e,n,r],this);const a=s.time.displayFormats,c=this._unit,u=this._majorUnit,h=c&&a[c],p=u&&a[u],m=r[n],g=u&&p&&m&&m.major;return this._adapter.format(e,i||(g?p:h))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=di(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,Bv(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(zv(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return e2(e.sort(Iv))}}ze(vd,"id","time"),ze(vd,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function au(t,e,n){let r=0,i=t.length-1,s,o,a,c;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=Fs(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:c}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=Fs(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:c}=t[i]);const u=o-s;return u?a+(c-a)*(e-s)/u:a}class Uv extends vd{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=au(n,this.min),this._tableRange=au(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,c,u,h;for(o=0,a=e.length;o<a;++o)u=e[o],u>=n&&u<=r&&i.push(u);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)h=i[o+1],c=i[o-1],u=i[o],Math.round((h+c)/2)!==u&&s.push({time:u,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(au(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return au(this._table,r*this._tableRange+this._minPos,!0)}}ze(Uv,"id","timeseries"),ze(Uv,"defaults",vd.defaults);const z2="label";function Wv(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function xM(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function N2(t,e){t.labels=e}function F2(t,e,n=z2){const r=[];t.datasets=e.map(i=>{const s=t.datasets.find(o=>o[n]===i[n]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function bM(t,e=z2){const n={labels:[],datasets:[]};return N2(n,t.labels),F2(n,t.datasets,e),n}function wM(t,e){const{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:o,data:a,options:c,plugins:u=[],fallbackContent:h,updateMode:p,...m}=t,g=q.useRef(null),y=q.useRef(null),_=()=>{g.current&&(y.current=new Qd(g.current,{type:o,data:bM(a,s),options:c&&{...c},plugins:u}),Wv(e,y.current))},b=()=>{Wv(e,null),y.current&&(y.current.destroy(),y.current=null)};return q.useEffect(()=>{!i&&y.current&&c&&xM(y.current,c)},[i,c]),q.useEffect(()=>{!i&&y.current&&N2(y.current.config.data,a.labels)},[i,a.labels]),q.useEffect(()=>{!i&&y.current&&a.datasets&&F2(y.current.config.data,a.datasets,s)},[i,a.datasets]),q.useEffect(()=>{y.current&&(i?(b(),setTimeout(_)):y.current.update(p))},[i,c,a.labels,a.datasets,p]),q.useEffect(()=>{y.current&&(b(),setTimeout(_))},[o]),q.useEffect(()=>(_(),()=>b()),[]),f.jsx("canvas",{ref:g,role:"img",height:n,width:r,...m,children:h})}const SM=q.forwardRef(wM);function jg(t,e){return Qd.register(e),q.forwardRef((n,r)=>f.jsx(SM,{...n,ref:r,type:t}))}const ks=jg("line",Cu),Tf=jg("bar",Eu),$v=jg("doughnut",Qa);function B2(t,e){const r=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),i=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());return Math.floor((i-r)/864e5)}function kM(t,e){const n=new Date(t),r=new Date(e);return B2(n,r)}function EM(t){const e=new Date(t);return B2(e,new Date)}function U2(t,e){const n=e.filter(y=>y.payout_status==="paid"&&y.actual_payout_date&&y.expected_payout_date),r=e.filter(y=>(y.payout_status==="unpaid"||y.payout_status==="overdue")&&y.expected_payout_date),i=n.map(y=>kM(y.expected_payout_date,y.actual_payout_date)),s=i.length>0?i.reduce((y,_)=>y+_,0)/i.length:0,o=[...i].sort((y,_)=>y-_),a=o.length>0?o[Math.floor(o.length/2)]:0,c=i.filter(y=>y<=0).length,u=n.length>0?c/n.length*100:0,h=i.length>0?Math.max(...i):0,p=i.length>0?Math.min(...i):0,m={"0-7_days":{count:0,amount:0},"8-14_days":{count:0,amount:0},"15-30_days":{count:0,amount:0},"30plus_days":{count:0,amount:0}};let g=0;return r.forEach(y=>{const _=EM(y.expected_payout_date),b=y.file_total||y.pay_amount||0;g+=b,_<=7&&_>=0?(m["0-7_days"].count++,m["0-7_days"].amount+=b):_<=14?(m["8-14_days"].count++,m["8-14_days"].amount+=b):_<=30?(m["15-30_days"].count++,m["15-30_days"].amount+=b):(m["30plus_days"].count++,m["30plus_days"].amount+=b)}),{firm_name:t,total_paid_claims:n.length,total_unpaid_claims:r.length,avg_days_late:Math.round(s*10)/10,on_time_percentage:Math.round(u*10)/10,total_outstanding_balance:Math.round(g*100)/100,outstanding_aging:m,median_days_late:a,worst_delay_days:h,best_turnaround_days:p}}async function W2(){const{data:t,error:e}=await Ne.from("claims").select("id, firm_name, expected_payout_date, actual_payout_date, payout_status, pay_amount, file_total, completion_date, status").not("firm_name","is",null);if(e)throw console.error("Error fetching payment claims:",e),e;return t||[]}async function $2(){const t=await W2(),e=new Map;t.forEach(p=>{const m=vi(p.firm_name);e.has(m)||e.set(m,[]),e.get(m).push(p)});const n=[];for(const[p,m]of e.entries()){const g=U2(p,m);n.push(g)}n.sort((p,m)=>p.firm_name.localeCompare(m.firm_name));const r=t.filter(p=>p.expected_payout_date).length,i=n.reduce((p,m)=>p+m.total_paid_claims,0),s=n.reduce((p,m)=>p+m.total_unpaid_claims,0),o=n.reduce((p,m)=>p+m.total_outstanding_balance,0),a=n.reduce((p,m)=>p+m.avg_days_late*m.total_paid_claims,0),c=i>0?a/i:0,u=n.reduce((p,m)=>p+m.total_paid_claims*(m.on_time_percentage/100),0),h=i>0?u/i*100:0;return{generated_at:new Date().toISOString(),total_firms:n.length,metrics_by_firm:n,overall_summary:{total_claims_tracked:r,total_paid_claims:i,total_unpaid_claims:s,total_outstanding_balance:Math.round(o*100)/100,overall_avg_days_late:Math.round(c*10)/10,overall_on_time_percentage:Math.round(h*10)/10}}}async function CM(t){const e=await W2(),n=vi(t),r=e.filter(i=>vi(i.firm_name)===n);return r.length===0?null:U2(n,r)}function vl(t,e){const n=new Date(t);return n.setDate(n.getDate()+e),n}function TM(t){const e=t.getDay(),n=e===0?-6:1-e,r=vl(t,n);return r.setHours(0,0,0,0),r}function jM(t){const e=vl(t,6);return e.setHours(23,59,59,999),e}function PM(t){const e=t.toLocaleDateString("en-US",{month:"short"}),n=t.getDate(),r=t.getFullYear();return`${e} ${n}, ${r}`}function H2(t,e,n){return t>=e&&t<=n}async function AM(){const{data:t,error:e}=await Ne.from("claims").select("id, firm_name, status, completion_date, expected_payout_date, actual_payout_date, pay_amount, file_total, appointment_start, payout_status").not("firm_name","is",null);if(e)throw console.error("Error fetching payout claims:",e),e;return t||[]}function OM(t,e,n){let r=0,i=0;const s=t.filter(a=>a.completion_date||a.appointment_start).map(a=>({id:a.id,firm_name:a.firm_name,completion_date:a.completion_date,appointment_start:a.appointment_start,file_total:a.file_total,pay_amount:a.pay_amount,status:a.status})),o=hg(s);for(const a of o)H2(a.payoutDate,e,n)&&(r+=a.totalExpected,i+=a.claimCount);return{amount:r,count:i}}function DM(t,e,n){let r=0,i=0;for(const s of t)if(s.actual_payout_date){const o=new Date(s.actual_payout_date);if(H2(o,e,n)){const a=s.file_total||s.pay_amount||0;r+=a,i++}}return{amount:r,count:i}}function Hv(t,e=4){const n=t.filter(o=>!o.is_projection).slice(-e);if(n.length===0)return{avgExpected:0,avgActual:0,avgVariance:0};const r=n.reduce((o,a)=>o+a.expected_payout,0)/n.length,i=n.reduce((o,a)=>o+a.actual_paid,0)/n.length,s=n.reduce((o,a)=>o+a.variance,0)/n.length;return{avgExpected:r,avgActual:i,avgVariance:s}}async function V2(t=12,e=4){const n=await AM(),r=new Date;r.setHours(0,0,0,0);const i=TM(r),s=vl(i,-7*t),o=vl(i,7*e),a=[];for(let x=-t;x<e;x++){const w=vl(i,x*7),S=jM(w),C=w>r;let j=0,D=0,P=0,T=0;if(C){const V=Hv(a,4);j=V.avgExpected,D=V.avgActual,P=0,T=0}else{const V=OM(n,w,S),R=DM(n,w,S);j=V.amount,D=R.amount,P=V.count,T=R.count}const A=j-D,F=j>0?D/j*100-100:0;a.push({week_start:w,week_end:S,week_label:PM(w),expected_payout:Math.round(j*100)/100,actual_paid:Math.round(D*100)/100,variance:Math.round(A*100)/100,variance_percentage:Math.round(F*10)/10,is_projection:C,claim_count_expected:P,claim_count_actual:T})}const c=a.filter(x=>!x.is_projection),u=c.reduce((x,w)=>x+w.expected_payout,0),h=c.reduce((x,w)=>x+w.actual_paid,0),p=u-h,m=c.length>0?u/c.length:0,g=c.length>0?h/c.length:0,y=c.length>0?p/c.length:0,_=u>0?h/u*100:0,b=Hv(a,4);return{generated_at:new Date().toISOString(),period_start:s,period_end:o,total_weeks:a.length,historical_weeks:c.length,projection_weeks:e,weekly_data:a,summary:{total_expected:Math.round(u*100)/100,total_actual:Math.round(h*100)/100,total_variance:Math.round(p*100)/100,avg_weekly_expected:Math.round(m*100)/100,avg_weekly_actual:Math.round(g*100)/100,avg_weekly_variance:Math.round(y*100)/100,accuracy_percentage:Math.round(_*10)/10},rolling_average:{period:4,avg_expected:Math.round(b.avgExpected*100)/100,avg_actual:Math.round(b.avgActual*100)/100,avg_variance:Math.round(b.avgVariance*100)/100}}}function xd(t,e){const n=new Date(t);return n.setDate(n.getDate()+e),n}function RM(t){const e=t.getDay(),n=e===0?-6:1-e,r=xd(t,n);return r.setHours(0,0,0,0),r}function MM(t){const e=xd(t,6);return e.setHours(23,59,59,999),e}function LM(t){const e=t.toLocaleDateString("en-US",{month:"short"}),n=t.getDate(),r=t.getFullYear();return`${e} ${n}, ${r}`}function Z2(t,e,n){return t>=e&&t<=n}function IM(t,e){const r=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),i=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());return Math.floor((i-r)/864e5)}async function zM(){const{data:t,error:e}=await Ne.from("claims").select("id, created_at, status, assigned_to, appointment_start, completion_date").order("created_at",{ascending:!0});if(e)throw console.error("Error fetching throughput claims:",e),e;return t||[]}function NM(t,e,n){let r=0;for(const i of t)if(i.created_at&&i.assigned_to){const s=new Date(i.created_at);Z2(s,e,n)&&r++}return r}function FM(t,e,n){let r=0;for(const i of t)if(i.status==="COMPLETED"&&i.completion_date){const s=new Date(i.completion_date);Z2(s,e,n)&&r++}return r}function Vv(t){const e=new Date;e.setHours(0,0,0,0);let n=null;for(const r of t)if((r.status==="SCHEDULED"||r.status==="IN_PROGRESS")&&r.appointment_start){const i=new Date(r.appointment_start);(!n||i>n)&&(n=i)}return n?IM(e,n):0}function BM(t,e){return t===0?0:Math.round(e/t*100*10)/10}function UM(t){return t<=2?"healthy":t<=5?"warning":"critical"}function WM(t){return t<=7?"low":t<=14?"medium":"high"}function $M(t){if(t.length<3)return"stable";const e=t.slice(-3),n=e.reduce((o,a)=>o+a.backlog_growth,0)/e.length,r=t.slice(-6,-3);if(r.length<3)return"stable";const s=r.reduce((o,a)=>o+a.backlog_growth,0)/r.length-n;return s>1?"improving":s<-1?"declining":"stable"}async function Y2(t=12){const e=await zM(),n=new Date;n.setHours(0,0,0,0);const r=RM(n),i=xd(r,-7*t),s=r,o=[],a=Vv(e);for(let S=-t;S<=0;S++){const C=xd(r,S*7),j=MM(C),D=C.getTime()===r.getTime(),P=NM(e,C,j),T=FM(e,C,j),A=P-T,F=D?a:Vv(e.filter(R=>R.created_at?new Date(R.created_at)<=j:!1)),V=BM(P,T);o.push({week_start:C,week_end:j,week_label:LM(C),claims_assigned:P,claims_completed:T,backlog_growth:A,days_booked_ahead:F,utilization_rate:V,is_current_week:D})}const c=o.reduce((S,C)=>S+C.claims_assigned,0),u=o.reduce((S,C)=>S+C.claims_completed,0),h=c-u,p=o.length>0?c/o.length:0,m=o.length>0?u/o.length:0,g=o.length>0?h/o.length:0,y=c>0?u/c*100:0,_=$M(o),b=UM(g),x=WM(a);let w="";return _==="improving"?w="Backlog decreasing - good throughput":_==="declining"?w="Backlog increasing - throughput under pressure":w="Backlog stable - balanced throughput",{generated_at:new Date().toISOString(),period_start:i,period_end:s,total_weeks:o.length,current_days_booked_ahead:a,weekly_data:o,summary:{total_assigned:c,total_completed:u,total_backlog_growth:h,avg_weekly_assigned:Math.round(p*10)/10,avg_weekly_completed:Math.round(m*10)/10,avg_backlog_growth:Math.round(g*10)/10,completion_rate:Math.round(y*10)/10,trend:_},capacity_indicators:{backlog_status:b,booking_pressure:x,throughput_trend:w}}}async function HM(){const{data:t,error:e}=await Ne.from("claims").select("id, firm_name, status, file_total, pay_amount, completion_date").eq("status","COMPLETED").not("firm_name","is",null);if(e)throw console.error("Error fetching completed claims:",e),e;return t||[]}function VM(t){const e=new Map;for(const n of t){if(!n.firm_name)continue;const r=vi(n.firm_name),i=n.file_total||n.pay_amount||0;if(i<=0)continue;e.has(r)||e.set(r,{revenue:0,count:0});const s=e.get(r);s.revenue+=i,s.count++}return e}function ZM(t){let e=0;for(const n of t)e+=Math.pow(n.revenue_share_percentage,2);return Math.round(e)}function YM(t){return t<40?"low":t<60?"moderate":t<80?"high":"critical"}function qM(t,e,n){const r=[];return t==="critical"?(r.push("CRITICAL: Over 80% revenue from top 3 firms - extremely high risk"),r.push("Immediately diversify client base to reduce dependency"),r.push("Losing any top firm would severely impact business")):t==="high"?(r.push("HIGH RISK: Over 60% revenue concentrated in top 3 firms"),r.push("Actively pursue new firms to reduce concentration"),r.push("Consider this a priority for business stability")):t==="moderate"?(r.push("Moderate concentration - manageable but monitor closely"),r.push("Continue efforts to diversify revenue sources")):(r.push("Good diversification - revenue well distributed"),r.push("Maintain balance across multiple firms")),n&&n.revenue_share_percentage>40&&r.push(`Single firm dependency: ${n.normalized_name} accounts for ${n.revenue_share_percentage.toFixed(1)}% of revenue`),r}async function q2(){const t=await HM(),e=VM(t);let n=0,r=0;for(const b of e.values())n+=b.revenue,r+=b.count;const i=[];for(const[b,x]of e.entries()){const w=n>0?x.revenue/n*100:0;i.push({firm_name:b,normalized_name:b,total_revenue:Math.round(x.revenue*100)/100,claim_count:x.count,revenue_share_percentage:Math.round(w*100)/100,avg_revenue_per_claim:Math.round(x.revenue/x.count*100)/100})}i.sort((b,x)=>x.total_revenue-b.total_revenue);const s=i.slice(0,3),o=s.reduce((b,x)=>b+x.total_revenue,0),a=n>0?Math.round(o/n*100*100)/100:0,c=i.length>0?i[0].revenue_share_percentage:0,u=a,h=i.slice(0,5).reduce((b,x)=>b+x.total_revenue,0),p=n>0?Math.round(h/n*100*100)/100:0,m=ZM(i),g=YM(a);let y="";g==="low"?y="Well diversified - healthy revenue distribution":g==="moderate"?y="Moderately concentrated - acceptable but monitor":g==="high"?y="Highly concentrated - significant dependency risk":y="Critically concentrated - extreme dependency risk";const _=qM(g,a,i[0]);return{generated_at:new Date().toISOString(),total_revenue:Math.round(n*100)/100,total_claims:r,unique_firms:i.length,firm_revenues:i,top_3_firms:s,top_3_firm_dependency_ratio:a,revenue_concentration:{top_1_percentage:Math.round(c*100)/100,top_3_percentage:Math.round(u*100)/100,top_5_percentage:Math.round(p*100)/100,herfindahl_index:m},risk_assessment:{concentration_level:g,diversification_status:y,recommendations:_}}}function lu(t,e){const n=new Date(t);return n.setDate(n.getDate()+e),n}function GM(t){const e=t.toLocaleDateString("en-US",{month:"short"}),n=t.getDate();return`${t.toLocaleDateString("en-US",{weekday:"short"})}, ${e} ${n}`}function Zv(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}async function KM(){const{data:t,error:e}=await Ne.from("claims").select("id, firm_name, status, completion_date, appointment_start, file_total, pay_amount").not("firm_name","is",null);if(e)throw console.error("Error fetching claims for forecast:",e),e;return t||[]}function JM(t){const e=Math.abs(t);return e<10?"low":e<25?"moderate":e<50?"high":"critical"}function XM(t,e,n,r,i){const s=[];return t==="critical"?(s.push("CRITICAL: 7-day payment delay would reduce 30-day cash by 50%+ - extremely vulnerable"),s.push("Maintain emergency cash reserves to cover at least 30 days of expenses"),s.push("Immediately follow up on all overdue payments"),s.push("Consider requiring deposits or faster payment terms for new work")):t==="high"?(s.push("HIGH RISK: 7-day delay would significantly impact cash flow (25-50% reduction)"),s.push("Build cash buffer to handle payment delays"),s.push("Prioritize collections from firms with history of late payment")):t==="moderate"?(s.push("Moderate delay sensitivity (10-25% impact from 7-day delay)"),s.push("Monitor payment timing closely"),s.push("Maintain working capital cushion")):(s.push("Low sensitivity to payment delays (<10% impact)"),s.push("Cash flow relatively stable and predictable")),e===0?s.push("WARNING: No expected payments in next 30 days - cash flow gap"):e<1e4&&s.push(`Low expected cash ($${e.toLocaleString()}) - may need to increase volume`),i>20&&s.push(`${i} days with no expected payments - uneven cash flow distribution`),s}async function G2(t=30,e=7){const n=await KM(),r=new Date;r.setHours(0,0,0,0);const i=r,s=lu(r,t),a=hg(n,r).filter(V=>V.payoutDate>=i&&V.payoutDate<s),c=[];let u=0,h=0;for(let V=0;V<t;V++){const R=lu(i,V);lu(i,V);const B=a.filter(N=>Zv(N.payoutDate,R)),E=B.reduce((N,H)=>N+H.totalExpected,0);u+=E;const Z=lu(R,-e),I=a.filter(N=>Zv(N.payoutDate,Z)).reduce((N,H)=>N+H.totalExpected,0);h+=I;const z=B.map(N=>N.firm);c.push({date:R,date_label:GM(R),expected_amount:Math.round(E*100)/100,delayed_amount:Math.round(I*100)/100,cumulative_expected:Math.round(u*100)/100,cumulative_delayed:Math.round(h*100)/100,payout_count:B.length,firms_paying:z})}const p=u,m=h,g=p-m,y=p>0?g/p*100:0,_=a.length,b=t>0?p/t:0,x=t>0?m/t:0,w=c.map(V=>V.expected_amount),S=Math.max(...w,0),C=w.indexOf(S),j=C>=0?c[C].date_label:"",D=c.filter(V=>V.payout_count>0).length,P=t-D,T=JM(y);let A="";p===0?A="No expected payments - critical cash flow gap":T==="critical"?A="Extremely vulnerable to payment delays":T==="high"?A="Highly sensitive to payment timing":T==="moderate"?A="Moderately sensitive to delays":A="Stable and predictable cash flow";const F=XM(T,p,m,g,P);return{generated_at:new Date().toISOString(),forecast_start:i,forecast_end:s,forecast_days:t,expected_cash_in_30_days:Math.round(p*100)/100,delayed_scenario_cash:Math.round(m*100)/100,delayed_payment_impact:Math.round(g*100)/100,impact_percentage:Math.round(y*10)/10,daily_forecast:c,summary:{total_payouts_expected:_,avg_daily_expected:Math.round(b*100)/100,avg_daily_delayed:Math.round(x*100)/100,largest_single_day:Math.round(S*100)/100,largest_single_day_date:j,days_with_payouts:D,days_without_payouts:P},risk_assessment:{impact_level:T,cash_flow_health:A,recommendations:F}}}const Ou=100;function QM(){const t=new Date,e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0");return`${e}-${n}`}function K2(t,e){let n=0;const r=new Date(t);for(;r<=e;){const i=r.getDay();i!==0&&i!==6&&n++,r.setDate(r.getDate()+1)}return n}function eL(){const t=new Date,e=new Date(t.getFullYear(),t.getMonth(),1);return K2(e,t)}function tL(){const t=new Date,e=new Date(t.getFullYear(),t.getMonth(),1),n=new Date(t.getFullYear(),t.getMonth()+1,0);return K2(e,n)}function nL(){const t=new Date,e=new Date(t.getFullYear(),t.getMonth()+1,0);return Math.max(0,Math.ceil((e.getTime()-t.getTime())/(1e3*60*60*24)))}function rL(t){const e=t*100;return e<60?"UNDER-UTILIZED":e>=60&&e<85?"OPTIMAL":e>=85&&e<=105?"STRETCH":"BURNOUT"}async function iL(){const t=nn();if(!t||!t.isInitialized)throw console.error(" Authorization not initialized for monthly performance query"),new Error("Authorization not initialized");let e=Ne.from("claims").select("id, status, completion_date, appointment_start").limit(1e5);e=t.scopedClaimsQuery(e);const{data:n,error:r}=await e;if(r)throw console.error("Error fetching claims for monthly performance:",r),r;return n||[]}async function J2(){const t=await iL(),e=QM(),n=new Date,r=n.getFullYear(),s=["January","February","March","April","May","June","July","August","September","October","November","December"][n.getMonth()],o=t.filter(C=>C.status!=="COMPLETED"||!C.completion_date?!1:C.completion_date.split("T")[0].substring(0,7)===e).length,c=t.filter(C=>{if(!C.appointment_start)return!1;const j=new Date(C.appointment_start);return`${j.getFullYear()}-${String(j.getMonth()+1).padStart(2,"0")}`===e&&C.status!=="COMPLETED"}).length,u=eL(),h=tL(),p=nL(),m=u>0?o/u:0,g=o/Ou,y=g*100,_=rL(g),b=h-u,x=o+m*b,w=Ou-o,S=b>0?w/b:0;return{generated_at:new Date().toISOString(),current_month:e,current_year:r,current_month_name:s,monthly_completed_claims:o,monthly_backlog:c,business_days_elapsed:u,total_business_days_in_month:h,monthly_velocity:Math.round(m*100)/100,max_safe_capacity:Ou,monthly_burnout_ratio:Math.round(g*1e3)/1e3,capacity_status:_,capacity_percentage:Math.round(y*10)/10,projected_end_of_month:Math.round(x),days_remaining:p,recommended_daily_rate:Math.round(S*10)/10}}function X2(){const t=new Date,e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0");return`${e}-${n}`}function sL(t){const e=X2(),[n,r]=e.split("-").map(Number);return r===1?`${n-1}-12`:`${n}-${String(r-1).padStart(2,"0")}`}function oL(t,e){let n=0;const r=new Date(t);for(;r<=e;){const i=r.getDay();i!==0&&i!==6&&n++,r.setDate(r.getDate()+1)}return n}function Q2(t){const[e,n]=t.split("-").map(Number),r=new Date(e,n-1,1),i=new Date(e,n,0);return oL(r,i)}async function eS(){X2();const t=sL(),{data:e,error:n}=await Ne.from("monthly_performance_log").select("month").eq("month",t).single();if(n&&n.code!=="PGRST116")return console.error("Error checking monthly log:",n),null;if(e)return null;console.log(`Logging metrics for ${t}...`);const{data:r,error:i}=await Ne.from("claims").select("id, status, completed_month, appointment_start, firm, pay_amount");if(i)return console.error("Error fetching claims for logging:",i),null;if(!r)return console.log("No claims data available"),null;const s=r.filter(b=>b.status==="COMPLETED"&&b.completed_month===t).length,a=r.filter(b=>{if(!b.appointment_start)return!1;const x=new Date(b.appointment_start);return`${x.getFullYear()}-${String(x.getMonth()+1).padStart(2,"0")}`===t&&b.status!=="COMPLETED"}).length,c=Q2(t),u=c>0?s/c:0,h=s/Ou,p=new Set,m={};r.forEach(b=>{b.status==="COMPLETED"&&b.completed_month===t&&b.firm&&(p.add(b.firm),m[b.firm]||(m[b.firm]={claims:0,revenue:0}),m[b.firm].claims+=1,m[b.firm].revenue+=b.pay_amount||0)});const g=p.size,{error:y}=await Ne.from("monthly_performance_log").insert({month:t,completed_claims:s,backlog:a,avg_velocity:Math.round(u*100)/100,burnout_ratio:Math.round(h*1e3)/1e3,firms_active:g});if(y)return console.error("Error inserting monthly log:",y),null;const _=Object.entries(m).map(([b,x])=>({month:t,firm_name:b,claims_completed:x.claims,revenue_generated:x.revenue}));if(_.length>0){const{error:b}=await Ne.from("monthly_firm_activity").insert(_);b&&console.error("Error inserting firm activity:",b)}return console.log(`Successfully logged metrics for ${t}`),t}async function aL(){console.log(" CRITICAL FIX: Fetching live completed claims for monthly history");const t=nn();if(!t||!t.isInitialized)throw new Error("Authorization not initialized");let e=Ne.from("claims").select("firm_name, completion_date, pay_amount, file_total").eq("status","COMPLETED").not("completion_date","is",null).not("firm_name","is",null).order("completion_date",{ascending:!0}).limit(1e5);e=t.scopedClaimsQuery(e);const{data:n,error:r}=await e;if(r)throw console.error("Error fetching completed claims:",r),r;const{data:i,error:s}=await Ne.from("monthly_performance_log").select("*").order("month",{ascending:!0});s&&console.warn("Warning: Could not fetch performance logs:",s);const o=i||[],a=n||[];console.log(` Found ${a.length} completed claims for history analysis`);const c={};for(const m of a){const g=new Date(m.completion_date),y=g.getUTCFullYear(),_=g.getUTCMonth()+1,b=`${y}-${_.toString().padStart(2,"0")}`,x=`${m.firm_name}-${b}`;c[x]||(c[x]={month:b,firm_name:m.firm_name,claims_completed:0,revenue_generated:0}),c[x].claims_completed+=1,c[x].revenue_generated+=m.file_total||m.pay_amount||0}const u=Object.values(c),h=["January","February","March","April","May","June","July","August","September","October","November","December"],p={};u.forEach(m=>{const g=m.firm_name,y=new Date(m.month+"-01"),_=y.getFullYear().toString(),b=y.getMonth()+1,x=Q2(m.month);p[g]||(p[g]={}),p[g][_]||(p[g][_]=[]);let w=p[g][_].find(S=>S.month===b);w||(w={month:b,monthName:h[b-1],claimsCompleted:0,revenueGenerated:0,avgVelocity:0},p[g][_].push(w)),w.claimsCompleted=m.claims_completed,w.revenueGenerated=m.revenue_generated,w.avgVelocity=x>0?m.claims_completed/x:0});for(const m in p)for(const g in p[m]){for(let y=1;y<=12;y++)p[m][g].find(b=>b.month===y)||p[m][g].push({month:y,monthName:h[y-1],claimsCompleted:0,revenueGenerated:0,avgVelocity:0});p[m][g].sort((y,_)=>y.month-_.month)}return{historical_performance:o,firm_activity:u,firm_monthly_data:p,months_tracked:o.length,earliest_month:o.length>0?o[0].month:null,latest_month:o.length>0?o[o.length-1].month:null}}async function tS(){return await eS(),await aL()}const Yv=["January","February","March","April","May","June","July","August","September","October","November","December"];async function nS(t=!1){console.log(" CRITICAL FIX: Fetching live completed claims data from claims table");const e=nn();if(!e||!e.isInitialized)return console.error(" Authorization not initialized for seasonality query"),{aggregated:{},raw:[]};let n=Ne.from("claims").select("firm_name, completion_date").eq("status","COMPLETED").not("completion_date","is",null).not("firm_name","is",null).order("completion_date").limit(1e5);n=e.scopedClaimsQuery(n);const{data:r,error:i}=await n;if(i)throw new Error(`Failed to fetch live completed claims data: ${i.message}`);if(!r||r.length===0)return console.warn(" No completed claims found in claims table"),{aggregated:{},raw:[]};if(console.log(` Found ${r.length} live completed claims [v2]`),r.length>0){const c=r.map(u=>u.completion_date).sort();console.log(` Date range: ${c[0]} to ${c[c.length-1]}`)}const s=[],o={},a={};for(const c of r){const u=c.completion_date.split("T")[0],[h,p]=u.split("-"),m=parseInt(h),g=parseInt(p),y=`${c.firm_name}|${m}|${g}`;a[y]=(a[y]||0)+1}for(const[c,u]of Object.entries(a)){const[h,p,m]=c.split("|"),g=parseInt(p),y=parseInt(m);s.push({year:g,month:y,firm:h,completed:u});const _=g.toString();o[_]||(o[_]=[]);let b=o[_].find(x=>x.month===y);b||(b={month:y,monthName:Yv[y-1],completedClaims:0},o[_].push(b)),b.completedClaims+=u}for(const c in o){for(let u=1;u<=12;u++)o[c].find(p=>p.month===u)||o[c].push({month:u,monthName:Yv[u-1],completedClaims:0});o[c].sort((u,h)=>u.month-h.month)}if(t){console.log(" SEASONALITY PROFILE DEBUG MODE - LIVE CLAIMS DATA"),console.log("===================================================="),console.table(s.map(u=>({Year:u.year,Month:u.month,Firm:u.firm,Completed:u.completed}))),console.log(`
 Aggregated Totals by Year-Month:`);const c=[];for(const u in o)for(const h of o[u])c.push({Year:u,Month:h.month,MonthName:h.monthName,TotalCompleted:h.completedClaims});console.table(c)}return await lL(s),{aggregated:o,raw:s}}async function lL(t){try{const e=nn();if(!e||!e.isInitialized){console.warn(" Cannot validate seasonality: authz not initialized");return}let n=Ne.from("claims").select("firm_name, completion_date").eq("status","COMPLETED").not("completion_date","is",null).not("firm_name","is",null);n=e.scopedClaimsQuery(n);const{data:r,error:i}=await n;if(i||!r){console.warn(" Could not validate seasonality mismatch:",i==null?void 0:i.message);return}const s=new Set;for(const a of r){const c=a.completion_date.split("T")[0],[u,h]=c.split("-"),p=parseInt(u),m=parseInt(h);s.add(`${a.firm_name}|${p}|${m}`)}const o=new Set;for(const a of t)o.add(`${a.firm}|${a.year}|${a.month}`);for(const a of s)if(!o.has(a)){const[c,u,h]=a.split("|");console.warn(` SEASONALITY MISMATCH: Claims exist for ${c} ${u}-${h} but missing from seasonality response`)}}catch(e){console.warn(" Error during seasonality mismatch validation:",e)}}const qv=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];async function rS(t=!1){var n;console.log(" Fetching seasonal performance benchmark data");const e=nn();if(!e||!e.isInitialized)return console.error(" Authorization not initialized for benchmark query"),{data:[],current_year:new Date().getFullYear(),years_included:[],summary:{avg_index:0,best_month:"",worst_month:"",months_above_expected:0,months_below_expected:0}};try{const r=new Date().getFullYear();let i=Ne.from("claims").select("completion_date").eq("status","COMPLETED").not("completion_date","is",null).order("completion_date").limit(1e5);e.role==="appraiser"&&e.userId&&(i=i.eq("appraiser_email",e.userId));const{data:s,error:o}=await i;if(o)throw console.error(" Database query error:",o),o;if(!s||s.length===0)return console.warn(" No claims data found"),{data:[],current_year:r,years_included:[],summary:{avg_index:0,best_month:"",worst_month:"",months_above_expected:0,months_below_expected:0}};const a={},c=new Set;for(const S of s){const C=new Date(S.completion_date),j=C.getFullYear(),D=C.getMonth()+1;c.add(j),a[D]||(a[D]={}),a[D][j]||(a[D][j]=0),a[D][j]++}const u=Array.from(c).sort(),h=u.filter(S=>S<r);if(t&&(console.log("Years with data:",u),console.log("Historical years:",h),console.log("Current year:",r)),h.length===0)return console.warn(" No historical data available for benchmark analysis"),{data:qv.map((S,C)=>{var j;return{month:S,historical_avg:0,current_year:((j=a[C+1])==null?void 0:j[r])||0,index:0}}),current_year:r,years_included:u,summary:{avg_index:0,best_month:"",worst_month:"",months_above_expected:0,months_below_expected:0}};const p=[];for(let S=1;S<=12;S++){const C=h.map(T=>{var A;return((A=a[S])==null?void 0:A[T])||0}).filter(T=>T>0),j=C.length>0?C.reduce((T,A)=>T+A,0)/C.length:0,D=((n=a[S])==null?void 0:n[r])||0,P=j>0?D/j:0;p.push({month:qv[S-1],historical_avg:Number(j.toFixed(1)),current_year:D,index:Number(P.toFixed(2))})}const m=p.filter(S=>S.index>0).map(S=>S.index),g=m.length>0?Number((m.reduce((S,C)=>S+C,0)/m.length).toFixed(2)):0,y=p.filter(S=>S.index>1).length,_=p.filter(S=>S.index<1&&S.index>0).length,b=p.reduce((S,C)=>C.index>S.index?C:S),x=p.filter(S=>S.index>0).reduce((S,C)=>C.index<S.index?C:S,{index:1/0,month:""}),w={data:p,current_year:r,years_included:u,summary:{avg_index:g,best_month:b.month,worst_month:x.month||"",months_above_expected:y,months_below_expected:_}};return t&&(console.log(" SEASONAL PERFORMANCE BENCHMARK DEBUG"),console.table(p),console.log("Summary:",w.summary)),w}catch(r){throw console.error(" Error in seasonal performance benchmark:",r),new Error(`Failed to generate seasonal performance benchmark: ${r.message}`)}}async function cL(){const{data:t,error:e}=await Ne.from("claims").select("id, firm_name, status, completion_date").eq("status","COMPLETED").not("firm_name","is",null).limit(1e5);if(e)throw console.error("Error fetching completed claims for volume analysis:",e),e;return t||[]}function uL(t){const e=new Map;for(const n of t){if(!n.firm_name)continue;const r=vi(n.firm_name);e.has(r)||e.set(r,0),e.set(r,e.get(r)+1)}return e}function dL(t){let e=0;for(const n of t){const r=n.volume_share_percentage;e+=Math.pow(r,2)}return Math.round(e)}function hL(t,e,n){const r=[];let i,s;return t>=85?(i="critical",s="Severe operational dependency detected",r.push("URGENT: Diversify client base immediately"),r.push("Implement contingency plans for top clients"),r.push("Consider operational risk insurance")):t>=70?(i="high",s="High operational dependency risk",r.push("Actively pursue new firm partnerships"),r.push("Reduce reliance on top 3 firms"),r.push("Develop backup capacity for key accounts")):t>=50?(i="moderate",s="Moderate operational concentration",r.push("Monitor volume distribution trends"),r.push("Continue diversification efforts"),r.push("Build relationships with mid-tier firms")):(i="low",s="Well-diversified volume base",r.push("Maintain current diversification"),r.push("Continue monitoring for concentration drift")),e>2500&&r.push("HHI indicates high volume concentration"),n<5&&r.push("Increase total number of active firm partnerships"),{concentration_level:i,operational_status:s,recommendations:r}}async function iS(){var u;const t=await cL();if(t.length===0)throw new Error("No completed claims found for volume dependency analysis");const e=uL(t),n=t.length,r=e.size,i=Array.from(e.entries()).map(([h,p])=>{var g;return{firm_name:((g=t.find(y=>vi(y.firm_name)===h))==null?void 0:g.firm_name)||h,normalized_name:h,claim_count:p,volume_share_percentage:p/n*100}}).sort((h,p)=>p.claim_count-h.claim_count),s=i.slice(0,3),o=s.reduce((h,p)=>h+p.volume_share_percentage,0),a={top_1_percentage:((u=i[0])==null?void 0:u.volume_share_percentage)||0,top_3_percentage:o,top_5_percentage:i.slice(0,5).reduce((h,p)=>h+p.volume_share_percentage,0),herfindahl_index:dL(i)},c=hL(o,a.herfindahl_index,r);return{generated_at:new Date().toISOString(),total_claims:n,unique_firms:r,firm_volumes:i,top_3_firms:s,top_3_firm_dependency_ratio:Math.round(o*10)/10,volume_concentration:{...a,top_1_percentage:Math.round(a.top_1_percentage*10)/10,top_3_percentage:Math.round(a.top_3_percentage*10)/10,top_5_percentage:Math.round(a.top_5_percentage*10)/10},risk_assessment:c}}async function fL(){const{data:t,error:e}=await Ne.from("claims").select("id, firm_name, status, file_total, pay_amount, completion_date").eq("status","COMPLETED").not("firm_name","is",null).limit(1e5);if(e)throw console.error("Error fetching completed claims for value analysis:",e),e;return t||[]}function pL(t){const e=new Map;for(const n of t){if(!n.firm_name)continue;const r=vi(n.firm_name),i=n.file_total||n.pay_amount||0;if(i<=0)continue;e.has(r)||e.set(r,{revenue:0,count:0,originalName:n.firm_name});const s=e.get(r);s.revenue+=i,s.count++}return e}function mL(t){if(t.length<=1)return 0;const e=t.map(s=>s.revenue_per_claim),n=e.reduce((s,o)=>s+o,0)/e.length,r=e.reduce((s,o)=>s+Math.pow(o-n,2),0)/e.length,i=Math.sqrt(r);return n>0?i/n*100:0}function gL(t,e){const n=t.filter(s=>s.revenue_per_claim>=e*1.25),r=t.filter(s=>s.revenue_per_claim<=e*.75),i=t.filter(s=>s.revenue_per_claim>e*.75&&s.revenue_per_claim<e*1.25);return{premium:n,standard:i,budget:r}}async function sS(){const t=await fL();if(t.length===0)throw new Error("No completed claims found for value efficiency analysis");const e=pL(t),n=Array.from(e.values()).reduce((y,_)=>y+_.revenue,0),r=Array.from(e.values()).reduce((y,_)=>y+_.count,0),i=r>0?n/r:0,s=e.size,o=Array.from(e.entries()).map(([y,_])=>({firm_name:_.originalName,normalized_name:y,total_revenue:_.revenue,claim_count:_.count,revenue_per_claim:_.count>0?_.revenue/_.count:0,efficiency_rank:0})).filter(y=>y.revenue_per_claim>0).sort((y,_)=>_.revenue_per_claim-y.revenue_per_claim).map((y,_)=>({...y,efficiency_rank:_+1})),a=o.map(y=>y.revenue_per_claim),c=[...a].sort((y,_)=>y-_),u=Math.floor(c.length/2),h=c.length%2===0?(c[u-1]+c[u])/2:c[u],p={highest_revenue_per_claim:Math.max(...a,0),lowest_revenue_per_claim:Math.min(...a,0),median_revenue_per_claim:h||0,efficiency_variance:mL(o)},m=o.slice(0,5),g=gL(o,i);return{generated_at:new Date().toISOString(),total_revenue:Math.round(n*100)/100,total_claims:r,overall_revenue_per_claim:Math.round(i*100)/100,unique_firms:s,firm_efficiencies:o.map(y=>({...y,total_revenue:Math.round(y.total_revenue*100)/100,revenue_per_claim:Math.round(y.revenue_per_claim*100)/100})),top_performers:m.map(y=>({...y,total_revenue:Math.round(y.total_revenue*100)/100,revenue_per_claim:Math.round(y.revenue_per_claim*100)/100})),efficiency_metrics:{...p,highest_revenue_per_claim:Math.round(p.highest_revenue_per_claim*100)/100,lowest_revenue_per_claim:Math.round(p.lowest_revenue_per_claim*100)/100,median_revenue_per_claim:Math.round(p.median_revenue_per_claim*100)/100,efficiency_variance:Math.round(p.efficiency_variance*10)/10},performance_tiers:{premium:g.premium.map(y=>({...y,total_revenue:Math.round(y.total_revenue*100)/100,revenue_per_claim:Math.round(y.revenue_per_claim*100)/100})),standard:g.standard.map(y=>({...y,total_revenue:Math.round(y.total_revenue*100)/100,revenue_per_claim:Math.round(y.revenue_per_claim*100)/100})),budget:g.budget.map(y=>({...y,total_revenue:Math.round(y.total_revenue*100)/100,revenue_per_claim:Math.round(y.revenue_per_claim*100)/100}))}}}function cu({allFirms:t,selectedFirms:e,onChange:n,chartId:r,className:i=""}){const[s,o]=q.useState(!1),a=q.useRef(null),c=e.length===t.length&&t.length>0,u=e.length===0,h=!c&&!u;q.useEffect(()=>{a.current&&(a.current.indeterminate=h)},[h]);const p=()=>{n(c?[]:[...t])},m=y=>{if(e.includes(y)){const _=e.filter(b=>b!==y);n(_.length>0?_:t)}else n([...e,y])},g=c?"All selected ":u?"None selected":`${e.length} of ${t.length} selected`;return f.jsxs("div",{className:`bg-gray-700/30 rounded-lg border border-gray-600 ${i}`,children:[f.jsxs("div",{onClick:()=>o(!s),className:"flex items-center justify-between px-4 py-2 cursor-pointer hover:bg-gray-700/50 transition-colors rounded-t-lg",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-gray-400",children:""}),f.jsxs("span",{className:"text-sm text-gray-300",children:["Firms:"," ",f.jsx("span",{className:`font-medium ${c?"text-green-400":u?"text-red-400":"text-yellow-400"}`,children:g})]})]}),f.jsx("span",{className:"text-gray-400 text-xs transition-transform duration-200",children:s?"":""})]}),s&&f.jsxs("div",{className:"border-t border-gray-600",children:[f.jsx("div",{className:"px-4 py-2 border-b border-gray-600/50 bg-gray-700/20",children:f.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-300 hover:text-white cursor-pointer",children:[f.jsx("input",{ref:a,type:"checkbox",checked:c,onChange:p,className:"w-4 h-4 rounded border-gray-500 bg-gray-700 text-blue-500 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 cursor-pointer"}),f.jsx("span",{className:"font-medium",children:"All Firms"})]})}),f.jsx("div",{className:"px-4 py-3 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 max-h-48 overflow-y-auto",children:t.length>0?t.sort().map(y=>f.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-300 hover:text-white cursor-pointer transition-colors",children:[f.jsx("input",{type:"checkbox",checked:e.includes(y),onChange:()=>m(y),className:"w-4 h-4 rounded border-gray-500 bg-gray-700 text-blue-500 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 cursor-pointer"}),f.jsx("span",{className:"truncate",title:y,children:y})]},y)):f.jsx("div",{className:"col-span-full text-center text-gray-400 text-sm py-2",children:"No firms available"})})]})]})}Qd.register(Jp,Xp,Pu,$i,Au,tl,rM,dM,tM,G5);const Pi={SEASONALITY_FIRMS:"intelligence_seasonality_firms",VELOCITY_FIRMS:"intelligence_velocity_firms",COMPLETED_FIRMS:"intelligence_completed_firms",ACTIVITY_FIRMS:"intelligence_activity_firms"},Gv=["January","February","March","April","May","June","July","August","September","October","November","December"];function yL(){var oe;const[t,e]=q.useState(null),[n,r]=q.useState(null),[i,s]=q.useState(null),[o,a]=q.useState(null),[c,u]=q.useState(null),[h,p]=q.useState(null),[m,g]=q.useState(null),[y,_]=q.useState(null),[b,x]=q.useState([]),[w,S]=q.useState(null),[C,j]=q.useState(null),[D,P]=q.useState(null),[T,A]=q.useState(!0),[F,V]=q.useState(null),[R,B]=q.useState(""),[E,Z]=q.useState([]),[$,I]=q.useState([]),[z,N]=q.useState([]),[H,K]=q.useState([]),[Y,ce]=q.useState([]),[ne,X]=q.useState([]);q.useEffect(()=>{async function ee(){A(!0),V(null);try{const ye=new URLSearchParams(window.location.search).get("debug")==="true",[be,Le,Ae,We,Qe,Xe,gt,He,yt,zt,Lt]=await Promise.all([$2(),V2(),Y2(),q2(),G2(),J2(),tS(),nS(ye),rS(ye),iS(),sS()]);if(e(be),r(Le),s(Ae),a(We),u(Qe),p(Xe),g(gt),_(He.aggregated),x(He.raw),S(yt),j(zt),P(Lt),He.raw.length>0&&!R){const sn=Array.from(new Set(He.raw.map(On=>On.firm)));B(sn[0])}}catch(fe){V(fe.message||"Failed to load intelligence data")}finally{A(!1)}}ee()},[]),q.useEffect(()=>{if(b.length>0){const ee=Array.from(new Set(b.map(ye=>ye.firm))).sort();ce(ee);const fe=localStorage.getItem(Pi.SEASONALITY_FIRMS);if(fe)try{const be=JSON.parse(fe).filter(Le=>ee.includes(Le));Z(be.length>0?be:ee)}catch{Z(ee)}else Z(ee)}},[b]),q.useEffect(()=>{if(m!=null&&m.firm_monthly_data){const ee=Object.keys(m.firm_monthly_data).sort();X(ee);const fe=localStorage.getItem(Pi.VELOCITY_FIRMS);if(fe)try{const Ae=JSON.parse(fe).filter(We=>ee.includes(We));I(Ae.length>0?Ae:ee)}catch{I(ee)}else I(ee);const ye=localStorage.getItem(Pi.COMPLETED_FIRMS);if(ye)try{const Ae=JSON.parse(ye).filter(We=>ee.includes(We));N(Ae.length>0?Ae:ee)}catch{N(ee)}else N(ee);const be=localStorage.getItem(Pi.ACTIVITY_FIRMS);if(be)try{const Ae=JSON.parse(be).filter(We=>ee.includes(We));K(Ae.length>0?Ae:ee)}catch{K(ee)}else K(ee)}},[m]),q.useEffect(()=>{E.length>0&&localStorage.setItem(Pi.SEASONALITY_FIRMS,JSON.stringify(E))},[E]),q.useEffect(()=>{$.length>0&&localStorage.setItem(Pi.VELOCITY_FIRMS,JSON.stringify($))},[$]),q.useEffect(()=>{z.length>0&&localStorage.setItem(Pi.COMPLETED_FIRMS,JSON.stringify(z))},[z]),q.useEffect(()=>{H.length>0&&localStorage.setItem(Pi.ACTIVITY_FIRMS,JSON.stringify(H))},[H]);const _e=q.useMemo(()=>{if(!b.length||!E.length)return y||{};const ee=b.filter(ye=>E.includes(ye.firm)),fe={};for(const ye of ee){const be=ye.year.toString();fe[be]||(fe[be]=[]);let Le=fe[be].find(Ae=>Ae.month===ye.month);Le||(Le={month:ye.month,monthName:Gv[ye.month-1],completedClaims:0},fe[be].push(Le)),Le.completedClaims+=ye.completed}for(const ye in fe){for(let be=1;be<=12;be++)fe[ye].find(Le=>Le.month===be)||fe[ye].push({month:be,monthName:Gv[be-1],completedClaims:0});fe[ye].sort((be,Le)=>be.month-Le.month)}return fe},[b,E,y]),Te=q.useMemo(()=>m!=null&&m.firm_monthly_data?{velocity:Object.fromEntries(Object.entries(m.firm_monthly_data).filter(([ee])=>$.includes(ee))),completed:Object.fromEntries(Object.entries(m.firm_monthly_data).filter(([ee])=>z.includes(ee))),activity:Object.fromEntries(Object.entries(m.firm_monthly_data).filter(([ee])=>H.includes(ee)))}:null,[m,$,z,H]);if(T)return f.jsx("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Business Intelligence"}),f.jsxs("div",{className:"text-center py-12",children:[f.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"}),f.jsx("p",{className:"mt-4 text-gray-400",children:"Loading intelligence data..."})]})]})});if(F)return f.jsx("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Business Intelligence"}),f.jsx("div",{className:"bg-red-900/20 border border-red-500 rounded-lg p-4",children:f.jsxs("p",{className:"text-red-400",children:["Error loading data: ",F]})})]})});const Pe=t?{labels:t.metrics_by_firm.slice(0,10).map(ee=>ee.firm_name),datasets:[{label:"On-Time %",data:t.metrics_by_firm.slice(0,10).map(ee=>ee.on_time_percentage),backgroundColor:"rgba(34, 197, 94, 0.8)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:2},{label:"Avg Days Late",data:t.metrics_by_firm.slice(0,10).map(ee=>ee.avg_days_late),backgroundColor:"rgba(239, 68, 68, 0.8)",borderColor:"rgba(239, 68, 68, 1)",borderWidth:2,yAxisID:"y1"}]}:null,le=n?{labels:n.weekly_data.map(ee=>ee.week_label),datasets:[{label:"Expected Payout",data:n.weekly_data.map(ee=>ee.expected_payout),borderColor:"rgba(59, 130, 246, 1)",backgroundColor:"rgba(59, 130, 246, 0.1)",fill:!0,tension:.4},{label:"Actual Paid",data:n.weekly_data.map(ee=>ee.actual_paid),borderColor:"rgba(34, 197, 94, 1)",backgroundColor:"rgba(34, 197, 94, 0.1)",fill:!0,tension:.4}]}:null,ke=i?{labels:i.weekly_data.map(ee=>ee.week_label),datasets:[{label:"Claims Assigned",data:i.weekly_data.map(ee=>ee.claims_assigned),backgroundColor:"rgba(59, 130, 246, 0.8)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:2},{label:"Claims Completed",data:i.weekly_data.map(ee=>ee.claims_completed),backgroundColor:"rgba(34, 197, 94, 0.8)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:2},{label:"Backlog",data:i.weekly_data.map(ee=>ee.claims_assigned-ee.claims_completed),backgroundColor:i.weekly_data.map(ee=>ee.claims_assigned-ee.claims_completed>0?"rgba(239, 68, 68, 0.8)":"rgba(34, 197, 94, 0.8)"),borderColor:"rgba(139, 92, 246, 1)",borderWidth:2}]}:null,De=o?{labels:o.top_3_firms.map(ee=>ee.normalized_name),datasets:[{label:"Revenue Share %",data:o.top_3_firms.map(ee=>ee.revenue_share_percentage),backgroundColor:["rgba(239, 68, 68, 0.8)","rgba(245, 158, 11, 0.8)","rgba(234, 179, 8, 0.8)"],borderColor:["rgba(239, 68, 68, 1)","rgba(245, 158, 11, 1)","rgba(234, 179, 8, 1)"],borderWidth:2}]}:null,Re=c?{labels:c.daily_forecast.map(ee=>{const fe=new Date(ee.date);return`${fe.getMonth()+1}/${fe.getDate()}`}),datasets:[{label:"Expected Cash (Cumulative)",data:c.daily_forecast.map(ee=>ee.cumulative_expected),borderColor:"rgba(34, 197, 94, 1)",backgroundColor:"rgba(34, 197, 94, 0.1)",fill:!0,tension:.4},{label:"Delayed Scenario (Cumulative)",data:c.daily_forecast.map(ee=>ee.cumulative_delayed),borderColor:"rgba(239, 68, 68, 1)",backgroundColor:"rgba(239, 68, 68, 0.1)",fill:!0,tension:.4,borderDash:[5,5]}]}:null;console.log("seasonalityProfile data:",y);const Ge=_e&&Object.keys(_e).length>0?{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:Object.keys(_e).map((ee,fe)=>{const ye=_e[ee]||[],be=["rgba(34, 197, 94, 1)","rgba(59, 130, 246, 1)","rgba(139, 92, 246, 1)","rgba(249, 115, 22, 1)","rgba(236, 72, 153, 1)","rgba(234, 179, 8, 1)"];return{type:"line",label:ee,data:ye.map(Le=>Le.completedClaims),borderColor:be[fe%be.length],backgroundColor:be[fe%be.length].replace("1)","0.1)"),borderWidth:2,tension:.4,fill:!1}})}:{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{type:"line",label:"Sample Data",data:[10,15,12,18,22,25,20,16,14,12,8,6],borderColor:"rgba(34, 197, 94, 1)",backgroundColor:"rgba(34, 197, 94, 0.1)",borderWidth:2,tension:.4,fill:!1}]},M=w!=null&&w.data&&w.data.length>0?{labels:w.data.map(ee=>ee.month),datasets:[{type:"line",label:`Performance Index ${w.current_year}`,data:w.data.map(ee=>ee.index),borderColor:"rgba(59, 130, 246, 1)",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:3,tension:.4,fill:!1,pointRadius:6,pointHoverRadius:8},{type:"line",label:"Expected Pace",data:Array(12).fill(1),borderColor:"rgba(156, 163, 175, 1)",backgroundColor:"transparent",borderWidth:2,borderDash:[5,5],tension:0,fill:!1,pointRadius:0,pointHoverRadius:0}]}:null,he=Te!=null&&Te.velocity?(()=>{const ee=[],fe=["rgba(59, 130, 246, 1)","rgba(34, 197, 94, 1)","rgba(139, 92, 246, 1)","rgba(249, 115, 22, 1)","rgba(236, 72, 153, 1)","rgba(234, 179, 8, 1)","rgba(239, 68, 68, 1)","rgba(20, 184, 166, 1)"];let ye=0;for(const be in Te.velocity)for(const Le in Te.velocity[be]){const Ae=Te.velocity[be][Le],We=fe[ye%fe.length];ee.push({label:`${be} ${Le}`,data:Ae.map(Qe=>Qe.avgVelocity),borderColor:We,backgroundColor:We.replace("1)","0.1)"),fill:!1,tension:.4,borderWidth:2}),ye++}return{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:ee}})():null,ae=Te!=null&&Te.completed?(()=>{const ee=[],fe=["rgba(34, 197, 94, 1)","rgba(59, 130, 246, 1)","rgba(139, 92, 246, 1)","rgba(249, 115, 22, 1)","rgba(236, 72, 153, 1)","rgba(234, 179, 8, 1)","rgba(239, 68, 68, 1)","rgba(20, 184, 166, 1)"];let ye=0;for(const be in Te.completed)for(const Le in Te.completed[be]){const Ae=Te.completed[be][Le],We=fe[ye%fe.length];ee.push({label:`${be} ${Le}`,data:Ae.map(Qe=>Qe.claimsCompleted),borderColor:We,backgroundColor:We.replace("1)","0.1)"),fill:!1,tension:.4,borderWidth:2}),ye++}return{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:ee}})():null,J=Te!=null&&Te.activity?(()=>{const ee=[],fe=["rgba(59, 130, 246, 1)","rgba(34, 197, 94, 1)","rgba(139, 92, 246, 1)","rgba(249, 115, 22, 1)","rgba(236, 72, 153, 1)","rgba(234, 179, 8, 1)","rgba(239, 68, 68, 1)","rgba(20, 184, 166, 1)"];let ye=0;for(const be in Te.activity)for(const Le in Te.activity[be]){const Ae=Te.activity[be][Le],We=fe[ye%fe.length];ee.push({label:`${be} ${Le}`,data:Ae.map(Qe=>Qe.claimsCompleted),borderColor:We,backgroundColor:We.replace("1)","0.1)"),fill:!1,tension:.4,borderWidth:2}),ye++}return{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:ee}})():null,G=C?{labels:C.top_3_firms.map(ee=>ee.firm_name),datasets:[{label:"Claim Volume %",data:C.top_3_firms.map(ee=>ee.volume_share_percentage),backgroundColor:["rgba(239, 68, 68, 0.8)","rgba(245, 158, 11, 0.8)","rgba(234, 179, 8, 0.8)"],borderColor:["rgba(239, 68, 68, 1)","rgba(245, 158, 11, 1)","rgba(234, 179, 8, 1)"],borderWidth:2}]}:null,re=D?{labels:D.top_performers.map(ee=>ee.firm_name),datasets:[{label:"$ per Claim",data:D.top_performers.map(ee=>ee.revenue_per_claim),backgroundColor:"rgba(34, 197, 94, 0.8)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:2}]}:null,de={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"#e5e7eb"}},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.95)",titleColor:"#e5e7eb",bodyColor:"#e5e7eb",borderColor:"#4b5563",borderWidth:1}},scales:{x:{ticks:{color:"#9ca3af"},grid:{color:"rgba(75, 85, 99, 0.3)"}},y:{ticks:{color:"#9ca3af"},grid:{color:"rgba(75, 85, 99, 0.3)"}}}},ge={...de,scales:{...de.scales,y:{type:"linear",display:!0,position:"left",ticks:{color:"#9ca3af"},grid:{color:"rgba(75, 85, 99, 0.3)"},title:{display:!0,text:"On-Time Percentage",color:"#9ca3af"}},y1:{type:"linear",display:!0,position:"right",ticks:{color:"#9ca3af"},grid:{display:!1},title:{display:!0,text:"Avg Days Late",color:"#9ca3af"}}}};return f.jsx("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsx("div",{className:"mb-8",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold",children:"Business Intelligence"}),f.jsx("p",{className:"text-gray-400 mt-2",children:"Real-time analytics and performance metrics"})]}),f.jsx(Zt,{to:"/admin/claims",className:"px-4 py-2 bg-gray-800 hover:bg-gray-700 rounded-lg border border-gray-700",children:" Back to Claims"})]})}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[c&&f.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[f.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Expected Cash (30 Days)"}),f.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["$",c.expected_cash_in_30_days.toLocaleString()]}),f.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[c.summary.total_payouts_expected," payouts expected"]})]}),o&&f.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[f.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Top 3 Dependency"}),f.jsxs("div",{className:`text-2xl font-bold ${o.top_3_firm_dependency_ratio>80?"text-red-400":o.top_3_firm_dependency_ratio>60?"text-yellow-400":"text-green-400"}`,children:[o.top_3_firm_dependency_ratio.toFixed(1),"%"]}),f.jsxs("div",{className:"text-xs text-gray-500 mt-1 uppercase",children:[o.risk_assessment.concentration_level," risk"]})]}),i&&f.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[f.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Backlog Status"}),f.jsx("div",{className:`text-2xl font-bold uppercase ${i.capacity_indicators.backlog_status==="healthy"?"text-green-400":i.capacity_indicators.backlog_status==="warning"?"text-yellow-400":"text-red-400"}`,children:i.capacity_indicators.backlog_status}),f.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[i.summary.avg_backlog_growth.toFixed(1)," avg growth/week"]})]}),n&&f.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[f.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Payout Accuracy"}),f.jsxs("div",{className:`text-2xl font-bold ${n.summary.accuracy_percentage>95?"text-green-400":n.summary.accuracy_percentage>85?"text-yellow-400":"text-red-400"}`,children:[n.summary.accuracy_percentage.toFixed(1),"%"]}),f.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["$",Math.abs(n.summary.total_variance).toLocaleString()," ","variance"]})]})]}),h&&f.jsxs("div",{className:"mb-8 bg-gradient-to-r from-gray-800 to-gray-900 rounded-lg p-6 border-2 border-gray-700",children:[f.jsxs("h2",{className:"text-2xl font-bold mb-4 text-cyan-400",children:["Monthly Performance Gauge -"," ",h.current_month_name," ",h.current_year]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[f.jsx("div",{className:"lg:col-span-2",children:f.jsxs("div",{className:"relative",style:{height:"200px"},children:[f.jsx("div",{className:"absolute inset-0 flex items-end justify-center",children:f.jsxs("div",{className:"relative w-full",style:{height:"150px"},children:[f.jsxs("div",{className:"absolute bottom-0 left-0 w-full h-8 flex rounded-lg overflow-hidden",children:[f.jsx("div",{className:"flex-1 bg-green-500/30 border-r border-gray-700",title:"UNDER-UTILIZED < 60%"}),f.jsx("div",{className:"flex-1 bg-yellow-500/30 border-r border-gray-700",title:"OPTIMAL 60-85%"}),f.jsx("div",{className:"flex-1 bg-orange-500/30 border-r border-gray-700",title:"STRETCH 85-105%"}),f.jsx("div",{className:"flex-1 bg-red-500/30",title:"BURNOUT > 105%"})]}),f.jsx("div",{className:"absolute bottom-8 left-0 w-full flex justify-center",children:f.jsx("div",{className:"absolute bottom-0 w-1 bg-white rounded-full shadow-lg",style:{height:"100px",left:`${Math.min(h.capacity_percentage,140)}%`,transformOrigin:"bottom center",transform:"translateX(-50%)"},children:f.jsx("div",{className:"absolute -top-2 left-1/2 -translate-x-1/2 w-4 h-4 bg-white rounded-full shadow-lg"})})}),f.jsxs("div",{className:"absolute bottom-10 w-full flex justify-between text-xs text-gray-400 px-2",children:[f.jsx("span",{children:"0%"}),f.jsx("span",{children:"60%"}),f.jsx("span",{children:"85%"}),f.jsx("span",{children:"105%"}),f.jsx("span",{children:"140%"})]})]})}),f.jsxs("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 text-center",children:[f.jsxs("div",{className:`text-5xl font-bold ${h.capacity_status==="UNDER-UTILIZED"?"text-green-400":h.capacity_status==="OPTIMAL"?"text-yellow-400":h.capacity_status==="STRETCH"?"text-orange-400":"text-red-400"}`,children:[h.capacity_percentage.toFixed(1),"%"]}),f.jsx("div",{className:"text-sm text-gray-400 mt-1",children:"of Safe Capacity"}),f.jsx("div",{className:`text-xl font-bold mt-1 ${h.capacity_status==="UNDER-UTILIZED"?"text-green-400":h.capacity_status==="OPTIMAL"?"text-yellow-400":h.capacity_status==="STRETCH"?"text-orange-400":"text-red-400"}`,children:h.capacity_status})]})]})}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700",children:[f.jsx("div",{className:"text-xs text-gray-400",children:"Completed This Month"}),f.jsx("div",{className:"text-2xl font-bold text-green-400",children:h.monthly_completed_claims}),f.jsxs("div",{className:"text-xs text-gray-500",children:["Safe Capacity: ",h.max_safe_capacity," ","claims/month"]}),f.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Linear Projection:"," ",h.projected_end_of_month," claims"]})]}),f.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700",children:[f.jsx("div",{className:"text-xs text-gray-400",children:"Monthly Velocity"}),f.jsx("div",{className:"text-2xl font-bold text-blue-400",children:h.monthly_velocity.toFixed(1)}),f.jsx("div",{className:"text-xs text-gray-500",children:"claims/business day"})]}),f.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700",children:[f.jsx("div",{className:"text-xs text-gray-400",children:"Projected End of Month"}),f.jsx("div",{className:`text-2xl font-bold ${h.projected_end_of_month>h.max_safe_capacity?"text-red-400":"text-purple-400"}`,children:h.projected_end_of_month}),f.jsxs("div",{className:"text-xs text-gray-500",children:[h.days_remaining," days remaining"]})]})]})]}),f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-gray-400 text-sm",children:"Backlog"}),f.jsx("div",{className:"text-2xl font-bold text-orange-400",children:h.monthly_backlog})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-gray-400 text-sm",children:"Business Days"}),f.jsxs("div",{className:"text-2xl font-bold text-gray-300",children:[h.business_days_elapsed," /"," ",h.total_business_days_in_month]})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-gray-400 text-sm",children:"Burnout Ratio"}),f.jsx("div",{className:`text-2xl font-bold ${h.monthly_burnout_ratio>1.05?"text-red-400":h.monthly_burnout_ratio>.85?"text-orange-400":h.monthly_burnout_ratio>.6?"text-yellow-400":"text-green-400"}`,children:h.monthly_burnout_ratio.toFixed(2)})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-gray-400 text-sm",children:"Recommended Rate"}),f.jsx("div",{className:"text-2xl font-bold text-cyan-400",children:h.recommended_daily_rate.toFixed(1)}),f.jsx("div",{className:"text-xs text-gray-500",children:"claims/day"})]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Pe&&f.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[f.jsx("h2",{className:"text-xl font-bold mb-4 text-blue-400 cursor-help",title:"Tracks payment punctuality for top firms. Shows on-time payment percentage and average days late for the 10 firms with highest claim volume.",children:"Firm Payment Reliability"}),f.jsx("div",{style:{height:"300px"},children:f.jsx(Tf,{data:Pe,options:ge})}),f.jsx("div",{className:"mt-4 text-sm text-gray-400",children:"Top 10 firms by claim volume  On-time % vs Avg days late"})]}),le&&f.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[f.jsx("h2",{className:"text-xl font-bold mb-4 text-green-400 cursor-help",title:"Compares forecasted payouts versus actual payments received each week. Helps identify variance patterns and forecast accuracy over time.",children:"Weekly Expected vs Actual Payouts"}),f.jsx("div",{style:{height:"300px"},children:f.jsx(ks,{data:le,options:de})}),f.jsxs("div",{className:"mt-4 text-sm text-gray-400",children:["Last ",n==null?void 0:n.historical_weeks," weeks  Forecast accuracy tracking"]})]}),ke&&f.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[f.jsx("h2",{className:"text-xl font-bold mb-4 text-purple-400 cursor-help",title:"Monitors workload balance by comparing claims assigned versus claims completed each week. Backlog indicates when assignments exceed completion capacity.",children:"Capacity Stress Trend"}),f.jsx("div",{style:{height:"300px"},children:f.jsx(Tf,{data:ke,options:de})}),f.jsx("div",{className:"mt-4 text-sm text-gray-400",children:"Assigned vs completed claims  Backlog growth indicator"})]}),De&&f.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[f.jsx("h2",{className:"text-xl font-bold mb-4 text-yellow-400 cursor-help",title:"Shows revenue concentration among top 3 firms. High concentration indicates business risk if a major client relationship ends.",children:"Revenue Dependency Risk"}),f.jsx("div",{style:{height:"300px"},children:f.jsx($v,{data:De,options:{...de,scales:void 0,plugins:{...de.plugins,legend:{position:"bottom",labels:{color:"#e5e7eb"}}}}})}),f.jsxs("div",{className:"mt-4 text-sm text-gray-400",children:["Top 3 firms ="," ",o==null?void 0:o.top_3_firm_dependency_ratio.toFixed(1),"% of revenue"]})]}),Re&&f.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700 lg:col-span-2",children:[f.jsx("h2",{className:"text-xl font-bold mb-4 text-cyan-400 cursor-help",title:"Projects cumulative cash flow over the next 30 days. Compares expected scenario with delayed payment scenario (7-day delay) to assess liquidity risk.",children:"30-Day Survival Forecast"}),f.jsx("div",{style:{height:"300px"},children:f.jsx(ks,{data:Re,options:de})}),f.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-4 text-sm",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-gray-400",children:"Expected Cash"}),f.jsxs("div",{className:"text-green-400 font-bold",children:["$",c==null?void 0:c.expected_cash_in_30_days.toLocaleString()]})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-gray-400",children:"If 7-Day Delay"}),f.jsxs("div",{className:"text-red-400 font-bold",children:["-$",Math.abs((c==null?void 0:c.delayed_payment_impact)||0).toLocaleString()]})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-gray-400",children:"Impact Level"}),f.jsx("div",{className:`font-bold uppercase ${(c==null?void 0:c.risk_assessment.impact_level)==="low"?"text-green-400":(c==null?void 0:c.risk_assessment.impact_level)==="moderate"?"text-yellow-400":(c==null?void 0:c.risk_assessment.impact_level)==="high"?"text-orange-400":"text-red-400"}`,children:c==null?void 0:c.risk_assessment.impact_level})]})]})]}),Ge&&y&&f.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[f.jsx("h2",{className:"text-xl font-bold mb-4 text-green-400 cursor-help",title:"Displays monthly claim completion patterns across multiple years. Each line represents one year, allowing comparison of seasonal trends and identifying peak/low months.",children:"Business Seasonality Wave"}),f.jsx(cu,{allFirms:Y,selectedFirms:E,onChange:Z,chartId:"seasonality",className:"mb-4"}),f.jsx("div",{style:{height:"300px"},children:f.jsx(ks,{data:Ge,options:de})}),f.jsxs("div",{className:"mt-4 text-sm text-gray-400",children:["Multi-year comparison "," ",Object.keys(y).join(", "),"  JanDec by year"]})]}),M&&((oe=w==null?void 0:w.data)==null?void 0:oe.length)>0&&f.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[f.jsx("h2",{className:"text-xl font-bold mb-4 text-cyan-400 cursor-help",title:"Compares current year monthly performance against historical averages. Performance Index = Current Year / Historical Average. Values above 1.0 indicate above-average performance.",children:"Seasonal Performance Index  Current Year vs Historical Average"}),f.jsx("div",{style:{height:"300px"},children:f.jsx(ks,{data:M,options:de})}),f.jsxs("div",{className:"mt-4 grid grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[f.jsxs("div",{className:"bg-gray-700/50 rounded p-3",children:[f.jsx("div",{className:"text-gray-400",children:"Avg Index"}),f.jsx("div",{className:`text-lg font-bold ${w.summary.avg_index>=1?"text-green-400":"text-red-400"}`,children:w.summary.avg_index.toFixed(2)})]}),f.jsxs("div",{className:"bg-gray-700/50 rounded p-3",children:[f.jsx("div",{className:"text-gray-400",children:"Best Month"}),f.jsx("div",{className:"text-green-400 font-bold",children:w.summary.best_month})]}),f.jsxs("div",{className:"bg-gray-700/50 rounded p-3",children:[f.jsx("div",{className:"text-gray-400",children:"Above Expected"}),f.jsxs("div",{className:"text-green-400 font-bold",children:[w.summary.months_above_expected,"/12"]})]}),f.jsxs("div",{className:"bg-gray-700/50 rounded p-3",children:[f.jsx("div",{className:"text-gray-400",children:"Years of Data"}),f.jsx("div",{className:"text-blue-400 font-bold",children:w.years_included.length})]})]}),f.jsxs("div",{className:"mt-4 text-sm text-gray-400",children:[w.current_year," vs Historical Average  Index > 1.0 = Above Average  Based on"," ",w.years_included.filter(ee=>ee<w.current_year).length," ","historical years"]})]}),he&&m&&f.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[f.jsx("h2",{className:"text-xl font-bold mb-4 text-blue-400 cursor-help",title:"Tracks average claims processed per business day for each firm by year. Each line represents a firm-year combination showing monthly velocity patterns.",children:"Monthly Velocity Trend"}),f.jsx(cu,{allFirms:ne,selectedFirms:$,onChange:I,chartId:"velocity",className:"mb-4"}),f.jsx("div",{style:{height:"300px"},children:f.jsx(ks,{data:he,options:de})}),f.jsx("div",{className:"mt-4 text-sm text-gray-400",children:"Per firm per year  JanDec velocity trends"})]}),ae&&m&&f.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[f.jsx("h2",{className:"text-xl font-bold mb-4 text-purple-400 cursor-help",title:"Shows monthly claims completed for each firm by year. Each line represents a firm-year combination tracking claim completion volume throughout the year.",children:"Claims Completed by Month"}),f.jsx(cu,{allFirms:ne,selectedFirms:z,onChange:N,chartId:"completed",className:"mb-4"}),f.jsx("div",{style:{height:"300px"},children:f.jsx(ks,{data:ae,options:de})}),f.jsx("div",{className:"mt-4 text-sm text-gray-400",children:"Per firm per year  JanDec completion trends"})]}),J&&m&&f.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700 lg:col-span-2",children:[f.jsx("h2",{className:"text-xl font-bold mb-4 text-pink-400 cursor-help",title:"Visualizes firm activity patterns across the year. Each line represents a firm-year combination showing monthly claim completion trends.",children:"Firm Activity by Year"}),f.jsx(cu,{allFirms:ne,selectedFirms:H,onChange:K,chartId:"activity",className:"mb-4"}),f.jsx("div",{style:{height:"300px"},children:f.jsx(ks,{data:J,options:de})}),f.jsx("div",{className:"mt-4 text-sm text-gray-400",children:"Per firm per year  JanDec activity patterns"})]}),G&&C&&f.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[f.jsx("h2",{className:"text-xl font-bold mb-4 text-orange-400 cursor-help",title:"Shows claim volume concentration among top 3 firms. High concentration indicates operational risk if a major firm relationship ends or changes significantly.",children:"Operational Dependency Risk  Claim Volume"}),f.jsx("div",{style:{height:"300px"},children:f.jsx($v,{data:G,options:{...de,scales:void 0,plugins:{...de.plugins,legend:{position:"bottom",labels:{color:"#e5e7eb"}}}}})}),f.jsxs("div",{className:"mt-4 text-sm text-gray-400",children:["Top 3 firms ="," ",C.top_3_firm_dependency_ratio.toFixed(1),"% of claim volume"]})]}),re&&D&&f.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[f.jsx("h2",{className:"text-xl font-bold mb-4 text-green-400 cursor-help",title:"Ranks firms by average revenue per claim. Identifies most valuable client relationships and helps prioritize high-value partnerships.",children:"Profit Density by Firm ($ per Claim)"}),f.jsx("div",{style:{height:"300px"},children:f.jsx(Tf,{data:re,options:de})}),f.jsxs("div",{className:"mt-4 text-sm text-gray-400",children:["Top performers  Overall average: $",D.overall_revenue_per_claim.toFixed(0)," per claim"]})]})]}),b.length>0&&f.jsxs("div",{className:"mt-8 bg-gray-800 rounded-lg p-6 border-2 border-cyan-500",children:[f.jsx("h2",{className:"text-2xl font-bold mb-4 text-cyan-400",children:" Seasonality Troubleshooter"}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Select Firm:"}),f.jsx("select",{value:R,onChange:ee=>B(ee.target.value),className:"w-full md:w-64 px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-cyan-500 focus:outline-none",children:Array.from(new Set(b.map(ee=>ee.firm))).sort().map(ee=>f.jsx("option",{value:ee,children:ee},ee))})]}),R&&f.jsxs("div",{className:"mt-4",children:[f.jsxs("h3",{className:"text-lg font-bold mb-3 text-gray-200",children:["Completed Claims by Month for ",R]}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-left text-sm",children:[f.jsx("thead",{className:"bg-gray-700",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-4 py-2 text-cyan-400",children:"Year"}),f.jsx("th",{className:"px-4 py-2 text-cyan-400",children:"Month"}),f.jsx("th",{className:"px-4 py-2 text-cyan-400",children:"Month Name"}),f.jsx("th",{className:"px-4 py-2 text-cyan-400",children:"Completed"})]})}),f.jsx("tbody",{children:b.filter(ee=>ee.firm===R).sort((ee,fe)=>ee.year!==fe.year?ee.year-fe.year:ee.month-fe.month).map((ee,fe)=>{const ye=["January","February","March","April","May","June","July","August","September","October","November","December"];return f.jsxs("tr",{className:fe%2===0?"bg-gray-800":"bg-gray-750",children:[f.jsx("td",{className:"px-4 py-2 text-gray-300",children:ee.year}),f.jsx("td",{className:"px-4 py-2 text-gray-300",children:ee.month}),f.jsx("td",{className:"px-4 py-2 text-gray-300",children:ye[ee.month-1]}),f.jsx("td",{className:`px-4 py-2 font-bold ${ee.completed>0?"text-green-400":"text-gray-500"}`,children:ee.completed})]},fe)})})]})}),f.jsx("div",{className:"mt-4 text-xs text-gray-400",children:" Use this table to verify claim counts by month. Check for missing data or unexpected zeros."})]})]}),f.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c&&c.risk_assessment.recommendations.length>0&&f.jsxs("div",{className:`rounded-lg p-6 border-2 ${c.risk_assessment.impact_level==="critical"?"bg-red-900/20 border-red-500":c.risk_assessment.impact_level==="high"?"bg-orange-900/20 border-orange-500":c.risk_assessment.impact_level==="moderate"?"bg-blue-900/20 border-blue-500":"bg-green-900/20 border-green-500"}`,children:[f.jsx("h3",{className:"text-lg font-bold mb-3",children:"Cash Flow Recommendations"}),f.jsx("ul",{className:"space-y-2",children:c.risk_assessment.recommendations.map((ee,fe)=>f.jsxs("li",{className:"text-sm flex items-start",children:[f.jsx("span",{className:"mr-2",children:""}),f.jsx("span",{children:ee})]},fe))})]}),o&&o.risk_assessment.recommendations.length>0&&f.jsxs("div",{className:`rounded-lg p-6 border-2 ${o.risk_assessment.concentration_level==="critical"?"bg-red-900/20 border-red-500":o.risk_assessment.concentration_level==="high"?"bg-orange-900/20 border-orange-500":o.risk_assessment.concentration_level==="moderate"?"bg-blue-900/20 border-blue-500":"bg-green-900/20 border-green-500"}`,children:[f.jsx("h3",{className:"text-lg font-bold mb-3",children:"Revenue Risk Recommendations"}),f.jsx("ul",{className:"space-y-2",children:o.risk_assessment.recommendations.map((ee,fe)=>f.jsxs("li",{className:"text-sm flex items-start",children:[f.jsx("span",{className:"mr-2",children:""}),f.jsx("span",{children:ee})]},fe))})]})]}),f.jsxs("div",{className:"mt-8 text-center text-sm text-gray-500",children:[f.jsxs("p",{children:["Data updated: ",new Date().toLocaleString()]}),f.jsxs("p",{className:"mt-2 text-xs text-gray-600",children:[" Tip: Add"," ",f.jsx("code",{className:"bg-gray-800 px-2 py-1 rounded",children:"?debug=true"})," ","to the URL to enable debug mode with console.table() output"]}),f.jsxs("p",{className:"mt-2",children:["APIs:",f.jsx("a",{href:"/CipherDispatch/api/firm-reliability",className:"text-blue-400 hover:underline ml-2",children:"Firm Reliability"})," ","",f.jsx("a",{href:"/CipherDispatch/api/payout-variance",className:"text-blue-400 hover:underline ml-2",children:"Payout Variance"})," ","",f.jsx("a",{href:"/CipherDispatch/api/capacity-stress",className:"text-blue-400 hover:underline ml-2",children:"Capacity Stress"})," ","",f.jsx("a",{href:"/CipherDispatch/api/revenue-risk",className:"text-blue-400 hover:underline ml-2",children:"Revenue Risk"})," ","",f.jsx("a",{href:"/CipherDispatch/api/survival-runway",className:"text-blue-400 hover:underline ml-2",children:"Survival Runway"})," ","",f.jsx("a",{href:"/CipherDispatch/api/monthly-performance",className:"text-blue-400 hover:underline ml-2",children:"Monthly Performance"})," ","",f.jsx("a",{href:"/CipherDispatch/api/monthly-history",className:"text-blue-400 hover:underline ml-2",children:"Monthly History"})]})]})]})})}function _L(){const[t]=Hn(),[e,n]=q.useState([]),[r,i]=q.useState([]),[s,o]=q.useState(!0),[a,c]=q.useState(null),[u,h]=q.useState(!1),[p,m]=q.useState(!1),[g,y]=q.useState(!1),[_,b]=q.useState("ALL"),[x,w]=q.useState(null),[S,C]=q.useState(t.get("view")==="calendar"),[j,D]=q.useState(""),P=async()=>{try{console.log("Initializing authorization for MyClaims component..."),await qd(Ne),h(!0),console.log("Authorization initialized successfully")}catch(z){console.error("Authorization initialization failed:",z),c(z.message),o(!1)}},T=async()=>{if(!u){console.log("Authorization not ready, skipping load");return}try{o(!0),c(null);const z=nn();if(!z||!z.isInitialized)throw new Error("Authorization not properly initialized");const N=z.getCurrentUser();console.log(`Loading my claims for ${N==null?void 0:N.role}: ${N==null?void 0:N.fullName}`);let H=Ne.from("claims").select("id,claim_number,customer_name,status,appointment_start,appointment_end,vin,vehicle_year,vehicle_make,vehicle_model,address_line1,city,state,postal_code,firm_name,pay_amount,file_total,profiles:assigned_to(full_name)");H=z.scopedClaimsQuery(H),H=H.order("appointment_start");const{data:K,error:Y}=await H;if(Y){console.error("Error loading my claims:",Y);const ce=z.handleAuthError(Y);if(ce.shouldRedirect){c(`${ce.message} Redirecting to login...`),setTimeout(()=>{window.location.href="/CipherDispatch/"},2e3);return}throw new Error(ce.message)}console.log(`Loaded ${(K==null?void 0:K.length)||0} my claims for ${N==null?void 0:N.role}`),i(K||[]),A(K||[])}catch(z){console.error("Error in load function:",z),c(z.message)}finally{o(!1)}},A=z=>{let N=[...z];if(_!=="ALL"&&(N=N.filter(H=>H.status===_)),p?N=N.filter(H=>H.status==="COMPLETED"):N=N.filter(H=>H.status===null||H.status==="SCHEDULED"||H.status==="IN_PROGRESS"),g&&!p){const H=new Date().toISOString().split("T")[0];N=N.filter(K=>K.appointment_start?new Date(K.appointment_start).toISOString().split("T")[0]===H:!1)}if(j.trim()){const H=j.toLowerCase();N=N.filter(K=>{var Y,ce,ne;return((Y=K.claim_number)==null?void 0:Y.toLowerCase().includes(H))||((ce=K.customer_name)==null?void 0:ce.toLowerCase().includes(H))||((ne=K.firm_name)==null?void 0:ne.toLowerCase().includes(H))})}n(N)};q.useEffect(()=>{P()},[]),q.useEffect(()=>{if(u){T();const z=nn();if(z!=null&&z.isInitialized){const N=Ne.channel("my-claims").on("postgres_changes",{event:"*",schema:"public",table:"claims"},()=>{console.log("Real-time update received, reloading my claims..."),T()}).subscribe();return()=>{Ne.removeChannel(N)}}}},[u]),q.useEffect(()=>{r.length>0&&A(r)},[p,g,_,j,r]);const F=(z,N)=>{w(N.id);const H={id:N.id,claimNumber:N.claim_number,firmName:"",customerName:N.customer_name,addressLine1:N.address_line1||"",city:N.city||"",state:N.state||"",zip:N.postal_code||"",lat:null,lng:null,vin:N.vin||"",vehicleYear:N.vehicle_year||null,vehicleMake:N.vehicle_make||"",vehicleModel:N.vehicle_model||"",status:N.status||"",appointmentStart:N.appointment_start||null},K=JSON.stringify(H);z.dataTransfer.setData("application/json",K),z.dataTransfer.setData("text/plain",K),z.dataTransfer.effectAllowed="copy"},V=()=>{w(null)},R=()=>{const z={unassigned:0,assigned:0,inProgress:0,completed:0,canceled:0};return r.forEach(N=>{N.status===null?z.unassigned++:N.status==="SCHEDULED"?z.assigned++:N.status==="IN_PROGRESS"?z.inProgress++:N.status==="COMPLETED"?z.completed++:N.status==="CANCELED"&&z.canceled++}),z},B=z=>{if(!z)return"No Appointment";const N=new Date,H=new Date(z),K=new Date(N.getFullYear(),N.getMonth(),N.getDate()),Y=new Date(K);Y.setDate(Y.getDate()+1);const ce=new Date(K);ce.setDate(ce.getDate()+7);const ne=new Date(H.getFullYear(),H.getMonth(),H.getDate());return ne<K?"Overdue":ne.getTime()===K.getTime()?"Today":ne.getTime()===Y.getTime()?"Tomorrow":ne<ce?"This Week":"Later"},E=()=>{const z={Overdue:[],Today:[],Tomorrow:[],"This Week":[],Later:[],"No Appointment":[]};return e.forEach(N=>{const H=B(N.appointment_start);z[H].push(N)}),z},Z=R(),$=E();if(s)return f.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a202c 0%, #2d3748 100%)",padding:16,display:"flex",alignItems:"center",justifyContent:"center"},children:f.jsx("div",{style:{color:"#e2e8f0",fontSize:"18px"},children:"Loading your claims..."})});if(a)return f.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a202c 0%, #2d3748 100%)",padding:16,display:"flex",alignItems:"center",justifyContent:"center"},children:f.jsxs("div",{style:{color:"#ef4444",fontSize:"18px",textAlign:"center",background:"#2d3748",padding:"24px",borderRadius:"8px",border:"2px solid #ef4444"},children:[f.jsx("h3",{children:"Unable to load your claims"}),f.jsx("p",{children:a}),f.jsx("button",{onClick:()=>window.location.reload(),style:{background:"#ef4444",color:"white",border:"none",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",marginTop:"12px"},children:"Retry"})]})});const I=z=>f.jsxs(Zt,{to:`/claim/${z.id}`,draggable:!0,onDragStart:N=>F(N,z),onDragEnd:V,style:{border:"1px solid #4a5568",borderRadius:8,padding:16,background:"#2d3748",boxShadow:"0 2px 4px rgba(0,0,0,0.5)",textDecoration:"none",color:"#e2e8f0",transition:"transform 0.2s, box-shadow 0.2s, opacity 0.2s",cursor:x===z.id?"grabbing":"pointer",opacity:x===z.id?.5:1},onMouseOver:N=>{x!==z.id&&(N.currentTarget.style.transform="translateY(-4px)",N.currentTarget.style.boxShadow="0 6px 12px rgba(0,0,0,0.7)")},onMouseOut:N=>{x!==z.id&&(N.currentTarget.style.transform="translateY(0)",N.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.5)")},children:[f.jsxs("div",{style:{marginBottom:12},children:[f.jsxs("div",{style:{fontSize:20,fontWeight:"bold",marginBottom:8,color:"#e2e8f0"},children:["#",z.claim_number]}),f.jsx("div",{style:{display:"inline-block",padding:"4px 12px",borderRadius:4,fontSize:11,fontWeight:"bold",background:z.status==="COMPLETED"?"#4CAF50":z.status==="IN_PROGRESS"?"#FF9800":z.status==="SCHEDULED"?"#2196F3":"#9E9E9E",color:"white"},children:z.status||"ASSIGNED"})]}),f.jsx("div",{style:{fontSize:16,marginBottom:12,paddingBottom:12,borderBottom:"1px solid #4a5568"},children:f.jsxs("div",{style:{color:"#e2e8f0",marginBottom:4},children:[f.jsx("strong",{children:"Customer:"})," ",z.customer_name]})}),f.jsxs("div",{style:{fontSize:15,marginBottom:12},children:[f.jsx("div",{style:{color:"#e2e8f0",fontWeight:"bold",marginBottom:6},children:" Address"}),z.address_line1?f.jsxs("div",{style:{color:"#cbd5e0",fontSize:14},children:[z.address_line1,", ",z.city,", ",z.state," ",z.postal_code]}):f.jsx("div",{style:{color:"#718096",fontSize:12,fontStyle:"italic"},children:"No address on file"})]}),f.jsxs("div",{style:{fontSize:15,marginBottom:12},children:[f.jsx("div",{style:{color:"#e2e8f0",fontWeight:"bold",marginBottom:6},children:" Appointment"}),z.appointment_start?f.jsx("div",{style:{color:"#cbd5e0",fontSize:14},children:new Date(z.appointment_start).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})}):f.jsx("div",{style:{color:"#718096",fontSize:12,fontStyle:"italic"},children:"No appointment scheduled"})]}),f.jsxs("div",{style:{fontSize:15},children:[f.jsx("div",{style:{color:"#e2e8f0",fontWeight:"bold",marginBottom:6},children:" Vehicle"}),z.vehicle_year||z.vehicle_make||z.vehicle_model?f.jsxs("div",{style:{color:"#cbd5e0",fontSize:14},children:[z.vehicle_year&&`${z.vehicle_year} `,z.vehicle_make&&`${z.vehicle_make} `,z.vehicle_model&&z.vehicle_model]}):f.jsx("div",{style:{color:"#718096",fontSize:12,fontStyle:"italic"},children:"No vehicle info"})]})]},z.id);return f.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a202c 0%, #2d3748 100%)",padding:16},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[f.jsx(Zt,{to:"/",style:{padding:"8px 16px",background:"#4a5568",color:"white",textDecoration:"none",borderRadius:4,fontWeight:"bold",fontSize:"15px"},children:" Home"}),f.jsx("h3",{style:{margin:0,color:"#e2e8f0",fontSize:"22px",fontWeight:"bold"},children:"My Claims"}),!S&&f.jsx("input",{type:"text",placeholder:" Search by claim #, customer, or firm...",value:j,onChange:z=>D(z.target.value),style:{padding:"8px 16px",background:"#1a202c",border:"2px solid #4a5568",borderRadius:"6px",color:"#e2e8f0",fontSize:"14px",width:"300px",marginLeft:"16px",transition:"border-color 0.2s"},onFocus:z=>z.currentTarget.style.borderColor="#667eea",onBlur:z=>z.currentTarget.style.borderColor="#4a5568"})]}),f.jsxs("div",{style:{display:"flex",gap:8},children:[f.jsx("button",{onClick:()=>C(!S),style:{padding:"8px 16px",background:S?"#667eea":"#4a5568",color:"white",border:"none",borderRadius:4,fontWeight:"bold",cursor:"pointer",fontSize:"15px"},children:S?" List View":" Calendar View"}),!p&&!S&&f.jsx("button",{onClick:()=>y(!g),style:{padding:"8px 16px",background:g?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"#4a5568",color:"white",border:g?"2px solid #818cf8":"2px solid transparent",borderRadius:"6px",fontWeight:"bold",cursor:"pointer",fontSize:"15px",transition:"all 0.2s",boxShadow:g?"0 2px 8px rgba(102, 126, 234, 0.4)":"none"},onMouseEnter:z=>{g||(z.currentTarget.style.background="#5a6c7d")},onMouseLeave:z=>{g||(z.currentTarget.style.background="#4a5568")},children:g?" Today's Claims Only":" Filter to Today"}),!S&&f.jsx("button",{onClick:()=>{m(!p),p||(y(!1),b("ALL"))},style:{padding:"8px 16px",background:p?"#4a5568":"#10b981",color:"white",border:"none",borderRadius:4,fontWeight:"bold",cursor:"pointer",fontSize:"15px"},children:p?" View Active Claims":" View Completed"})]})]}),S?f.jsx(Uw,{claims:r,onClaimUpdate:T}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{display:"flex",gap:12,marginBottom:24,flexWrap:"wrap"},children:[f.jsxs("button",{onClick:()=>{b("ALL"),m(!1)},style:{padding:"12px 20px",background:_==="ALL"&&!p?"#667eea":"#374151",color:"white",border:_==="ALL"&&!p?"2px solid #818cf8":"2px solid transparent",borderRadius:8,fontWeight:"bold",cursor:"pointer",fontSize:"14px",display:"flex",flexDirection:"column",alignItems:"center",transition:"all 0.2s"},children:[f.jsx("div",{style:{fontSize:"18px",marginBottom:4},children:Z.unassigned+Z.assigned+Z.inProgress}),f.jsx("div",{style:{fontSize:"12px",opacity:.9},children:"All Active"})]}),f.jsxs("button",{onClick:()=>{b("SCHEDULED"),m(!1)},style:{padding:"12px 20px",background:_==="SCHEDULED"?"#2196F3":"#374151",color:"white",border:_==="SCHEDULED"?"2px solid #64b5f6":"2px solid transparent",borderRadius:8,fontWeight:"bold",cursor:"pointer",fontSize:"14px",display:"flex",flexDirection:"column",alignItems:"center",transition:"all 0.2s"},children:[f.jsx("div",{style:{fontSize:"18px",marginBottom:4},children:Z.assigned}),f.jsx("div",{style:{fontSize:"12px",opacity:.9},children:"Assigned"})]}),f.jsxs("button",{onClick:()=>{b("IN_PROGRESS"),m(!1)},style:{padding:"12px 20px",background:_==="IN_PROGRESS"?"#FF9800":"#374151",color:"white",border:_==="IN_PROGRESS"?"2px solid #ffb74d":"2px solid transparent",borderRadius:8,fontWeight:"bold",cursor:"pointer",fontSize:"14px",display:"flex",flexDirection:"column",alignItems:"center",transition:"all 0.2s"},children:[f.jsx("div",{style:{fontSize:"18px",marginBottom:4},children:Z.inProgress}),f.jsx("div",{style:{fontSize:"12px",opacity:.9},children:"In Progress"})]}),f.jsxs("button",{onClick:()=>{b("COMPLETED"),m(!0)},style:{padding:"12px 20px",background:_==="COMPLETED"&&p?"#4CAF50":"#374151",color:"white",border:_==="COMPLETED"&&p?"2px solid #81c784":"2px solid transparent",borderRadius:8,fontWeight:"bold",cursor:"pointer",fontSize:"14px",display:"flex",flexDirection:"column",alignItems:"center",transition:"all 0.2s"},children:[f.jsx("div",{style:{fontSize:"18px",marginBottom:4},children:Z.completed}),f.jsx("div",{style:{fontSize:"12px",opacity:.9},children:"Completed"})]}),f.jsxs("button",{onClick:()=>{b("CANCELED"),m(!0)},style:{padding:"12px 20px",background:_==="CANCELED"&&p?"#EF4444":"#374151",color:"white",border:_==="CANCELED"&&p?"2px solid #f87171":"2px solid transparent",borderRadius:8,fontWeight:"bold",cursor:"pointer",fontSize:"14px",display:"flex",flexDirection:"column",alignItems:"center",transition:"all 0.2s"},children:[f.jsx("div",{style:{fontSize:"18px",marginBottom:4},children:Z.canceled}),f.jsx("div",{style:{fontSize:"12px",opacity:.9},children:"Canceled"})]})]}),e.length===0?f.jsx("div",{style:{textAlign:"center",padding:48,color:"#a0aec0"},children:"No claims found matching your filters."}):f.jsx(f.Fragment,{children:Object.entries($).map(([z,N])=>N.length===0?null:f.jsxs("div",{style:{marginBottom:32},children:[f.jsxs("div",{style:{fontSize:"18px",fontWeight:"bold",color:"#e2e8f0",marginBottom:16,paddingBottom:8,borderBottom:"2px solid #4a5568",display:"flex",alignItems:"center",gap:8},children:[f.jsxs("span",{children:[z==="Overdue"&&"",z==="Today"&&"",z==="Tomorrow"&&"",z==="This Week"&&"",z==="Later"&&"",z==="No Appointment"&&""]}),f.jsx("span",{children:z}),f.jsxs("span",{style:{fontSize:"14px",opacity:.7,fontWeight:"normal"},children:["(",N.length,")"]})]}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:16},children:N.map(I)})]},z))})]})]})}function vL(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}function oS(t,e){return new Promise(function(n,r){let i;return xL(t).then(function(s){try{return i=s,n(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(o){return r(o)}},r)})}const xL=t=>new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:i}})=>{const s=new DataView(i);let o=0;if(s.getUint16(o)!==65496)return n("not a valid JPEG");for(o+=2;;){const a=s.getUint16(o);if(a===65498)break;const c=s.getUint16(o+2);if(a===65505&&s.getUint32(o+4)===1165519206){const u=o+10;let h;switch(s.getUint16(u)){case 18761:h=!0;break;case 19789:h=!1;break;default:return n("TIFF header contains invalid endian")}if(s.getUint16(u+2,h)!==42)return n("TIFF header contains invalid version");const p=s.getUint32(u+4,h),m=u+p+2+12*s.getUint16(u+p,h);for(let g=u+p+2;g<m;g+=12)if(s.getUint16(g,h)==274){if(s.getUint16(g+2,h)!==3)return n("Orientation data type is invalid");if(s.getUint32(g+4,h)!==1)return n("Orientation data count is invalid");s.setUint16(g+8,1,h);break}return e(i.slice(o,o+2+c))}o+=2+c}return e(new Blob)}),r.readAsArrayBuffer(t)});var bd={},bL={get exports(){return bd},set exports(t){bd=t}};(function(t){var e,n,r={};bL.exports=r,r.parse=function(i,s){for(var o=r.bin.readUshort,a=r.bin.readUint,c=0,u={},h=new Uint8Array(i),p=h.length-4;a(h,p)!=101010256;)p--;c=p,c+=4;var m=o(h,c+=4);o(h,c+=2);var g=a(h,c+=2),y=a(h,c+=4);c+=4,c=y;for(var _=0;_<m;_++){a(h,c),c+=4,c+=4,c+=4,a(h,c+=4),g=a(h,c+=4);var b=a(h,c+=4),x=o(h,c+=4),w=o(h,c+2),S=o(h,c+4);c+=6;var C=a(h,c+=8);c+=4,c+=x+w+S,r._readLocal(h,C,u,g,b,s)}return u},r._readLocal=function(i,s,o,a,c,u){var h=r.bin.readUshort,p=r.bin.readUint;p(i,s),h(i,s+=4),h(i,s+=2);var m=h(i,s+=2);p(i,s+=2),p(i,s+=4),s+=4;var g=h(i,s+=8),y=h(i,s+=2);s+=2;var _=r.bin.readUTF8(i,s,g);if(s+=g,s+=y,u)o[_]={size:c,csize:a};else{var b=new Uint8Array(i.buffer,s);if(m==0)o[_]=new Uint8Array(b.buffer.slice(s,s+a));else{if(m!=8)throw"unknown compression method: "+m;var x=new Uint8Array(c);r.inflateRaw(b,x),o[_]=x}}},r.inflateRaw=function(i,s){return r.F.inflate(i,s)},r.inflate=function(i,s){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),s)},r.deflate=function(i,s){s==null&&(s={level:6});var o=0,a=new Uint8Array(50+Math.floor(1.1*i.length));a[o]=120,a[o+1]=156,o+=2,o=r.F.deflateRaw(i,a,o,s.level);var c=r.adler(i,0,i.length);return a[o+0]=c>>>24&255,a[o+1]=c>>>16&255,a[o+2]=c>>>8&255,a[o+3]=c>>>0&255,new Uint8Array(a.buffer,0,o+4)},r.deflateRaw=function(i,s){s==null&&(s={level:6});var o=new Uint8Array(50+Math.floor(1.1*i.length)),a=r.F.deflateRaw(i,o,a,s.level);return new Uint8Array(o.buffer,0,a)},r.encode=function(i,s){s==null&&(s=!1);var o=0,a=r.bin.writeUint,c=r.bin.writeUshort,u={};for(var h in i){var p=!r._noNeed(h)&&!s,m=i[h],g=r.crc.crc(m,0,m.length);u[h]={cpr:p,usize:m.length,crc:g,file:p?r.deflateRaw(m):m}}for(var h in u)o+=u[h].file.length+30+46+2*r.bin.sizeUTF8(h);o+=22;var y=new Uint8Array(o),_=0,b=[];for(var h in u){var x=u[h];b.push(_),_=r._writeHeader(y,_,h,x,0)}var w=0,S=_;for(var h in u)x=u[h],b.push(_),_=r._writeHeader(y,_,h,x,1,b[w++]);var C=_-S;return a(y,_,101010256),_+=4,c(y,_+=4,w),c(y,_+=2,w),a(y,_+=2,C),a(y,_+=4,S),_+=4,_+=2,y.buffer},r._noNeed=function(i){var s=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(s)!=-1},r._writeHeader=function(i,s,o,a,c,u){var h=r.bin.writeUint,p=r.bin.writeUshort,m=a.file;return h(i,s,c==0?67324752:33639248),s+=4,c==1&&(s+=2),p(i,s,20),p(i,s+=2,0),p(i,s+=2,a.cpr?8:0),h(i,s+=2,0),h(i,s+=4,a.crc),h(i,s+=4,m.length),h(i,s+=4,a.usize),p(i,s+=4,r.bin.sizeUTF8(o)),p(i,s+=2,0),s+=2,c==1&&(s+=2,s+=2,h(i,s+=6,u),s+=4),s+=r.bin.writeUTF8(i,s,o),c==0&&(i.set(m,s),s+=m.length),s},r.crc={table:function(){for(var i=new Uint32Array(256),s=0;s<256;s++){for(var o=s,a=0;a<8;a++)1&o?o=3988292384^o>>>1:o>>>=1;i[s]=o}return i}(),update:function(i,s,o,a){for(var c=0;c<a;c++)i=r.crc.table[255&(i^s[o+c])]^i>>>8;return i},crc:function(i,s,o){return 4294967295^r.crc.update(4294967295,i,s,o)}},r.adler=function(i,s,o){for(var a=1,c=0,u=s,h=s+o;u<h;){for(var p=Math.min(u+5552,h);u<p;)c+=a+=i[u++];a%=65521,c%=65521}return c<<16|a},r.bin={readUshort:function(i,s){return i[s]|i[s+1]<<8},writeUshort:function(i,s,o){i[s]=255&o,i[s+1]=o>>8&255},readUint:function(i,s){return 16777216*i[s+3]+(i[s+2]<<16|i[s+1]<<8|i[s])},writeUint:function(i,s,o){i[s]=255&o,i[s+1]=o>>8&255,i[s+2]=o>>16&255,i[s+3]=o>>24&255},readASCII:function(i,s,o){for(var a="",c=0;c<o;c++)a+=String.fromCharCode(i[s+c]);return a},writeASCII:function(i,s,o){for(var a=0;a<o.length;a++)i[s+a]=o.charCodeAt(a)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,s,o){for(var a,c="",u=0;u<o;u++)c+="%"+r.bin.pad(i[s+u].toString(16));try{a=decodeURIComponent(c)}catch{return r.bin.readASCII(i,s,o)}return a},writeUTF8:function(i,s,o){for(var a=o.length,c=0,u=0;u<a;u++){var h=o.charCodeAt(u);if(!(4294967168&h))i[s+c]=h,c++;else if(!(4294965248&h))i[s+c]=192|h>>6,i[s+c+1]=128|h>>0&63,c+=2;else if(!(4294901760&h))i[s+c]=224|h>>12,i[s+c+1]=128|h>>6&63,i[s+c+2]=128|h>>0&63,c+=3;else{if(4292870144&h)throw"e";i[s+c]=240|h>>18,i[s+c+1]=128|h>>12&63,i[s+c+2]=128|h>>6&63,i[s+c+3]=128|h>>0&63,c+=4}}return c},sizeUTF8:function(i){for(var s=i.length,o=0,a=0;a<s;a++){var c=i.charCodeAt(a);if(!(4294967168&c))o++;else if(!(4294965248&c))o+=2;else if(!(4294901760&c))o+=3;else{if(4292870144&c)throw"e";o+=4}}return o}},r.F={},r.F.deflateRaw=function(i,s,o,a){var c=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],u=r.F.U,h=r.F._goodIndex;r.F._hash;var p=r.F._putsE,m=0,g=o<<3,y=0,_=i.length;if(a==0){for(;m<_;)p(s,g,m+(V=Math.min(65535,_-m))==_?1:0),g=r.F._copyExact(i,m,V,s,g+8),m+=V;return g>>>3}var b=u.lits,x=u.strt,w=u.prev,S=0,C=0,j=0,D=0,P=0,T=0;for(_>2&&(x[T=r.F._hash(i,0)]=0),m=0;m<_;m++){if(P=T,m+1<_-2){T=r.F._hash(i,m+1);var A=m+1&32767;w[A]=x[T],x[T]=A}if(y<=m){(S>14e3||C>26697)&&_-m>100&&(y<m&&(b[S]=m-y,S+=2,y=m),g=r.F._writeBlock(m==_-1||y==_?1:0,b,S,D,i,j,m-j,s,g),S=C=D=0,j=m);var F=0;m<_-2&&(F=r.F._bestMatch(i,m,w,P,Math.min(c[2],_-m),c[3]));var V=F>>>16,R=65535&F;if(F!=0){R=65535&F;var B=h(V=F>>>16,u.of0);u.lhst[257+B]++;var E=h(R,u.df0);u.dhst[E]++,D+=u.exb[B]+u.dxb[E],b[S]=V<<23|m-y,b[S+1]=R<<16|B<<8|E,S+=2,y=m+V}else u.lhst[i[m]]++;C++}}for(j==m&&i.length!=0||(y<m&&(b[S]=m-y,S+=2,y=m),g=r.F._writeBlock(1,b,S,D,i,j,m-j,s,g),S=0,C=0,S=C=D=0,j=m);7&g;)g++;return g>>>3},r.F._bestMatch=function(i,s,o,a,c,u){var h=32767&s,p=o[h],m=h-p+32768&32767;if(p==h||a!=r.F._hash(i,s-m))return 0;for(var g=0,y=0,_=Math.min(32767,s);m<=_&&--u!=0&&p!=h;){if(g==0||i[s+g]==i[s+g-m]){var b=r.F._howLong(i,s,m);if(b>g){if(y=m,(g=b)>=c)break;m+2<b&&(b=m+2);for(var x=0,w=0;w<b-2;w++){var S=s-m+w+32768&32767,C=S-o[S]+32768&32767;C>x&&(x=C,p=S)}}}m+=(h=p)-(p=o[h])+32768&32767}return g<<16|y},r.F._howLong=function(i,s,o){if(i[s]!=i[s-o]||i[s+1]!=i[s+1-o]||i[s+2]!=i[s+2-o])return 0;var a=s,c=Math.min(i.length,s+258);for(s+=3;s<c&&i[s]==i[s-o];)s++;return s-a},r.F._hash=function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,s,o,a,c,u,h,p,m){var g,y,_,b,x,w,S,C,j,D=r.F.U,P=r.F._putsF,T=r.F._putsE;D.lhst[256]++,y=(g=r.F.getTrees())[0],_=g[1],b=g[2],x=g[3],w=g[4],S=g[5],C=g[6],j=g[7];var A=32+(m+3&7?8-(m+3&7):0)+(h<<3),F=a+r.F.contSize(D.fltree,D.lhst)+r.F.contSize(D.fdtree,D.dhst),V=a+r.F.contSize(D.ltree,D.lhst)+r.F.contSize(D.dtree,D.dhst);V+=14+3*S+r.F.contSize(D.itree,D.ihst)+(2*D.ihst[16]+3*D.ihst[17]+7*D.ihst[18]);for(var R=0;R<286;R++)D.lhst[R]=0;for(R=0;R<30;R++)D.dhst[R]=0;for(R=0;R<19;R++)D.ihst[R]=0;var B=A<F&&A<V?0:F<V?1:2;if(P(p,m,i),P(p,m+1,B),m+=3,B==0){for(;7&m;)m++;m=r.F._copyExact(c,u,h,p,m)}else{var E,Z;if(B==1&&(E=D.fltree,Z=D.fdtree),B==2){r.F.makeCodes(D.ltree,y),r.F.revCodes(D.ltree,y),r.F.makeCodes(D.dtree,_),r.F.revCodes(D.dtree,_),r.F.makeCodes(D.itree,b),r.F.revCodes(D.itree,b),E=D.ltree,Z=D.dtree,T(p,m,x-257),T(p,m+=5,w-1),T(p,m+=5,S-4),m+=4;for(var $=0;$<S;$++)T(p,m+3*$,D.itree[1+(D.ordr[$]<<1)]);m+=3*S,m=r.F._codeTiny(C,D.itree,p,m),m=r.F._codeTiny(j,D.itree,p,m)}for(var I=u,z=0;z<o;z+=2){for(var N=s[z],H=N>>>23,K=I+(8388607&N);I<K;)m=r.F._writeLit(c[I++],E,p,m);if(H!=0){var Y=s[z+1],ce=Y>>16,ne=Y>>8&255,X=255&Y;T(p,m=r.F._writeLit(257+ne,E,p,m),H-D.of0[ne]),m+=D.exb[ne],P(p,m=r.F._writeLit(X,Z,p,m),ce-D.df0[X]),m+=D.dxb[X],I+=H}}m=r.F._writeLit(256,E,p,m)}return m},r.F._copyExact=function(i,s,o,a,c){var u=c>>>3;return a[u]=o,a[u+1]=o>>>8,a[u+2]=255-a[u],a[u+3]=255-a[u+1],u+=4,a.set(new Uint8Array(i.buffer,s,o),u),c+(o+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,s=r.F._hufTree(i.lhst,i.ltree,15),o=r.F._hufTree(i.dhst,i.dtree,15),a=[],c=r.F._lenCodes(i.ltree,a),u=[],h=r.F._lenCodes(i.dtree,u),p=0;p<a.length;p+=2)i.ihst[a[p]]++;for(p=0;p<u.length;p+=2)i.ihst[u[p]]++;for(var m=r.F._hufTree(i.ihst,i.itree,7),g=19;g>4&&i.itree[1+(i.ordr[g-1]<<1)]==0;)g--;return[s,o,m,c,h,g,a,u]},r.F.getSecond=function(i){for(var s=[],o=0;o<i.length;o+=2)s.push(i[o+1]);return s},r.F.nonZero=function(i){for(var s="",o=0;o<i.length;o+=2)i[o+1]!=0&&(s+=(o>>1)+",");return s},r.F.contSize=function(i,s){for(var o=0,a=0;a<s.length;a++)o+=s[a]*i[1+(a<<1)];return o},r.F._codeTiny=function(i,s,o,a){for(var c=0;c<i.length;c+=2){var u=i[c],h=i[c+1];a=r.F._writeLit(u,s,o,a);var p=u==16?2:u==17?3:7;u>15&&(r.F._putsE(o,a,h,p),a+=p)}return a},r.F._lenCodes=function(i,s){for(var o=i.length;o!=2&&i[o-1]==0;)o-=2;for(var a=0;a<o;a+=2){var c=i[a+1],u=a+3<o?i[a+3]:-1,h=a+5<o?i[a+5]:-1,p=a==0?-1:i[a-1];if(c==0&&u==c&&h==c){for(var m=a+5;m+2<o&&i[m+2]==c;)m+=2;(g=Math.min(m+1-a>>>1,138))<11?s.push(17,g-3):s.push(18,g-11),a+=2*g-2}else if(c==p&&u==c&&h==c){for(m=a+5;m+2<o&&i[m+2]==c;)m+=2;var g=Math.min(m+1-a>>>1,6);s.push(16,g-3),a+=2*g-2}else s.push(c,0)}return o>>>1},r.F._hufTree=function(i,s,o){var a=[],c=i.length,u=s.length,h=0;for(h=0;h<u;h+=2)s[h]=0,s[h+1]=0;for(h=0;h<c;h++)i[h]!=0&&a.push({lit:h,f:i[h]});var p=a.length,m=a.slice(0);if(p==0)return 0;if(p==1){var g=a[0].lit;return m=g==0?1:0,s[1+(g<<1)]=1,s[1+(m<<1)]=1,1}a.sort(function(C,j){return C.f-j.f});var y=a[0],_=a[1],b=0,x=1,w=2;for(a[0]={lit:-1,f:y.f+_.f,l:y,r:_,d:0};x!=p-1;)y=b!=x&&(w==p||a[b].f<a[w].f)?a[b++]:a[w++],_=b!=x&&(w==p||a[b].f<a[w].f)?a[b++]:a[w++],a[x++]={lit:-1,f:y.f+_.f,l:y,r:_};var S=r.F.setDepth(a[x-1],0);for(S>o&&(r.F.restrictDepth(m,o,S),S=o),h=0;h<p;h++)s[1+(m[h].lit<<1)]=m[h].d;return S},r.F.setDepth=function(i,s){return i.lit!=-1?(i.d=s,s):Math.max(r.F.setDepth(i.l,s+1),r.F.setDepth(i.r,s+1))},r.F.restrictDepth=function(i,s,o){var a=0,c=1<<o-s,u=0;for(i.sort(function(p,m){return m.d==p.d?p.f-m.f:m.d-p.d}),a=0;a<i.length&&i[a].d>s;a++){var h=i[a].d;i[a].d=s,u+=c-(1<<o-h)}for(u>>>=o-s;u>0;)(h=i[a].d)<s?(i[a].d++,u-=1<<s-h-1):a++;for(;a>=0;a--)i[a].d==s&&u<0&&(i[a].d--,u++);u!=0&&console.log("debt left")},r.F._goodIndex=function(i,s){var o=0;return s[16|o]<=i&&(o|=16),s[8|o]<=i&&(o|=8),s[4|o]<=i&&(o|=4),s[2|o]<=i&&(o|=2),s[1|o]<=i&&(o|=1),o},r.F._writeLit=function(i,s,o,a){return r.F._putsF(o,a,s[i<<1]),a+s[1+(i<<1)]},r.F.inflate=function(i,s){var o=Uint8Array;if(i[0]==3&&i[1]==0)return s||new o(0);var a=r.F,c=a._bitsF,u=a._bitsE,h=a._decodeTiny,p=a.makeCodes,m=a.codes2map,g=a._get17,y=a.U,_=s==null;_&&(s=new o(i.length>>>2<<3));for(var b,x,w=0,S=0,C=0,j=0,D=0,P=0,T=0,A=0,F=0;w==0;)if(w=c(i,F,1),S=c(i,F+1,2),F+=3,S!=0){if(_&&(s=r.F._check(s,A+(1<<17))),S==1&&(b=y.flmap,x=y.fdmap,P=511,T=31),S==2){C=u(i,F,5)+257,j=u(i,F+5,5)+1,D=u(i,F+10,4)+4,F+=14;for(var V=0;V<38;V+=2)y.itree[V]=0,y.itree[V+1]=0;var R=1;for(V=0;V<D;V++){var B=u(i,F+3*V,3);y.itree[1+(y.ordr[V]<<1)]=B,B>R&&(R=B)}F+=3*D,p(y.itree,R),m(y.itree,R,y.imap),b=y.lmap,x=y.dmap,F=h(y.imap,(1<<R)-1,C+j,i,F,y.ttree);var E=a._copyOut(y.ttree,0,C,y.ltree);P=(1<<E)-1;var Z=a._copyOut(y.ttree,C,j,y.dtree);T=(1<<Z)-1,p(y.ltree,E),m(y.ltree,E,b),p(y.dtree,Z),m(y.dtree,Z,x)}for(;;){var $=b[g(i,F)&P];F+=15&$;var I=$>>>4;if(!(I>>>8))s[A++]=I;else{if(I==256)break;var z=A+I-254;if(I>264){var N=y.ldef[I-257];z=A+(N>>>3)+u(i,F,7&N),F+=7&N}var H=x[g(i,F)&T];F+=15&H;var K=H>>>4,Y=y.ddef[K],ce=(Y>>>4)+c(i,F,15&Y);for(F+=15&Y,_&&(s=r.F._check(s,A+(1<<17)));A<z;)s[A]=s[A++-ce],s[A]=s[A++-ce],s[A]=s[A++-ce],s[A]=s[A++-ce];A=z}}}else{7&F&&(F+=8-(7&F));var ne=4+(F>>>3),X=i[ne-4]|i[ne-3]<<8;_&&(s=r.F._check(s,A+X)),s.set(new o(i.buffer,i.byteOffset+ne,X),A),F=ne+X<<3,A+=X}return s.length==A?s:s.slice(0,A)},r.F._check=function(i,s){var o=i.length;if(s<=o)return i;var a=new Uint8Array(Math.max(o<<1,s));return a.set(i,0),a},r.F._decodeTiny=function(i,s,o,a,c,u){for(var h=r.F._bitsE,p=r.F._get17,m=0;m<o;){var g=i[p(a,c)&s];c+=15&g;var y=g>>>4;if(y<=15)u[m]=y,m++;else{var _=0,b=0;y==16?(b=3+h(a,c,2),c+=2,_=u[m-1]):y==17?(b=3+h(a,c,3),c+=3):y==18&&(b=11+h(a,c,7),c+=7);for(var x=m+b;m<x;)u[m]=_,m++}}return c},r.F._copyOut=function(i,s,o,a){for(var c=0,u=0,h=a.length>>>1;u<o;){var p=i[u+s];a[u<<1]=0,a[1+(u<<1)]=p,p>c&&(c=p),u++}for(;u<h;)a[u<<1]=0,a[1+(u<<1)]=0,u++;return c},r.F.makeCodes=function(i,s){for(var o,a,c,u,h=r.F.U,p=i.length,m=h.bl_count,g=0;g<=s;g++)m[g]=0;for(g=1;g<p;g+=2)m[i[g]]++;var y=h.next_code;for(o=0,m[0]=0,a=1;a<=s;a++)o=o+m[a-1]<<1,y[a]=o;for(c=0;c<p;c+=2)(u=i[c+1])!=0&&(i[c]=y[u],y[u]++)},r.F.codes2map=function(i,s,o){for(var a=i.length,c=r.F.U.rev15,u=0;u<a;u+=2)if(i[u+1]!=0)for(var h=u>>1,p=i[u+1],m=h<<4|p,g=s-p,y=i[u]<<g,_=y+(1<<g);y!=_;)o[c[y]>>>15-s]=m,y++},r.F.revCodes=function(i,s){for(var o=r.F.U.rev15,a=15-s,c=0;c<i.length;c+=2){var u=i[c]<<s-i[c+1];i[c]=o[u]>>>a}},r.F._putsE=function(i,s,o){o<<=7&s;var a=s>>>3;i[a]|=o,i[a+1]|=o>>>8},r.F._putsF=function(i,s,o){o<<=7&s;var a=s>>>3;i[a]|=o,i[a+1]|=o>>>8,i[a+2]|=o>>>16},r.F._bitsE=function(i,s,o){return(i[s>>>3]|i[1+(s>>>3)]<<8)>>>(7&s)&(1<<o)-1},r.F._bitsF=function(i,s,o){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)&(1<<o)-1},r.F._get17=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)},r.F._get25=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16|i[3+(s>>>3)]<<24)>>>(7&s)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=r.F.U,s=0;s<32768;s++){var o=s;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,i.rev15[s]=(o>>>16|o<<16)>>>17}function a(c,u,h){for(;u--!=0;)c.push(0,h)}for(s=0;s<32;s++)i.ldef[s]=i.of0[s]<<3|i.exb[s],i.ddef[s]=i.df0[s]<<4|i.dxb[s];a(i.fltree,144,8),a(i.fltree,112,9),a(i.fltree,24,7),a(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),a(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),a(i.itree,19,0),a(i.ltree,286,0),a(i.dtree,30,0),a(i.ttree,320,0)}()})();var wL=vL({__proto__:null,default:bd},[bd]);const kr=function(){var t={nextZero(h,p){for(;h[p]!=0;)p++;return p},readUshort:(h,p)=>h[p]<<8|h[p+1],writeUshort(h,p,m){h[p]=m>>8&255,h[p+1]=255&m},readUint:(h,p)=>16777216*h[p]+(h[p+1]<<16|h[p+2]<<8|h[p+3]),writeUint(h,p,m){h[p]=m>>24&255,h[p+1]=m>>16&255,h[p+2]=m>>8&255,h[p+3]=255&m},readASCII(h,p,m){let g="";for(let y=0;y<m;y++)g+=String.fromCharCode(h[p+y]);return g},writeASCII(h,p,m){for(let g=0;g<m.length;g++)h[p+g]=m.charCodeAt(g)},readBytes(h,p,m){const g=[];for(let y=0;y<m;y++)g.push(h[p+y]);return g},pad:h=>h.length<2?`0${h}`:h,readUTF8(h,p,m){let g,y="";for(let _=0;_<m;_++)y+=`%${t.pad(h[p+_].toString(16))}`;try{g=decodeURIComponent(y)}catch{return t.readASCII(h,p,m)}return g}};function e(h,p,m,g){const y=p*m,_=s(g),b=Math.ceil(p*_/8),x=new Uint8Array(4*y),w=new Uint32Array(x.buffer),{ctype:S}=g,{depth:C}=g,j=t.readUshort;if(S==6){const N=y<<2;if(C==8)for(var D=0;D<N;D+=4)x[D]=h[D],x[D+1]=h[D+1],x[D+2]=h[D+2],x[D+3]=h[D+3];if(C==16)for(D=0;D<N;D++)x[D]=h[D<<1]}else if(S==2){const N=g.tabs.tRNS;if(N==null){if(C==8)for(D=0;D<y;D++){var P=3*D;w[D]=255<<24|h[P+2]<<16|h[P+1]<<8|h[P]}if(C==16)for(D=0;D<y;D++)P=6*D,w[D]=255<<24|h[P+4]<<16|h[P+2]<<8|h[P]}else{var T=N[0];const H=N[1],K=N[2];if(C==8)for(D=0;D<y;D++){var A=D<<2;P=3*D,w[D]=255<<24|h[P+2]<<16|h[P+1]<<8|h[P],h[P]==T&&h[P+1]==H&&h[P+2]==K&&(x[A+3]=0)}if(C==16)for(D=0;D<y;D++)A=D<<2,P=6*D,w[D]=255<<24|h[P+4]<<16|h[P+2]<<8|h[P],j(h,P)==T&&j(h,P+2)==H&&j(h,P+4)==K&&(x[A+3]=0)}}else if(S==3){const N=g.tabs.PLTE,H=g.tabs.tRNS,K=H?H.length:0;if(C==1)for(var F=0;F<m;F++){var V=F*b,R=F*p;for(D=0;D<p;D++){A=R+D<<2;var B=3*(E=h[V+(D>>3)]>>7-((7&D)<<0)&1);x[A]=N[B],x[A+1]=N[B+1],x[A+2]=N[B+2],x[A+3]=E<K?H[E]:255}}if(C==2)for(F=0;F<m;F++)for(V=F*b,R=F*p,D=0;D<p;D++)A=R+D<<2,B=3*(E=h[V+(D>>2)]>>6-((3&D)<<1)&3),x[A]=N[B],x[A+1]=N[B+1],x[A+2]=N[B+2],x[A+3]=E<K?H[E]:255;if(C==4)for(F=0;F<m;F++)for(V=F*b,R=F*p,D=0;D<p;D++)A=R+D<<2,B=3*(E=h[V+(D>>1)]>>4-((1&D)<<2)&15),x[A]=N[B],x[A+1]=N[B+1],x[A+2]=N[B+2],x[A+3]=E<K?H[E]:255;if(C==8)for(D=0;D<y;D++){var E;A=D<<2,B=3*(E=h[D]),x[A]=N[B],x[A+1]=N[B+1],x[A+2]=N[B+2],x[A+3]=E<K?H[E]:255}}else if(S==4){if(C==8)for(D=0;D<y;D++){A=D<<2;var Z=h[$=D<<1];x[A]=Z,x[A+1]=Z,x[A+2]=Z,x[A+3]=h[$+1]}if(C==16)for(D=0;D<y;D++){var $;A=D<<2,Z=h[$=D<<2],x[A]=Z,x[A+1]=Z,x[A+2]=Z,x[A+3]=h[$+2]}}else if(S==0)for(T=g.tabs.tRNS?g.tabs.tRNS:-1,F=0;F<m;F++){const N=F*b,H=F*p;if(C==1)for(var I=0;I<p;I++){var z=(Z=255*(h[N+(I>>>3)]>>>7-(7&I)&1))==255*T?0:255;w[H+I]=z<<24|Z<<16|Z<<8|Z}else if(C==2)for(I=0;I<p;I++)z=(Z=85*(h[N+(I>>>2)]>>>6-((3&I)<<1)&3))==85*T?0:255,w[H+I]=z<<24|Z<<16|Z<<8|Z;else if(C==4)for(I=0;I<p;I++)z=(Z=17*(h[N+(I>>>1)]>>>4-((1&I)<<2)&15))==17*T?0:255,w[H+I]=z<<24|Z<<16|Z<<8|Z;else if(C==8)for(I=0;I<p;I++)z=(Z=h[N+I])==T?0:255,w[H+I]=z<<24|Z<<16|Z<<8|Z;else if(C==16)for(I=0;I<p;I++)Z=h[N+(I<<1)],z=j(h,N+(I<<1))==T?0:255,w[H+I]=z<<24|Z<<16|Z<<8|Z}return x}function n(h,p,m,g){const y=s(h),_=Math.ceil(m*y/8),b=new Uint8Array((_+1+h.interlace)*g);return p=h.tabs.CgBI?i(p,b):r(p,b),h.interlace==0?p=o(p,h,0,m,g):h.interlace==1&&(p=function(w,S){const C=S.width,j=S.height,D=s(S),P=D>>3,T=Math.ceil(C*D/8),A=new Uint8Array(j*T);let F=0;const V=[0,0,4,0,2,0,1],R=[0,4,0,2,0,1,0],B=[8,8,8,4,4,2,2],E=[8,8,4,4,2,2,1];let Z=0;for(;Z<7;){const I=B[Z],z=E[Z];let N=0,H=0,K=V[Z];for(;K<j;)K+=I,H++;let Y=R[Z];for(;Y<C;)Y+=z,N++;const ce=Math.ceil(N*D/8);o(w,S,F,N,H);let ne=0,X=V[Z];for(;X<j;){let _e=R[Z],Te=F+ne*ce<<3;for(;_e<C;){var $;if(D==1&&($=($=w[Te>>3])>>7-(7&Te)&1,A[X*T+(_e>>3)]|=$<<7-((7&_e)<<0)),D==2&&($=($=w[Te>>3])>>6-(7&Te)&3,A[X*T+(_e>>2)]|=$<<6-((3&_e)<<1)),D==4&&($=($=w[Te>>3])>>4-(7&Te)&15,A[X*T+(_e>>1)]|=$<<4-((1&_e)<<2)),D>=8){const Pe=X*T+_e*P;for(let le=0;le<P;le++)A[Pe+le]=w[(Te>>3)+le]}Te+=D,_e+=z}ne++,X+=I}N*H!=0&&(F+=H*(1+ce)),Z+=1}return A}(p,h)),p}function r(h,p){return i(new Uint8Array(h.buffer,2,h.length-6),p)}var i=function(){const h={H:{}};return h.H.N=function(p,m){const g=Uint8Array;let y,_,b=0,x=0,w=0,S=0,C=0,j=0,D=0,P=0,T=0;if(p[0]==3&&p[1]==0)return m||new g(0);const A=h.H,F=A.b,V=A.e,R=A.R,B=A.n,E=A.A,Z=A.Z,$=A.m,I=m==null;for(I&&(m=new g(p.length>>>2<<5));b==0;)if(b=F(p,T,1),x=F(p,T+1,2),T+=3,x!=0){if(I&&(m=h.H.W(m,P+(1<<17))),x==1&&(y=$.J,_=$.h,j=511,D=31),x==2){w=V(p,T,5)+257,S=V(p,T+5,5)+1,C=V(p,T+10,4)+4,T+=14;let N=1;for(var z=0;z<38;z+=2)$.Q[z]=0,$.Q[z+1]=0;for(z=0;z<C;z++){const Y=V(p,T+3*z,3);$.Q[1+($.X[z]<<1)]=Y,Y>N&&(N=Y)}T+=3*C,B($.Q,N),E($.Q,N,$.u),y=$.w,_=$.d,T=R($.u,(1<<N)-1,w+S,p,T,$.v);const H=A.V($.v,0,w,$.C);j=(1<<H)-1;const K=A.V($.v,w,S,$.D);D=(1<<K)-1,B($.C,H),E($.C,H,y),B($.D,K),E($.D,K,_)}for(;;){const N=y[Z(p,T)&j];T+=15&N;const H=N>>>4;if(!(H>>>8))m[P++]=H;else{if(H==256)break;{let K=P+H-254;if(H>264){const _e=$.q[H-257];K=P+(_e>>>3)+V(p,T,7&_e),T+=7&_e}const Y=_[Z(p,T)&D];T+=15&Y;const ce=Y>>>4,ne=$.c[ce],X=(ne>>>4)+F(p,T,15&ne);for(T+=15&ne;P<K;)m[P]=m[P++-X],m[P]=m[P++-X],m[P]=m[P++-X],m[P]=m[P++-X];P=K}}}}else{7&T&&(T+=8-(7&T));const N=4+(T>>>3),H=p[N-4]|p[N-3]<<8;I&&(m=h.H.W(m,P+H)),m.set(new g(p.buffer,p.byteOffset+N,H),P),T=N+H<<3,P+=H}return m.length==P?m:m.slice(0,P)},h.H.W=function(p,m){const g=p.length;if(m<=g)return p;const y=new Uint8Array(g<<1);return y.set(p,0),y},h.H.R=function(p,m,g,y,_,b){const x=h.H.e,w=h.H.Z;let S=0;for(;S<g;){const C=p[w(y,_)&m];_+=15&C;const j=C>>>4;if(j<=15)b[S]=j,S++;else{let D=0,P=0;j==16?(P=3+x(y,_,2),_+=2,D=b[S-1]):j==17?(P=3+x(y,_,3),_+=3):j==18&&(P=11+x(y,_,7),_+=7);const T=S+P;for(;S<T;)b[S]=D,S++}}return _},h.H.V=function(p,m,g,y){let _=0,b=0;const x=y.length>>>1;for(;b<g;){const w=p[b+m];y[b<<1]=0,y[1+(b<<1)]=w,w>_&&(_=w),b++}for(;b<x;)y[b<<1]=0,y[1+(b<<1)]=0,b++;return _},h.H.n=function(p,m){const g=h.H.m,y=p.length;let _,b,x,w;const S=g.j;for(var C=0;C<=m;C++)S[C]=0;for(C=1;C<y;C+=2)S[p[C]]++;const j=g.K;for(_=0,S[0]=0,b=1;b<=m;b++)_=_+S[b-1]<<1,j[b]=_;for(x=0;x<y;x+=2)w=p[x+1],w!=0&&(p[x]=j[w],j[w]++)},h.H.A=function(p,m,g){const y=p.length,_=h.H.m.r;for(let b=0;b<y;b+=2)if(p[b+1]!=0){const x=b>>1,w=p[b+1],S=x<<4|w,C=m-w;let j=p[b]<<C;const D=j+(1<<C);for(;j!=D;)g[_[j]>>>15-m]=S,j++}},h.H.l=function(p,m){const g=h.H.m.r,y=15-m;for(let _=0;_<p.length;_+=2){const b=p[_]<<m-p[_+1];p[_]=g[b]>>>y}},h.H.M=function(p,m,g){g<<=7&m;const y=m>>>3;p[y]|=g,p[y+1]|=g>>>8},h.H.I=function(p,m,g){g<<=7&m;const y=m>>>3;p[y]|=g,p[y+1]|=g>>>8,p[y+2]|=g>>>16},h.H.e=function(p,m,g){return(p[m>>>3]|p[1+(m>>>3)]<<8)>>>(7&m)&(1<<g)-1},h.H.b=function(p,m,g){return(p[m>>>3]|p[1+(m>>>3)]<<8|p[2+(m>>>3)]<<16)>>>(7&m)&(1<<g)-1},h.H.Z=function(p,m){return(p[m>>>3]|p[1+(m>>>3)]<<8|p[2+(m>>>3)]<<16)>>>(7&m)},h.H.i=function(p,m){return(p[m>>>3]|p[1+(m>>>3)]<<8|p[2+(m>>>3)]<<16|p[3+(m>>>3)]<<24)>>>(7&m)},h.H.m=function(){const p=Uint16Array,m=Uint32Array;return{K:new p(16),j:new p(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new p(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new m(32),J:new p(512),_:[],h:new p(32),$:[],w:new p(32768),C:[],v:[],d:new p(32768),D:[],u:new p(512),Q:[],r:new p(32768),s:new m(286),Y:new m(30),a:new m(19),t:new m(15e3),k:new p(65536),g:new p(32768)}}(),function(){const p=h.H.m;for(var m=0;m<32768;m++){let y=m;y=(2863311530&y)>>>1|(1431655765&y)<<1,y=(3435973836&y)>>>2|(858993459&y)<<2,y=(4042322160&y)>>>4|(252645135&y)<<4,y=(4278255360&y)>>>8|(16711935&y)<<8,p.r[m]=(y>>>16|y<<16)>>>17}function g(y,_,b){for(;_--!=0;)y.push(0,b)}for(m=0;m<32;m++)p.q[m]=p.S[m]<<3|p.T[m],p.c[m]=p.p[m]<<4|p.z[m];g(p._,144,8),g(p._,112,9),g(p._,24,7),g(p._,8,8),h.H.n(p._,9),h.H.A(p._,9,p.J),h.H.l(p._,9),g(p.$,32,5),h.H.n(p.$,5),h.H.A(p.$,5,p.h),h.H.l(p.$,5),g(p.Q,19,0),g(p.C,286,0),g(p.D,30,0),g(p.v,320,0)}(),h.H.N}();function s(h){return[1,null,3,1,2,null,4][h.ctype]*h.depth}function o(h,p,m,g,y){let _=s(p);const b=Math.ceil(g*_/8);let x,w;_=Math.ceil(_/8);let S=h[m],C=0;if(S>1&&(h[m]=[0,0,1][S-2]),S==3)for(C=_;C<b;C++)h[C+1]=h[C+1]+(h[C+1-_]>>>1)&255;for(let j=0;j<y;j++)if(x=m+j*b,w=x+j+1,S=h[w-1],C=0,S==0)for(;C<b;C++)h[x+C]=h[w+C];else if(S==1){for(;C<_;C++)h[x+C]=h[w+C];for(;C<b;C++)h[x+C]=h[w+C]+h[x+C-_]}else if(S==2)for(;C<b;C++)h[x+C]=h[w+C]+h[x+C-b];else if(S==3){for(;C<_;C++)h[x+C]=h[w+C]+(h[x+C-b]>>>1);for(;C<b;C++)h[x+C]=h[w+C]+(h[x+C-b]+h[x+C-_]>>>1)}else{for(;C<_;C++)h[x+C]=h[w+C]+a(0,h[x+C-b],0);for(;C<b;C++)h[x+C]=h[w+C]+a(h[x+C-_],h[x+C-b],h[x+C-_-b])}return h}function a(h,p,m){const g=h+p-m,y=g-h,_=g-p,b=g-m;return y*y<=_*_&&y*y<=b*b?h:_*_<=b*b?p:m}function c(h,p,m){m.width=t.readUint(h,p),p+=4,m.height=t.readUint(h,p),p+=4,m.depth=h[p],p++,m.ctype=h[p],p++,m.compress=h[p],p++,m.filter=h[p],p++,m.interlace=h[p],p++}function u(h,p,m,g,y,_,b,x,w){const S=Math.min(p,y),C=Math.min(m,_);let j=0,D=0;for(let Z=0;Z<C;Z++)for(let $=0;$<S;$++)if(b>=0&&x>=0?(j=Z*p+$<<2,D=(x+Z)*y+b+$<<2):(j=(-x+Z)*p-b+$<<2,D=Z*y+$<<2),w==0)g[D]=h[j],g[D+1]=h[j+1],g[D+2]=h[j+2],g[D+3]=h[j+3];else if(w==1){var P=h[j+3]*.00392156862745098,T=h[j]*P,A=h[j+1]*P,F=h[j+2]*P,V=g[D+3]*(1/255),R=g[D]*V,B=g[D+1]*V,E=g[D+2]*V;const I=1-P,z=P+V*I,N=z==0?0:1/z;g[D+3]=255*z,g[D+0]=(T+R*I)*N,g[D+1]=(A+B*I)*N,g[D+2]=(F+E*I)*N}else if(w==2)P=h[j+3],T=h[j],A=h[j+1],F=h[j+2],V=g[D+3],R=g[D],B=g[D+1],E=g[D+2],P==V&&T==R&&A==B&&F==E?(g[D]=0,g[D+1]=0,g[D+2]=0,g[D+3]=0):(g[D]=T,g[D+1]=A,g[D+2]=F,g[D+3]=P);else if(w==3){if(P=h[j+3],T=h[j],A=h[j+1],F=h[j+2],V=g[D+3],R=g[D],B=g[D+1],E=g[D+2],P==V&&T==R&&A==B&&F==E)continue;if(P<220&&V>20)return!1}return!0}return{decode:function(p){const m=new Uint8Array(p);let g=8;const y=t,_=y.readUshort,b=y.readUint,x={tabs:{},frames:[]},w=new Uint8Array(m.length);let S,C=0,j=0;const D=[137,80,78,71,13,10,26,10];for(var P=0;P<8;P++)if(m[P]!=D[P])throw"The input is not a PNG file!";for(;g<m.length;){const Z=y.readUint(m,g);g+=4;const $=y.readASCII(m,g,4);if(g+=4,$=="IHDR")c(m,g,x);else if($=="iCCP"){for(var T=g;m[T]!=0;)T++;y.readASCII(m,g,T-g),m[T+1];const I=m.slice(T+2,g+Z);let z=null;try{z=r(I)}catch{z=i(I)}x.tabs[$]=z}else if($=="CgBI")x.tabs[$]=m.slice(g,g+4);else if($=="IDAT"){for(P=0;P<Z;P++)w[C+P]=m[g+P];C+=Z}else if($=="acTL")x.tabs[$]={num_frames:b(m,g),num_plays:b(m,g+4)},S=new Uint8Array(m.length);else if($=="fcTL"){j!=0&&((E=x.frames[x.frames.length-1]).data=n(x,S.slice(0,j),E.rect.width,E.rect.height),j=0);const I={x:b(m,g+12),y:b(m,g+16),width:b(m,g+4),height:b(m,g+8)};let z=_(m,g+22);z=_(m,g+20)/(z==0?100:z);const N={rect:I,delay:Math.round(1e3*z),dispose:m[g+24],blend:m[g+25]};x.frames.push(N)}else if($=="fdAT"){for(P=0;P<Z-4;P++)S[j+P]=m[g+P+4];j+=Z-4}else if($=="pHYs")x.tabs[$]=[y.readUint(m,g),y.readUint(m,g+4),m[g+8]];else if($=="cHRM")for(x.tabs[$]=[],P=0;P<8;P++)x.tabs[$].push(y.readUint(m,g+4*P));else if($=="tEXt"||$=="zTXt"){x.tabs[$]==null&&(x.tabs[$]={});var A=y.nextZero(m,g),F=y.readASCII(m,g,A-g),V=g+Z-A-1;if($=="tEXt")B=y.readASCII(m,A+1,V);else{var R=r(m.slice(A+2,A+2+V));B=y.readUTF8(R,0,R.length)}x.tabs[$][F]=B}else if($=="iTXt"){x.tabs[$]==null&&(x.tabs[$]={}),A=0,T=g,A=y.nextZero(m,T),F=y.readASCII(m,T,A-T);const I=m[T=A+1];var B;m[T+1],T+=2,A=y.nextZero(m,T),y.readASCII(m,T,A-T),T=A+1,A=y.nextZero(m,T),y.readUTF8(m,T,A-T),V=Z-((T=A+1)-g),I==0?B=y.readUTF8(m,T,V):(R=r(m.slice(T,T+V)),B=y.readUTF8(R,0,R.length)),x.tabs[$][F]=B}else if($=="PLTE")x.tabs[$]=y.readBytes(m,g,Z);else if($=="hIST"){const I=x.tabs.PLTE.length/3;for(x.tabs[$]=[],P=0;P<I;P++)x.tabs[$].push(_(m,g+2*P))}else if($=="tRNS")x.ctype==3?x.tabs[$]=y.readBytes(m,g,Z):x.ctype==0?x.tabs[$]=_(m,g):x.ctype==2&&(x.tabs[$]=[_(m,g),_(m,g+2),_(m,g+4)]);else if($=="gAMA")x.tabs[$]=y.readUint(m,g)/1e5;else if($=="sRGB")x.tabs[$]=m[g];else if($=="bKGD")x.ctype==0||x.ctype==4?x.tabs[$]=[_(m,g)]:x.ctype==2||x.ctype==6?x.tabs[$]=[_(m,g),_(m,g+2),_(m,g+4)]:x.ctype==3&&(x.tabs[$]=m[g]);else if($=="IEND")break;g+=Z,y.readUint(m,g),g+=4}var E;return j!=0&&((E=x.frames[x.frames.length-1]).data=n(x,S.slice(0,j),E.rect.width,E.rect.height)),x.data=n(x,w,x.width,x.height),delete x.compress,delete x.interlace,delete x.filter,x},toRGBA8:function(p){const m=p.width,g=p.height;if(p.tabs.acTL==null)return[e(p.data,m,g,p).buffer];const y=[];p.frames[0].data==null&&(p.frames[0].data=p.data);const _=m*g*4,b=new Uint8Array(_),x=new Uint8Array(_),w=new Uint8Array(_);for(let C=0;C<p.frames.length;C++){const j=p.frames[C],D=j.rect.x,P=j.rect.y,T=j.rect.width,A=j.rect.height,F=e(j.data,T,A,p);if(C!=0)for(var S=0;S<_;S++)w[S]=b[S];if(j.blend==0?u(F,T,A,b,m,g,D,P,0):j.blend==1&&u(F,T,A,b,m,g,D,P,1),y.push(b.buffer.slice(0)),j.dispose!=0){if(j.dispose==1)u(x,T,A,b,m,g,D,P,0);else if(j.dispose==2)for(S=0;S<_;S++)b[S]=w[S]}}return y},_paeth:a,_copyTile:u,_bin:t}}();(function(){const{_copyTile:t}=kr,{_bin:e}=kr,n=kr._paeth;var r={table:function(){const T=new Uint32Array(256);for(let A=0;A<256;A++){let F=A;for(let V=0;V<8;V++)1&F?F=3988292384^F>>>1:F>>>=1;T[A]=F}return T}(),update(T,A,F,V){for(let R=0;R<V;R++)T=r.table[255&(T^A[F+R])]^T>>>8;return T},crc:(T,A,F)=>4294967295^r.update(4294967295,T,A,F)};function i(T,A,F,V){A[F]+=T[0]*V>>4,A[F+1]+=T[1]*V>>4,A[F+2]+=T[2]*V>>4,A[F+3]+=T[3]*V>>4}function s(T){return Math.max(0,Math.min(255,T))}function o(T,A){const F=T[0]-A[0],V=T[1]-A[1],R=T[2]-A[2],B=T[3]-A[3];return F*F+V*V+R*R+B*B}function a(T,A,F,V,R,B,E){E==null&&(E=1);const Z=V.length,$=[];for(var I=0;I<Z;I++){const X=V[I];$.push([X>>>0&255,X>>>8&255,X>>>16&255,X>>>24&255])}for(I=0;I<Z;I++){let X=4294967295;for(var z=0,N=0;N<Z;N++){var H=o($[I],$[N]);N!=I&&H<X&&(X=H,z=N)}}const K=new Uint32Array(R.buffer),Y=new Int16Array(A*F*4),ce=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(I=0;I<ce.length;I++)ce[I]=255*((ce[I]+.5)/16-.5);for(let X=0;X<F;X++)for(let _e=0;_e<A;_e++){var ne;I=4*(X*A+_e),E!=2?ne=[s(T[I]+Y[I]),s(T[I+1]+Y[I+1]),s(T[I+2]+Y[I+2]),s(T[I+3]+Y[I+3])]:(H=ce[4*(3&X)+(3&_e)],ne=[s(T[I]+H),s(T[I+1]+H),s(T[I+2]+H),s(T[I+3]+H)]),z=0;let Te=16777215;for(N=0;N<Z;N++){const ke=o(ne,$[N]);ke<Te&&(Te=ke,z=N)}const Pe=$[z],le=[ne[0]-Pe[0],ne[1]-Pe[1],ne[2]-Pe[2],ne[3]-Pe[3]];E==1&&(_e!=A-1&&i(le,Y,I+4,7),X!=F-1&&(_e!=0&&i(le,Y,I+4*A-4,3),i(le,Y,I+4*A,5),_e!=A-1&&i(le,Y,I+4*A+4,1))),B[I>>2]=z,K[I>>2]=V[z]}}function c(T,A,F,V,R){R==null&&(R={});const{crc:B}=r,E=e.writeUint,Z=e.writeUshort,$=e.writeASCII;let I=8;const z=T.frames.length>1;let N,H=!1,K=33+(z?20:0);if(R.sRGB!=null&&(K+=13),R.pHYs!=null&&(K+=21),R.iCCP!=null&&(N=pako.deflate(R.iCCP),K+=21+N.length+4),T.ctype==3){for(var Y=T.plte.length,ce=0;ce<Y;ce++)T.plte[ce]>>>24!=255&&(H=!0);K+=8+3*Y+4+(H?8+1*Y+4:0)}for(var ne=0;ne<T.frames.length;ne++)z&&(K+=38),K+=(Pe=T.frames[ne]).cimg.length+12,ne!=0&&(K+=4);K+=12;const X=new Uint8Array(K),_e=[137,80,78,71,13,10,26,10];for(ce=0;ce<8;ce++)X[ce]=_e[ce];if(E(X,I,13),I+=4,$(X,I,"IHDR"),I+=4,E(X,I,A),I+=4,E(X,I,F),I+=4,X[I]=T.depth,I++,X[I]=T.ctype,I++,X[I]=0,I++,X[I]=0,I++,X[I]=0,I++,E(X,I,B(X,I-17,17)),I+=4,R.sRGB!=null&&(E(X,I,1),I+=4,$(X,I,"sRGB"),I+=4,X[I]=R.sRGB,I++,E(X,I,B(X,I-5,5)),I+=4),R.iCCP!=null){const le=13+N.length;E(X,I,le),I+=4,$(X,I,"iCCP"),I+=4,$(X,I,"ICC profile"),I+=11,I+=2,X.set(N,I),I+=N.length,E(X,I,B(X,I-(le+4),le+4)),I+=4}if(R.pHYs!=null&&(E(X,I,9),I+=4,$(X,I,"pHYs"),I+=4,E(X,I,R.pHYs[0]),I+=4,E(X,I,R.pHYs[1]),I+=4,X[I]=R.pHYs[2],I++,E(X,I,B(X,I-13,13)),I+=4),z&&(E(X,I,8),I+=4,$(X,I,"acTL"),I+=4,E(X,I,T.frames.length),I+=4,E(X,I,R.loop!=null?R.loop:0),I+=4,E(X,I,B(X,I-12,12)),I+=4),T.ctype==3){for(E(X,I,3*(Y=T.plte.length)),I+=4,$(X,I,"PLTE"),I+=4,ce=0;ce<Y;ce++){const le=3*ce,ke=T.plte[ce],De=255&ke,Re=ke>>>8&255,Ge=ke>>>16&255;X[I+le+0]=De,X[I+le+1]=Re,X[I+le+2]=Ge}if(I+=3*Y,E(X,I,B(X,I-3*Y-4,3*Y+4)),I+=4,H){for(E(X,I,Y),I+=4,$(X,I,"tRNS"),I+=4,ce=0;ce<Y;ce++)X[I+ce]=T.plte[ce]>>>24&255;I+=Y,E(X,I,B(X,I-Y-4,Y+4)),I+=4}}let Te=0;for(ne=0;ne<T.frames.length;ne++){var Pe=T.frames[ne];z&&(E(X,I,26),I+=4,$(X,I,"fcTL"),I+=4,E(X,I,Te++),I+=4,E(X,I,Pe.rect.width),I+=4,E(X,I,Pe.rect.height),I+=4,E(X,I,Pe.rect.x),I+=4,E(X,I,Pe.rect.y),I+=4,Z(X,I,V[ne]),I+=2,Z(X,I,1e3),I+=2,X[I]=Pe.dispose,I++,X[I]=Pe.blend,I++,E(X,I,B(X,I-30,30)),I+=4);const le=Pe.cimg;E(X,I,(Y=le.length)+(ne==0?0:4)),I+=4;const ke=I;$(X,I,ne==0?"IDAT":"fdAT"),I+=4,ne!=0&&(E(X,I,Te++),I+=4),X.set(le,I),I+=Y,E(X,I,B(X,ke,I-ke)),I+=4}return E(X,I,0),I+=4,$(X,I,"IEND"),I+=4,E(X,I,B(X,I-4,4)),I+=4,X.buffer}function u(T,A,F){for(let V=0;V<T.frames.length;V++){const R=T.frames[V];R.rect.width;const B=R.rect.height,E=new Uint8Array(B*R.bpl+B);R.cimg=g(R.img,B,R.bpp,R.bpl,E,A,F)}}function h(T,A,F,V,R){const B=R[0],E=R[1],Z=R[2],$=R[3],I=R[4],z=R[5];let N=6,H=8,K=255;for(var Y=0;Y<T.length;Y++){const ae=new Uint8Array(T[Y]);for(var ce=ae.length,ne=0;ne<ce;ne+=4)K&=ae[ne+3]}const X=K!=255,_e=function(J,G,re,de,ge,oe){const ee=[];for(var fe=0;fe<J.length;fe++){const Qe=new Uint8Array(J[fe]),Xe=new Uint32Array(Qe.buffer);var ye;let gt=0,He=0,yt=G,zt=re,Lt=de?1:0;if(fe!=0){const sn=oe||de||fe==1||ee[fe-2].dispose!=0?1:2;let On=0,dn=1e9;for(let Sn=0;Sn<sn;Sn++){var be=new Uint8Array(J[fe-1-Sn]);const Vn=new Uint32Array(J[fe-1-Sn]);let Ct=G,Ut=re,Zn=-1,yr=-1;for(let hn=0;hn<re;hn++)for(let fn=0;fn<G;fn++)Xe[Ae=hn*G+fn]!=Vn[Ae]&&(fn<Ct&&(Ct=fn),fn>Zn&&(Zn=fn),hn<Ut&&(Ut=hn),hn>yr&&(yr=hn));Zn==-1&&(Ct=Ut=Zn=yr=0),ge&&((1&Ct)==1&&Ct--,(1&Ut)==1&&Ut--);const Mr=(Zn-Ct+1)*(yr-Ut+1);Mr<dn&&(dn=Mr,On=Sn,gt=Ct,He=Ut,yt=Zn-Ct+1,zt=yr-Ut+1)}be=new Uint8Array(J[fe-1-On]),On==1&&(ee[fe-1].dispose=2),ye=new Uint8Array(yt*zt*4),t(be,G,re,ye,yt,zt,-gt,-He,0),Lt=t(Qe,G,re,ye,yt,zt,-gt,-He,3)?1:0,Lt==1?m(Qe,G,re,ye,{x:gt,y:He,width:yt,height:zt}):t(Qe,G,re,ye,yt,zt,-gt,-He,0)}else ye=Qe.slice(0);ee.push({rect:{x:gt,y:He,width:yt,height:zt},img:ye,blend:Lt,dispose:0})}if(de)for(fe=0;fe<ee.length;fe++){if((We=ee[fe]).blend==1)continue;const Qe=We.rect,Xe=ee[fe-1].rect,gt=Math.min(Qe.x,Xe.x),He=Math.min(Qe.y,Xe.y),yt={x:gt,y:He,width:Math.max(Qe.x+Qe.width,Xe.x+Xe.width)-gt,height:Math.max(Qe.y+Qe.height,Xe.y+Xe.height)-He};ee[fe-1].dispose=1,fe-1!=0&&p(J,G,re,ee,fe-1,yt,ge),p(J,G,re,ee,fe,yt,ge)}let Le=0;if(J.length!=1)for(var Ae=0;Ae<ee.length;Ae++){var We;Le+=(We=ee[Ae]).rect.width*We.rect.height}return ee}(T,A,F,B,E,Z),Te={},Pe=[],le=[];if(V!=0){const ae=[];for(ne=0;ne<_e.length;ne++)ae.push(_e[ne].img.buffer);const J=function(ge){let oe=0;for(var ee=0;ee<ge.length;ee++)oe+=ge[ee].byteLength;const fe=new Uint8Array(oe);let ye=0;for(ee=0;ee<ge.length;ee++){const be=new Uint8Array(ge[ee]),Le=be.length;for(let Ae=0;Ae<Le;Ae+=4){let We=be[Ae],Qe=be[Ae+1],Xe=be[Ae+2];const gt=be[Ae+3];gt==0&&(We=Qe=Xe=0),fe[ye+Ae]=We,fe[ye+Ae+1]=Qe,fe[ye+Ae+2]=Xe,fe[ye+Ae+3]=gt}ye+=Le}return fe.buffer}(ae),G=_(J,V);for(ne=0;ne<G.plte.length;ne++)Pe.push(G.plte[ne].est.rgba);let re=0;for(ne=0;ne<_e.length;ne++){const de=(De=_e[ne]).img.length;var ke=new Uint8Array(G.inds.buffer,re>>2,de>>2);le.push(ke);const ge=new Uint8Array(G.abuf,re,de);z&&a(De.img,De.rect.width,De.rect.height,Pe,ge,ke),De.img.set(ge),re+=de}}else for(Y=0;Y<_e.length;Y++){var De=_e[Y];const ae=new Uint32Array(De.img.buffer);var Re=De.rect.width;for(ce=ae.length,ke=new Uint8Array(ce),le.push(ke),ne=0;ne<ce;ne++){const J=ae[ne];if(ne!=0&&J==ae[ne-1])ke[ne]=ke[ne-1];else if(ne>Re&&J==ae[ne-Re])ke[ne]=ke[ne-Re];else{let G=Te[J];if(G==null&&(Te[J]=G=Pe.length,Pe.push(J),Pe.length>=300))break;ke[ne]=G}}}const Ge=Pe.length;for(Ge<=256&&I==0&&(H=Ge<=2?1:Ge<=4?2:Ge<=16?4:8,H=Math.max(H,$)),Y=0;Y<_e.length;Y++){(De=_e[Y]).rect.x,De.rect.y,Re=De.rect.width;const ae=De.rect.height;let J=De.img;new Uint32Array(J.buffer);let G=4*Re,re=4;if(Ge<=256&&I==0){G=Math.ceil(H*Re/8);var M=new Uint8Array(G*ae);const de=le[Y];for(let ge=0;ge<ae;ge++){ne=ge*G;const oe=ge*Re;if(H==8)for(var he=0;he<Re;he++)M[ne+he]=de[oe+he];else if(H==4)for(he=0;he<Re;he++)M[ne+(he>>1)]|=de[oe+he]<<4-4*(1&he);else if(H==2)for(he=0;he<Re;he++)M[ne+(he>>2)]|=de[oe+he]<<6-2*(3&he);else if(H==1)for(he=0;he<Re;he++)M[ne+(he>>3)]|=de[oe+he]<<7-1*(7&he)}J=M,N=3,re=1}else if(X==0&&_e.length==1){M=new Uint8Array(Re*ae*3);const de=Re*ae;for(ne=0;ne<de;ne++){const ge=3*ne,oe=4*ne;M[ge]=J[oe],M[ge+1]=J[oe+1],M[ge+2]=J[oe+2]}J=M,N=2,re=3,G=3*Re}De.img=J,De.bpl=G,De.bpp=re}return{ctype:N,depth:H,plte:Pe,frames:_e}}function p(T,A,F,V,R,B,E){const Z=Uint8Array,$=Uint32Array,I=new Z(T[R-1]),z=new $(T[R-1]),N=R+1<T.length?new Z(T[R+1]):null,H=new Z(T[R]),K=new $(H.buffer);let Y=A,ce=F,ne=-1,X=-1;for(let Te=0;Te<B.height;Te++)for(let Pe=0;Pe<B.width;Pe++){const le=B.x+Pe,ke=B.y+Te,De=ke*A+le,Re=K[De];Re==0||V[R-1].dispose==0&&z[De]==Re&&(N==null||N[4*De+3]!=0)||(le<Y&&(Y=le),le>ne&&(ne=le),ke<ce&&(ce=ke),ke>X&&(X=ke))}ne==-1&&(Y=ce=ne=X=0),E&&((1&Y)==1&&Y--,(1&ce)==1&&ce--),B={x:Y,y:ce,width:ne-Y+1,height:X-ce+1};const _e=V[R];_e.rect=B,_e.blend=1,_e.img=new Uint8Array(B.width*B.height*4),V[R-1].dispose==0?(t(I,A,F,_e.img,B.width,B.height,-B.x,-B.y,0),m(H,A,F,_e.img,B)):t(H,A,F,_e.img,B.width,B.height,-B.x,-B.y,0)}function m(T,A,F,V,R){t(T,A,F,V,R.width,R.height,-R.x,-R.y,2)}function g(T,A,F,V,R,B,E){const Z=[];let $,I=[0,1,2,3,4];B!=-1?I=[B]:(A*V>5e5||F==1)&&(I=[0]),E&&($={level:0});const z=wL;for(var N=0;N<I.length;N++){for(let Y=0;Y<A;Y++)y(R,T,Y,V,F,I[N]);Z.push(z.deflate(R,$))}let H,K=1e9;for(N=0;N<Z.length;N++)Z[N].length<K&&(H=N,K=Z[N].length);return Z[H]}function y(T,A,F,V,R,B){const E=F*V;let Z=E+F;if(T[Z]=B,Z++,B==0)if(V<500)for(var $=0;$<V;$++)T[Z+$]=A[E+$];else T.set(new Uint8Array(A.buffer,E,V),Z);else if(B==1){for($=0;$<R;$++)T[Z+$]=A[E+$];for($=R;$<V;$++)T[Z+$]=A[E+$]-A[E+$-R]+256&255}else if(F==0){for($=0;$<R;$++)T[Z+$]=A[E+$];if(B==2)for($=R;$<V;$++)T[Z+$]=A[E+$];if(B==3)for($=R;$<V;$++)T[Z+$]=A[E+$]-(A[E+$-R]>>1)+256&255;if(B==4)for($=R;$<V;$++)T[Z+$]=A[E+$]-n(A[E+$-R],0,0)+256&255}else{if(B==2)for($=0;$<V;$++)T[Z+$]=A[E+$]+256-A[E+$-V]&255;if(B==3){for($=0;$<R;$++)T[Z+$]=A[E+$]+256-(A[E+$-V]>>1)&255;for($=R;$<V;$++)T[Z+$]=A[E+$]+256-(A[E+$-V]+A[E+$-R]>>1)&255}if(B==4){for($=0;$<R;$++)T[Z+$]=A[E+$]+256-n(0,A[E+$-V],0)&255;for($=R;$<V;$++)T[Z+$]=A[E+$]+256-n(A[E+$-R],A[E+$-V],A[E+$-R-V])&255}}}function _(T,A){const F=new Uint8Array(T),V=F.slice(0),R=new Uint32Array(V.buffer),B=b(V,A),E=B[0],Z=B[1],$=F.length,I=new Uint8Array($>>2);let z;if(F.length<2e7)for(var N=0;N<$;N+=4)z=x(E,H=F[N]*(1/255),K=F[N+1]*(1/255),Y=F[N+2]*(1/255),ce=F[N+3]*(1/255)),I[N>>2]=z.ind,R[N>>2]=z.est.rgba;else for(N=0;N<$;N+=4){var H=F[N]*.00392156862745098,K=F[N+1]*(1/255),Y=F[N+2]*(1/255),ce=F[N+3]*(1/255);for(z=E;z.left;)z=w(z.est,H,K,Y,ce)<=0?z.left:z.right;I[N>>2]=z.ind,R[N>>2]=z.est.rgba}return{abuf:V.buffer,inds:I,plte:Z}}function b(T,A,F){F==null&&(F=1e-4);const V=new Uint32Array(T.buffer),R={i0:0,i1:T.length,bst:null,est:null,tdst:0,left:null,right:null};R.bst=j(T,R.i0,R.i1),R.est=D(R.bst);const B=[R];for(;B.length<A;){let Z=0,$=0;for(var E=0;E<B.length;E++)B[E].est.L>Z&&(Z=B[E].est.L,$=E);if(Z<F)break;const I=B[$],z=S(T,V,I.i0,I.i1,I.est.e,I.est.eMq255);if(I.i0>=z||I.i1<=z){I.est.L=0;continue}const N={i0:I.i0,i1:z,bst:null,est:null,tdst:0,left:null,right:null};N.bst=j(T,N.i0,N.i1),N.est=D(N.bst);const H={i0:z,i1:I.i1,bst:null,est:null,tdst:0,left:null,right:null};for(H.bst={R:[],m:[],N:I.bst.N-N.bst.N},E=0;E<16;E++)H.bst.R[E]=I.bst.R[E]-N.bst.R[E];for(E=0;E<4;E++)H.bst.m[E]=I.bst.m[E]-N.bst.m[E];H.est=D(H.bst),I.left=N,I.right=H,B[$]=N,B.push(H)}for(B.sort((Z,$)=>$.bst.N-Z.bst.N),E=0;E<B.length;E++)B[E].ind=E;return[R,B]}function x(T,A,F,V,R){if(T.left==null)return T.tdst=function(N,H,K,Y,ce){const ne=H-N[0],X=K-N[1],_e=Y-N[2],Te=ce-N[3];return ne*ne+X*X+_e*_e+Te*Te}(T.est.q,A,F,V,R),T;const B=w(T.est,A,F,V,R);let E=T.left,Z=T.right;B>0&&(E=T.right,Z=T.left);const $=x(E,A,F,V,R);if($.tdst<=B*B)return $;const I=x(Z,A,F,V,R);return I.tdst<$.tdst?I:$}function w(T,A,F,V,R){const{e:B}=T;return B[0]*A+B[1]*F+B[2]*V+B[3]*R-T.eMq}function S(T,A,F,V,R,B){for(V-=4;F<V;){for(;C(T,F,R)<=B;)F+=4;for(;C(T,V,R)>B;)V-=4;if(F>=V)break;const E=A[F>>2];A[F>>2]=A[V>>2],A[V>>2]=E,F+=4,V-=4}for(;C(T,F,R)>B;)F-=4;return F+4}function C(T,A,F){return T[A]*F[0]+T[A+1]*F[1]+T[A+2]*F[2]+T[A+3]*F[3]}function j(T,A,F){const V=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],R=[0,0,0,0],B=F-A>>2;for(let E=A;E<F;E+=4){const Z=T[E]*.00392156862745098,$=T[E+1]*(1/255),I=T[E+2]*(1/255),z=T[E+3]*(1/255);R[0]+=Z,R[1]+=$,R[2]+=I,R[3]+=z,V[0]+=Z*Z,V[1]+=Z*$,V[2]+=Z*I,V[3]+=Z*z,V[5]+=$*$,V[6]+=$*I,V[7]+=$*z,V[10]+=I*I,V[11]+=I*z,V[15]+=z*z}return V[4]=V[1],V[8]=V[2],V[9]=V[6],V[12]=V[3],V[13]=V[7],V[14]=V[11],{R:V,m:R,N:B}}function D(T){const{R:A}=T,{m:F}=T,{N:V}=T,R=F[0],B=F[1],E=F[2],Z=F[3],$=V==0?0:1/V,I=[A[0]-R*R*$,A[1]-R*B*$,A[2]-R*E*$,A[3]-R*Z*$,A[4]-B*R*$,A[5]-B*B*$,A[6]-B*E*$,A[7]-B*Z*$,A[8]-E*R*$,A[9]-E*B*$,A[10]-E*E*$,A[11]-E*Z*$,A[12]-Z*R*$,A[13]-Z*B*$,A[14]-Z*E*$,A[15]-Z*Z*$],z=I,N=P;let H=[Math.random(),Math.random(),Math.random(),Math.random()],K=0,Y=0;if(V!=0)for(let ne=0;ne<16&&(H=N.multVec(z,H),Y=Math.sqrt(N.dot(H,H)),H=N.sml(1/Y,H),!(ne!=0&&Math.abs(Y-K)<1e-9));ne++)K=Y;const ce=[R*$,B*$,E*$,Z*$];return{Cov:I,q:ce,e:H,L:K,eMq255:N.dot(N.sml(255,ce),H),eMq:N.dot(H,ce),rgba:(Math.round(255*ce[3])<<24|Math.round(255*ce[2])<<16|Math.round(255*ce[1])<<8|Math.round(255*ce[0])<<0)>>>0}}var P={multVec:(T,A)=>[T[0]*A[0]+T[1]*A[1]+T[2]*A[2]+T[3]*A[3],T[4]*A[0]+T[5]*A[1]+T[6]*A[2]+T[7]*A[3],T[8]*A[0]+T[9]*A[1]+T[10]*A[2]+T[11]*A[3],T[12]*A[0]+T[13]*A[1]+T[14]*A[2]+T[15]*A[3]],dot:(T,A)=>T[0]*A[0]+T[1]*A[1]+T[2]*A[2]+T[3]*A[3],sml:(T,A)=>[T*A[0],T*A[1],T*A[2],T*A[3]]};kr.encode=function(A,F,V,R,B,E,Z){R==null&&(R=0),Z==null&&(Z=!1);const $=h(A,F,V,R,[!1,!1,!1,0,Z,!1]);return u($,-1),c($,F,V,B,E)},kr.encodeLL=function(A,F,V,R,B,E,Z,$){const I={ctype:0+(R==1?0:2)+(B==0?0:4),depth:E,frames:[]},z=(R+B)*E,N=z*F;for(let H=0;H<A.length;H++)I.frames.push({rect:{x:0,y:0,width:F,height:V},img:new Uint8Array(A[H]),blend:0,dispose:1,bpp:Math.ceil(z/8),bpl:Math.ceil(N/8)});return u(I,0,!0),c(I,F,V,Z,$)},kr.encode.compress=h,kr.encode.dither=a,kr.quantize=_,kr.quantize.getKDtree=b,kr.quantize.getNearest=x})();const aS={toArrayBuffer(t,e){const n=t.width,r=t.height,i=n<<2,s=t.getContext("2d").getImageData(0,0,n,r),o=new Uint32Array(s.data.buffer),a=(32*n+31)/32<<2,c=a*r,u=122+c,h=new ArrayBuffer(u),p=new DataView(h),m=1<<20;let g,y,_,b,x=m,w=0,S=0,C=0;function j(T){p.setUint16(S,T,!0),S+=2}function D(T){p.setUint32(S,T,!0),S+=4}function P(T){S+=T}j(19778),D(u),P(4),D(122),D(108),D(n),D(-r>>>0),j(1),j(32),D(3),D(c),D(2835),D(2835),P(8),D(16711680),D(65280),D(255),D(4278190080),D(1466527264),function T(){for(;w<r&&x>0;){for(b=122+w*a,g=0;g<i;)x--,y=o[C++],_=y>>>24,p.setUint32(b+g,y<<8|_),g+=4;w++}C<o.length?(x=m,setTimeout(T,aS._dly)):e(h)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var Nn={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},SL={[Nn.CHROME]:16384,[Nn.FIREFOX]:11180,[Nn.DESKTOP_SAFARI]:16384,[Nn.IE]:8192,[Nn.IOS]:4096,[Nn.ETC]:8192};const Pg=typeof window<"u",lS=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,wd=Pg&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),kL=(Pg||lS)&&(wd&&wd.getOriginalSymbol(window,"File")||typeof File<"u"&&File),cS=(Pg||lS)&&(wd&&wd.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Ag(t,e,n=Date.now()){return new Promise(r=>{const i=t.split(","),s=i[0].match(/:(.*?);/)[1],o=globalThis.atob(i[1]);let a=o.length;const c=new Uint8Array(a);for(;a--;)c[a]=o.charCodeAt(a);const u=new Blob([c],{type:s});u.name=e,u.lastModified=n,r(u)})}function uS(t){return new Promise((e,n)=>{const r=new cS;r.onload=()=>e(r.result),r.onerror=i=>n(i),r.readAsDataURL(t)})}function dS(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>n(i),r.src=t})}function Bs(){if(Bs.cachedResult!==void 0)return Bs.cachedResult;let t=Nn.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=Nn.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=Nn.IOS:/Safari/i.test(e)?t=Nn.DESKTOP_SAFARI:/Firefox/i.test(e)?t=Nn.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=Nn.IE),Bs.cachedResult=t,Bs.cachedResult}function hS(t,e){const n=Bs(),r=SL[n];let i=t,s=e,o=i*s;const a=i>s?s/i:i/s;for(;o>r*r;){const c=(r+i)/2,u=(r+s)/2;c<u?(s=u,i=u*a):(s=c*a,i=c),o=i*s}return{width:i,height:s}}function nh(t,e){let n,r;try{if(n=new OffscreenCanvas(t,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=t,n.height=e,[n,r]}function fS(t,e){const{width:n,height:r}=hS(t.width,t.height),[i,s]=nh(n,r);return e&&/jpe?g/.test(e)&&(s.fillStyle="white",s.fillRect(0,0,i.width,i.height)),s.drawImage(t,0,0,i.width,i.height),i}function Du(){return Du.cachedResult!==void 0||(Du.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Du.cachedResult}function Sd(t,e={}){return new Promise(function(n,r){let i,s;var o=function(){try{return s=fS(i,e.fileType||t.type),n([i,s])}catch(c){return r(c)}},a=function(c){try{var u=function(h){try{throw h}catch(p){return r(p)}};try{let h;return uS(t).then(function(p){try{return h=p,dS(h).then(function(m){try{return i=m,function(){try{return o()}catch(g){return r(g)}}()}catch(g){return u(g)}},u)}catch(m){return u(m)}},u)}catch(h){u(h)}}catch(h){return r(h)}};try{if(Du()||[Nn.DESKTOP_SAFARI,Nn.MOBILE_SAFARI].includes(Bs()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(c){try{return i=c,o()}catch{return a()}},a)}catch{a()}})}function kd(t,e,n,r,i=1){return new Promise(function(s,o){let a;if(e==="image/png"){let p,m,g;return p=t.getContext("2d"),{data:m}=p.getImageData(0,0,t.width,t.height),g=kr.encode([m.buffer],t.width,t.height,4096*i),a=new Blob([g],{type:e}),a.name=n,a.lastModified=r,c.call(this)}{let p=function(){return c.call(this)};var u=p;if(e==="image/bmp")return new Promise(m=>aS.toBlob(t,m)).then((function(m){try{return a=m,a.name=n,a.lastModified=r,p.call(this)}catch(g){return o(g)}}).bind(this),o);{let m=function(){return p.call(this)};var h=m;if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:i}).then((function(g){try{return a=g,a.name=n,a.lastModified=r,m.call(this)}catch(y){return o(y)}}).bind(this),o);{let g;return g=t.toDataURL(e,i),Ag(g,n,r).then((function(y){try{return a=y,m.call(this)}catch(_){return o(_)}}).bind(this),o)}}}function c(){return s(a)}})}function Hr(t){t.width=0,t.height=0}function Fo(){return new Promise(function(t,e){let n,r,i,s;return Fo.cachedResult!==void 0?t(Fo.cachedResult):Ag("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(o){try{return n=o,Sd(n).then(function(a){try{return r=a[1],kd(r,n.type,n.name,n.lastModified).then(function(c){try{return i=c,Hr(r),Sd(i).then(function(u){try{return s=u[0],Fo.cachedResult=s.width===1&&s.height===2,t(Fo.cachedResult)}catch(h){return e(h)}},e)}catch(u){return e(u)}},e)}catch(c){return e(c)}},e)}catch(a){return e(a)}},e)})}function pS(t){return new Promise((e,n)=>{const r=new cS;r.onload=i=>{const s=new DataView(i.target.result);if(s.getUint16(0,!1)!=65496)return e(-2);const o=s.byteLength;let a=2;for(;a<o;){if(s.getUint16(a+2,!1)<=8)return e(-1);const c=s.getUint16(a,!1);if(a+=2,c==65505){if(s.getUint32(a+=2,!1)!=1165519206)return e(-1);const u=s.getUint16(a+=6,!1)==18761;a+=s.getUint32(a+4,u);const h=s.getUint16(a,u);a+=2;for(let p=0;p<h;p++)if(s.getUint16(a+12*p,u)==274)return e(s.getUint16(a+12*p+8,u))}else{if((65280&c)!=65280)break;a+=s.getUint16(a,!1)}}return e(-1)},r.onerror=i=>n(i),r.readAsArrayBuffer(t)})}function mS(t,e){const{width:n}=t,{height:r}=t,{maxWidthOrHeight:i}=e;let s,o=t;return isFinite(i)&&(n>i||r>i)&&([o,s]=nh(n,r),n>r?(o.width=i,o.height=r/n*i):(o.width=n/r*i,o.height=i),s.drawImage(t,0,0,o.width,o.height),Hr(t)),o}function gS(t,e){const{width:n}=t,{height:r}=t,[i,s]=nh(n,r);switch(e>4&&e<9?(i.width=r,i.height=n):(i.width=n,i.height=r),e){case 2:s.transform(-1,0,0,1,n,0);break;case 3:s.transform(-1,0,0,-1,n,r);break;case 4:s.transform(1,0,0,-1,0,r);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,r,0);break;case 7:s.transform(0,-1,-1,0,r,n);break;case 8:s.transform(0,-1,1,0,0,n)}return s.drawImage(t,0,0,n,r),Hr(t),i}function Kv(t,e,n=0){return new Promise(function(r,i){let s,o,a,c,u,h,p,m,g,y,_,b,x,w,S,C,j,D,P,T;function A(V=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;s+=V,e.onProgress(Math.min(s,100))}function F(V){if(e.signal&&e.signal.aborted)throw e.signal.reason;s=Math.min(Math.max(V,s),100),e.onProgress(s)}return s=n,o=e.maxIteration||10,a=1024*e.maxSizeMB*1024,A(),Sd(t,e).then((function(V){try{return[,c]=V,A(),u=mS(c,e),A(),new Promise(function(R,B){var E;if(!(E=e.exifOrientation))return pS(t).then((function($){try{return E=$,Z.call(this)}catch(I){return B(I)}}).bind(this),B);function Z(){return R(E)}return Z.call(this)}).then((function(R){try{return h=R,A(),Fo().then((function(B){try{return p=B?u:gS(u,h),A(),m=e.initialQuality||1,g=e.fileType||t.type,kd(p,g,t.name,t.lastModified,m).then((function(E){try{{let z=function(){if(o--&&(S>a||S>x)){let H,K;return H=T?.95*P.width:P.width,K=T?.95*P.height:P.height,[j,D]=nh(H,K),D.drawImage(P,0,0,H,K),m*=g==="image/png"?.85:.95,kd(j,g,t.name,t.lastModified,m).then(function(Y){try{return C=Y,Hr(P),P=j,S=C.size,F(Math.min(99,Math.floor((w-S)/(w-a)*100))),z}catch(ce){return i(ce)}},i)}return[1]},N=function(){return Hr(P),Hr(j),Hr(u),Hr(p),Hr(c),F(100),r(C)};var $=z,I=N;if(y=E,A(),_=y.size>a,b=y.size>t.size,!_&&!b)return F(100),r(y);var Z;return x=t.size,w=y.size,S=w,P=p,T=!e.alwaysKeepResolution&&_,(Z=(function(H){for(;H;){if(H.then)return void H.then(Z,i);try{if(H.pop){if(H.length)return H.pop()?N.call(this):H;H=z}else H=H.call(this)}catch(K){return i(K)}}}).bind(this))(z)}}catch(z){return i(z)}}).bind(this),i)}catch(E){return i(E)}}).bind(this),i)}catch(B){return i(B)}}).bind(this),i)}catch(R){return i(R)}}).bind(this),i)})}const EL=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let jf;function CL(t,e){return new Promise((n,r)=>{jf||(jf=function(o){const a=[];return a.push(o),URL.createObjectURL(new Blob(a))}(EL));const i=new Worker(jf);i.addEventListener("message",function(o){if(e.signal&&e.signal.aborted)i.terminate();else if(o.data.progress===void 0){if(o.data.error)return r(new Error(o.data.error)),void i.terminate();n(o.data.file),i.terminate()}else e.onProgress(o.data.progress)}),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),i.terminate()}),i.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function gn(t,e){return new Promise(function(n,r){let i,s,o,a,c,u;if(i={...e},o=0,{onProgress:a}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,c=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=g=>{o=g,typeof a=="function"&&a(o)},!(t instanceof Blob||t instanceof kL))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(u=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!c||typeof Worker!="function"||u)return Kv(t,i).then((function(g){try{return s=g,m.call(this)}catch(y){return r(y)}}).bind(this),r);var h=(function(){try{return m.call(this)}catch(g){return r(g)}}).bind(this),p=function(g){try{return Kv(t,i).then(function(y){try{return s=y,h()}catch(_){return r(_)}},r)}catch(y){return r(y)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",CL(t,i).then(function(g){try{return s=g,h()}catch{return p()}},p)}catch{p()}function m(){try{s.name=t.name,s.lastModified=t.lastModified}catch{}try{i.preserveExif&&t.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===t.type)&&(s=oS(t,s))}catch{}return n(s)}})}gn.getDataUrlFromFile=uS,gn.getFilefromDataUrl=Ag,gn.loadImage=dS,gn.drawImageInCanvas=fS,gn.drawFileInCanvas=Sd,gn.canvasToFile=kd,gn.getExifOrientation=pS,gn.handleMaxWidthOrHeight=mS,gn.followExifOrientation=gS,gn.cleanupCanvasMemory=Hr,gn.isAutoOrientationInBrowser=Fo,gn.approximateBelowMaximumCanvasSizeOfBrowser=hS,gn.copyExifWithoutOrientation=oS,gn.getBrowserName=Bs,gn.version="2.0.2";function TL(){var pe;const{id:t}=BT(),e=ls(),[n]=Hn(),[r,i]=q.useState(null),[s,o]=q.useState([]),[a,c]=q.useState(null),[u,h]=q.useState([]),[p,m]=q.useState(!1),[g,y]=q.useState(0),[_,b]=q.useState(1),[x,w]=q.useState(0),[S,C]=q.useState(0),[j,D]=q.useState(!1),[P,T]=q.useState({x:0,y:0}),[A,F]=q.useState(""),[V,R]=q.useState(""),[B,E]=q.useState(""),[Z,$]=q.useState(""),[I,z]=q.useState(""),[N,H]=q.useState(""),[K,Y]=q.useState(""),[ce,ne]=q.useState(""),[X,_e]=q.useState(""),[Te,Pe]=q.useState(""),[le,ke]=q.useState(""),[De,Re]=q.useState(""),[Ge,M]=q.useState(""),[he,ae]=q.useState(""),[J,G]=q.useState(""),[re,de]=q.useState(""),[ge,oe]=q.useState(""),[ee,fe]=q.useState(""),[ye,be]=q.useState(""),[Le,Ae]=q.useState([]),We=async()=>{const{data:W}=await Ne.from("claims").select("*").eq("id",t).single();i(W);const se=await Ne.from("claim_photos").select("*").eq("claim_id",t).order("created_at",{ascending:!1});o(se.data||[])};q.useEffect(()=>{We(),(async()=>{const{data:W}=await Ne.from("profiles").select("user_id, full_name, role").order("full_name");h(W||[])})(),(async()=>{const{data:W}=await Ne.from("vendors").select("id, name").eq("active",!0).order("name");Ae(W||[])})()},[t]);const Qe=async W=>{const se=W.target.files;if(!(!se||se.length===0||!t)){for(let Ee=0;Ee<se.length;Ee++){const ve=se[Ee];try{const xe=await gn(ve,{maxWidthOrHeight:1600,maxSizeMB:1.5,useWebWorker:!0}),Se=`claim/${t}/${crypto.randomUUID()}.jpg`,{error:je}=await Ne.storage.from("claim-photos").upload(Se,xe,{contentType:"image/jpeg"});if(je){alert(`Error uploading ${ve.name}: ${je.message}`);continue}const{error:Oe}=await Ne.from("claim_photos").insert({claim_id:t,storage_path:Se});Oe&&alert(`Error saving ${ve.name}: ${Oe.message}`)}catch(xe){alert(`Error processing ${ve.name}: ${xe.message}`)}}W.target.value="",await We()}},Xe=async W=>{if(!t)return;const{error:se}=await Ne.from("claims").update(W).eq("id",t);se?alert(se.message):await We()},gt=()=>{var W,se,Ee;F((r==null?void 0:r.customer_name)||""),R((r==null?void 0:r.phone)||""),E((r==null?void 0:r.email)||""),$(((W=r==null?void 0:r.vehicle_year)==null?void 0:W.toString())||""),z((r==null?void 0:r.vehicle_make)||""),H((r==null?void 0:r.vehicle_model)||""),Y((r==null?void 0:r.vin)||""),ne((r==null?void 0:r.notes)||""),_e((r==null?void 0:r.address_line1)||""),Pe((r==null?void 0:r.address_line2)||""),ke((r==null?void 0:r.city)||""),Re((r==null?void 0:r.state)||""),M((r==null?void 0:r.postal_code)||""),ae(r!=null&&r.appointment_start?(()=>{const ve=new Date(r.appointment_start),xe=ve.getFullYear(),Se=String(ve.getMonth()+1).padStart(2,"0"),je=String(ve.getDate()).padStart(2,"0"),Oe=String(ve.getHours()).padStart(2,"0"),Fe=String(ve.getMinutes()).padStart(2,"0");return`${xe}-${Se}-${je}T${Oe}:${Fe}`})():""),G(r!=null&&r.appointment_end?(()=>{const ve=new Date(r.appointment_end),xe=ve.getFullYear(),Se=String(ve.getMonth()+1).padStart(2,"0"),je=String(ve.getDate()).padStart(2,"0"),Oe=String(ve.getHours()).padStart(2,"0"),Fe=String(ve.getMinutes()).padStart(2,"0");return`${xe}-${Se}-${je}T${Oe}:${Fe}`})():""),de((r==null?void 0:r.assigned_to)||""),oe(((se=r==null?void 0:r.pay_amount)==null?void 0:se.toString())||""),fe(((Ee=r==null?void 0:r.file_total)==null?void 0:Ee.toString())||""),be((r==null?void 0:r.firm_name)||""),m(!0)},He=async()=>{const W={customer_name:A,phone:V,email:B,vehicle_make:I,vehicle_model:N,vin:K,notes:ce,address_line1:X,address_line2:Te,city:le,state:De,postal_code:Ge,assigned_to:re||null,firm_name:ye||null};if(Z){const se=parseInt(Z);isNaN(se)||(W.vehicle_year=se)}if(ge){const se=parseFloat(ge);isNaN(se)||(W.pay_amount=se)}else W.pay_amount=null;if(ee){const se=parseFloat(ee);isNaN(se)||(W.file_total=se)}else W.file_total=null;if(he){const[se,Ee]=he.split("T"),[ve,xe,Se]=se.split("-").map(Number),[je,Oe]=Ee.split(":").map(Number),Fe=new Date(ve,xe-1,Se,je,Oe,0);W.appointment_start=Fe.toISOString()}if(J){const[se,Ee]=J.split("T"),[ve,xe,Se]=se.split("-").map(Number),[je,Oe]=Ee.split(":").map(Number),Fe=new Date(ve,xe-1,Se,je,Oe,0);W.appointment_end=Fe.toISOString()}await Xe(W),m(!1)},yt=()=>{m(!1)},zt=async()=>{if(confirm("Mark this claim as COMPLETED? This will notify the admin.")){const W=new Date,se=`${W.getFullYear()}-${String(W.getMonth()+1).padStart(2,"0")}`,Ee=W.getFullYear(),ve=String(W.getMonth()+1).padStart(2,"0"),xe=String(W.getDate()).padStart(2,"0"),Se=`${Ee}-${ve}-${xe}T00:00:00Z`;let je=null;if(r.firm_name)try{const Oe=Up(r.firm_name,W),Fe=Oe.payoutDate.getFullYear(),Ye=String(Oe.payoutDate.getMonth()+1).padStart(2,"0"),bt=String(Oe.payoutDate.getDate()).padStart(2,"0");je=`${Fe}-${Ye}-${bt}T00:00:00Z`}catch(Oe){console.warn("Could not calculate expected payout date:",Oe)}await Xe({status:"COMPLETED",completed_month:se,completion_date:Se,expected_payout_date:je,payout_status:"unpaid"})}},Lt=async()=>{if(!t||!confirm(` WARNING: Are you sure you want to PERMANENTLY DELETE this claim?

Claim #${r.claim_number}
Customer: ${r.customer_name}

This action CANNOT be undone and will delete:
- The claim record
- All associated photos
- All related data

Type "DELETE" in the next dialog to confirm.`))return;if(prompt('Type "DELETE" to confirm permanent deletion:')!=="DELETE"){alert("Deletion cancelled - text did not match.");return}for(const ve of s)await Ne.storage.from("claim-photos").remove([ve.storage_path]);await Ne.from("claim_photos").delete().eq("claim_id",t);const{error:Ee}=await Ne.from("claims").delete().eq("id",t);Ee?alert(`Error deleting claim: ${Ee.message}`):(alert("Claim permanently deleted."),e("/admin/claims"))},sn=async W=>{if(!confirm("Delete this photo? This cannot be undone."))return;const{error:se}=await Ne.storage.from("claim-photos").remove([W.storage_path]);if(se){alert(`Error deleting photo from storage: ${se.message}`);return}const{error:Ee}=await Ne.from("claim_photos").delete().eq("id",W.id);if(Ee){alert(`Error deleting photo record: ${Ee.message}`);return}c(null),await We()},On=async()=>{if(s.length===0){alert("No photos to download");return}try{const W=new $w,se=W.folder("photos");for(let Se=0;Se<s.length;Se++){const je=s[Se],Oe=Ne.storage.from("claim-photos").getPublicUrl(je.storage_path).data.publicUrl,Ye=await(await fetch(Oe)).blob(),bt=`photo-${Se+1}.jpg`;se==null||se.file(bt,Ye)}const Ee=await W.generateAsync({type:"blob"}),ve=URL.createObjectURL(Ee),xe=document.createElement("a");xe.href=ve,xe.download=`claim_${r.claim_number}_photos.zip`,document.body.appendChild(xe),xe.click(),document.body.removeChild(xe),URL.revokeObjectURL(ve)}catch(W){alert(`Error creating zip file: ${W.message}`)}},dn=()=>{y(0),b(1),w(0),C(0),D(!1)},Sn=()=>{y(W=>(W-90)%360)},Vn=()=>{y(W=>(W+90)%360)},Ct=()=>{b(W=>Math.min(W+.5,4))},Ut=()=>{b(W=>{const se=Math.max(W-.5,1);return se===1&&(w(0),C(0)),se})},Zn=W=>{_>1&&(D(!0),T({x:W.clientX-x,y:W.clientY-S}))},yr=W=>{j&&_>1&&(w(W.clientX-P.x),C(W.clientY-P.y))},Mr=()=>{D(!1)},hn=W=>{W.preventDefault(),W.deltaY<0?Ct():Ut()};if(!r)return null;const fn=()=>{const W=encodeURIComponent(`${r.address_line1} ${r.city||""} ${r.state||""} ${r.postal_code||""}`);window.open(`https://www.google.com/maps?q=${W}`,"_blank")},on={background:"#374151",border:"1px solid #4b5563",borderRadius:"12px",padding:"24px",boxShadow:"0 4px 6px rgba(0,0,0,0.3)"},Dn={fontSize:"22px",fontWeight:"bold",color:"#f8fafc",marginBottom:"16px",paddingBottom:"12px",borderBottom:"2px solid #4b5563"},Q={fontSize:"15px",fontWeight:"600",color:"#cbd5e1",marginBottom:"6px",textTransform:"uppercase",letterSpacing:"0.5px"},ie={fontSize:"17px",color:"#ffffff",marginBottom:"12px"};return f.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%)",padding:"24px 16px"},children:f.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[f.jsxs("div",{style:{...on,display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderColor:"#667eea"},children:[f.jsxs("div",{children:[f.jsxs("h2",{style:{margin:0,color:"white",fontSize:"28px",fontWeight:"bold"},children:["Claim #",r.claim_number]}),f.jsx("p",{style:{margin:"4px 0 0 0",color:"rgba(255,255,255,0.9)",fontSize:"16px"},children:r.customer_name})]}),f.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[(()=>{const W=nn(),se=W==null?void 0:W.getCurrentUser(),Ee=(se==null?void 0:se.role)==="admin",ve=r.status==="CANCELED";return Ee?p?f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:He,style:{padding:"10px 20px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",fontSize:"15px",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},onMouseEnter:xe=>{xe.currentTarget.style.transform="translateY(-1px)",xe.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)"},onMouseLeave:xe=>{xe.currentTarget.style.transform="translateY(0)",xe.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)"},children:" Save Changes"}),f.jsx("button",{onClick:yt,style:{padding:"10px 20px",background:"rgba(239, 68, 68, 0.9)",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",fontSize:"15px",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},onMouseEnter:xe=>{xe.currentTarget.style.background="rgba(220, 38, 38, 0.9)",xe.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:xe=>{xe.currentTarget.style.background="rgba(239, 68, 68, 0.9)",xe.currentTarget.style.transform="translateY(0)"},children:" Cancel"})]}):ve?f.jsx("div",{style:{padding:"10px 20px",background:"rgba(255,255,255,0.1)",color:"rgba(255,255,255,0.4)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px",fontWeight:"600",fontSize:"15px",backdropFilter:"blur(10px)",cursor:"not-allowed"},title:"Editing is disabled for archived claims",children:" Archived - Edit Disabled"}):f.jsx("button",{onClick:gt,style:{padding:"10px 20px",background:"rgba(255,255,255,0.2)",color:"white",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"8px",fontWeight:"600",fontSize:"15px",backdropFilter:"blur(10px)",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:xe=>xe.currentTarget.style.background="rgba(255,255,255,0.3)",onMouseLeave:xe=>xe.currentTarget.style.background="rgba(255,255,255,0.2)",children:" Edit Claim"}):null})(),(()=>{const W=nn(),se=W==null?void 0:W.getCurrentUser(),Ee=(se==null?void 0:se.role)==="admin",ve=n.get("from")==="calendar";let xe=Ee?"/admin/claims":"/my-claims";return ve&&(xe+="?view=calendar"),f.jsxs(Zt,{to:xe,style:{padding:"10px 20px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",textDecoration:"none",borderRadius:"8px",fontWeight:"600",fontSize:"15px",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.2)",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",display:"inline-block"},onMouseEnter:Se=>{Se.currentTarget.style.background="linear-gradient(135deg, #818cf8 0%, #8b5fbf 100%)",Se.currentTarget.style.transform="translateY(-1px)",Se.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)"},onMouseLeave:Se=>{Se.currentTarget.style.background="linear-gradient(135deg, #667eea 0%, #764ba2 100%)",Se.currentTarget.style.transform="translateY(0)",Se.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)"},children:[" Back to ",ve?"Calendar":"Claims"]})})(),f.jsx(Zt,{to:"/",style:{padding:"10px 20px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",textDecoration:"none",borderRadius:"8px",fontWeight:"600",fontSize:"15px",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.2)",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",display:"inline-block"},onMouseEnter:W=>{W.currentTarget.style.background="linear-gradient(135deg, #818cf8 0%, #8b5fbf 100%)",W.currentTarget.style.transform="translateY(-1px)",W.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)"},onMouseLeave:W=>{W.currentTarget.style.background="linear-gradient(135deg, #667eea 0%, #764ba2 100%)",W.currentTarget.style.transform="translateY(0)",W.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)"},children:" Home"})]})]}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px",marginBottom:"24px"},children:[(()=>{const W=nn(),se=W==null?void 0:W.getCurrentUser();return(se==null?void 0:se.role)==="admin"?f.jsxs("div",{style:on,children:[f.jsx("h4",{style:Dn,children:" Payment Information"}),f.jsxs("div",{style:{marginBottom:"16px"},children:[f.jsx("div",{style:Q,children:"Pay Amount"}),p?f.jsx("input",{type:"number",step:"0.01",value:ge,onChange:ve=>oe(ve.target.value),placeholder:"Enter amount",style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:ve=>ve.target.style.borderColor="#667eea",onBlur:ve=>ve.target.style.borderColor="#6b7280"}):r.pay_amount?f.jsxs("div",{style:ie,children:["$",r.pay_amount.toFixed(2)]}):(r.status==="SCHEDULED"||r.status==="IN_PROGRESS")&&r.firm_name?f.jsxs("div",{style:{...ie,color:"#f59e0b"},children:["$",dd(r.firm_name,r.pay_amount).toFixed(2),f.jsx("span",{style:{fontSize:"13px",color:"#a0aec0",marginLeft:"8px"},children:"(estimated)"})]}):f.jsx("div",{style:{...ie,color:"#9ca3af",fontStyle:"italic"},children:"Not set"})]}),f.jsxs("div",{style:{marginBottom:"16px"},children:[f.jsx("div",{style:Q,children:"File Total"}),p?f.jsx("input",{type:"number",step:"0.01",value:ee,onChange:ve=>fe(ve.target.value),placeholder:"Enter file total",style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:ve=>ve.target.style.borderColor="#667eea",onBlur:ve=>ve.target.style.borderColor="#6b7280"}):r.file_total?f.jsxs("div",{style:ie,children:["$",r.file_total.toFixed(2)]}):f.jsx("div",{style:{...ie,color:"#9ca3af",fontStyle:"italic"},children:"Not set"})]}),r.status==="COMPLETED"&&f.jsx(f.Fragment,{children:f.jsxs("div",{style:{marginTop:"24px",paddingTop:"16px",borderTop:"2px solid #4b5563"},children:[f.jsx("h5",{style:{...Q,fontSize:"16px",fontWeight:"bold",color:"#a78bfa",marginBottom:"16px"},children:" Payout Tracking"}),f.jsxs("div",{style:{marginBottom:"16px"},children:[f.jsx("div",{style:Q,children:"Expected Payout Date"}),f.jsx("div",{style:ie,children:r.expected_payout_date?new Date(r.expected_payout_date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):f.jsx("span",{style:{color:"#9ca3af",fontStyle:"italic"},children:"Not calculated"})})]}),f.jsxs("div",{style:{marginBottom:"16px"},children:[f.jsx("div",{style:Q,children:"Actual Payout Date"}),f.jsx("div",{style:ie,children:r.actual_payout_date?new Date(r.actual_payout_date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):f.jsx("span",{style:{color:"#9ca3af",fontStyle:"italic"},children:"Payment not received"})})]}),f.jsxs("div",{style:{marginBottom:"16px"},children:[f.jsx("div",{style:Q,children:"Payout Status"}),f.jsx("div",{style:{...ie,display:"inline-block",padding:"6px 16px",borderRadius:"20px",background:r.payout_status==="paid"?"#10b981":r.payout_status==="overdue"?"#ef4444":r.payout_status==="unpaid"?"#f59e0b":"#6b7280",color:"white",fontWeight:"bold",textTransform:"uppercase",fontSize:"14px"},children:r.payout_status||"not_applicable"})]}),r.payout_status!=="paid"&&!r.actual_payout_date&&f.jsx("button",{onClick:async()=>{if(confirm("Mark this claim as PAID and record today as the payment date?")){const ve=new Date,xe=ve.getFullYear(),Se=String(ve.getMonth()+1).padStart(2,"0"),je=String(ve.getDate()).padStart(2,"0"),Oe=`${xe}-${Se}-${je}T00:00:00Z`;await Xe({actual_payout_date:Oe,payout_status:"paid"})}},style:{width:"100%",padding:"14px",fontSize:"16px",fontWeight:"bold",color:"white",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",border:"none",borderRadius:"8px",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",transition:"transform 0.1s"},onMouseEnter:ve=>ve.currentTarget.style.transform="translateY(-2px)",onMouseLeave:ve=>ve.currentTarget.style.transform="translateY(0)",children:" Mark as Paid Today"})]})})]}):null})(),f.jsxs("div",{style:on,children:[f.jsx("h4",{style:Dn,children:" Firm"}),f.jsxs("div",{style:{marginBottom:"16px"},children:[f.jsx("div",{style:Q,children:"Vendor"}),p?f.jsxs("select",{value:ye,onChange:W=>be(W.target.value),style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s",cursor:"pointer"},onFocus:W=>W.target.style.borderColor="#667eea",onBlur:W=>W.target.style.borderColor="#6b7280",children:[f.jsx("option",{value:"",children:"Select a firm..."}),Le.map(W=>f.jsx("option",{value:W.name,children:W.name},W.id))]}):f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[f.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"4px",background:Bi(r.firm_name),border:"2px solid rgba(255,255,255,0.3)"}}),f.jsx("div",{style:ie,children:r.firm_name||"Not assigned"})]})]})]}),f.jsxs("div",{style:on,children:[f.jsx("h4",{style:Dn,children:" Customer Information"}),f.jsxs("div",{style:{marginBottom:"16px"},children:[f.jsx("div",{style:Q,children:"Name"}),p?f.jsx("input",{type:"text",value:A,onChange:W=>F(W.target.value),style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:W=>W.target.style.borderColor="#667eea",onBlur:W=>W.target.style.borderColor="#6b7280"}):f.jsx("div",{style:ie,children:r.customer_name})]}),f.jsxs("div",{style:{marginBottom:"16px"},children:[f.jsx("div",{style:Q,children:"Phone"}),p?f.jsx("input",{type:"tel",value:V,onChange:W=>R(W.target.value),placeholder:"Phone number",style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:W=>W.target.style.borderColor="#667eea",onBlur:W=>W.target.style.borderColor="#6b7280"}):r.phone?f.jsxs("a",{href:`tel:${r.phone}`,style:{fontSize:"17px",color:"#818cf8",textDecoration:"none",fontWeight:"600"},children:[" ",r.phone]}):f.jsx("div",{style:{...ie,color:"#9ca3af",fontStyle:"italic"},children:"No phone"})]}),f.jsxs("div",{style:{marginBottom:"16px"},children:[f.jsx("div",{style:Q,children:"Email"}),p?f.jsx("input",{type:"email",value:B,onChange:W=>E(W.target.value),placeholder:"Email address",style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:W=>W.target.style.borderColor="#667eea",onBlur:W=>W.target.style.borderColor="#6b7280"}):r.email?f.jsxs("a",{href:`mailto:${r.email}`,style:{fontSize:"17px",color:"#818cf8",textDecoration:"none",fontWeight:"600"},children:[" ",r.email]}):f.jsx("div",{style:{...ie,color:"#9ca3af",fontStyle:"italic"},children:"No email"})]})]}),f.jsxs("div",{style:on,children:[f.jsx("h4",{style:Dn,children:" Vehicle Information"}),f.jsxs("div",{style:{marginBottom:"16px"},children:[f.jsx("div",{style:Q,children:"VIN"}),p?f.jsx("input",{type:"text",value:K,onChange:W=>Y(W.target.value),placeholder:"Vehicle Identification Number",style:{width:"100%",padding:"12px 16px",fontSize:"16px",fontFamily:"monospace",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:W=>W.target.style.borderColor="#667eea",onBlur:W=>W.target.style.borderColor="#6b7280"}):r.vin?f.jsx("div",{style:{...ie,fontFamily:"monospace",fontSize:"16px"},children:r.vin}):f.jsx("div",{style:{...ie,color:"#9ca3af",fontStyle:"italic"},children:"No VIN"})]}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(100px, 1fr))",gap:"12px"},children:[f.jsxs("div",{children:[f.jsx("div",{style:Q,children:"Year"}),p?f.jsx("input",{type:"number",value:Z,onChange:W=>$(W.target.value),placeholder:"Year",min:"1900",max:"2100",style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:W=>W.target.style.borderColor="#667eea",onBlur:W=>W.target.style.borderColor="#6b7280"}):r.vehicle_year?f.jsx("div",{style:ie,children:r.vehicle_year}):f.jsx("div",{style:{...ie,color:"#9ca3af",fontStyle:"italic"},children:"-"})]}),f.jsxs("div",{children:[f.jsx("div",{style:Q,children:"Make"}),p?f.jsx("input",{type:"text",value:I,onChange:W=>z(W.target.value),placeholder:"Make",style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:W=>W.target.style.borderColor="#667eea",onBlur:W=>W.target.style.borderColor="#6b7280"}):r.vehicle_make?f.jsx("div",{style:ie,children:r.vehicle_make}):f.jsx("div",{style:{...ie,color:"#9ca3af",fontStyle:"italic"},children:"-"})]}),f.jsxs("div",{children:[f.jsx("div",{style:Q,children:"Model"}),p?f.jsx("input",{type:"text",value:N,onChange:W=>H(W.target.value),placeholder:"Model",style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:W=>W.target.style.borderColor="#667eea",onBlur:W=>W.target.style.borderColor="#6b7280"}):r.vehicle_model?f.jsx("div",{style:ie,children:r.vehicle_model}):f.jsx("div",{style:{...ie,color:"#9ca3af",fontStyle:"italic"},children:"-"})]})]})]})]}),(r.notes||p)&&f.jsxs("div",{style:{...on,marginBottom:"24px"},children:[f.jsx("h4",{style:Dn,children:" Accident Description"}),p?f.jsx("textarea",{value:ce,onChange:W=>ne(W.target.value),placeholder:"Enter accident description...",style:{width:"100%",minHeight:"120px",padding:"12px",background:"#475569",border:"2px solid #6b7280",borderRadius:"8px",color:"#ffffff",fontSize:"16px",lineHeight:"1.6",fontFamily:"inherit",resize:"vertical"},onFocus:W=>W.target.style.borderColor="#667eea",onBlur:W=>W.target.style.borderColor="#6b7280"}):f.jsx("div",{style:{whiteSpace:"pre-wrap",background:"#2d3748",border:"1px solid #4b5563",padding:"16px",borderRadius:"8px",color:"#ffffff",fontSize:"16px",lineHeight:"1.6"},children:r.notes||f.jsx("span",{style:{color:"#9ca3af",fontStyle:"italic"},children:"No description provided"})})]}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px",marginBottom:"24px"},children:[f.jsxs("div",{style:on,children:[f.jsx("h4",{style:Dn,children:" Appointment"}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("div",{style:Q,children:"Start Date & Time"}),p?f.jsx("input",{type:"datetime-local",value:he,onChange:W=>ae(W.target.value),style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:W=>W.target.style.borderColor="#667eea",onBlur:W=>W.target.style.borderColor="#6b7280"}):r.appointment_start?f.jsx("div",{style:ie,children:new Date(r.appointment_start).toLocaleString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}):f.jsx("div",{style:{...ie,color:"#9ca3af",fontStyle:"italic"},children:"No appointment set"})]}),f.jsxs("div",{children:[f.jsx("div",{style:Q,children:"End Date & Time"}),p?f.jsx("input",{type:"datetime-local",value:J,onChange:W=>G(W.target.value),style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:W=>W.target.style.borderColor="#667eea",onBlur:W=>W.target.style.borderColor="#6b7280"}):r.appointment_end?f.jsx("div",{style:ie,children:new Date(r.appointment_end).toLocaleString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}):f.jsx("div",{style:{...ie,color:"#9ca3af",fontStyle:"italic"},children:"No end time set"})]})]}),f.jsxs("div",{style:on,children:[f.jsx("h4",{style:Dn,children:" Assignment"}),f.jsx("div",{style:Q,children:"Assigned Appraiser"}),p?f.jsxs("select",{value:re,onChange:W=>de(W.target.value),style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",cursor:"pointer",transition:"border-color 0.2s"},onFocus:W=>W.target.style.borderColor="#667eea",onBlur:W=>W.target.style.borderColor="#6b7280",children:[f.jsx("option",{value:"",children:"Unassigned"}),u.map(W=>f.jsxs("option",{value:W.user_id,children:[W.full_name||W.user_id," (",W.role,")"]},W.user_id))]}):f.jsx("div",{style:ie,children:r.assigned_to?((pe=u.find(W=>W.user_id===r.assigned_to))==null?void 0:pe.full_name)||"Unknown User":"Unassigned"})]})]}),f.jsxs("div",{style:on,children:[f.jsx("h4",{style:Dn,children:" Status & Actions"}),f.jsxs("div",{style:{marginBottom:"24px"},children:[f.jsx("div",{style:Q,children:"Current Status"}),f.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"12px 24px",borderRadius:"8px",fontSize:"17px",fontWeight:"bold",background:r.status==="COMPLETED"?"#4CAF50":r.status==="IN_PROGRESS"?"#FF9800":r.status==="SCHEDULED"?"#2196F3":r.status==="CANCELED"?"#ef4444":"#9E9E9E",color:"white",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:[r.status==="COMPLETED"&&"",r.status==="IN_PROGRESS"&&"",r.status==="SCHEDULED"&&"",r.status==="CANCELED"&&"",!r.status&&""," ",r.status||"NOT_STARTED"]})]}),f.jsxs("div",{style:{marginBottom:"24px"},children:[f.jsx("div",{style:Q,children:"Update Status"}),f.jsxs("select",{onChange:async W=>{const se=W.target.value;if(se==="DELETE")Lt();else if(se==="CANCELED")confirm("Cancel this claim? This will mark it as CANCELED and remove it from active claims.")&&Xe({status:"CANCELED"});else if(se==="COMPLETED"){const Ee=new Date,ve=Ee.getFullYear(),xe=String(Ee.getMonth()+1).padStart(2,"0"),Se=String(Ee.getDate()).padStart(2,"0"),je=`${ve}-${xe}-${Se}T00:00:00Z`,Oe=`${ve}-${xe}`;let Fe=null;if(r.firm_name)try{const Ye=Up(r.firm_name,Ee),bt=Ye.payoutDate.getFullYear(),lt=String(Ye.payoutDate.getMonth()+1).padStart(2,"0"),st=String(Ye.payoutDate.getDate()).padStart(2,"0");Fe=`${bt}-${lt}-${st}T00:00:00Z`}catch(Ye){console.warn("Could not calculate expected payout date:",Ye)}Xe({status:"COMPLETED",completion_date:je,completed_month:Oe,expected_payout_date:Fe,payout_status:"unpaid"})}else se&&Xe({status:se});W.target.value=""},style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",cursor:"pointer",fontWeight:"600",transition:"border-color 0.2s"},onFocus:W=>W.target.style.borderColor="#667eea",onBlur:W=>W.target.style.borderColor="#6b7280",children:[f.jsx("option",{value:"",children:"Choose an action..."}),f.jsx("option",{value:"SCHEDULED",children:" Mark as Scheduled"}),f.jsx("option",{value:"IN_PROGRESS",children:" In Progress"}),f.jsx("option",{value:"COMPLETED",children:" Mark as Complete"}),f.jsx("option",{value:"CANCELED",children:" Cancel Claim"}),f.jsx("option",{value:"DELETE",style:{color:"#ef4444",fontWeight:"bold"},children:" Permanently Delete Claim"})]}),f.jsx("p",{style:{fontSize:"14px",color:"#cbd5e1",marginTop:"8px",fontStyle:"italic"},children:" Permanent delete cannot be undone. All photos and data will be lost."})]}),(()=>{const W=nn(),se=W==null?void 0:W.getCurrentUser(),Ee=(se==null?void 0:se.role)==="appraiser",ve=s.length>0,xe=r.status==="COMPLETED";return Ee&&ve&&!xe?f.jsxs("div",{style:{marginTop:"24px",paddingTop:"24px",borderTop:"2px solid #4b5563"},children:[f.jsx("div",{style:Q,children:"Ready to Submit?"}),f.jsx("button",{onClick:zt,style:{width:"100%",padding:"16px 24px",background:"linear-gradient(135deg, #4CAF50 0%, #45a049 100%)",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",fontSize:"18px",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 4px 6px rgba(0,0,0,0.3)"},onMouseEnter:Se=>{Se.currentTarget.style.transform="translateY(-2px)",Se.currentTarget.style.boxShadow="0 6px 12px rgba(0,0,0,0.4)"},onMouseLeave:Se=>{Se.currentTarget.style.transform="translateY(0)",Se.currentTarget.style.boxShadow="0 4px 6px rgba(0,0,0,0.3)"},children:" Mark Claim as Complete"}),f.jsx("p",{style:{fontSize:"13px",color:"#cbd5e1",marginTop:"8px",fontStyle:"italic",textAlign:"center"},children:"This will notify the admin that you've finished this claim"})]}):null})()]}),f.jsxs("div",{style:on,children:[f.jsx("h4",{style:Dn,children:" Location"}),p?f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsxs("div",{style:{marginBottom:"16px"},children:[f.jsx("div",{style:Q,children:"Address Line 1"}),f.jsx("input",{type:"text",value:X,onChange:W=>_e(W.target.value),placeholder:"Street address",style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:W=>W.target.style.borderColor="#667eea",onBlur:W=>W.target.style.borderColor="#6b7280"})]}),f.jsxs("div",{style:{marginBottom:"16px"},children:[f.jsx("div",{style:Q,children:"Address Line 2 (Optional)"}),f.jsx("input",{type:"text",value:Te,onChange:W=>Pe(W.target.value),placeholder:"Apt, suite, etc.",style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:W=>W.target.style.borderColor="#667eea",onBlur:W=>W.target.style.borderColor="#6b7280"})]}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(100px, 1fr))",gap:"12px"},children:[f.jsxs("div",{children:[f.jsx("div",{style:Q,children:"City"}),f.jsx("input",{type:"text",value:le,onChange:W=>ke(W.target.value),placeholder:"City",style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:W=>W.target.style.borderColor="#667eea",onBlur:W=>W.target.style.borderColor="#6b7280"})]}),f.jsxs("div",{children:[f.jsx("div",{style:Q,children:"State"}),f.jsx("input",{type:"text",value:De,onChange:W=>Re(W.target.value),placeholder:"State",style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:W=>W.target.style.borderColor="#667eea",onBlur:W=>W.target.style.borderColor="#6b7280"})]}),f.jsxs("div",{children:[f.jsx("div",{style:Q,children:"ZIP"}),f.jsx("input",{type:"text",value:Ge,onChange:W=>M(W.target.value),placeholder:"ZIP",style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:W=>W.target.style.borderColor="#667eea",onBlur:W=>W.target.style.borderColor="#6b7280"})]})]})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{marginBottom:"16px"},children:[f.jsx("div",{style:Q,children:"Street Address"}),f.jsxs("div",{style:ie,children:[r.address_line1,r.address_line2&&f.jsxs(f.Fragment,{children:[", ",r.address_line2]})]})]}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("div",{style:Q,children:"City, State, ZIP"}),f.jsxs("div",{style:ie,children:[r.city,", ",r.state," ",r.postal_code]})]})]}),r.lat&&r.lng?f.jsx("div",{style:{height:"350px",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 6px rgba(0,0,0,0.3)",marginBottom:"16px"},children:f.jsxs(zw,{center:[r.lat,r.lng],zoom:15,style:{height:"100%",width:"100%"},children:[f.jsx(Bw,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:" OpenStreetMap contributors"}),f.jsx(Nw,{position:[r.lat,r.lng],children:f.jsx(Fw,{children:"Claim Location"})})]})}):f.jsx("div",{style:{padding:"20px",textAlign:"center",background:"#2d3748",borderRadius:"8px",color:"#cbd5e1",fontSize:"16px",marginBottom:"16px"},children:"No coordinates available"}),f.jsx("button",{onClick:fn,style:{width:"100%",padding:"12px 24px",fontSize:"16px",fontWeight:"600",background:"#10b981",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},onMouseEnter:W=>{W.currentTarget.style.background="#059669",W.currentTarget.style.transform="translateY(-1px)",W.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)"},onMouseLeave:W=>{W.currentTarget.style.background="#10b981",W.currentTarget.style.transform="translateY(0)",W.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)"},children:" Open in Google Maps"})]}),f.jsxs("div",{style:on,children:[f.jsxs("h4",{style:Dn,children:[" Photos (",s.length,")"]}),f.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"24px",flexWrap:"wrap"},children:[f.jsx("label",{htmlFor:"photo-upload",style:{flex:"1",minWidth:"200px",padding:"14px 24px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",borderRadius:"8px",fontWeight:"600",fontSize:"16px",cursor:"pointer",textAlign:"center",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},onMouseEnter:W=>{W.currentTarget.style.transform="translateY(-1px)",W.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)"},onMouseLeave:W=>{W.currentTarget.style.transform="translateY(0)",W.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)"},children:" Take Photo"}),f.jsx("input",{id:"photo-upload",type:"file",accept:"image/*",capture:"environment",onChange:Qe,style:{display:"none"},multiple:!0}),f.jsx("label",{htmlFor:"photo-gallery",style:{flex:"1",minWidth:"200px",padding:"14px 24px",background:"#10b981",color:"white",borderRadius:"8px",fontWeight:"600",fontSize:"16px",cursor:"pointer",textAlign:"center",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},onMouseEnter:W=>{W.currentTarget.style.background="#059669",W.currentTarget.style.transform="translateY(-1px)",W.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)"},onMouseLeave:W=>{W.currentTarget.style.background="#10b981",W.currentTarget.style.transform="translateY(0)",W.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)"},children:" Choose from Gallery"}),f.jsx("input",{id:"photo-gallery",type:"file",accept:"image/*",onChange:Qe,style:{display:"none"},multiple:!0}),s.length>0&&f.jsx("button",{onClick:On,style:{flex:"1",minWidth:"200px",padding:"14px 24px",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"white",borderRadius:"8px",fontWeight:"600",fontSize:"16px",cursor:"pointer",textAlign:"center",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",border:"none"},onMouseEnter:W=>{W.currentTarget.style.background="linear-gradient(135deg, #d97706 0%, #b45309 100%)",W.currentTarget.style.transform="translateY(-1px)",W.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)"},onMouseLeave:W=>{W.currentTarget.style.background="linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",W.currentTarget.style.transform="translateY(0)",W.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)"},children:" Download All Photos"})]}),f.jsx("p",{style:{fontSize:"15px",color:"#cbd5e1",marginBottom:"20px",padding:"12px",background:"#2d3748",borderRadius:"8px",borderLeft:"4px solid #667eea"},children:" Tip: Photos are automatically compressed and optimized for storage"}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:"16px"},children:s.map((W,se)=>{const Ee=Ne.storage.from("claim-photos").getPublicUrl(W.storage_path).data.publicUrl;return f.jsxs("div",{style:{position:"relative"},children:[f.jsx("div",{onClick:()=>c(se),style:{width:"100%",height:200,backgroundImage:`url(${Ee})`,backgroundSize:"cover",backgroundPosition:"center",borderRadius:4,cursor:"pointer",border:"2px solid #ddd",position:"relative"},children:f.jsx("button",{onClick:ve=>{ve.stopPropagation(),sn(W)},style:{position:"absolute",top:4,right:4,width:28,height:28,borderRadius:"50%",background:"rgba(244, 67, 54, 0.9)",color:"white",border:"2px solid white",fontSize:18,fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:0,lineHeight:1},children:""})}),f.jsx("a",{href:Ee,download:`claim-${r==null?void 0:r.claim_number}-photo-${W.id}.jpg`,onClick:ve=>ve.stopPropagation(),style:{display:"block",width:"100%",marginTop:4,padding:"10px",background:"#4CAF50",color:"white",textAlign:"center",borderRadius:4,textDecoration:"none",fontSize:14,fontWeight:"bold",boxSizing:"border-box"},children:" Download"})]},W.id)})})]}),a!==null&&f.jsxs("div",{onClick:()=>{c(null),dn()},onMouseMove:yr,onMouseUp:Mr,onMouseLeave:Mr,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.95)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",overflow:"hidden"},children:[f.jsx("button",{onClick:()=>{c(null),dn()},style:{position:"absolute",top:20,right:20,background:"white",border:"none",borderRadius:50,width:40,height:40,fontSize:24,cursor:"pointer",fontWeight:"bold",zIndex:1e4},children:""}),f.jsxs("div",{onClick:W=>W.stopPropagation(),style:{position:"absolute",top:20,left:20,display:"flex",flexDirection:"column",gap:8,zIndex:1e4},children:[f.jsx("button",{onClick:Ct,disabled:_>=4,style:{padding:"8px 16px",background:_>=4?"#4a5568":"#667eea",color:"white",border:"none",borderRadius:6,fontSize:18,fontWeight:"bold",cursor:_>=4?"not-allowed":"pointer",opacity:_>=4?.5:1},children:"+"}),f.jsxs("div",{style:{padding:"4px 8px",background:"rgba(255,255,255,0.2)",color:"white",borderRadius:4,fontSize:14,textAlign:"center",fontWeight:"bold"},children:[Math.round(_*100),"%"]}),f.jsx("button",{onClick:Ut,disabled:_<=1,style:{padding:"8px 16px",background:_<=1?"#4a5568":"#667eea",color:"white",border:"none",borderRadius:6,fontSize:18,fontWeight:"bold",cursor:_<=1?"not-allowed":"pointer",opacity:_<=1?.5:1},children:""})]}),f.jsxs("div",{onClick:W=>W.stopPropagation(),style:{position:"absolute",top:20,left:"50%",transform:"translateX(-50%)",display:"flex",gap:12,zIndex:1e4},children:[f.jsx("button",{onClick:Sn,style:{padding:"10px 20px",background:"#667eea",color:"white",border:"none",borderRadius:6,fontSize:16,fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",gap:6},children:" Rotate Left"}),f.jsx("button",{onClick:Vn,style:{padding:"10px 20px",background:"#667eea",color:"white",border:"none",borderRadius:6,fontSize:16,fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",gap:6},children:"Rotate Right "})]}),f.jsx("div",{style:{position:"relative",maxWidth:"90%",maxHeight:"80%",display:"flex",alignItems:"center",justifyContent:"center"},onClick:W=>W.stopPropagation(),children:f.jsx("img",{src:Ne.storage.from("claim-photos").getPublicUrl(s[a].storage_path).data.publicUrl,onWheel:hn,onMouseDown:Zn,style:{maxWidth:"100%",maxHeight:"80vh",objectFit:"contain",transform:`rotate(${g}deg) scale(${_}) translate(${x/_}px, ${S/_}px)`,transition:j?"none":"transform 0.2s ease-out",cursor:_>1?j?"grabbing":"grab":"default",userSelect:"none"},draggable:!1})}),f.jsxs("div",{style:{display:"flex",gap:16,marginTop:20,alignItems:"center"},onClick:W=>W.stopPropagation(),children:[f.jsx("button",{onClick:W=>{W.stopPropagation(),dn(),c(a>0?a-1:s.length-1)},style:{padding:"12px 24px",background:"#667eea",color:"white",border:"none",borderRadius:6,fontSize:16,fontWeight:"bold",cursor:"pointer"},children:" Previous"}),f.jsxs("span",{style:{color:"white",fontSize:16,fontWeight:"bold"},children:[a+1," / ",s.length]}),f.jsx("button",{onClick:W=>{W.stopPropagation(),dn(),c(a<s.length-1?a+1:0)},style:{padding:"12px 24px",background:"#667eea",color:"white",border:"none",borderRadius:6,fontSize:16,fontWeight:"bold",cursor:"pointer"},children:"Next "}),f.jsx("a",{href:Ne.storage.from("claim-photos").getPublicUrl(s[a].storage_path).data.publicUrl,download:`claim-${r==null?void 0:r.claim_number}-photo-${s[a].id}.jpg`,style:{padding:"12px 24px",background:"#4CAF50",color:"white",borderRadius:6,fontSize:16,fontWeight:"bold",textDecoration:"none",display:"inline-block"},children:" Download"}),f.jsx("button",{onClick:W=>{W.stopPropagation(),sn(s[a])},style:{padding:"12px 24px",background:"#f44336",color:"white",border:"none",borderRadius:6,fontSize:16,fontWeight:"bold",cursor:"pointer"},children:" Delete"})]})]})]})})}function jL(){const[t]=Hn(),[e,n]=q.useState(null),[r,i]=q.useState(!0),[s,o]=q.useState(null),a=t.get("firm"),c=t.get("pretty"),u=c==="true"||c==="1";q.useEffect(()=>{async function g(){i(!0),o(null);try{let y;if(a){if(y=await CM(a),!y){o(`Firm not found: ${a}`),i(!1);return}}else y=await $2();n(y)}catch(y){o(y.message||"Failed to generate reliability report")}finally{i(!1)}}g()},[a]);const p=r?{status:"loading",message:"Generating firm reliability metrics..."}:s?{status:"error",message:s}:{status:"success",data:e},m=u?JSON.stringify(p,null,2):JSON.stringify(p);return f.jsx("div",{style:{fontFamily:"monospace",padding:"20px",background:"#1a202c",color:"#e2e8f0",minHeight:"100vh"},children:f.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[f.jsxs("div",{style:{marginBottom:"20px",padding:"16px",background:"#2d3748",borderRadius:"8px",border:"1px solid #4a5568"},children:[f.jsx("h1",{style:{margin:"0 0 8px 0",color:"#667eea",fontSize:"24px"},children:"Firm Reliability API"}),f.jsxs("div",{style:{fontSize:"14px",color:"#a0aec0"},children:[f.jsxs("div",{children:["Endpoint: ",f.jsx("code",{children:"/api/firm-reliability"})]}),f.jsx("div",{style:{marginTop:"8px"},children:f.jsx("strong",{children:"Query Parameters:"})}),f.jsxs("ul",{style:{marginTop:"4px",paddingLeft:"20px"},children:[f.jsxs("li",{children:[f.jsx("code",{children:"?firm=FirmName"})," - Get metrics for specific firm"]}),f.jsxs("li",{children:[f.jsx("code",{children:"?pretty=true"})," - Pretty-print JSON output"]})]}),f.jsx("div",{style:{marginTop:"8px"},children:f.jsx("strong",{children:"Examples:"})}),f.jsxs("ul",{style:{marginTop:"4px",paddingLeft:"20px"},children:[f.jsxs("li",{children:[f.jsx("code",{children:"/api/firm-reliability"})," - All firms"]}),f.jsxs("li",{children:[f.jsx("code",{children:"/api/firm-reliability?pretty=true"})," - All firms (pretty)"]}),f.jsxs("li",{children:[f.jsx("code",{children:"/api/firm-reliability?firm=Sedgwick"})," - Specific firm"]})]})]})]}),f.jsx("div",{style:{background:"#0d1117",padding:"16px",borderRadius:"8px",border:"1px solid #30363d",overflow:"auto"},children:f.jsx("pre",{style:{margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word",fontSize:"13px",lineHeight:"1.6"},children:m})}),!r&&!s&&e&&f.jsxs("div",{style:{marginTop:"20px",padding:"16px",background:"#2d3748",borderRadius:"8px",border:"1px solid #4a5568",fontSize:"14px"},children:[f.jsx("h3",{style:{margin:"0 0 12px 0",color:"#667eea"},children:"Data Summary"}),"overall_summary"in e?f.jsxs("div",{children:[f.jsxs("div",{children:["Total Firms: ",f.jsx("strong",{children:e.total_firms})]}),f.jsxs("div",{children:["Total Claims Tracked: ",f.jsx("strong",{children:e.overall_summary.total_claims_tracked})]}),f.jsxs("div",{children:["Total Paid Claims: ",f.jsx("strong",{children:e.overall_summary.total_paid_claims})]}),f.jsxs("div",{children:["Total Unpaid Claims: ",f.jsx("strong",{children:e.overall_summary.total_unpaid_claims})]}),f.jsxs("div",{children:["Overall Avg Days Late: ",f.jsx("strong",{children:e.overall_summary.overall_avg_days_late.toFixed(1)})," days"]}),f.jsxs("div",{children:["Overall On-Time %: ",f.jsxs("strong",{children:[e.overall_summary.overall_on_time_percentage.toFixed(1),"%"]})]}),f.jsxs("div",{children:["Total Outstanding: ",f.jsxs("strong",{children:["$",e.overall_summary.total_outstanding_balance.toFixed(2)]})]})]}):f.jsxs("div",{children:[f.jsxs("div",{children:["Firm: ",f.jsx("strong",{children:e.firm_name})]}),f.jsxs("div",{children:["Paid Claims: ",f.jsx("strong",{children:e.total_paid_claims})]}),f.jsxs("div",{children:["Unpaid Claims: ",f.jsx("strong",{children:e.total_unpaid_claims})]}),f.jsxs("div",{children:["Avg Days Late: ",f.jsx("strong",{children:e.avg_days_late.toFixed(1)})," days"]}),f.jsxs("div",{children:["On-Time %: ",f.jsxs("strong",{children:[e.on_time_percentage.toFixed(1),"%"]})]}),f.jsxs("div",{children:["Outstanding Balance: ",f.jsxs("strong",{children:["$",e.total_outstanding_balance.toFixed(2)]})]})]})]})]})})}function PL(){const[t]=Hn(),[e,n]=q.useState(null),[r,i]=q.useState(!0),[s,o]=q.useState(null),a=t.get("pretty"),c=t.get("historical"),u=t.get("projection"),h=a==="true"||a==="1",p=c?parseInt(c):12,m=u?parseInt(u):4;q.useEffect(()=>{async function b(){i(!0),o(null);try{const x=await V2(p,m);n(x)}catch(x){o(x.message||"Failed to generate payout variance report")}finally{i(!1)}}b()},[p,m]);const y=r?{status:"loading",message:"Generating payout variance report..."}:s?{status:"error",message:s}:{status:"success",data:e},_=h?JSON.stringify(y,null,2):JSON.stringify(y);return f.jsx("div",{style:{fontFamily:"monospace",padding:"20px",background:"#1a202c",color:"#e2e8f0",minHeight:"100vh"},children:f.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[f.jsxs("div",{style:{marginBottom:"20px",padding:"16px",background:"#2d3748",borderRadius:"8px",border:"1px solid #4a5568"},children:[f.jsx("h1",{style:{margin:"0 0 8px 0",color:"#667eea",fontSize:"24px"},children:"Payout Variance API"}),f.jsxs("div",{style:{fontSize:"14px",color:"#a0aec0"},children:[f.jsxs("div",{children:["Endpoint: ",f.jsx("code",{children:"/api/payout-variance"})]}),f.jsx("div",{style:{marginTop:"8px"},children:f.jsx("strong",{children:"Query Parameters:"})}),f.jsxs("ul",{style:{marginTop:"4px",paddingLeft:"20px"},children:[f.jsxs("li",{children:[f.jsx("code",{children:"?pretty=true"})," - Pretty-print JSON output"]}),f.jsxs("li",{children:[f.jsx("code",{children:"?historical=12"})," - Number of past weeks to include (default: 12)"]}),f.jsxs("li",{children:[f.jsx("code",{children:"?projection=4"})," - Number of future weeks to project (default: 4)"]})]}),f.jsx("div",{style:{marginTop:"8px"},children:f.jsx("strong",{children:"Examples:"})}),f.jsxs("ul",{style:{marginTop:"4px",paddingLeft:"20px"},children:[f.jsxs("li",{children:[f.jsx("code",{children:"/api/payout-variance"})," - Default (12 weeks history, 4 weeks projection)"]}),f.jsxs("li",{children:[f.jsx("code",{children:"/api/payout-variance?pretty=true"})," - Pretty-printed output"]}),f.jsxs("li",{children:[f.jsx("code",{children:"/api/payout-variance?historical=8&projection=2"})," - Custom range"]})]})]})]}),f.jsx("div",{style:{background:"#0d1117",padding:"16px",borderRadius:"8px",border:"1px solid #30363d",overflow:"auto"},children:f.jsx("pre",{style:{margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word",fontSize:"13px",lineHeight:"1.6"},children:_})}),!r&&!s&&e&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{marginTop:"20px",padding:"16px",background:"#2d3748",borderRadius:"8px",border:"1px solid #4a5568",fontSize:"14px"},children:[f.jsx("h3",{style:{margin:"0 0 12px 0",color:"#667eea"},children:"Summary Statistics"}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px"},children:[f.jsxs("div",{children:[f.jsx("div",{style:{color:"#a0aec0",fontSize:"12px"},children:"Total Expected (Historical)"}),f.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#10b981"},children:["$",e.summary.total_expected.toLocaleString()]})]}),f.jsxs("div",{children:[f.jsx("div",{style:{color:"#a0aec0",fontSize:"12px"},children:"Total Actual (Historical)"}),f.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#3b82f6"},children:["$",e.summary.total_actual.toLocaleString()]})]}),f.jsxs("div",{children:[f.jsx("div",{style:{color:"#a0aec0",fontSize:"12px"},children:"Total Variance"}),f.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",color:e.summary.total_variance>=0?"#f59e0b":"#ef4444"},children:["$",Math.abs(e.summary.total_variance).toLocaleString(),e.summary.total_variance>=0?" (under-collected)":" (over-collected)"]})]}),f.jsxs("div",{children:[f.jsx("div",{style:{color:"#a0aec0",fontSize:"12px"},children:"Accuracy Percentage"}),f.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#8b5cf6"},children:[e.summary.accuracy_percentage.toFixed(1),"%"]})]})]})]}),f.jsxs("div",{style:{marginTop:"20px",padding:"16px",background:"#2d3748",borderRadius:"8px",border:"1px solid #4a5568",fontSize:"14px"},children:[f.jsx("h3",{style:{margin:"0 0 12px 0",color:"#667eea"},children:"Rolling Average (4 weeks)"}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px"},children:[f.jsxs("div",{children:[f.jsx("div",{style:{color:"#a0aec0",fontSize:"12px"},children:"Avg Weekly Expected"}),f.jsxs("div",{style:{fontSize:"18px",fontWeight:"bold",color:"#10b981"},children:["$",e.rolling_average.avg_expected.toLocaleString()]})]}),f.jsxs("div",{children:[f.jsx("div",{style:{color:"#a0aec0",fontSize:"12px"},children:"Avg Weekly Actual"}),f.jsxs("div",{style:{fontSize:"18px",fontWeight:"bold",color:"#3b82f6"},children:["$",e.rolling_average.avg_actual.toLocaleString()]})]}),f.jsxs("div",{children:[f.jsx("div",{style:{color:"#a0aec0",fontSize:"12px"},children:"Avg Weekly Variance"}),f.jsxs("div",{style:{fontSize:"18px",fontWeight:"bold",color:e.rolling_average.avg_variance>=0?"#f59e0b":"#ef4444"},children:["$",Math.abs(e.rolling_average.avg_variance).toLocaleString()]})]})]})]}),f.jsxs("div",{style:{marginTop:"20px",padding:"16px",background:"#2d3748",borderRadius:"8px",border:"1px solid #4a5568",fontSize:"14px"},children:[f.jsx("h3",{style:{margin:"0 0 12px 0",color:"#667eea"},children:"Weekly Breakdown"}),f.jsx("div",{style:{overflowX:"auto"},children:f.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[f.jsx("thead",{children:f.jsxs("tr",{style:{borderBottom:"2px solid #4a5568"},children:[f.jsx("th",{style:{textAlign:"left",padding:"8px",color:"#a0aec0"},children:"Week"}),f.jsx("th",{style:{textAlign:"right",padding:"8px",color:"#a0aec0"},children:"Expected"}),f.jsx("th",{style:{textAlign:"right",padding:"8px",color:"#a0aec0"},children:"Actual"}),f.jsx("th",{style:{textAlign:"right",padding:"8px",color:"#a0aec0"},children:"Variance"}),f.jsx("th",{style:{textAlign:"right",padding:"8px",color:"#a0aec0"},children:"Accuracy"}),f.jsx("th",{style:{textAlign:"center",padding:"8px",color:"#a0aec0"},children:"Type"})]})}),f.jsx("tbody",{children:e.weekly_data.map((b,x)=>f.jsxs("tr",{style:{borderBottom:"1px solid #374151",background:b.is_projection?"#1e293b":"transparent"},children:[f.jsx("td",{style:{padding:"8px",color:"#e2e8f0"},children:b.week_label}),f.jsxs("td",{style:{padding:"8px",textAlign:"right",color:"#10b981"},children:["$",b.expected_payout.toLocaleString()]}),f.jsxs("td",{style:{padding:"8px",textAlign:"right",color:"#3b82f6"},children:["$",b.actual_paid.toLocaleString()]}),f.jsxs("td",{style:{padding:"8px",textAlign:"right",color:b.variance>=0?"#f59e0b":"#10b981",fontWeight:"bold"},children:[b.variance>=0?"+":"","$",b.variance.toLocaleString()]}),f.jsxs("td",{style:{padding:"8px",textAlign:"right",color:Math.abs(b.variance_percentage)<10?"#10b981":"#f59e0b"},children:[b.variance_percentage>=0?"+":"",b.variance_percentage.toFixed(1),"%"]}),f.jsx("td",{style:{padding:"8px",textAlign:"center"},children:b.is_projection?f.jsx("span",{style:{color:"#8b5cf6",fontSize:"12px"},children:"PROJECTION"}):f.jsx("span",{style:{color:"#10b981",fontSize:"12px"},children:"HISTORICAL"})})]},x))})]})})]})]})]})})}function AL(){const[t]=Hn(),[e,n]=q.useState(null),[r,i]=q.useState(!0),[s,o]=q.useState(null),a=t.get("pretty"),c=t.get("weeks"),u=a==="true"||a==="1",h=c?parseInt(c):12;q.useEffect(()=>{async function y(){i(!0),o(null);try{const _=await Y2(h);n(_)}catch(_){o(_.message||"Failed to generate capacity stress report")}finally{i(!1)}}y()},[h]);const m=r?{status:"loading",message:"Generating capacity stress report..."}:s?{status:"error",message:s}:{status:"success",data:e},g=u?JSON.stringify(m,null,2):JSON.stringify(m);return f.jsx("div",{style:{fontFamily:"monospace",padding:"20px",background:"#1a202c",color:"#e2e8f0",minHeight:"100vh"},children:f.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[f.jsxs("div",{style:{marginBottom:"20px",padding:"16px",background:"#2d3748",borderRadius:"8px",border:"1px solid #4a5568"},children:[f.jsx("h1",{style:{margin:"0 0 8px 0",color:"#667eea",fontSize:"24px"},children:"Capacity Stress API"}),f.jsxs("div",{style:{fontSize:"14px",color:"#a0aec0"},children:[f.jsxs("div",{children:["Endpoint: ",f.jsx("code",{children:"/api/capacity-stress"})]}),f.jsx("div",{style:{marginTop:"8px"},children:f.jsx("strong",{children:"Query Parameters:"})}),f.jsxs("ul",{style:{marginTop:"4px",paddingLeft:"20px"},children:[f.jsxs("li",{children:[f.jsx("code",{children:"?pretty=true"})," - Pretty-print JSON output"]}),f.jsxs("li",{children:[f.jsx("code",{children:"?weeks=12"})," - Number of past weeks to include (default: 12)"]})]}),f.jsx("div",{style:{marginTop:"8px"},children:f.jsx("strong",{children:"Examples:"})}),f.jsxs("ul",{style:{marginTop:"4px",paddingLeft:"20px"},children:[f.jsxs("li",{children:[f.jsx("code",{children:"/api/capacity-stress"})," - Default (12 weeks)"]}),f.jsxs("li",{children:[f.jsx("code",{children:"/api/capacity-stress?pretty=true"})," - Pretty-printed output"]}),f.jsxs("li",{children:[f.jsx("code",{children:"/api/capacity-stress?weeks=8"})," - Last 8 weeks"]})]})]})]}),f.jsx("div",{style:{background:"#0d1117",padding:"16px",borderRadius:"8px",border:"1px solid #30363d",overflow:"auto"},children:f.jsx("pre",{style:{margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word",fontSize:"13px",lineHeight:"1.6"},children:g})}),!r&&!s&&e&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{marginTop:"20px",display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:[f.jsxs("div",{style:{padding:"16px",background:"#2d3748",borderRadius:"8px",border:"2px solid "+(e.capacity_indicators.backlog_status==="healthy"?"#10b981":e.capacity_indicators.backlog_status==="warning"?"#f59e0b":"#ef4444")},children:[f.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",marginBottom:"8px"},children:"BACKLOG STATUS"}),f.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",textTransform:"uppercase",color:e.capacity_indicators.backlog_status==="healthy"?"#10b981":e.capacity_indicators.backlog_status==="warning"?"#f59e0b":"#ef4444"},children:e.capacity_indicators.backlog_status}),f.jsxs("div",{style:{fontSize:"12px",color:"#a0aec0",marginTop:"8px"},children:["Avg Backlog Growth: ",e.summary.avg_backlog_growth.toFixed(1)," claims/week"]})]}),f.jsxs("div",{style:{padding:"16px",background:"#2d3748",borderRadius:"8px",border:"2px solid "+(e.capacity_indicators.booking_pressure==="low"?"#10b981":e.capacity_indicators.booking_pressure==="medium"?"#f59e0b":"#ef4444")},children:[f.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",marginBottom:"8px"},children:"BOOKING PRESSURE"}),f.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",textTransform:"uppercase",color:e.capacity_indicators.booking_pressure==="low"?"#10b981":e.capacity_indicators.booking_pressure==="medium"?"#f59e0b":"#ef4444"},children:e.capacity_indicators.booking_pressure}),f.jsxs("div",{style:{fontSize:"12px",color:"#a0aec0",marginTop:"8px"},children:["Booked ",e.current_days_booked_ahead," days ahead"]})]}),f.jsxs("div",{style:{padding:"16px",background:"#2d3748",borderRadius:"8px",border:"2px solid "+(e.summary.trend==="improving"?"#10b981":e.summary.trend==="stable"?"#3b82f6":"#ef4444")},children:[f.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",marginBottom:"8px"},children:"THROUGHPUT TREND"}),f.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",textTransform:"uppercase",color:e.summary.trend==="improving"?"#10b981":e.summary.trend==="stable"?"#3b82f6":"#ef4444"},children:e.summary.trend}),f.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",marginTop:"8px"},children:e.capacity_indicators.throughput_trend})]})]}),f.jsxs("div",{style:{marginTop:"20px",padding:"16px",background:"#2d3748",borderRadius:"8px",border:"1px solid #4a5568",fontSize:"14px"},children:[f.jsx("h3",{style:{margin:"0 0 12px 0",color:"#667eea"},children:"Summary Statistics"}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"12px"},children:[f.jsxs("div",{children:[f.jsx("div",{style:{color:"#a0aec0",fontSize:"12px"},children:"Total Assigned"}),f.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#3b82f6"},children:e.summary.total_assigned})]}),f.jsxs("div",{children:[f.jsx("div",{style:{color:"#a0aec0",fontSize:"12px"},children:"Total Completed"}),f.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#10b981"},children:e.summary.total_completed})]}),f.jsxs("div",{children:[f.jsx("div",{style:{color:"#a0aec0",fontSize:"12px"},children:"Net Backlog Change"}),f.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",color:e.summary.total_backlog_growth>0?"#ef4444":"#10b981"},children:[e.summary.total_backlog_growth>0?"+":"",e.summary.total_backlog_growth]})]}),f.jsxs("div",{children:[f.jsx("div",{style:{color:"#a0aec0",fontSize:"12px"},children:"Completion Rate"}),f.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#8b5cf6"},children:[e.summary.completion_rate.toFixed(1),"%"]})]})]})]}),f.jsxs("div",{style:{marginTop:"20px",padding:"16px",background:"#2d3748",borderRadius:"8px",border:"1px solid #4a5568",fontSize:"14px"},children:[f.jsx("h3",{style:{margin:"0 0 12px 0",color:"#667eea"},children:"Weekly Breakdown"}),f.jsx("div",{style:{overflowX:"auto"},children:f.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[f.jsx("thead",{children:f.jsxs("tr",{style:{borderBottom:"2px solid #4a5568"},children:[f.jsx("th",{style:{textAlign:"left",padding:"8px",color:"#a0aec0"},children:"Week"}),f.jsx("th",{style:{textAlign:"right",padding:"8px",color:"#a0aec0"},children:"Assigned"}),f.jsx("th",{style:{textAlign:"right",padding:"8px",color:"#a0aec0"},children:"Completed"}),f.jsx("th",{style:{textAlign:"right",padding:"8px",color:"#a0aec0"},children:"Backlog "}),f.jsx("th",{style:{textAlign:"right",padding:"8px",color:"#a0aec0"},children:"Utilization"}),f.jsx("th",{style:{textAlign:"right",padding:"8px",color:"#a0aec0"},children:"Days Booked"})]})}),f.jsx("tbody",{children:e.weekly_data.map((y,_)=>f.jsxs("tr",{style:{borderBottom:"1px solid #374151",background:y.is_current_week?"#1e293b":"transparent"},children:[f.jsxs("td",{style:{padding:"8px",color:"#e2e8f0"},children:[y.week_label,y.is_current_week&&f.jsx("span",{style:{marginLeft:"8px",fontSize:"11px",color:"#667eea"},children:"(CURRENT)"})]}),f.jsx("td",{style:{padding:"8px",textAlign:"right",color:"#3b82f6"},children:y.claims_assigned}),f.jsx("td",{style:{padding:"8px",textAlign:"right",color:"#10b981"},children:y.claims_completed}),f.jsxs("td",{style:{padding:"8px",textAlign:"right",color:y.backlog_growth>0?"#ef4444":"#10b981",fontWeight:"bold"},children:[y.backlog_growth>0?"+":"",y.backlog_growth]}),f.jsxs("td",{style:{padding:"8px",textAlign:"right",color:y.utilization_rate>=90?"#10b981":y.utilization_rate>=70?"#f59e0b":"#ef4444"},children:[y.utilization_rate.toFixed(1),"%"]}),f.jsxs("td",{style:{padding:"8px",textAlign:"right",color:y.days_booked_ahead<=7?"#10b981":y.days_booked_ahead<=14?"#f59e0b":"#ef4444"},children:[y.days_booked_ahead," days"]})]},_))})]})})]})]})]})})}function OL(){const[t]=Hn(),[e,n]=q.useState(null),[r,i]=q.useState(!0),[s,o]=q.useState(null),a=t.get("pretty"),c=a==="true"||a==="1";q.useEffect(()=>{async function m(){i(!0),o(null);try{const g=await q2();n(g)}catch(g){o(g.message||"Failed to generate revenue risk report")}finally{i(!1)}}m()},[]);const h=r?{status:"loading",message:"Generating revenue risk report..."}:s?{status:"error",message:s}:{status:"success",data:e},p=c?JSON.stringify(h,null,2):JSON.stringify(h);return f.jsx("div",{style:{fontFamily:"monospace",padding:"20px",background:"#1a202c",color:"#e2e8f0",minHeight:"100vh"},children:f.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[f.jsxs("div",{style:{marginBottom:"20px",padding:"16px",background:"#2d3748",borderRadius:"8px",border:"1px solid #4a5568"},children:[f.jsx("h1",{style:{margin:"0 0 8px 0",color:"#667eea",fontSize:"24px"},children:"Revenue Risk API"}),f.jsxs("div",{style:{fontSize:"14px",color:"#a0aec0"},children:[f.jsxs("div",{children:["Endpoint: ",f.jsx("code",{children:"/api/revenue-risk"})]}),f.jsx("div",{style:{marginTop:"8px"},children:f.jsx("strong",{children:"Query Parameters:"})}),f.jsx("ul",{style:{marginTop:"4px",paddingLeft:"20px"},children:f.jsxs("li",{children:[f.jsx("code",{children:"?pretty=true"})," - Pretty-print JSON output"]})}),f.jsx("div",{style:{marginTop:"8px"},children:f.jsx("strong",{children:"Examples:"})}),f.jsxs("ul",{style:{marginTop:"4px",paddingLeft:"20px"},children:[f.jsxs("li",{children:[f.jsx("code",{children:"/api/revenue-risk"})," - Default output"]}),f.jsxs("li",{children:[f.jsx("code",{children:"/api/revenue-risk?pretty=true"})," - Pretty-printed output"]})]})]})]}),f.jsx("div",{style:{background:"#0d1117",padding:"16px",borderRadius:"8px",border:"1px solid #30363d",overflow:"auto"},children:f.jsx("pre",{style:{margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word",fontSize:"13px",lineHeight:"1.6"},children:p})}),!r&&!s&&e&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{marginTop:"20px",display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:[f.jsxs("div",{style:{padding:"16px",background:"#2d3748",borderRadius:"8px",border:"2px solid "+(e.risk_assessment.concentration_level==="low"?"#10b981":e.risk_assessment.concentration_level==="moderate"?"#3b82f6":e.risk_assessment.concentration_level==="high"?"#f59e0b":"#ef4444")},children:[f.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",marginBottom:"8px"},children:"CONCENTRATION LEVEL"}),f.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",textTransform:"uppercase",color:e.risk_assessment.concentration_level==="low"?"#10b981":e.risk_assessment.concentration_level==="moderate"?"#3b82f6":e.risk_assessment.concentration_level==="high"?"#f59e0b":"#ef4444"},children:e.risk_assessment.concentration_level}),f.jsxs("div",{style:{fontSize:"12px",color:"#a0aec0",marginTop:"8px"},children:["Top 3 Firms: ",e.top_3_firm_dependency_ratio.toFixed(1),"%"]})]}),f.jsxs("div",{style:{padding:"16px",background:"#2d3748",borderRadius:"8px",border:"1px solid #4a5568"},children:[f.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",marginBottom:"8px"},children:"TOTAL REVENUE"}),f.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#10b981"},children:["$",e.total_revenue.toLocaleString()]}),f.jsxs("div",{style:{fontSize:"12px",color:"#a0aec0",marginTop:"8px"},children:[e.total_claims," claims from ",e.unique_firms," firms"]})]}),f.jsxs("div",{style:{padding:"16px",background:"#2d3748",borderRadius:"8px",border:"1px solid #4a5568"},children:[f.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",marginBottom:"8px"},children:"HERFINDAHL INDEX"}),f.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:e.revenue_concentration.herfindahl_index>2500?"#ef4444":e.revenue_concentration.herfindahl_index>1500?"#f59e0b":"#10b981"},children:e.revenue_concentration.herfindahl_index}),f.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",marginTop:"8px"},children:e.revenue_concentration.herfindahl_index>2500?"Highly concentrated":e.revenue_concentration.herfindahl_index>1500?"Moderately concentrated":"Well diversified"})]})]}),f.jsxs("div",{style:{marginTop:"20px",padding:"16px",background:"#2d3748",borderRadius:"8px",border:"1px solid #4a5568",fontSize:"14px"},children:[f.jsx("h3",{style:{margin:"0 0 12px 0",color:"#667eea"},children:"Top 3 Firms (Dependency Analysis)"}),f.jsx("div",{style:{display:"grid",gap:"12px"},children:e.top_3_firms.map((m,g)=>f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"40px 1fr auto auto",gap:"12px",alignItems:"center",padding:"12px",background:"#1a202c",borderRadius:"6px",border:"1px solid #374151"},children:[f.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:g===0?"#f59e0b":g===1?"#6b7280":"#cd7f32",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",fontSize:"16px"},children:g+1}),f.jsxs("div",{children:[f.jsx("div",{style:{fontWeight:"bold",color:"#e2e8f0"},children:m.normalized_name}),f.jsxs("div",{style:{fontSize:"12px",color:"#a0aec0"},children:[m.claim_count," claims @ $",m.avg_revenue_per_claim.toFixed(2),"/claim avg"]})]}),f.jsx("div",{style:{textAlign:"right"},children:f.jsxs("div",{style:{fontWeight:"bold",color:"#10b981"},children:["$",m.total_revenue.toLocaleString()]})}),f.jsxs("div",{style:{textAlign:"right",padding:"4px 8px",background:"#374151",borderRadius:"4px",fontWeight:"bold",color:m.revenue_share_percentage>40?"#ef4444":m.revenue_share_percentage>25?"#f59e0b":"#3b82f6"},children:[m.revenue_share_percentage.toFixed(1),"%"]})]},g))})]}),f.jsxs("div",{style:{marginTop:"20px",padding:"16px",background:"#2d3748",borderRadius:"8px",border:"1px solid #4a5568",fontSize:"14px"},children:[f.jsx("h3",{style:{margin:"0 0 12px 0",color:"#667eea"},children:"Revenue Concentration Metrics"}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"12px"},children:[f.jsxs("div",{children:[f.jsx("div",{style:{color:"#a0aec0",fontSize:"12px"},children:"Top 1 Firm"}),f.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",color:e.revenue_concentration.top_1_percentage>50?"#ef4444":e.revenue_concentration.top_1_percentage>35?"#f59e0b":"#10b981"},children:[e.revenue_concentration.top_1_percentage.toFixed(1),"%"]})]}),f.jsxs("div",{children:[f.jsx("div",{style:{color:"#a0aec0",fontSize:"12px"},children:"Top 3 Firms"}),f.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",color:e.revenue_concentration.top_3_percentage>80?"#ef4444":e.revenue_concentration.top_3_percentage>60?"#f59e0b":"#10b981"},children:[e.revenue_concentration.top_3_percentage.toFixed(1),"%"]})]}),f.jsxs("div",{children:[f.jsx("div",{style:{color:"#a0aec0",fontSize:"12px"},children:"Top 5 Firms"}),f.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#3b82f6"},children:[e.revenue_concentration.top_5_percentage.toFixed(1),"%"]})]}),f.jsxs("div",{children:[f.jsx("div",{style:{color:"#a0aec0",fontSize:"12px"},children:"Unique Firms"}),f.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#8b5cf6"},children:e.unique_firms})]})]})]}),f.jsxs("div",{style:{marginTop:"20px",padding:"16px",background:e.risk_assessment.concentration_level==="critical"?"#7f1d1d":e.risk_assessment.concentration_level==="high"?"#78350f":e.risk_assessment.concentration_level==="moderate"?"#1e3a8a":"#064e3b",borderRadius:"8px",border:"2px solid "+(e.risk_assessment.concentration_level==="critical"?"#ef4444":e.risk_assessment.concentration_level==="high"?"#f59e0b":e.risk_assessment.concentration_level==="moderate"?"#3b82f6":"#10b981"),fontSize:"14px"},children:[f.jsx("h3",{style:{margin:"0 0 12px 0",color:"#e2e8f0"},children:"Risk Assessment & Recommendations"}),f.jsx("div",{style:{marginBottom:"12px",fontSize:"15px",fontWeight:"bold",color:"#e2e8f0"},children:e.risk_assessment.diversification_status}),f.jsx("ul",{style:{margin:0,paddingLeft:"20px",color:"#e2e8f0"},children:e.risk_assessment.recommendations.map((m,g)=>f.jsx("li",{style:{marginBottom:"4px"},children:m},g))})]}),f.jsxs("div",{style:{marginTop:"20px",padding:"16px",background:"#2d3748",borderRadius:"8px",border:"1px solid #4a5568",fontSize:"14px"},children:[f.jsx("h3",{style:{margin:"0 0 12px 0",color:"#667eea"},children:"All Firms (Revenue Distribution)"}),f.jsx("div",{style:{overflowX:"auto"},children:f.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[f.jsx("thead",{children:f.jsxs("tr",{style:{borderBottom:"2px solid #4a5568"},children:[f.jsx("th",{style:{textAlign:"left",padding:"8px",color:"#a0aec0"},children:"Rank"}),f.jsx("th",{style:{textAlign:"left",padding:"8px",color:"#a0aec0"},children:"Firm"}),f.jsx("th",{style:{textAlign:"right",padding:"8px",color:"#a0aec0"},children:"Claims"}),f.jsx("th",{style:{textAlign:"right",padding:"8px",color:"#a0aec0"},children:"Total Revenue"}),f.jsx("th",{style:{textAlign:"right",padding:"8px",color:"#a0aec0"},children:"Avg/Claim"}),f.jsx("th",{style:{textAlign:"right",padding:"8px",color:"#a0aec0"},children:"Share %"})]})}),f.jsx("tbody",{children:e.firm_revenues.map((m,g)=>f.jsxs("tr",{style:{borderBottom:"1px solid #374151",background:g<3?"#1e293b":"transparent"},children:[f.jsxs("td",{style:{padding:"8px",color:"#a0aec0"},children:["#",g+1]}),f.jsx("td",{style:{padding:"8px",color:"#e2e8f0",fontWeight:g<3?"bold":"normal"},children:m.normalized_name}),f.jsx("td",{style:{padding:"8px",textAlign:"right",color:"#3b82f6"},children:m.claim_count}),f.jsxs("td",{style:{padding:"8px",textAlign:"right",color:"#10b981",fontWeight:"bold"},children:["$",m.total_revenue.toLocaleString()]}),f.jsxs("td",{style:{padding:"8px",textAlign:"right",color:"#8b5cf6"},children:["$",m.avg_revenue_per_claim.toFixed(2)]}),f.jsxs("td",{style:{padding:"8px",textAlign:"right",fontWeight:"bold",color:m.revenue_share_percentage>40?"#ef4444":m.revenue_share_percentage>25?"#f59e0b":m.revenue_share_percentage>15?"#3b82f6":"#a0aec0"},children:[m.revenue_share_percentage.toFixed(2),"%"]})]},g))})]})})]})]})]})})}function DL(){const[t]=Hn(),[e,n]=q.useState(null),[r,i]=q.useState(!0),[s,o]=q.useState(null),a=t.get("pretty"),c=t.get("days"),u=t.get("delay"),h=a==="true"||a==="1",p=c?parseInt(c):30,m=u?parseInt(u):7;q.useEffect(()=>{async function b(){i(!0),o(null);try{const x=await G2(p,m);n(x)}catch(x){o(x.message||"Failed to generate survival runway report")}finally{i(!1)}}b()},[p,m]);const y=r?{status:"loading",message:"Generating survival runway forecast..."}:s?{status:"error",message:s}:{status:"success",data:e},_=h?JSON.stringify(y,null,2):JSON.stringify(y);return f.jsx("div",{style:{fontFamily:"monospace",padding:"20px",background:"#1a202c",color:"#e2e8f0",minHeight:"100vh"},children:f.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[f.jsxs("div",{style:{marginBottom:"20px",padding:"16px",background:"#2d3748",borderRadius:"8px",border:"1px solid #4a5568"},children:[f.jsx("h1",{style:{margin:"0 0 8px 0",color:"#667eea",fontSize:"24px"},children:"Survival Runway API"}),f.jsxs("div",{style:{fontSize:"14px",color:"#a0aec0"},children:[f.jsxs("div",{children:["Endpoint: ",f.jsx("code",{children:"/api/survival-runway"})]}),f.jsx("div",{style:{marginTop:"8px"},children:f.jsx("strong",{children:"Query Parameters:"})}),f.jsxs("ul",{style:{marginTop:"4px",paddingLeft:"20px"},children:[f.jsxs("li",{children:[f.jsx("code",{children:"?pretty=true"})," - Pretty-print JSON output"]}),f.jsxs("li",{children:[f.jsx("code",{children:"?days=30"})," - Forecast period in days (default: 30)"]}),f.jsxs("li",{children:[f.jsx("code",{children:"?delay=7"})," - Payment delay scenario in days (default: 7)"]})]}),f.jsx("div",{style:{marginTop:"8px"},children:f.jsx("strong",{children:"Examples:"})}),f.jsxs("ul",{style:{marginTop:"4px",paddingLeft:"20px"},children:[f.jsxs("li",{children:[f.jsx("code",{children:"/api/survival-runway"})," - Default (30 days, 7-day delay)"]}),f.jsxs("li",{children:[f.jsx("code",{children:"/api/survival-runway?pretty=true"})," - Pretty-printed output"]}),f.jsxs("li",{children:[f.jsx("code",{children:"/api/survival-runway?days=60&delay=14"})," - 60-day forecast with 14-day delay"]})]})]})]}),f.jsx("div",{style:{background:"#0d1117",padding:"16px",borderRadius:"8px",border:"1px solid #30363d",overflow:"auto"},children:f.jsx("pre",{style:{margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word",fontSize:"13px",lineHeight:"1.6"},children:_})}),!r&&!s&&e&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{marginTop:"20px",display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:[f.jsxs("div",{style:{padding:"16px",background:"#2d3748",borderRadius:"8px",border:"2px solid #10b981"},children:[f.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",marginBottom:"8px"},children:"EXPECTED CASH (30 DAYS)"}),f.jsxs("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#10b981"},children:["$",e.expected_cash_in_30_days.toLocaleString()]}),f.jsxs("div",{style:{fontSize:"12px",color:"#a0aec0",marginTop:"8px"},children:[e.summary.total_payouts_expected," expected payouts"]})]}),f.jsxs("div",{style:{padding:"16px",background:"#2d3748",borderRadius:"8px",border:"2px solid "+(e.risk_assessment.impact_level==="low"?"#10b981":e.risk_assessment.impact_level==="moderate"?"#3b82f6":e.risk_assessment.impact_level==="high"?"#f59e0b":"#ef4444")},children:[f.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",marginBottom:"8px"},children:"DELAYED PAYMENT IMPACT"}),f.jsxs("div",{style:{fontSize:"28px",fontWeight:"bold",color:e.delayed_payment_impact>=0?"#ef4444":"#10b981"},children:[e.delayed_payment_impact>=0?"-":"+","$",Math.abs(e.delayed_payment_impact).toLocaleString()]}),f.jsxs("div",{style:{fontSize:"12px",color:"#a0aec0",marginTop:"8px"},children:[Math.abs(e.impact_percentage).toFixed(1),"% impact from ",m,"-day delay"]})]}),f.jsxs("div",{style:{padding:"16px",background:"#2d3748",borderRadius:"8px",border:"2px solid "+(e.risk_assessment.impact_level==="low"?"#10b981":e.risk_assessment.impact_level==="moderate"?"#3b82f6":e.risk_assessment.impact_level==="high"?"#f59e0b":"#ef4444")},children:[f.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",marginBottom:"8px"},children:"IMPACT LEVEL"}),f.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",textTransform:"uppercase",color:e.risk_assessment.impact_level==="low"?"#10b981":e.risk_assessment.impact_level==="moderate"?"#3b82f6":e.risk_assessment.impact_level==="high"?"#f59e0b":"#ef4444"},children:e.risk_assessment.impact_level}),f.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",marginTop:"8px"},children:e.risk_assessment.cash_flow_health})]})]}),f.jsxs("div",{style:{marginTop:"20px",padding:"16px",background:"#2d3748",borderRadius:"8px",border:"1px solid #4a5568",fontSize:"14px"},children:[f.jsx("h3",{style:{margin:"0 0 12px 0",color:"#667eea"},children:"Summary Statistics"}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"12px"},children:[f.jsxs("div",{children:[f.jsx("div",{style:{color:"#a0aec0",fontSize:"12px"},children:"Avg Daily (Expected)"}),f.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#10b981"},children:["$",e.summary.avg_daily_expected.toLocaleString()]})]}),f.jsxs("div",{children:[f.jsx("div",{style:{color:"#a0aec0",fontSize:"12px"},children:"Avg Daily (Delayed)"}),f.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#f59e0b"},children:["$",e.summary.avg_daily_delayed.toLocaleString()]})]}),f.jsxs("div",{children:[f.jsx("div",{style:{color:"#a0aec0",fontSize:"12px"},children:"Largest Single Day"}),f.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#3b82f6"},children:["$",e.summary.largest_single_day.toLocaleString()]}),f.jsx("div",{style:{fontSize:"11px",color:"#a0aec0",marginTop:"4px"},children:e.summary.largest_single_day_date})]}),f.jsxs("div",{children:[f.jsx("div",{style:{color:"#a0aec0",fontSize:"12px"},children:"Days with Payouts"}),f.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#8b5cf6"},children:[e.summary.days_with_payouts," / ",e.forecast_days]})]})]})]}),f.jsxs("div",{style:{marginTop:"20px",padding:"16px",background:e.risk_assessment.impact_level==="critical"?"#7f1d1d":e.risk_assessment.impact_level==="high"?"#78350f":e.risk_assessment.impact_level==="moderate"?"#1e3a8a":"#064e3b",borderRadius:"8px",border:"2px solid "+(e.risk_assessment.impact_level==="critical"?"#ef4444":e.risk_assessment.impact_level==="high"?"#f59e0b":e.risk_assessment.impact_level==="moderate"?"#3b82f6":"#10b981"),fontSize:"14px"},children:[f.jsx("h3",{style:{margin:"0 0 12px 0",color:"#e2e8f0"},children:"Risk Assessment & Recommendations"}),f.jsx("ul",{style:{margin:0,paddingLeft:"20px",color:"#e2e8f0"},children:e.risk_assessment.recommendations.map((b,x)=>f.jsx("li",{style:{marginBottom:"4px"},children:b},x))})]}),f.jsxs("div",{style:{marginTop:"20px",padding:"16px",background:"#2d3748",borderRadius:"8px",border:"1px solid #4a5568",fontSize:"14px"},children:[f.jsxs("h3",{style:{margin:"0 0 12px 0",color:"#667eea"},children:["Daily Cash Forecast (Next ",e.forecast_days," Days)"]}),f.jsx("div",{style:{overflowX:"auto"},children:f.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[f.jsx("thead",{children:f.jsxs("tr",{style:{borderBottom:"2px solid #4a5568"},children:[f.jsx("th",{style:{textAlign:"left",padding:"8px",color:"#a0aec0"},children:"Date"}),f.jsx("th",{style:{textAlign:"right",padding:"8px",color:"#a0aec0"},children:"Expected"}),f.jsx("th",{style:{textAlign:"right",padding:"8px",color:"#a0aec0"},children:"Delayed"}),f.jsx("th",{style:{textAlign:"right",padding:"8px",color:"#a0aec0"},children:"Cumulative"}),f.jsx("th",{style:{textAlign:"right",padding:"8px",color:"#a0aec0"},children:"Cum (Delayed)"}),f.jsx("th",{style:{textAlign:"left",padding:"8px",color:"#a0aec0"},children:"Firms"})]})}),f.jsx("tbody",{children:e.daily_forecast.slice(0,30).map((b,x)=>f.jsxs("tr",{style:{borderBottom:"1px solid #374151",background:b.payout_count>0?"#1e293b":"transparent"},children:[f.jsx("td",{style:{padding:"8px",color:"#e2e8f0"},children:b.date_label}),f.jsx("td",{style:{padding:"8px",textAlign:"right",color:b.expected_amount>0?"#10b981":"#6b7280",fontWeight:b.expected_amount>0?"bold":"normal"},children:b.expected_amount>0?`$${b.expected_amount.toLocaleString()}`:"-"}),f.jsx("td",{style:{padding:"8px",textAlign:"right",color:b.delayed_amount>0?"#f59e0b":"#6b7280"},children:b.delayed_amount>0?`$${b.delayed_amount.toLocaleString()}`:"-"}),f.jsxs("td",{style:{padding:"8px",textAlign:"right",color:"#3b82f6",fontWeight:"bold"},children:["$",b.cumulative_expected.toLocaleString()]}),f.jsxs("td",{style:{padding:"8px",textAlign:"right",color:"#f59e0b"},children:["$",b.cumulative_delayed.toLocaleString()]}),f.jsx("td",{style:{padding:"8px",color:"#a0aec0",fontSize:"11px"},children:b.firms_paying.length>0?b.firms_paying.join(", "):"-"})]},x))})]})})]})]})]})})}function RL(){const[t]=Hn(),[e,n]=q.useState(null),[r,i]=q.useState(!0),[s,o]=q.useState(null),a=t.get("pretty"),c=a==="true"||a==="1";q.useEffect(()=>{async function m(){i(!0),o(null);try{await eS();const g=await J2();n(g)}catch(g){o(g.message||"Failed to generate monthly performance report")}finally{i(!1)}}m()},[]);const h=r?{status:"loading",message:"Generating monthly performance report..."}:s?{status:"error",message:s}:{status:"success",data:e},p=c?JSON.stringify(h,null,2):JSON.stringify(h);return f.jsx("div",{style:{fontFamily:"monospace",padding:"20px",background:"#1a202c",color:"#e2e8f0",minHeight:"100vh"},children:f.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[f.jsxs("div",{style:{marginBottom:"20px",padding:"16px",background:"#2d3748",borderRadius:"8px",border:"1px solid #4a5568"},children:[f.jsx("h1",{style:{margin:"0 0 8px 0",color:"#667eea",fontSize:"24px"},children:"Monthly Performance API"}),f.jsxs("div",{style:{fontSize:"14px",color:"#a0aec0"},children:[f.jsxs("div",{children:["Endpoint: ",f.jsx("code",{children:"/api/monthly-performance"})]}),f.jsx("div",{style:{marginTop:"8px"},children:f.jsx("strong",{children:"Query Parameters:"})}),f.jsx("ul",{style:{marginTop:"4px",paddingLeft:"20px"},children:f.jsxs("li",{children:[f.jsx("code",{children:"?pretty=true"})," - Pretty-print JSON output"]})})]})]}),f.jsx("div",{style:{background:"#0d1117",padding:"16px",borderRadius:"8px",border:"1px solid #30363d",overflow:"auto"},children:f.jsx("pre",{style:{margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word",fontSize:"13px",lineHeight:"1.6"},children:p})}),!r&&!s&&e&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{marginTop:"20px",display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px"},children:[f.jsxs("div",{style:{padding:"16px",background:"#2d3748",borderRadius:"8px",border:"2px solid "+(e.capacity_status==="UNDER-UTILIZED"?"#10b981":e.capacity_status==="OPTIMAL"?"#eab308":e.capacity_status==="STRETCH"?"#f97316":"#ef4444")},children:[f.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",marginBottom:"8px"},children:"CAPACITY STATUS"}),f.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:e.capacity_status==="UNDER-UTILIZED"?"#10b981":e.capacity_status==="OPTIMAL"?"#eab308":e.capacity_status==="STRETCH"?"#f97316":"#ef4444"},children:e.capacity_status}),f.jsxs("div",{style:{fontSize:"12px",color:"#a0aec0",marginTop:"8px"},children:[e.capacity_percentage.toFixed(1),"% of capacity"]})]}),f.jsxs("div",{style:{padding:"16px",background:"#2d3748",borderRadius:"8px",border:"1px solid #4a5568"},children:[f.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",marginBottom:"8px"},children:"COMPLETED THIS MONTH"}),f.jsx("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#10b981"},children:e.monthly_completed_claims}),f.jsxs("div",{style:{fontSize:"12px",color:"#a0aec0",marginTop:"8px"},children:[e.current_month_name," ",e.current_year]})]}),f.jsxs("div",{style:{padding:"16px",background:"#2d3748",borderRadius:"8px",border:"1px solid #4a5568"},children:[f.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",marginBottom:"8px"},children:"MONTHLY VELOCITY"}),f.jsx("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#3b82f6"},children:e.monthly_velocity.toFixed(1)}),f.jsxs("div",{style:{fontSize:"12px",color:"#a0aec0",marginTop:"8px"},children:["claims/day (",e.business_days_elapsed," bus. days)"]})]}),f.jsxs("div",{style:{padding:"16px",background:"#2d3748",borderRadius:"8px",border:"1px solid #4a5568"},children:[f.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",marginBottom:"8px"},children:"PROJECTED EOM"}),f.jsx("div",{style:{fontSize:"28px",fontWeight:"bold",color:e.projected_end_of_month>e.max_safe_capacity?"#ef4444":"#8b5cf6"},children:e.projected_end_of_month}),f.jsxs("div",{style:{fontSize:"12px",color:"#a0aec0",marginTop:"8px"},children:["Max: ",e.max_safe_capacity]})]})]}),f.jsxs("div",{style:{marginTop:"20px",padding:"16px",background:"#2d3748",borderRadius:"8px",border:"1px solid #4a5568"},children:[f.jsx("h3",{style:{margin:"0 0 12px 0",color:"#667eea"},children:"Month Progress"}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:[f.jsxs("div",{children:[f.jsx("div",{style:{color:"#a0aec0",fontSize:"12px"},children:"Business Days"}),f.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#e2e8f0"},children:[e.business_days_elapsed," / ",e.total_business_days_in_month]})]}),f.jsxs("div",{children:[f.jsx("div",{style:{color:"#a0aec0",fontSize:"12px"},children:"Days Remaining"}),f.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#e2e8f0"},children:e.days_remaining})]}),f.jsxs("div",{children:[f.jsx("div",{style:{color:"#a0aec0",fontSize:"12px"},children:"Recommended Daily Rate"}),f.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#eab308"},children:[e.recommended_daily_rate.toFixed(1)," claims/day"]})]})]})]}),f.jsxs("div",{style:{marginTop:"20px",padding:"16px",background:"#2d3748",borderRadius:"8px",border:"1px solid #4a5568"},children:[f.jsx("h3",{style:{margin:"0 0 12px 0",color:"#667eea"},children:"Capacity Gauge Reference"}),f.jsxs("div",{style:{display:"grid",gap:"8px"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[f.jsx("div",{style:{width:"120px",color:"#a0aec0",fontSize:"14px"},children:"< 60%"}),f.jsx("div",{style:{flex:1,padding:"8px 12px",background:"#064e3b",border:"1px solid #10b981",borderRadius:"4px",color:"#10b981",fontWeight:"bold"},children:"UNDER-UTILIZED (Green)"})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[f.jsx("div",{style:{width:"120px",color:"#a0aec0",fontSize:"14px"},children:"6085%"}),f.jsx("div",{style:{flex:1,padding:"8px 12px",background:"#713f12",border:"1px solid #eab308",borderRadius:"4px",color:"#eab308",fontWeight:"bold"},children:"OPTIMAL (Yellow)"})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[f.jsx("div",{style:{width:"120px",color:"#a0aec0",fontSize:"14px"},children:"85105%"}),f.jsx("div",{style:{flex:1,padding:"8px 12px",background:"#7c2d12",border:"1px solid #f97316",borderRadius:"4px",color:"#f97316",fontWeight:"bold"},children:"STRETCH (Orange)"})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[f.jsx("div",{style:{width:"120px",color:"#a0aec0",fontSize:"14px"},children:"> 105%"}),f.jsx("div",{style:{flex:1,padding:"8px 12px",background:"#7f1d1d",border:"1px solid #ef4444",borderRadius:"4px",color:"#ef4444",fontWeight:"bold"},children:"BURNOUT (Red)"})]})]})]})]})]})})}function ML(){const[t]=Hn(),[e,n]=q.useState(null),[r,i]=q.useState(!0),[s,o]=q.useState(null),a=t.get("pretty"),c=a==="true"||a==="1";q.useEffect(()=>{async function m(){i(!0),o(null);try{const g=await tS();n(g)}catch(g){o(g.message||"Failed to generate monthly history report")}finally{i(!1)}}m()},[]);const h=r?{status:"loading",message:"Generating monthly history report..."}:s?{status:"error",message:s}:{status:"success",data:e},p=c?JSON.stringify(h,null,2):JSON.stringify(h);return f.jsx("div",{style:{fontFamily:"monospace",padding:"20px",background:"#1a202c",color:"#e2e8f0",minHeight:"100vh"},children:f.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[f.jsxs("div",{style:{marginBottom:"20px",padding:"16px",background:"#2d3748",borderRadius:"8px",border:"1px solid #4a5568"},children:[f.jsx("h1",{style:{margin:"0 0 8px 0",color:"#667eea",fontSize:"24px"},children:"Monthly History API"}),f.jsxs("div",{style:{fontSize:"14px",color:"#a0aec0"},children:[f.jsxs("div",{children:["Endpoint: ",f.jsx("code",{children:"/api/monthly-history"})]}),f.jsx("div",{style:{marginTop:"8px"},children:f.jsx("strong",{children:"Query Parameters:"})}),f.jsx("ul",{style:{marginTop:"4px",paddingLeft:"20px"},children:f.jsxs("li",{children:[f.jsx("code",{children:"?pretty=true"})," - Pretty-print JSON output"]})})]})]}),f.jsx("div",{style:{background:"#0d1117",padding:"16px",borderRadius:"8px",border:"1px solid #30363d",overflow:"auto"},children:f.jsx("pre",{style:{margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word",fontSize:"13px",lineHeight:"1.6"},children:p})}),!r&&!s&&e&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{marginTop:"20px",display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:[f.jsxs("div",{style:{padding:"16px",background:"#2d3748",borderRadius:"8px",border:"1px solid #4a5568"},children:[f.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",marginBottom:"8px"},children:"MONTHS TRACKED"}),f.jsx("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#3b82f6"},children:e.months_tracked}),f.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",marginTop:"8px"},children:"Total historical records"})]}),f.jsxs("div",{style:{padding:"16px",background:"#2d3748",borderRadius:"8px",border:"1px solid #4a5568"},children:[f.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",marginBottom:"8px"},children:"EARLIEST MONTH"}),f.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#10b981"},children:e.earliest_month||"N/A"}),f.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",marginTop:"8px"},children:"First logged month"})]}),f.jsxs("div",{style:{padding:"16px",background:"#2d3748",borderRadius:"8px",border:"1px solid #4a5568"},children:[f.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",marginBottom:"8px"},children:"LATEST MONTH"}),f.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#8b5cf6"},children:e.latest_month||"N/A"}),f.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",marginTop:"8px"},children:"Most recent month"})]})]}),e.historical_performance.length>0&&f.jsxs("div",{style:{marginTop:"20px",padding:"16px",background:"#2d3748",borderRadius:"8px",border:"1px solid #4a5568"},children:[f.jsx("h3",{style:{margin:"0 0 12px 0",color:"#667eea"},children:"Recent Performance Snapshot"}),f.jsx("div",{style:{overflowX:"auto"},children:f.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},children:[f.jsx("thead",{children:f.jsxs("tr",{style:{borderBottom:"2px solid #4a5568"},children:[f.jsx("th",{style:{padding:"8px",textAlign:"left",color:"#a0aec0"},children:"Month"}),f.jsx("th",{style:{padding:"8px",textAlign:"right",color:"#a0aec0"},children:"Completed"}),f.jsx("th",{style:{padding:"8px",textAlign:"right",color:"#a0aec0"},children:"Backlog"}),f.jsx("th",{style:{padding:"8px",textAlign:"right",color:"#a0aec0"},children:"Velocity"}),f.jsx("th",{style:{padding:"8px",textAlign:"right",color:"#a0aec0"},children:"Burnout"}),f.jsx("th",{style:{padding:"8px",textAlign:"right",color:"#a0aec0"},children:"Firms"})]})}),f.jsx("tbody",{children:e.historical_performance.slice(-6).reverse().map((m,g)=>f.jsxs("tr",{style:{borderBottom:"1px solid #374151",background:g%2===0?"#1f2937":"transparent"},children:[f.jsx("td",{style:{padding:"8px",color:"#e2e8f0",fontWeight:"bold"},children:m.month}),f.jsx("td",{style:{padding:"8px",textAlign:"right",color:"#10b981"},children:m.completed_claims}),f.jsx("td",{style:{padding:"8px",textAlign:"right",color:"#f59e0b"},children:m.backlog}),f.jsx("td",{style:{padding:"8px",textAlign:"right",color:"#3b82f6"},children:m.avg_velocity.toFixed(1)}),f.jsxs("td",{style:{padding:"8px",textAlign:"right",color:m.burnout_ratio>1?"#ef4444":m.burnout_ratio>.85?"#f97316":m.burnout_ratio>.6?"#eab308":"#10b981"},children:[(m.burnout_ratio*100).toFixed(1),"%"]}),f.jsx("td",{style:{padding:"8px",textAlign:"right",color:"#8b5cf6"},children:m.firms_active})]},m.month))})]})})]})]})]})})}function LL(){const[t]=Hn(),[e,n]=q.useState(null),[r,i]=q.useState(!0),[s,o]=q.useState(null),a=t.get("pretty"),c=a==="true"||a==="1";q.useEffect(()=>{async function p(){i(!0),o(null);try{const m=await nS();n(m)}catch(m){o(m.message||"Failed to generate seasonality profile report")}finally{i(!1)}}p()},[]);const h=JSON.stringify(r?{status:"loading",message:"Generating seasonality profile report..."}:s?{status:"error",error:s,timestamp:new Date().toISOString()}:{status:"success",data:(e==null?void 0:e.aggregated)||{},raw_data:(e==null?void 0:e.raw)||[],timestamp:new Date().toISOString()},null,c?2:void 0);return f.jsx("div",{children:f.jsx("pre",{style:{fontFamily:"monospace",whiteSpace:"pre-wrap",margin:0,fontSize:"14px"},children:h})})}function IL(){const[t]=Hn(),[e,n]=q.useState(null),[r,i]=q.useState(!0),[s,o]=q.useState(null),a=t.get("pretty"),c=a==="true"||a==="1";q.useEffect(()=>{async function p(){i(!0),o(null);try{const m=await rS();n(m)}catch(m){o(m.message||"Failed to generate seasonal performance benchmark report")}finally{i(!1)}}p()},[]);const h=JSON.stringify(r?{status:"loading",message:"Generating seasonal performance benchmark report..."}:s?{status:"error",error:s,timestamp:new Date().toISOString()}:{status:"success",data:e||null,timestamp:new Date().toISOString()},null,c?2:void 0);return f.jsx("div",{children:f.jsx("pre",{style:{fontFamily:"monospace",whiteSpace:"pre-wrap",margin:0,fontSize:"14px"},children:h})})}function zL(){const[t]=Hn(),[e,n]=q.useState(null),[r,i]=q.useState(!0),[s,o]=q.useState(null),a=t.get("pretty"),c=a==="true"||a==="1";q.useEffect(()=>{async function p(){i(!0),o(null);try{const m=await iS();n(m)}catch(m){o(m.message||"Failed to generate volume dependency risk report")}finally{i(!1)}}p()},[]);const h=JSON.stringify(r?{status:"loading",message:"Generating volume dependency risk report..."}:s?{status:"error",error:s,timestamp:new Date().toISOString()}:e,null,c?2:void 0);return f.jsx("div",{children:f.jsx("pre",{style:{fontFamily:"monospace",whiteSpace:"pre-wrap",margin:0,fontSize:"14px"},children:h})})}function NL(){const[t]=Hn(),[e,n]=q.useState(null),[r,i]=q.useState(!0),[s,o]=q.useState(null),a=t.get("pretty"),c=a==="true"||a==="1";q.useEffect(()=>{async function p(){i(!0),o(null);try{const m=await sS();n(m)}catch(m){o(m.message||"Failed to generate value efficiency report")}finally{i(!1)}}p()},[]);const h=JSON.stringify(r?{status:"loading",message:"Generating value efficiency report..."}:s?{status:"error",error:s,timestamp:new Date().toISOString()}:e,null,c?2:void 0);return f.jsx("div",{children:f.jsx("pre",{style:{fontFamily:"monospace",whiteSpace:"pre-wrap",margin:0,fontSize:"14px"},children:h})})}function FL({size:t="md",message:e="Loading...",fullScreen:n=!1}){const r={sm:"w-6 h-6 border-2",md:"w-12 h-12 border-4",lg:"w-16 h-16 border-4"},i=f.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3",children:[f.jsx("div",{className:`${r[t]} border-blue-500 border-t-transparent rounded-full animate-spin`,role:"status","aria-live":"polite","aria-label":e}),e&&f.jsx("p",{className:"text-brand-light-300 text-sm font-medium","aria-live":"polite",children:e})]});return n?f.jsx("div",{className:"min-h-screen bg-gradient-dark flex items-center justify-center",children:i}):i}function BL({variant:t="primary",size:e="md",children:n,onClick:r,disabled:i=!1,type:s="button",className:o="",ariaLabel:a}){const c="inline-flex items-center justify-center font-medium rounded transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-brand-dark-900 disabled:opacity-50 disabled:cursor-not-allowed",u={primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500 shadow-sm hover:shadow-md",secondary:"bg-brand-dark-700 hover:bg-brand-dark-600 text-brand-light-100 border border-brand-dark-600 focus:ring-brand-dark-600",danger:"bg-status-canceled hover:bg-red-600 text-white focus:ring-red-500 shadow-sm hover:shadow-md",success:"bg-status-completed hover:bg-green-600 text-white focus:ring-green-500 shadow-sm hover:shadow-md",ghost:"bg-transparent hover:bg-brand-dark-700 text-brand-light-100 border border-transparent hover:border-brand-dark-600 focus:ring-brand-dark-600"},h={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};return f.jsx("button",{type:s,onClick:r,disabled:i,className:`${c} ${u[t]} ${h[e]} ${o}`,"aria-label":a,children:n})}function en({children:t,requiredRole:e}){const[n,r]=q.useState(!0),[i,s]=q.useState(!1),[o,a]=q.useState(null),c=to();q.useEffect(()=>{u()},[]);const u=async()=>{try{const h=nn();h!=null&&h.isInitialized||await qd(Ne);const p=nn(),m=p==null?void 0:p.getCurrentUser();if(!m){s(!1),r(!1);return}if(a(m.role),e&&m.role!==e){s(!1),r(!1);return}s(!0),r(!1)}catch(h){console.error("Auth check failed:",h),s(!1),r(!1)}};return n?f.jsx(FL,{fullScreen:!0,message:"Checking authorization..."}):!i&&!o?f.jsx(ej,{to:"/login",state:{from:c},replace:!0}):!i&&e&&o!==e?f.jsx("div",{className:"min-h-screen bg-gradient-dark flex items-center justify-center p-4",children:f.jsxs("div",{className:"bg-brand-dark-800 border-2 border-red-500 rounded-lg p-8 max-w-md text-center shadow-card-hover",children:[f.jsx("div",{className:"mb-4",children:f.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),f.jsx("h2",{className:"text-2xl font-bold text-brand-light-100 mb-4",children:"Access Denied"}),f.jsxs("p",{className:"text-brand-light-300 mb-6",children:["You don't have permission to access this page. This area is restricted to"," ",f.jsx("span",{className:"font-semibold text-brand-light-100",children:e})," users."]}),f.jsxs("p",{className:"text-sm text-brand-light-400 mb-6",children:["Your current role: ",f.jsx("span",{className:"font-semibold",children:o})]}),f.jsx(BL,{variant:"primary",onClick:()=>window.history.back(),children:"Go Back"})]})}):f.jsx(f.Fragment,{children:t})}Cj();const UL=cj([{path:"/",element:f.jsx(KA,{})},{path:"/login",element:f.jsx(JA,{})},{path:"/admin/claims",element:f.jsx(en,{requiredRole:"admin",children:f.jsx(w4,{})})},{path:"/admin/claims/new",element:f.jsx(en,{requiredRole:"admin",children:f.jsx(f4,{})})},{path:"/admin/vendors",element:f.jsx(en,{requiredRole:"admin",children:f.jsx(S4,{})})},{path:"/admin/payouts",element:f.jsx(en,{requiredRole:"admin",children:f.jsx(N4,{})})},{path:"/admin/intelligence",element:f.jsx(en,{requiredRole:"admin",children:f.jsx(yL,{})})},{path:"/my-claims",element:f.jsx(en,{children:f.jsx(_L,{})})},{path:"/claim/:id",element:f.jsx(en,{children:f.jsx(TL,{})})},{path:"/api/firm-reliability",element:f.jsx(en,{requiredRole:"admin",children:f.jsx(jL,{})})},{path:"/api/payout-variance",element:f.jsx(en,{requiredRole:"admin",children:f.jsx(PL,{})})},{path:"/api/capacity-stress",element:f.jsx(en,{requiredRole:"admin",children:f.jsx(AL,{})})},{path:"/api/revenue-risk",element:f.jsx(en,{requiredRole:"admin",children:f.jsx(OL,{})})},{path:"/api/survival-runway",element:f.jsx(en,{requiredRole:"admin",children:f.jsx(DL,{})})},{path:"/api/monthly-performance",element:f.jsx(en,{requiredRole:"admin",children:f.jsx(RL,{})})},{path:"/api/monthly-history",element:f.jsx(en,{requiredRole:"admin",children:f.jsx(ML,{})})},{path:"/api/seasonality-profile",element:f.jsx(en,{requiredRole:"admin",children:f.jsx(LL,{})})},{path:"/api/seasonal-performance-benchmark",element:f.jsx(en,{requiredRole:"admin",children:f.jsx(IL,{})})},{path:"/api/volume-dependency-risk",element:f.jsx(en,{requiredRole:"admin",children:f.jsx(zL,{})})},{path:"/api/value-efficiency",element:f.jsx(en,{requiredRole:"admin",children:f.jsx(NL,{})})}],{basename:"/CipherDispatch"});Pf.createRoot(document.getElementById("root")).render(f.jsx(xl.StrictMode,{children:f.jsx(_j,{router:UL})}));
