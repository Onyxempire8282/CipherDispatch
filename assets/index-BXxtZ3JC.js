var Ux=Object.defineProperty;var Wx=(t,e,n)=>e in t?Ux(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ai=(t,e,n)=>Wx(t,typeof e!="symbol"?e+"":e,n);function Hh(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Js=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Sy(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var ky={exports:{}},$u={},Ey={exports:{}},ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ha=Symbol.for("react.element"),$x=Symbol.for("react.portal"),Hx=Symbol.for("react.fragment"),Vx=Symbol.for("react.strict_mode"),Zx=Symbol.for("react.profiler"),qx=Symbol.for("react.provider"),Yx=Symbol.for("react.context"),Gx=Symbol.for("react.forward_ref"),Kx=Symbol.for("react.suspense"),Jx=Symbol.for("react.memo"),Qx=Symbol.for("react.lazy"),Xp=Symbol.iterator;function Xx(t){return t===null||typeof t!="object"?null:(t=Xp&&t[Xp]||t["@@iterator"],typeof t=="function"?t:null)}var Cy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ty=Object.assign,Py={};function gs(t,e,n){this.props=t,this.context=e,this.refs=Py,this.updater=n||Cy}gs.prototype.isReactComponent={};gs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};gs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function jy(){}jy.prototype=gs.prototype;function Zh(t,e,n){this.props=t,this.context=e,this.refs=Py,this.updater=n||Cy}var qh=Zh.prototype=new jy;qh.constructor=Zh;Ty(qh,gs.prototype);qh.isPureReactComponent=!0;var em=Array.isArray,Ay=Object.prototype.hasOwnProperty,Yh={current:null},Oy={key:!0,ref:!0,__self:!0,__source:!0};function Dy(t,e,n){var r,i={},o=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)Ay.call(e,r)&&!Oy.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Ha,type:t,key:o,ref:a,props:i,_owner:Yh.current}}function eb(t,e){return{$$typeof:Ha,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Gh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ha}function tb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var tm=/\/+/g;function Uc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?tb(""+t.key):e.toString(36)}function Wl(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Ha:case $x:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+Uc(a,0):r,em(i)?(n="",t!=null&&(n=t.replace(tm,"$&/")+"/"),Wl(i,e,n,"",function(h){return h})):i!=null&&(Gh(i)&&(i=eb(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(tm,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",em(t))for(var l=0;l<t.length;l++){o=t[l];var c=r+Uc(o,l);a+=Wl(o,e,n,c,i)}else if(c=Xx(t),typeof c=="function")for(t=c.call(t),l=0;!(o=t.next()).done;)o=o.value,c=r+Uc(o,l++),a+=Wl(o,e,n,c,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function hl(t,e,n){if(t==null)return t;var r=[],i=0;return Wl(t,r,"","",function(o){return e.call(n,o,i++)}),r}function nb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Cn={current:null},$l={transition:null},rb={ReactCurrentDispatcher:Cn,ReactCurrentBatchConfig:$l,ReactCurrentOwner:Yh};function Ry(){throw Error("act(...) is not supported in production builds of React.")}ot.Children={map:hl,forEach:function(t,e,n){hl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return hl(t,function(){e++}),e},toArray:function(t){return hl(t,function(e){return e})||[]},only:function(t){if(!Gh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ot.Component=gs;ot.Fragment=Hx;ot.Profiler=Zx;ot.PureComponent=Zh;ot.StrictMode=Vx;ot.Suspense=Kx;ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rb;ot.act=Ry;ot.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ty({},t.props),i=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=Yh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Ay.call(e,c)&&!Oy.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:Ha,type:t.type,key:i,ref:o,props:r,_owner:a}};ot.createContext=function(t){return t={$$typeof:Yx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qx,_context:t},t.Consumer=t};ot.createElement=Dy;ot.createFactory=function(t){var e=Dy.bind(null,t);return e.type=t,e};ot.createRef=function(){return{current:null}};ot.forwardRef=function(t){return{$$typeof:Gx,render:t}};ot.isValidElement=Gh;ot.lazy=function(t){return{$$typeof:Qx,_payload:{_status:-1,_result:t},_init:nb}};ot.memo=function(t,e){return{$$typeof:Jx,type:t,compare:e===void 0?null:e}};ot.startTransition=function(t){var e=$l.transition;$l.transition={};try{t()}finally{$l.transition=e}};ot.unstable_act=Ry;ot.useCallback=function(t,e){return Cn.current.useCallback(t,e)};ot.useContext=function(t){return Cn.current.useContext(t)};ot.useDebugValue=function(){};ot.useDeferredValue=function(t){return Cn.current.useDeferredValue(t)};ot.useEffect=function(t,e){return Cn.current.useEffect(t,e)};ot.useId=function(){return Cn.current.useId()};ot.useImperativeHandle=function(t,e,n){return Cn.current.useImperativeHandle(t,e,n)};ot.useInsertionEffect=function(t,e){return Cn.current.useInsertionEffect(t,e)};ot.useLayoutEffect=function(t,e){return Cn.current.useLayoutEffect(t,e)};ot.useMemo=function(t,e){return Cn.current.useMemo(t,e)};ot.useReducer=function(t,e,n){return Cn.current.useReducer(t,e,n)};ot.useRef=function(t){return Cn.current.useRef(t)};ot.useState=function(t){return Cn.current.useState(t)};ot.useSyncExternalStore=function(t,e,n){return Cn.current.useSyncExternalStore(t,e,n)};ot.useTransition=function(){return Cn.current.useTransition()};ot.version="18.3.1";Ey.exports=ot;var J=Ey.exports;const _a=Vh(J),ib=Hh({__proto__:null,default:_a},[J]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ob=J,sb=Symbol.for("react.element"),ab=Symbol.for("react.fragment"),lb=Object.prototype.hasOwnProperty,ub=ob.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cb={key:!0,ref:!0,__self:!0,__source:!0};function Ly(t,e,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)lb.call(e,r)&&!cb.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:sb,type:t,key:o,ref:a,props:i,_owner:ub.current}}$u.Fragment=ab;$u.jsx=Ly;$u.jsxs=Ly;ky.exports=$u;var d=ky.exports,Dd={},Ny={exports:{}},Gn={},Iy={exports:{}},My={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,D){var z=B.length;B.push(D);e:for(;0<z;){var $=z-1>>>1,Z=B[$];if(0<i(Z,D))B[$]=D,B[z]=Z,z=$;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var D=B[0],z=B.pop();if(z!==D){B[0]=z;e:for(var $=0,Z=B.length,re=Z>>>1;$<re;){var ee=2*($+1)-1,Q=B[ee],fe=ee+1,Ee=B[fe];if(0>i(Q,z))fe<Z&&0>i(Ee,Q)?(B[$]=Ee,B[fe]=z,$=fe):(B[$]=Q,B[ee]=z,$=ee);else if(fe<Z&&0>i(Ee,z))B[$]=Ee,B[fe]=z,$=fe;else break e}}return D}function i(B,D){var z=B.sortIndex-D.sortIndex;return z!==0?z:B.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],h=[],m=1,f=null,g=3,y=!1,v=!1,_=!1,S=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(B){for(var D=n(h);D!==null;){if(D.callback===null)r(h);else if(D.startTime<=B)r(h),D.sortIndex=D.expirationTime,e(c,D);else break;D=n(h)}}function T(B){if(_=!1,k(B),!v)if(n(c)!==null)v=!0,H(I);else{var D=n(h);D!==null&&M(T,D.startTime-B)}}function I(B,D){v=!1,_&&(_=!1,w(P),P=-1),y=!0;var z=g;try{for(k(D),f=n(c);f!==null&&(!(f.expirationTime>D)||B&&!K());){var $=f.callback;if(typeof $=="function"){f.callback=null,g=f.priorityLevel;var Z=$(f.expirationTime<=D);D=t.unstable_now(),typeof Z=="function"?f.callback=Z:f===n(c)&&r(c),k(D)}else r(c);f=n(c)}if(f!==null)var re=!0;else{var ee=n(h);ee!==null&&M(T,ee.startTime-D),re=!1}return re}finally{f=null,g=z,y=!1}}var R=!1,j=null,P=-1,A=5,F=-1;function K(){return!(t.unstable_now()-F<A)}function N(){if(j!==null){var B=t.unstable_now();F=B;var D=!0;try{D=j(!0,B)}finally{D?W():(R=!1,j=null)}}else R=!1}var W;if(typeof b=="function")W=function(){b(N)};else if(typeof MessageChannel<"u"){var E=new MessageChannel,Y=E.port2;E.port1.onmessage=N,W=function(){Y.postMessage(null)}}else W=function(){S(N,0)};function H(B){j=B,R||(R=!0,W())}function M(B,D){P=S(function(){B(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){v||y||(v=!0,H(I))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var D=3;break;default:D=g}var z=g;g=D;try{return B()}finally{g=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,D){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var z=g;g=B;try{return D()}finally{g=z}},t.unstable_scheduleCallback=function(B,D,z){var $=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?$+z:$):z=$,B){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=z+Z,B={id:m++,callback:D,priorityLevel:B,startTime:z,expirationTime:Z,sortIndex:-1},z>$?(B.sortIndex=z,e(h,B),n(c)===null&&B===n(h)&&(_?(w(P),P=-1):_=!0,M(T,z-$))):(B.sortIndex=Z,e(c,B),v||y||(v=!0,H(I))),B},t.unstable_shouldYield=K,t.unstable_wrapCallback=function(B){var D=g;return function(){var z=g;g=D;try{return B.apply(this,arguments)}finally{g=z}}}})(My);Iy.exports=My;var db=Iy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hb=J,Yn=db;function xe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zy=new Set,va={};function go(t,e){ss(t,e),ss(t+"Capture",e)}function ss(t,e){for(va[t]=e,t=0;t<e.length;t++)zy.add(e[t])}var Gr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rd=Object.prototype.hasOwnProperty,fb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nm={},rm={};function pb(t){return Rd.call(rm,t)?!0:Rd.call(nm,t)?!1:fb.test(t)?rm[t]=!0:(nm[t]=!0,!1)}function mb(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function gb(t,e,n,r){if(e===null||typeof e>"u"||mb(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Tn(t,e,n,r,i,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var cn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){cn[t]=new Tn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];cn[e]=new Tn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){cn[t]=new Tn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){cn[t]=new Tn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){cn[t]=new Tn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){cn[t]=new Tn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){cn[t]=new Tn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){cn[t]=new Tn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){cn[t]=new Tn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Kh=/[\-:]([a-z])/g;function Jh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Kh,Jh);cn[e]=new Tn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Kh,Jh);cn[e]=new Tn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Kh,Jh);cn[e]=new Tn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){cn[t]=new Tn(t,1,!1,t.toLowerCase(),null,!1,!1)});cn.xlinkHref=new Tn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){cn[t]=new Tn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Qh(t,e,n,r){var i=cn.hasOwnProperty(e)?cn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gb(e,n,i,r)&&(n=null),r||i===null?pb(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ei=hb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fl=Symbol.for("react.element"),Bo=Symbol.for("react.portal"),Fo=Symbol.for("react.fragment"),Xh=Symbol.for("react.strict_mode"),Ld=Symbol.for("react.profiler"),By=Symbol.for("react.provider"),Fy=Symbol.for("react.context"),ef=Symbol.for("react.forward_ref"),Nd=Symbol.for("react.suspense"),Id=Symbol.for("react.suspense_list"),tf=Symbol.for("react.memo"),hi=Symbol.for("react.lazy"),Uy=Symbol.for("react.offscreen"),im=Symbol.iterator;function Is(t){return t===null||typeof t!="object"?null:(t=im&&t[im]||t["@@iterator"],typeof t=="function"?t:null)}var Nt=Object.assign,Wc;function Qs(t){if(Wc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Wc=e&&e[1]||""}return`
`+Wc+t}var $c=!1;function Hc(t,e){if(!t||$c)return"";$c=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,l=o.length-1;1<=a&&0<=l&&i[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==o[l]){var c=`
`+i[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{$c=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Qs(t):""}function yb(t){switch(t.tag){case 5:return Qs(t.type);case 16:return Qs("Lazy");case 13:return Qs("Suspense");case 19:return Qs("SuspenseList");case 0:case 2:case 15:return t=Hc(t.type,!1),t;case 11:return t=Hc(t.type.render,!1),t;case 1:return t=Hc(t.type,!0),t;default:return""}}function Md(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Fo:return"Fragment";case Bo:return"Portal";case Ld:return"Profiler";case Xh:return"StrictMode";case Nd:return"Suspense";case Id:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Fy:return(t.displayName||"Context")+".Consumer";case By:return(t._context.displayName||"Context")+".Provider";case ef:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case tf:return e=t.displayName||null,e!==null?e:Md(t.type)||"Memo";case hi:e=t._payload,t=t._init;try{return Md(t(e))}catch{}}return null}function _b(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Md(e);case 8:return e===Xh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Pi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Wy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vb(t){var e=Wy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function pl(t){t._valueTracker||(t._valueTracker=vb(t))}function $y(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Wy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function iu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function zd(t,e){var n=e.checked;return Nt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function om(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Pi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Hy(t,e){e=e.checked,e!=null&&Qh(t,"checked",e,!1)}function Bd(t,e){Hy(t,e);var n=Pi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Fd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Fd(t,e.type,Pi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function sm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Fd(t,e,n){(e!=="number"||iu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xs=Array.isArray;function Xo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Pi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ud(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(xe(91));return Nt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function am(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(xe(92));if(Xs(n)){if(1<n.length)throw Error(xe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Pi(n)}}function Vy(t,e){var n=Pi(e.value),r=Pi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function lm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Zy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Zy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ml,qy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ml=ml||document.createElement("div"),ml.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ml.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var oa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wb=["Webkit","ms","Moz","O"];Object.keys(oa).forEach(function(t){wb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),oa[e]=oa[t]})});function Yy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||oa.hasOwnProperty(t)&&oa[t]?(""+e).trim():e+"px"}function Gy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Yy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var xb=Nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $d(t,e){if(e){if(xb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(xe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(xe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(xe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(xe(62))}}function Hd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vd=null;function nf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zd=null,es=null,ts=null;function um(t){if(t=qa(t)){if(typeof Zd!="function")throw Error(xe(280));var e=t.stateNode;e&&(e=Yu(e),Zd(t.stateNode,t.type,e))}}function Ky(t){es?ts?ts.push(t):ts=[t]:es=t}function Jy(){if(es){var t=es,e=ts;if(ts=es=null,um(t),e)for(t=0;t<e.length;t++)um(e[t])}}function Qy(t,e){return t(e)}function Xy(){}var Vc=!1;function e_(t,e,n){if(Vc)return t(e,n);Vc=!0;try{return Qy(t,e,n)}finally{Vc=!1,(es!==null||ts!==null)&&(Xy(),Jy())}}function xa(t,e){var n=t.stateNode;if(n===null)return null;var r=Yu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(xe(231,e,typeof n));return n}var qd=!1;if(Gr)try{var Ms={};Object.defineProperty(Ms,"passive",{get:function(){qd=!0}}),window.addEventListener("test",Ms,Ms),window.removeEventListener("test",Ms,Ms)}catch{qd=!1}function bb(t,e,n,r,i,o,a,l,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(m){this.onError(m)}}var sa=!1,ou=null,su=!1,Yd=null,Sb={onError:function(t){sa=!0,ou=t}};function kb(t,e,n,r,i,o,a,l,c){sa=!1,ou=null,bb.apply(Sb,arguments)}function Eb(t,e,n,r,i,o,a,l,c){if(kb.apply(this,arguments),sa){if(sa){var h=ou;sa=!1,ou=null}else throw Error(xe(198));su||(su=!0,Yd=h)}}function yo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function t_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function cm(t){if(yo(t)!==t)throw Error(xe(188))}function Cb(t){var e=t.alternate;if(!e){if(e=yo(t),e===null)throw Error(xe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return cm(i),t;if(o===r)return cm(i),e;o=o.sibling}throw Error(xe(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(xe(189))}}if(n.alternate!==r)throw Error(xe(190))}if(n.tag!==3)throw Error(xe(188));return n.stateNode.current===n?t:e}function n_(t){return t=Cb(t),t!==null?r_(t):null}function r_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=r_(t);if(e!==null)return e;t=t.sibling}return null}var i_=Yn.unstable_scheduleCallback,dm=Yn.unstable_cancelCallback,Tb=Yn.unstable_shouldYield,Pb=Yn.unstable_requestPaint,Wt=Yn.unstable_now,jb=Yn.unstable_getCurrentPriorityLevel,rf=Yn.unstable_ImmediatePriority,o_=Yn.unstable_UserBlockingPriority,au=Yn.unstable_NormalPriority,Ab=Yn.unstable_LowPriority,s_=Yn.unstable_IdlePriority,Hu=null,Dr=null;function Ob(t){if(Dr&&typeof Dr.onCommitFiberRoot=="function")try{Dr.onCommitFiberRoot(Hu,t,void 0,(t.current.flags&128)===128)}catch{}}var vr=Math.clz32?Math.clz32:Lb,Db=Math.log,Rb=Math.LN2;function Lb(t){return t>>>=0,t===0?32:31-(Db(t)/Rb|0)|0}var gl=64,yl=4194304;function ea(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function lu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=ea(l):(o&=a,o!==0&&(r=ea(o)))}else a=n&~i,a!==0?r=ea(a):o!==0&&(r=ea(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vr(e),i=1<<n,r|=t[n],e&=~i;return r}function Nb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ib(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-vr(o),l=1<<a,c=i[a];c===-1?(!(l&n)||l&r)&&(i[a]=Nb(l,e)):c<=e&&(t.expiredLanes|=l),o&=~l}}function Gd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function a_(){var t=gl;return gl<<=1,!(gl&4194240)&&(gl=64),t}function Zc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Va(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vr(e),t[e]=n}function Mb(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-vr(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function of(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var vt=0;function l_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var u_,sf,c_,d_,h_,Kd=!1,_l=[],wi=null,xi=null,bi=null,ba=new Map,Sa=new Map,pi=[],zb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hm(t,e){switch(t){case"focusin":case"focusout":wi=null;break;case"dragenter":case"dragleave":xi=null;break;case"mouseover":case"mouseout":bi=null;break;case"pointerover":case"pointerout":ba.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sa.delete(e.pointerId)}}function zs(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=qa(e),e!==null&&sf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Bb(t,e,n,r,i){switch(e){case"focusin":return wi=zs(wi,t,e,n,r,i),!0;case"dragenter":return xi=zs(xi,t,e,n,r,i),!0;case"mouseover":return bi=zs(bi,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return ba.set(o,zs(ba.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Sa.set(o,zs(Sa.get(o)||null,t,e,n,r,i)),!0}return!1}function f_(t){var e=to(t.target);if(e!==null){var n=yo(e);if(n!==null){if(e=n.tag,e===13){if(e=t_(n),e!==null){t.blockedOn=e,h_(t.priority,function(){c_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Jd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Vd=r,n.target.dispatchEvent(r),Vd=null}else return e=qa(n),e!==null&&sf(e),t.blockedOn=n,!1;e.shift()}return!0}function fm(t,e,n){Hl(t)&&n.delete(e)}function Fb(){Kd=!1,wi!==null&&Hl(wi)&&(wi=null),xi!==null&&Hl(xi)&&(xi=null),bi!==null&&Hl(bi)&&(bi=null),ba.forEach(fm),Sa.forEach(fm)}function Bs(t,e){t.blockedOn===e&&(t.blockedOn=null,Kd||(Kd=!0,Yn.unstable_scheduleCallback(Yn.unstable_NormalPriority,Fb)))}function ka(t){function e(i){return Bs(i,t)}if(0<_l.length){Bs(_l[0],t);for(var n=1;n<_l.length;n++){var r=_l[n];r.blockedOn===t&&(r.blockedOn=null)}}for(wi!==null&&Bs(wi,t),xi!==null&&Bs(xi,t),bi!==null&&Bs(bi,t),ba.forEach(e),Sa.forEach(e),n=0;n<pi.length;n++)r=pi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<pi.length&&(n=pi[0],n.blockedOn===null);)f_(n),n.blockedOn===null&&pi.shift()}var ns=ei.ReactCurrentBatchConfig,uu=!0;function Ub(t,e,n,r){var i=vt,o=ns.transition;ns.transition=null;try{vt=1,af(t,e,n,r)}finally{vt=i,ns.transition=o}}function Wb(t,e,n,r){var i=vt,o=ns.transition;ns.transition=null;try{vt=4,af(t,e,n,r)}finally{vt=i,ns.transition=o}}function af(t,e,n,r){if(uu){var i=Jd(t,e,n,r);if(i===null)nd(t,e,r,cu,n),hm(t,r);else if(Bb(i,t,e,n,r))r.stopPropagation();else if(hm(t,r),e&4&&-1<zb.indexOf(t)){for(;i!==null;){var o=qa(i);if(o!==null&&u_(o),o=Jd(t,e,n,r),o===null&&nd(t,e,r,cu,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else nd(t,e,r,null,n)}}var cu=null;function Jd(t,e,n,r){if(cu=null,t=nf(r),t=to(t),t!==null)if(e=yo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=t_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return cu=t,null}function p_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jb()){case rf:return 1;case o_:return 4;case au:case Ab:return 16;case s_:return 536870912;default:return 16}default:return 16}}var yi=null,lf=null,Vl=null;function m_(){if(Vl)return Vl;var t,e=lf,n=e.length,r,i="value"in yi?yi.value:yi.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[o-r];r++);return Vl=i.slice(t,1<r?1-r:void 0)}function Zl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function vl(){return!0}function pm(){return!1}function Kn(t){function e(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?vl:pm,this.isPropagationStopped=pm,this}return Nt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=vl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=vl)},persist:function(){},isPersistent:vl}),e}var ys={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uf=Kn(ys),Za=Nt({},ys,{view:0,detail:0}),$b=Kn(Za),qc,Yc,Fs,Vu=Nt({},Za,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fs&&(Fs&&t.type==="mousemove"?(qc=t.screenX-Fs.screenX,Yc=t.screenY-Fs.screenY):Yc=qc=0,Fs=t),qc)},movementY:function(t){return"movementY"in t?t.movementY:Yc}}),mm=Kn(Vu),Hb=Nt({},Vu,{dataTransfer:0}),Vb=Kn(Hb),Zb=Nt({},Za,{relatedTarget:0}),Gc=Kn(Zb),qb=Nt({},ys,{animationName:0,elapsedTime:0,pseudoElement:0}),Yb=Kn(qb),Gb=Nt({},ys,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Kb=Kn(Gb),Jb=Nt({},ys,{data:0}),gm=Kn(Jb),Qb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},e1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=e1[t])?!!e[t]:!1}function cf(){return t1}var n1=Nt({},Za,{key:function(t){if(t.key){var e=Qb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Zl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Xb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cf,charCode:function(t){return t.type==="keypress"?Zl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),r1=Kn(n1),i1=Nt({},Vu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ym=Kn(i1),o1=Nt({},Za,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cf}),s1=Kn(o1),a1=Nt({},ys,{propertyName:0,elapsedTime:0,pseudoElement:0}),l1=Kn(a1),u1=Nt({},Vu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),c1=Kn(u1),d1=[9,13,27,32],df=Gr&&"CompositionEvent"in window,aa=null;Gr&&"documentMode"in document&&(aa=document.documentMode);var h1=Gr&&"TextEvent"in window&&!aa,g_=Gr&&(!df||aa&&8<aa&&11>=aa),_m=" ",vm=!1;function y_(t,e){switch(t){case"keyup":return d1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function __(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Uo=!1;function f1(t,e){switch(t){case"compositionend":return __(e);case"keypress":return e.which!==32?null:(vm=!0,_m);case"textInput":return t=e.data,t===_m&&vm?null:t;default:return null}}function p1(t,e){if(Uo)return t==="compositionend"||!df&&y_(t,e)?(t=m_(),Vl=lf=yi=null,Uo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return g_&&e.locale!=="ko"?null:e.data;default:return null}}var m1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!m1[t.type]:e==="textarea"}function v_(t,e,n,r){Ky(r),e=du(e,"onChange"),0<e.length&&(n=new uf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var la=null,Ea=null;function g1(t){A_(t,0)}function Zu(t){var e=Ho(t);if($y(e))return t}function y1(t,e){if(t==="change")return e}var w_=!1;if(Gr){var Kc;if(Gr){var Jc="oninput"in document;if(!Jc){var xm=document.createElement("div");xm.setAttribute("oninput","return;"),Jc=typeof xm.oninput=="function"}Kc=Jc}else Kc=!1;w_=Kc&&(!document.documentMode||9<document.documentMode)}function bm(){la&&(la.detachEvent("onpropertychange",x_),Ea=la=null)}function x_(t){if(t.propertyName==="value"&&Zu(Ea)){var e=[];v_(e,Ea,t,nf(t)),e_(g1,e)}}function _1(t,e,n){t==="focusin"?(bm(),la=e,Ea=n,la.attachEvent("onpropertychange",x_)):t==="focusout"&&bm()}function v1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zu(Ea)}function w1(t,e){if(t==="click")return Zu(e)}function x1(t,e){if(t==="input"||t==="change")return Zu(e)}function b1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xr=typeof Object.is=="function"?Object.is:b1;function Ca(t,e){if(xr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Rd.call(e,i)||!xr(t[i],e[i]))return!1}return!0}function Sm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function km(t,e){var n=Sm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Sm(n)}}function b_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?b_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function S_(){for(var t=window,e=iu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=iu(t.document)}return e}function hf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function S1(t){var e=S_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&b_(n.ownerDocument.documentElement,n)){if(r!==null&&hf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=km(n,o);var a=km(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var k1=Gr&&"documentMode"in document&&11>=document.documentMode,Wo=null,Qd=null,ua=null,Xd=!1;function Em(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xd||Wo==null||Wo!==iu(r)||(r=Wo,"selectionStart"in r&&hf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ua&&Ca(ua,r)||(ua=r,r=du(Qd,"onSelect"),0<r.length&&(e=new uf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Wo)))}function wl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $o={animationend:wl("Animation","AnimationEnd"),animationiteration:wl("Animation","AnimationIteration"),animationstart:wl("Animation","AnimationStart"),transitionend:wl("Transition","TransitionEnd")},Qc={},k_={};Gr&&(k_=document.createElement("div").style,"AnimationEvent"in window||(delete $o.animationend.animation,delete $o.animationiteration.animation,delete $o.animationstart.animation),"TransitionEvent"in window||delete $o.transitionend.transition);function qu(t){if(Qc[t])return Qc[t];if(!$o[t])return t;var e=$o[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in k_)return Qc[t]=e[n];return t}var E_=qu("animationend"),C_=qu("animationiteration"),T_=qu("animationstart"),P_=qu("transitionend"),j_=new Map,Cm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ai(t,e){j_.set(t,e),go(e,[t])}for(var Xc=0;Xc<Cm.length;Xc++){var ed=Cm[Xc],E1=ed.toLowerCase(),C1=ed[0].toUpperCase()+ed.slice(1);Ai(E1,"on"+C1)}Ai(E_,"onAnimationEnd");Ai(C_,"onAnimationIteration");Ai(T_,"onAnimationStart");Ai("dblclick","onDoubleClick");Ai("focusin","onFocus");Ai("focusout","onBlur");Ai(P_,"onTransitionEnd");ss("onMouseEnter",["mouseout","mouseover"]);ss("onMouseLeave",["mouseout","mouseover"]);ss("onPointerEnter",["pointerout","pointerover"]);ss("onPointerLeave",["pointerout","pointerover"]);go("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));go("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));go("onBeforeInput",["compositionend","keypress","textInput","paste"]);go("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));go("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));go("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T1=new Set("cancel close invalid load scroll toggle".split(" ").concat(ta));function Tm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Eb(r,e,void 0,t),t.currentTarget=null}function A_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,h=l.currentTarget;if(l=l.listener,c!==o&&i.isPropagationStopped())break e;Tm(i,l,h),o=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,h=l.currentTarget,l=l.listener,c!==o&&i.isPropagationStopped())break e;Tm(i,l,h),o=c}}}if(su)throw t=Yd,su=!1,Yd=null,t}function Ct(t,e){var n=e[ih];n===void 0&&(n=e[ih]=new Set);var r=t+"__bubble";n.has(r)||(O_(e,t,2,!1),n.add(r))}function td(t,e,n){var r=0;e&&(r|=4),O_(n,t,r,e)}var xl="_reactListening"+Math.random().toString(36).slice(2);function Ta(t){if(!t[xl]){t[xl]=!0,zy.forEach(function(n){n!=="selectionchange"&&(T1.has(n)||td(n,!1,t),td(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[xl]||(e[xl]=!0,td("selectionchange",!1,e))}}function O_(t,e,n,r){switch(p_(e)){case 1:var i=Ub;break;case 4:i=Wb;break;default:i=af}n=i.bind(null,e,n,t),i=void 0,!qd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function nd(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;l!==null;){if(a=to(l),a===null)return;if(c=a.tag,c===5||c===6){r=o=a;continue e}l=l.parentNode}}r=r.return}e_(function(){var h=o,m=nf(n),f=[];e:{var g=j_.get(t);if(g!==void 0){var y=uf,v=t;switch(t){case"keypress":if(Zl(n)===0)break e;case"keydown":case"keyup":y=r1;break;case"focusin":v="focus",y=Gc;break;case"focusout":v="blur",y=Gc;break;case"beforeblur":case"afterblur":y=Gc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=mm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Vb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=s1;break;case E_:case C_:case T_:y=Yb;break;case P_:y=l1;break;case"scroll":y=$b;break;case"wheel":y=c1;break;case"copy":case"cut":case"paste":y=Kb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=ym}var _=(e&4)!==0,S=!_&&t==="scroll",w=_?g!==null?g+"Capture":null:g;_=[];for(var b=h,k;b!==null;){k=b;var T=k.stateNode;if(k.tag===5&&T!==null&&(k=T,w!==null&&(T=xa(b,w),T!=null&&_.push(Pa(b,T,k)))),S)break;b=b.return}0<_.length&&(g=new y(g,v,null,n,m),f.push({event:g,listeners:_}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",g&&n!==Vd&&(v=n.relatedTarget||n.fromElement)&&(to(v)||v[Kr]))break e;if((y||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,y?(v=n.relatedTarget||n.toElement,y=h,v=v?to(v):null,v!==null&&(S=yo(v),v!==S||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=h),y!==v)){if(_=mm,T="onMouseLeave",w="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(_=ym,T="onPointerLeave",w="onPointerEnter",b="pointer"),S=y==null?g:Ho(y),k=v==null?g:Ho(v),g=new _(T,b+"leave",y,n,m),g.target=S,g.relatedTarget=k,T=null,to(m)===h&&(_=new _(w,b+"enter",v,n,m),_.target=k,_.relatedTarget=S,T=_),S=T,y&&v)t:{for(_=y,w=v,b=0,k=_;k;k=Po(k))b++;for(k=0,T=w;T;T=Po(T))k++;for(;0<b-k;)_=Po(_),b--;for(;0<k-b;)w=Po(w),k--;for(;b--;){if(_===w||w!==null&&_===w.alternate)break t;_=Po(_),w=Po(w)}_=null}else _=null;y!==null&&Pm(f,g,y,_,!1),v!==null&&S!==null&&Pm(f,S,v,_,!0)}}e:{if(g=h?Ho(h):window,y=g.nodeName&&g.nodeName.toLowerCase(),y==="select"||y==="input"&&g.type==="file")var I=y1;else if(wm(g))if(w_)I=x1;else{I=v1;var R=_1}else(y=g.nodeName)&&y.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(I=w1);if(I&&(I=I(t,h))){v_(f,I,n,m);break e}R&&R(t,g,h),t==="focusout"&&(R=g._wrapperState)&&R.controlled&&g.type==="number"&&Fd(g,"number",g.value)}switch(R=h?Ho(h):window,t){case"focusin":(wm(R)||R.contentEditable==="true")&&(Wo=R,Qd=h,ua=null);break;case"focusout":ua=Qd=Wo=null;break;case"mousedown":Xd=!0;break;case"contextmenu":case"mouseup":case"dragend":Xd=!1,Em(f,n,m);break;case"selectionchange":if(k1)break;case"keydown":case"keyup":Em(f,n,m)}var j;if(df)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Uo?y_(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(g_&&n.locale!=="ko"&&(Uo||P!=="onCompositionStart"?P==="onCompositionEnd"&&Uo&&(j=m_()):(yi=m,lf="value"in yi?yi.value:yi.textContent,Uo=!0)),R=du(h,P),0<R.length&&(P=new gm(P,t,null,n,m),f.push({event:P,listeners:R}),j?P.data=j:(j=__(n),j!==null&&(P.data=j)))),(j=h1?f1(t,n):p1(t,n))&&(h=du(h,"onBeforeInput"),0<h.length&&(m=new gm("onBeforeInput","beforeinput",null,n,m),f.push({event:m,listeners:h}),m.data=j))}A_(f,e)})}function Pa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function du(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=xa(t,n),o!=null&&r.unshift(Pa(t,o,i)),o=xa(t,e),o!=null&&r.push(Pa(t,o,i))),t=t.return}return r}function Po(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Pm(t,e,n,r,i){for(var o=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,h=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&h!==null&&(l=h,i?(c=xa(n,o),c!=null&&a.unshift(Pa(n,c,l))):i||(c=xa(n,o),c!=null&&a.push(Pa(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var P1=/\r\n?/g,j1=/\u0000|\uFFFD/g;function jm(t){return(typeof t=="string"?t:""+t).replace(P1,`
`).replace(j1,"")}function bl(t,e,n){if(e=jm(e),jm(t)!==e&&n)throw Error(xe(425))}function hu(){}var eh=null,th=null;function nh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rh=typeof setTimeout=="function"?setTimeout:void 0,A1=typeof clearTimeout=="function"?clearTimeout:void 0,Am=typeof Promise=="function"?Promise:void 0,O1=typeof queueMicrotask=="function"?queueMicrotask:typeof Am<"u"?function(t){return Am.resolve(null).then(t).catch(D1)}:rh;function D1(t){setTimeout(function(){throw t})}function rd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ka(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ka(e)}function Si(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Om(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var _s=Math.random().toString(36).slice(2),Or="__reactFiber$"+_s,ja="__reactProps$"+_s,Kr="__reactContainer$"+_s,ih="__reactEvents$"+_s,R1="__reactListeners$"+_s,L1="__reactHandles$"+_s;function to(t){var e=t[Or];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Kr]||n[Or]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Om(t);t!==null;){if(n=t[Or])return n;t=Om(t)}return e}t=n,n=t.parentNode}return null}function qa(t){return t=t[Or]||t[Kr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ho(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(xe(33))}function Yu(t){return t[ja]||null}var oh=[],Vo=-1;function Oi(t){return{current:t}}function Tt(t){0>Vo||(t.current=oh[Vo],oh[Vo]=null,Vo--)}function Et(t,e){Vo++,oh[Vo]=t.current,t.current=e}var ji={},vn=Oi(ji),Ln=Oi(!1),uo=ji;function as(t,e){var n=t.type.contextTypes;if(!n)return ji;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Nn(t){return t=t.childContextTypes,t!=null}function fu(){Tt(Ln),Tt(vn)}function Dm(t,e,n){if(vn.current!==ji)throw Error(xe(168));Et(vn,e),Et(Ln,n)}function D_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(xe(108,_b(t)||"Unknown",i));return Nt({},n,r)}function pu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ji,uo=vn.current,Et(vn,t),Et(Ln,Ln.current),!0}function Rm(t,e,n){var r=t.stateNode;if(!r)throw Error(xe(169));n?(t=D_(t,e,uo),r.__reactInternalMemoizedMergedChildContext=t,Tt(Ln),Tt(vn),Et(vn,t)):Tt(Ln),Et(Ln,n)}var $r=null,Gu=!1,id=!1;function R_(t){$r===null?$r=[t]:$r.push(t)}function N1(t){Gu=!0,R_(t)}function Di(){if(!id&&$r!==null){id=!0;var t=0,e=vt;try{var n=$r;for(vt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}$r=null,Gu=!1}catch(i){throw $r!==null&&($r=$r.slice(t+1)),i_(rf,Di),i}finally{vt=e,id=!1}}return null}var Zo=[],qo=0,mu=null,gu=0,er=[],tr=0,co=null,Hr=1,Vr="";function qi(t,e){Zo[qo++]=gu,Zo[qo++]=mu,mu=t,gu=e}function L_(t,e,n){er[tr++]=Hr,er[tr++]=Vr,er[tr++]=co,co=t;var r=Hr;t=Vr;var i=32-vr(r)-1;r&=~(1<<i),n+=1;var o=32-vr(e)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Hr=1<<32-vr(e)+i|n<<i|r,Vr=o+t}else Hr=1<<o|n<<i|r,Vr=t}function ff(t){t.return!==null&&(qi(t,1),L_(t,1,0))}function pf(t){for(;t===mu;)mu=Zo[--qo],Zo[qo]=null,gu=Zo[--qo],Zo[qo]=null;for(;t===co;)co=er[--tr],er[tr]=null,Vr=er[--tr],er[tr]=null,Hr=er[--tr],er[tr]=null}var qn=null,Vn=null,Ot=!1,_r=null;function N_(t,e){var n=nr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Lm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qn=t,Vn=Si(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qn=t,Vn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=co!==null?{id:Hr,overflow:Vr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=nr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qn=t,Vn=null,!0):!1;default:return!1}}function sh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ah(t){if(Ot){var e=Vn;if(e){var n=e;if(!Lm(t,e)){if(sh(t))throw Error(xe(418));e=Si(n.nextSibling);var r=qn;e&&Lm(t,e)?N_(r,n):(t.flags=t.flags&-4097|2,Ot=!1,qn=t)}}else{if(sh(t))throw Error(xe(418));t.flags=t.flags&-4097|2,Ot=!1,qn=t}}}function Nm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qn=t}function Sl(t){if(t!==qn)return!1;if(!Ot)return Nm(t),Ot=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!nh(t.type,t.memoizedProps)),e&&(e=Vn)){if(sh(t))throw I_(),Error(xe(418));for(;e;)N_(t,e),e=Si(e.nextSibling)}if(Nm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(xe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Vn=Si(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Vn=null}}else Vn=qn?Si(t.stateNode.nextSibling):null;return!0}function I_(){for(var t=Vn;t;)t=Si(t.nextSibling)}function ls(){Vn=qn=null,Ot=!1}function mf(t){_r===null?_r=[t]:_r.push(t)}var I1=ei.ReactCurrentBatchConfig;function Us(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(xe(309));var r=n.stateNode}if(!r)throw Error(xe(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var l=i.refs;a===null?delete l[o]:l[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(xe(284));if(!n._owner)throw Error(xe(290,t))}return t}function kl(t,e){throw t=Object.prototype.toString.call(e),Error(xe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Im(t){var e=t._init;return e(t._payload)}function M_(t){function e(w,b){if(t){var k=w.deletions;k===null?(w.deletions=[b],w.flags|=16):k.push(b)}}function n(w,b){if(!t)return null;for(;b!==null;)e(w,b),b=b.sibling;return null}function r(w,b){for(w=new Map;b!==null;)b.key!==null?w.set(b.key,b):w.set(b.index,b),b=b.sibling;return w}function i(w,b){return w=Ti(w,b),w.index=0,w.sibling=null,w}function o(w,b,k){return w.index=k,t?(k=w.alternate,k!==null?(k=k.index,k<b?(w.flags|=2,b):k):(w.flags|=2,b)):(w.flags|=1048576,b)}function a(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,b,k,T){return b===null||b.tag!==6?(b=dd(k,w.mode,T),b.return=w,b):(b=i(b,k),b.return=w,b)}function c(w,b,k,T){var I=k.type;return I===Fo?m(w,b,k.props.children,T,k.key):b!==null&&(b.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===hi&&Im(I)===b.type)?(T=i(b,k.props),T.ref=Us(w,b,k),T.return=w,T):(T=Xl(k.type,k.key,k.props,null,w.mode,T),T.ref=Us(w,b,k),T.return=w,T)}function h(w,b,k,T){return b===null||b.tag!==4||b.stateNode.containerInfo!==k.containerInfo||b.stateNode.implementation!==k.implementation?(b=hd(k,w.mode,T),b.return=w,b):(b=i(b,k.children||[]),b.return=w,b)}function m(w,b,k,T,I){return b===null||b.tag!==7?(b=lo(k,w.mode,T,I),b.return=w,b):(b=i(b,k),b.return=w,b)}function f(w,b,k){if(typeof b=="string"&&b!==""||typeof b=="number")return b=dd(""+b,w.mode,k),b.return=w,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case fl:return k=Xl(b.type,b.key,b.props,null,w.mode,k),k.ref=Us(w,null,b),k.return=w,k;case Bo:return b=hd(b,w.mode,k),b.return=w,b;case hi:var T=b._init;return f(w,T(b._payload),k)}if(Xs(b)||Is(b))return b=lo(b,w.mode,k,null),b.return=w,b;kl(w,b)}return null}function g(w,b,k,T){var I=b!==null?b.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return I!==null?null:l(w,b,""+k,T);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case fl:return k.key===I?c(w,b,k,T):null;case Bo:return k.key===I?h(w,b,k,T):null;case hi:return I=k._init,g(w,b,I(k._payload),T)}if(Xs(k)||Is(k))return I!==null?null:m(w,b,k,T,null);kl(w,k)}return null}function y(w,b,k,T,I){if(typeof T=="string"&&T!==""||typeof T=="number")return w=w.get(k)||null,l(b,w,""+T,I);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case fl:return w=w.get(T.key===null?k:T.key)||null,c(b,w,T,I);case Bo:return w=w.get(T.key===null?k:T.key)||null,h(b,w,T,I);case hi:var R=T._init;return y(w,b,k,R(T._payload),I)}if(Xs(T)||Is(T))return w=w.get(k)||null,m(b,w,T,I,null);kl(b,T)}return null}function v(w,b,k,T){for(var I=null,R=null,j=b,P=b=0,A=null;j!==null&&P<k.length;P++){j.index>P?(A=j,j=null):A=j.sibling;var F=g(w,j,k[P],T);if(F===null){j===null&&(j=A);break}t&&j&&F.alternate===null&&e(w,j),b=o(F,b,P),R===null?I=F:R.sibling=F,R=F,j=A}if(P===k.length)return n(w,j),Ot&&qi(w,P),I;if(j===null){for(;P<k.length;P++)j=f(w,k[P],T),j!==null&&(b=o(j,b,P),R===null?I=j:R.sibling=j,R=j);return Ot&&qi(w,P),I}for(j=r(w,j);P<k.length;P++)A=y(j,w,P,k[P],T),A!==null&&(t&&A.alternate!==null&&j.delete(A.key===null?P:A.key),b=o(A,b,P),R===null?I=A:R.sibling=A,R=A);return t&&j.forEach(function(K){return e(w,K)}),Ot&&qi(w,P),I}function _(w,b,k,T){var I=Is(k);if(typeof I!="function")throw Error(xe(150));if(k=I.call(k),k==null)throw Error(xe(151));for(var R=I=null,j=b,P=b=0,A=null,F=k.next();j!==null&&!F.done;P++,F=k.next()){j.index>P?(A=j,j=null):A=j.sibling;var K=g(w,j,F.value,T);if(K===null){j===null&&(j=A);break}t&&j&&K.alternate===null&&e(w,j),b=o(K,b,P),R===null?I=K:R.sibling=K,R=K,j=A}if(F.done)return n(w,j),Ot&&qi(w,P),I;if(j===null){for(;!F.done;P++,F=k.next())F=f(w,F.value,T),F!==null&&(b=o(F,b,P),R===null?I=F:R.sibling=F,R=F);return Ot&&qi(w,P),I}for(j=r(w,j);!F.done;P++,F=k.next())F=y(j,w,P,F.value,T),F!==null&&(t&&F.alternate!==null&&j.delete(F.key===null?P:F.key),b=o(F,b,P),R===null?I=F:R.sibling=F,R=F);return t&&j.forEach(function(N){return e(w,N)}),Ot&&qi(w,P),I}function S(w,b,k,T){if(typeof k=="object"&&k!==null&&k.type===Fo&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case fl:e:{for(var I=k.key,R=b;R!==null;){if(R.key===I){if(I=k.type,I===Fo){if(R.tag===7){n(w,R.sibling),b=i(R,k.props.children),b.return=w,w=b;break e}}else if(R.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===hi&&Im(I)===R.type){n(w,R.sibling),b=i(R,k.props),b.ref=Us(w,R,k),b.return=w,w=b;break e}n(w,R);break}else e(w,R);R=R.sibling}k.type===Fo?(b=lo(k.props.children,w.mode,T,k.key),b.return=w,w=b):(T=Xl(k.type,k.key,k.props,null,w.mode,T),T.ref=Us(w,b,k),T.return=w,w=T)}return a(w);case Bo:e:{for(R=k.key;b!==null;){if(b.key===R)if(b.tag===4&&b.stateNode.containerInfo===k.containerInfo&&b.stateNode.implementation===k.implementation){n(w,b.sibling),b=i(b,k.children||[]),b.return=w,w=b;break e}else{n(w,b);break}else e(w,b);b=b.sibling}b=hd(k,w.mode,T),b.return=w,w=b}return a(w);case hi:return R=k._init,S(w,b,R(k._payload),T)}if(Xs(k))return v(w,b,k,T);if(Is(k))return _(w,b,k,T);kl(w,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,b!==null&&b.tag===6?(n(w,b.sibling),b=i(b,k),b.return=w,w=b):(n(w,b),b=dd(k,w.mode,T),b.return=w,w=b),a(w)):n(w,b)}return S}var us=M_(!0),z_=M_(!1),yu=Oi(null),_u=null,Yo=null,gf=null;function yf(){gf=Yo=_u=null}function _f(t){var e=yu.current;Tt(yu),t._currentValue=e}function lh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function rs(t,e){_u=t,gf=Yo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rn=!0),t.firstContext=null)}function ir(t){var e=t._currentValue;if(gf!==t)if(t={context:t,memoizedValue:e,next:null},Yo===null){if(_u===null)throw Error(xe(308));Yo=t,_u.dependencies={lanes:0,firstContext:t}}else Yo=Yo.next=t;return e}var no=null;function vf(t){no===null?no=[t]:no.push(t)}function B_(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,vf(e)):(n.next=i.next,i.next=n),e.interleaved=n,Jr(t,r)}function Jr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var fi=!1;function wf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function F_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ki(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ut&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Jr(t,n)}return i=r.interleaved,i===null?(e.next=e,vf(r)):(e.next=i.next,i.next=e),r.interleaved=e,Jr(t,n)}function ql(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,of(t,n)}}function Mm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function vu(t,e,n,r){var i=t.updateQueue;fi=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,h=c.next;c.next=null,a===null?o=h:a.next=h,a=c;var m=t.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==a&&(l===null?m.firstBaseUpdate=h:l.next=h,m.lastBaseUpdate=c))}if(o!==null){var f=i.baseState;a=0,m=h=c=null,l=o;do{var g=l.lane,y=l.eventTime;if((r&g)===g){m!==null&&(m=m.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,_=l;switch(g=e,y=n,_.tag){case 1:if(v=_.payload,typeof v=="function"){f=v.call(y,f,g);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=_.payload,g=typeof v=="function"?v.call(y,f,g):v,g==null)break e;f=Nt({},f,g);break e;case 2:fi=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[l]:g.push(l))}else y={eventTime:y,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(h=m=y,c=f):m=m.next=y,a|=g;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;g=l,l=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(m===null&&(c=f),i.baseState=c,i.firstBaseUpdate=h,i.lastBaseUpdate=m,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);fo|=a,t.lanes=a,t.memoizedState=f}}function zm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(xe(191,i));i.call(r)}}}var Ya={},Rr=Oi(Ya),Aa=Oi(Ya),Oa=Oi(Ya);function ro(t){if(t===Ya)throw Error(xe(174));return t}function xf(t,e){switch(Et(Oa,e),Et(Aa,t),Et(Rr,Ya),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Wd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Wd(e,t)}Tt(Rr),Et(Rr,e)}function cs(){Tt(Rr),Tt(Aa),Tt(Oa)}function U_(t){ro(Oa.current);var e=ro(Rr.current),n=Wd(e,t.type);e!==n&&(Et(Aa,t),Et(Rr,n))}function bf(t){Aa.current===t&&(Tt(Rr),Tt(Aa))}var Rt=Oi(0);function wu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var od=[];function Sf(){for(var t=0;t<od.length;t++)od[t]._workInProgressVersionPrimary=null;od.length=0}var Yl=ei.ReactCurrentDispatcher,sd=ei.ReactCurrentBatchConfig,ho=0,Lt=null,Jt=null,nn=null,xu=!1,ca=!1,Da=0,M1=0;function mn(){throw Error(xe(321))}function kf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!xr(t[n],e[n]))return!1;return!0}function Ef(t,e,n,r,i,o){if(ho=o,Lt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yl.current=t===null||t.memoizedState===null?U1:W1,t=n(r,i),ca){o=0;do{if(ca=!1,Da=0,25<=o)throw Error(xe(301));o+=1,nn=Jt=null,e.updateQueue=null,Yl.current=$1,t=n(r,i)}while(ca)}if(Yl.current=bu,e=Jt!==null&&Jt.next!==null,ho=0,nn=Jt=Lt=null,xu=!1,e)throw Error(xe(300));return t}function Cf(){var t=Da!==0;return Da=0,t}function jr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?Lt.memoizedState=nn=t:nn=nn.next=t,nn}function or(){if(Jt===null){var t=Lt.alternate;t=t!==null?t.memoizedState:null}else t=Jt.next;var e=nn===null?Lt.memoizedState:nn.next;if(e!==null)nn=e,Jt=t;else{if(t===null)throw Error(xe(310));Jt=t,t={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},nn===null?Lt.memoizedState=nn=t:nn=nn.next=t}return nn}function Ra(t,e){return typeof e=="function"?e(t):e}function ad(t){var e=or(),n=e.queue;if(n===null)throw Error(xe(311));n.lastRenderedReducer=t;var r=Jt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=a=null,c=null,h=o;do{var m=h.lane;if((ho&m)===m)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var f={lane:m,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(l=c=f,a=r):c=c.next=f,Lt.lanes|=m,fo|=m}h=h.next}while(h!==null&&h!==o);c===null?a=r:c.next=l,xr(r,e.memoizedState)||(Rn=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Lt.lanes|=o,fo|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ld(t){var e=or(),n=e.queue;if(n===null)throw Error(xe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);xr(o,e.memoizedState)||(Rn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function W_(){}function $_(t,e){var n=Lt,r=or(),i=e(),o=!xr(r.memoizedState,i);if(o&&(r.memoizedState=i,Rn=!0),r=r.queue,Tf(Z_.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||nn!==null&&nn.memoizedState.tag&1){if(n.flags|=2048,La(9,V_.bind(null,n,r,i,e),void 0,null),rn===null)throw Error(xe(349));ho&30||H_(n,e,i)}return i}function H_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Lt.updateQueue,e===null?(e={lastEffect:null,stores:null},Lt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function V_(t,e,n,r){e.value=n,e.getSnapshot=r,q_(e)&&Y_(t)}function Z_(t,e,n){return n(function(){q_(e)&&Y_(t)})}function q_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!xr(t,n)}catch{return!0}}function Y_(t){var e=Jr(t,1);e!==null&&wr(e,t,1,-1)}function Bm(t){var e=jr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:t},e.queue=t,t=t.dispatch=F1.bind(null,Lt,t),[e.memoizedState,t]}function La(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Lt.updateQueue,e===null?(e={lastEffect:null,stores:null},Lt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function G_(){return or().memoizedState}function Gl(t,e,n,r){var i=jr();Lt.flags|=t,i.memoizedState=La(1|e,n,void 0,r===void 0?null:r)}function Ku(t,e,n,r){var i=or();r=r===void 0?null:r;var o=void 0;if(Jt!==null){var a=Jt.memoizedState;if(o=a.destroy,r!==null&&kf(r,a.deps)){i.memoizedState=La(e,n,o,r);return}}Lt.flags|=t,i.memoizedState=La(1|e,n,o,r)}function Fm(t,e){return Gl(8390656,8,t,e)}function Tf(t,e){return Ku(2048,8,t,e)}function K_(t,e){return Ku(4,2,t,e)}function J_(t,e){return Ku(4,4,t,e)}function Q_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function X_(t,e,n){return n=n!=null?n.concat([t]):null,Ku(4,4,Q_.bind(null,e,t),n)}function Pf(){}function ev(t,e){var n=or();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function tv(t,e){var n=or();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function nv(t,e,n){return ho&21?(xr(n,e)||(n=a_(),Lt.lanes|=n,fo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rn=!0),t.memoizedState=n)}function z1(t,e){var n=vt;vt=n!==0&&4>n?n:4,t(!0);var r=sd.transition;sd.transition={};try{t(!1),e()}finally{vt=n,sd.transition=r}}function rv(){return or().memoizedState}function B1(t,e,n){var r=Ci(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},iv(t))ov(e,n);else if(n=B_(t,e,n,r),n!==null){var i=kn();wr(n,t,r,i),sv(n,e,r)}}function F1(t,e,n){var r=Ci(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(iv(t))ov(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,l=o(a,n);if(i.hasEagerState=!0,i.eagerState=l,xr(l,a)){var c=e.interleaved;c===null?(i.next=i,vf(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=B_(t,e,i,r),n!==null&&(i=kn(),wr(n,t,r,i),sv(n,e,r))}}function iv(t){var e=t.alternate;return t===Lt||e!==null&&e===Lt}function ov(t,e){ca=xu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function sv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,of(t,n)}}var bu={readContext:ir,useCallback:mn,useContext:mn,useEffect:mn,useImperativeHandle:mn,useInsertionEffect:mn,useLayoutEffect:mn,useMemo:mn,useReducer:mn,useRef:mn,useState:mn,useDebugValue:mn,useDeferredValue:mn,useTransition:mn,useMutableSource:mn,useSyncExternalStore:mn,useId:mn,unstable_isNewReconciler:!1},U1={readContext:ir,useCallback:function(t,e){return jr().memoizedState=[t,e===void 0?null:e],t},useContext:ir,useEffect:Fm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Gl(4194308,4,Q_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Gl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Gl(4,2,t,e)},useMemo:function(t,e){var n=jr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=jr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=B1.bind(null,Lt,t),[r.memoizedState,t]},useRef:function(t){var e=jr();return t={current:t},e.memoizedState=t},useState:Bm,useDebugValue:Pf,useDeferredValue:function(t){return jr().memoizedState=t},useTransition:function(){var t=Bm(!1),e=t[0];return t=z1.bind(null,t[1]),jr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Lt,i=jr();if(Ot){if(n===void 0)throw Error(xe(407));n=n()}else{if(n=e(),rn===null)throw Error(xe(349));ho&30||H_(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Fm(Z_.bind(null,r,o,t),[t]),r.flags|=2048,La(9,V_.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=jr(),e=rn.identifierPrefix;if(Ot){var n=Vr,r=Hr;n=(r&~(1<<32-vr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Da++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=M1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},W1={readContext:ir,useCallback:ev,useContext:ir,useEffect:Tf,useImperativeHandle:X_,useInsertionEffect:K_,useLayoutEffect:J_,useMemo:tv,useReducer:ad,useRef:G_,useState:function(){return ad(Ra)},useDebugValue:Pf,useDeferredValue:function(t){var e=or();return nv(e,Jt.memoizedState,t)},useTransition:function(){var t=ad(Ra)[0],e=or().memoizedState;return[t,e]},useMutableSource:W_,useSyncExternalStore:$_,useId:rv,unstable_isNewReconciler:!1},$1={readContext:ir,useCallback:ev,useContext:ir,useEffect:Tf,useImperativeHandle:X_,useInsertionEffect:K_,useLayoutEffect:J_,useMemo:tv,useReducer:ld,useRef:G_,useState:function(){return ld(Ra)},useDebugValue:Pf,useDeferredValue:function(t){var e=or();return Jt===null?e.memoizedState=t:nv(e,Jt.memoizedState,t)},useTransition:function(){var t=ld(Ra)[0],e=or().memoizedState;return[t,e]},useMutableSource:W_,useSyncExternalStore:$_,useId:rv,unstable_isNewReconciler:!1};function fr(t,e){if(t&&t.defaultProps){e=Nt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function uh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Nt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ju={isMounted:function(t){return(t=t._reactInternals)?yo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=kn(),i=Ci(t),o=Zr(r,i);o.payload=e,n!=null&&(o.callback=n),e=ki(t,o,i),e!==null&&(wr(e,t,i,r),ql(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=kn(),i=Ci(t),o=Zr(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ki(t,o,i),e!==null&&(wr(e,t,i,r),ql(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=kn(),r=Ci(t),i=Zr(n,r);i.tag=2,e!=null&&(i.callback=e),e=ki(t,i,r),e!==null&&(wr(e,t,r,n),ql(e,t,r))}};function Um(t,e,n,r,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,a):e.prototype&&e.prototype.isPureReactComponent?!Ca(n,r)||!Ca(i,o):!0}function av(t,e,n){var r=!1,i=ji,o=e.contextType;return typeof o=="object"&&o!==null?o=ir(o):(i=Nn(e)?uo:vn.current,r=e.contextTypes,o=(r=r!=null)?as(t,i):ji),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ju,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Wm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ju.enqueueReplaceState(e,e.state,null)}function ch(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},wf(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=ir(o):(o=Nn(e)?uo:vn.current,i.context=as(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(uh(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ju.enqueueReplaceState(i,i.state,null),vu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ds(t,e){try{var n="",r=e;do n+=yb(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function ud(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function dh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var H1=typeof WeakMap=="function"?WeakMap:Map;function lv(t,e,n){n=Zr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ku||(ku=!0,xh=r),dh(t,e)},n}function uv(t,e,n){n=Zr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){dh(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){dh(t,e),typeof r!="function"&&(Ei===null?Ei=new Set([this]):Ei.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function $m(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new H1;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=i2.bind(null,t,e,n),e.then(t,t))}function Hm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Vm(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zr(-1,1),e.tag=2,ki(n,e,1))),n.lanes|=1),t)}var V1=ei.ReactCurrentOwner,Rn=!1;function bn(t,e,n,r){e.child=t===null?z_(e,null,n,r):us(e,t.child,n,r)}function Zm(t,e,n,r,i){n=n.render;var o=e.ref;return rs(e,i),r=Ef(t,e,n,r,o,i),n=Cf(),t!==null&&!Rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qr(t,e,i)):(Ot&&n&&ff(e),e.flags|=1,bn(t,e,r,i),e.child)}function qm(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!If(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,cv(t,e,o,r,i)):(t=Xl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ca,n(a,r)&&t.ref===e.ref)return Qr(t,e,i)}return e.flags|=1,t=Ti(o,r),t.ref=e.ref,t.return=e,e.child=t}function cv(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Ca(o,r)&&t.ref===e.ref)if(Rn=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Rn=!0);else return e.lanes=t.lanes,Qr(t,e,i)}return hh(t,e,n,r,i)}function dv(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(Ko,Un),Un|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Et(Ko,Un),Un|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Et(Ko,Un),Un|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Et(Ko,Un),Un|=r;return bn(t,e,i,n),e.child}function hv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function hh(t,e,n,r,i){var o=Nn(n)?uo:vn.current;return o=as(e,o),rs(e,i),n=Ef(t,e,n,r,o,i),r=Cf(),t!==null&&!Rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qr(t,e,i)):(Ot&&r&&ff(e),e.flags|=1,bn(t,e,n,i),e.child)}function Ym(t,e,n,r,i){if(Nn(n)){var o=!0;pu(e)}else o=!1;if(rs(e,i),e.stateNode===null)Kl(t,e),av(e,n,r),ch(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=ir(h):(h=Nn(n)?uo:vn.current,h=as(e,h));var m=n.getDerivedStateFromProps,f=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==h)&&Wm(e,a,r,h),fi=!1;var g=e.memoizedState;a.state=g,vu(e,r,a,i),c=e.memoizedState,l!==r||g!==c||Ln.current||fi?(typeof m=="function"&&(uh(e,n,m,r),c=e.memoizedState),(l=fi||Um(e,n,l,r,g,c,h))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=h,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,F_(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:fr(e.type,l),a.props=h,f=e.pendingProps,g=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=ir(c):(c=Nn(n)?uo:vn.current,c=as(e,c));var y=n.getDerivedStateFromProps;(m=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||g!==c)&&Wm(e,a,r,c),fi=!1,g=e.memoizedState,a.state=g,vu(e,r,a,i);var v=e.memoizedState;l!==f||g!==v||Ln.current||fi?(typeof y=="function"&&(uh(e,n,y,r),v=e.memoizedState),(h=fi||Um(e,n,h,r,g,v,c)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,v,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,v,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),a.props=r,a.state=v,a.context=c,r=h):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return fh(t,e,n,r,o,i)}function fh(t,e,n,r,i,o){hv(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&Rm(e,n,!1),Qr(t,e,o);r=e.stateNode,V1.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=us(e,t.child,null,o),e.child=us(e,null,l,o)):bn(t,e,l,o),e.memoizedState=r.state,i&&Rm(e,n,!0),e.child}function fv(t){var e=t.stateNode;e.pendingContext?Dm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Dm(t,e.context,!1),xf(t,e.containerInfo)}function Gm(t,e,n,r,i){return ls(),mf(i),e.flags|=256,bn(t,e,n,r),e.child}var ph={dehydrated:null,treeContext:null,retryLane:0};function mh(t){return{baseLanes:t,cachePool:null,transitions:null}}function pv(t,e,n){var r=e.pendingProps,i=Rt.current,o=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Et(Rt,i&1),t===null)return ah(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,o?(r=e.mode,o=e.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=ec(a,r,0,null),t=lo(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=mh(n),e.memoizedState=ph,t):jf(e,a));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Z1(t,e,a,r,l,i,n);if(o){o=r.fallback,a=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Ti(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=Ti(l,o):(o=lo(o,a,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,a=t.child.memoizedState,a=a===null?mh(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=ph,r}return o=t.child,t=o.sibling,r=Ti(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function jf(t,e){return e=ec({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function El(t,e,n,r){return r!==null&&mf(r),us(e,t.child,null,n),t=jf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Z1(t,e,n,r,i,o,a){if(n)return e.flags&256?(e.flags&=-257,r=ud(Error(xe(422))),El(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=ec({mode:"visible",children:r.children},i,0,null),o=lo(o,i,a,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&us(e,t.child,null,a),e.child.memoizedState=mh(a),e.memoizedState=ph,o);if(!(e.mode&1))return El(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(xe(419)),r=ud(o,r,void 0),El(t,e,a,r)}if(l=(a&t.childLanes)!==0,Rn||l){if(r=rn,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Jr(t,i),wr(r,t,i,-1))}return Nf(),r=ud(Error(xe(421))),El(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=o2.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Vn=Si(i.nextSibling),qn=e,Ot=!0,_r=null,t!==null&&(er[tr++]=Hr,er[tr++]=Vr,er[tr++]=co,Hr=t.id,Vr=t.overflow,co=e),e=jf(e,r.children),e.flags|=4096,e)}function Km(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),lh(t.return,e,n)}function cd(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function mv(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(bn(t,e,r.children,n),r=Rt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Km(t,n,e);else if(t.tag===19)Km(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Et(Rt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&wu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),cd(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&wu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}cd(e,!0,n,null,o);break;case"together":cd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Kl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),fo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(xe(153));if(e.child!==null){for(t=e.child,n=Ti(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ti(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function q1(t,e,n){switch(e.tag){case 3:fv(e),ls();break;case 5:U_(e);break;case 1:Nn(e.type)&&pu(e);break;case 4:xf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Et(yu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Et(Rt,Rt.current&1),e.flags|=128,null):n&e.child.childLanes?pv(t,e,n):(Et(Rt,Rt.current&1),t=Qr(t,e,n),t!==null?t.sibling:null);Et(Rt,Rt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return mv(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Et(Rt,Rt.current),r)break;return null;case 22:case 23:return e.lanes=0,dv(t,e,n)}return Qr(t,e,n)}var gv,gh,yv,_v;gv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gh=function(){};yv=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ro(Rr.current);var o=null;switch(n){case"input":i=zd(t,i),r=zd(t,r),o=[];break;case"select":i=Nt({},i,{value:void 0}),r=Nt({},r,{value:void 0}),o=[];break;case"textarea":i=Ud(t,i),r=Ud(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=hu)}$d(n,r);var a;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(va.hasOwnProperty(h)?o||(o=[]):(o=o||[]).push(h,null));for(h in r){var c=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&c!==l&&(c!=null||l!=null))if(h==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(va.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&Ct("scroll",t),o||l===c||(o=[])):(o=o||[]).push(h,c))}n&&(o=o||[]).push("style",n);var h=o;(e.updateQueue=h)&&(e.flags|=4)}};_v=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ws(t,e){if(!Ot)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function gn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Y1(t,e,n){var r=e.pendingProps;switch(pf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gn(e),null;case 1:return Nn(e.type)&&fu(),gn(e),null;case 3:return r=e.stateNode,cs(),Tt(Ln),Tt(vn),Sf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Sl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_r!==null&&(kh(_r),_r=null))),gh(t,e),gn(e),null;case 5:bf(e);var i=ro(Oa.current);if(n=e.type,t!==null&&e.stateNode!=null)yv(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(xe(166));return gn(e),null}if(t=ro(Rr.current),Sl(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Or]=e,r[ja]=o,t=(e.mode&1)!==0,n){case"dialog":Ct("cancel",r),Ct("close",r);break;case"iframe":case"object":case"embed":Ct("load",r);break;case"video":case"audio":for(i=0;i<ta.length;i++)Ct(ta[i],r);break;case"source":Ct("error",r);break;case"img":case"image":case"link":Ct("error",r),Ct("load",r);break;case"details":Ct("toggle",r);break;case"input":om(r,o),Ct("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ct("invalid",r);break;case"textarea":am(r,o),Ct("invalid",r)}$d(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&bl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&bl(r.textContent,l,t),i=["children",""+l]):va.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ct("scroll",r)}switch(n){case"input":pl(r),sm(r,o,!0);break;case"textarea":pl(r),lm(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=hu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Zy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Or]=e,t[ja]=r,gv(t,e,!1,!1),e.stateNode=t;e:{switch(a=Hd(n,r),n){case"dialog":Ct("cancel",t),Ct("close",t),i=r;break;case"iframe":case"object":case"embed":Ct("load",t),i=r;break;case"video":case"audio":for(i=0;i<ta.length;i++)Ct(ta[i],t);i=r;break;case"source":Ct("error",t),i=r;break;case"img":case"image":case"link":Ct("error",t),Ct("load",t),i=r;break;case"details":Ct("toggle",t),i=r;break;case"input":om(t,r),i=zd(t,r),Ct("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Nt({},r,{value:void 0}),Ct("invalid",t);break;case"textarea":am(t,r),i=Ud(t,r),Ct("invalid",t);break;default:i=r}$d(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?Gy(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&qy(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&wa(t,c):typeof c=="number"&&wa(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(va.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Ct("scroll",t):c!=null&&Qh(t,o,c,a))}switch(n){case"input":pl(t),sm(t,r,!1);break;case"textarea":pl(t),lm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Pi(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Xo(t,!!r.multiple,o,!1):r.defaultValue!=null&&Xo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=hu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return gn(e),null;case 6:if(t&&e.stateNode!=null)_v(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(xe(166));if(n=ro(Oa.current),ro(Rr.current),Sl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Or]=e,(o=r.nodeValue!==n)&&(t=qn,t!==null))switch(t.tag){case 3:bl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&bl(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Or]=e,e.stateNode=r}return gn(e),null;case 13:if(Tt(Rt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ot&&Vn!==null&&e.mode&1&&!(e.flags&128))I_(),ls(),e.flags|=98560,o=!1;else if(o=Sl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(xe(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(xe(317));o[Or]=e}else ls(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;gn(e),o=!1}else _r!==null&&(kh(_r),_r=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Rt.current&1?Qt===0&&(Qt=3):Nf())),e.updateQueue!==null&&(e.flags|=4),gn(e),null);case 4:return cs(),gh(t,e),t===null&&Ta(e.stateNode.containerInfo),gn(e),null;case 10:return _f(e.type._context),gn(e),null;case 17:return Nn(e.type)&&fu(),gn(e),null;case 19:if(Tt(Rt),o=e.memoizedState,o===null)return gn(e),null;if(r=(e.flags&128)!==0,a=o.rendering,a===null)if(r)Ws(o,!1);else{if(Qt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=wu(t),a!==null){for(e.flags|=128,Ws(o,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Et(Rt,Rt.current&1|2),e.child}t=t.sibling}o.tail!==null&&Wt()>hs&&(e.flags|=128,r=!0,Ws(o,!1),e.lanes=4194304)}else{if(!r)if(t=wu(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ws(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Ot)return gn(e),null}else 2*Wt()-o.renderingStartTime>hs&&n!==1073741824&&(e.flags|=128,r=!0,Ws(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Wt(),e.sibling=null,n=Rt.current,Et(Rt,r?n&1|2:n&1),e):(gn(e),null);case 22:case 23:return Lf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Un&1073741824&&(gn(e),e.subtreeFlags&6&&(e.flags|=8192)):gn(e),null;case 24:return null;case 25:return null}throw Error(xe(156,e.tag))}function G1(t,e){switch(pf(e),e.tag){case 1:return Nn(e.type)&&fu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return cs(),Tt(Ln),Tt(vn),Sf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return bf(e),null;case 13:if(Tt(Rt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(xe(340));ls()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Tt(Rt),null;case 4:return cs(),null;case 10:return _f(e.type._context),null;case 22:case 23:return Lf(),null;case 24:return null;default:return null}}var Cl=!1,yn=!1,K1=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Go(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Mt(t,e,r)}else n.current=null}function yh(t,e,n){try{n()}catch(r){Mt(t,e,r)}}var Jm=!1;function J1(t,e){if(eh=uu,t=S_(),hf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,h=0,m=0,f=t,g=null;t:for(;;){for(var y;f!==n||i!==0&&f.nodeType!==3||(l=a+i),f!==o||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(y=f.firstChild)!==null;)g=f,f=y;for(;;){if(f===t)break t;if(g===n&&++h===i&&(l=a),g===o&&++m===r&&(c=a),(y=f.nextSibling)!==null)break;f=g,g=f.parentNode}f=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(th={focusedElem:t,selectionRange:n},uu=!1,Ie=e;Ie!==null;)if(e=Ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ie=t;else for(;Ie!==null;){e=Ie;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var _=v.memoizedProps,S=v.memoizedState,w=e.stateNode,b=w.getSnapshotBeforeUpdate(e.elementType===e.type?_:fr(e.type,_),S);w.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(xe(163))}}catch(T){Mt(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,Ie=t;break}Ie=e.return}return v=Jm,Jm=!1,v}function da(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&yh(e,n,o)}i=i.next}while(i!==r)}}function Qu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function _h(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function vv(t){var e=t.alternate;e!==null&&(t.alternate=null,vv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Or],delete e[ja],delete e[ih],delete e[R1],delete e[L1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function wv(t){return t.tag===5||t.tag===3||t.tag===4}function Qm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||wv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=hu));else if(r!==4&&(t=t.child,t!==null))for(vh(t,e,n),t=t.sibling;t!==null;)vh(t,e,n),t=t.sibling}function wh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(wh(t,e,n),t=t.sibling;t!==null;)wh(t,e,n),t=t.sibling}var ln=null,mr=!1;function li(t,e,n){for(n=n.child;n!==null;)xv(t,e,n),n=n.sibling}function xv(t,e,n){if(Dr&&typeof Dr.onCommitFiberUnmount=="function")try{Dr.onCommitFiberUnmount(Hu,n)}catch{}switch(n.tag){case 5:yn||Go(n,e);case 6:var r=ln,i=mr;ln=null,li(t,e,n),ln=r,mr=i,ln!==null&&(mr?(t=ln,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ln.removeChild(n.stateNode));break;case 18:ln!==null&&(mr?(t=ln,n=n.stateNode,t.nodeType===8?rd(t.parentNode,n):t.nodeType===1&&rd(t,n),ka(t)):rd(ln,n.stateNode));break;case 4:r=ln,i=mr,ln=n.stateNode.containerInfo,mr=!0,li(t,e,n),ln=r,mr=i;break;case 0:case 11:case 14:case 15:if(!yn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&yh(n,e,a),i=i.next}while(i!==r)}li(t,e,n);break;case 1:if(!yn&&(Go(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Mt(n,e,l)}li(t,e,n);break;case 21:li(t,e,n);break;case 22:n.mode&1?(yn=(r=yn)||n.memoizedState!==null,li(t,e,n),yn=r):li(t,e,n);break;default:li(t,e,n)}}function Xm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new K1),e.forEach(function(r){var i=s2.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ur(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:ln=l.stateNode,mr=!1;break e;case 3:ln=l.stateNode.containerInfo,mr=!0;break e;case 4:ln=l.stateNode.containerInfo,mr=!0;break e}l=l.return}if(ln===null)throw Error(xe(160));xv(o,a,i),ln=null,mr=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(h){Mt(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)bv(e,t),e=e.sibling}function bv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ur(e,t),Cr(t),r&4){try{da(3,t,t.return),Qu(3,t)}catch(_){Mt(t,t.return,_)}try{da(5,t,t.return)}catch(_){Mt(t,t.return,_)}}break;case 1:ur(e,t),Cr(t),r&512&&n!==null&&Go(n,n.return);break;case 5:if(ur(e,t),Cr(t),r&512&&n!==null&&Go(n,n.return),t.flags&32){var i=t.stateNode;try{wa(i,"")}catch(_){Mt(t,t.return,_)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&Hy(i,o),Hd(l,a);var h=Hd(l,o);for(a=0;a<c.length;a+=2){var m=c[a],f=c[a+1];m==="style"?Gy(i,f):m==="dangerouslySetInnerHTML"?qy(i,f):m==="children"?wa(i,f):Qh(i,m,f,h)}switch(l){case"input":Bd(i,o);break;case"textarea":Vy(i,o);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var y=o.value;y!=null?Xo(i,!!o.multiple,y,!1):g!==!!o.multiple&&(o.defaultValue!=null?Xo(i,!!o.multiple,o.defaultValue,!0):Xo(i,!!o.multiple,o.multiple?[]:"",!1))}i[ja]=o}catch(_){Mt(t,t.return,_)}}break;case 6:if(ur(e,t),Cr(t),r&4){if(t.stateNode===null)throw Error(xe(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(_){Mt(t,t.return,_)}}break;case 3:if(ur(e,t),Cr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ka(e.containerInfo)}catch(_){Mt(t,t.return,_)}break;case 4:ur(e,t),Cr(t);break;case 13:ur(e,t),Cr(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Df=Wt())),r&4&&Xm(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(yn=(h=yn)||m,ur(e,t),yn=h):ur(e,t),Cr(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!m&&t.mode&1)for(Ie=t,m=t.child;m!==null;){for(f=Ie=m;Ie!==null;){switch(g=Ie,y=g.child,g.tag){case 0:case 11:case 14:case 15:da(4,g,g.return);break;case 1:Go(g,g.return);var v=g.stateNode;if(typeof v.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(_){Mt(r,n,_)}}break;case 5:Go(g,g.return);break;case 22:if(g.memoizedState!==null){tg(f);continue}}y!==null?(y.return=g,Ie=y):tg(f)}m=m.sibling}e:for(m=null,f=t;;){if(f.tag===5){if(m===null){m=f;try{i=f.stateNode,h?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Yy("display",a))}catch(_){Mt(t,t.return,_)}}}else if(f.tag===6){if(m===null)try{f.stateNode.nodeValue=h?"":f.memoizedProps}catch(_){Mt(t,t.return,_)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ur(e,t),Cr(t),r&4&&Xm(t);break;case 21:break;default:ur(e,t),Cr(t)}}function Cr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(wv(n)){var r=n;break e}n=n.return}throw Error(xe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(wa(i,""),r.flags&=-33);var o=Qm(t);wh(t,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Qm(t);vh(t,l,a);break;default:throw Error(xe(161))}}catch(c){Mt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Q1(t,e,n){Ie=t,Sv(t)}function Sv(t,e,n){for(var r=(t.mode&1)!==0;Ie!==null;){var i=Ie,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Cl;if(!a){var l=i.alternate,c=l!==null&&l.memoizedState!==null||yn;l=Cl;var h=yn;if(Cl=a,(yn=c)&&!h)for(Ie=i;Ie!==null;)a=Ie,c=a.child,a.tag===22&&a.memoizedState!==null?ng(i):c!==null?(c.return=a,Ie=c):ng(i);for(;o!==null;)Ie=o,Sv(o),o=o.sibling;Ie=i,Cl=l,yn=h}eg(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Ie=o):eg(t)}}function eg(t){for(;Ie!==null;){var e=Ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:yn||Qu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!yn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:fr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&zm(e,o,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}zm(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var m=h.memoizedState;if(m!==null){var f=m.dehydrated;f!==null&&ka(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(xe(163))}yn||e.flags&512&&_h(e)}catch(g){Mt(e,e.return,g)}}if(e===t){Ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function tg(t){for(;Ie!==null;){var e=Ie;if(e===t){Ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function ng(t){for(;Ie!==null;){var e=Ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Qu(4,e)}catch(c){Mt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Mt(e,i,c)}}var o=e.return;try{_h(e)}catch(c){Mt(e,o,c)}break;case 5:var a=e.return;try{_h(e)}catch(c){Mt(e,a,c)}}}catch(c){Mt(e,e.return,c)}if(e===t){Ie=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Ie=l;break}Ie=e.return}}var X1=Math.ceil,Su=ei.ReactCurrentDispatcher,Af=ei.ReactCurrentOwner,rr=ei.ReactCurrentBatchConfig,ut=0,rn=null,Gt=null,un=0,Un=0,Ko=Oi(0),Qt=0,Na=null,fo=0,Xu=0,Of=0,ha=null,On=null,Df=0,hs=1/0,Ur=null,ku=!1,xh=null,Ei=null,Tl=!1,_i=null,Eu=0,fa=0,bh=null,Jl=-1,Ql=0;function kn(){return ut&6?Wt():Jl!==-1?Jl:Jl=Wt()}function Ci(t){return t.mode&1?ut&2&&un!==0?un&-un:I1.transition!==null?(Ql===0&&(Ql=a_()),Ql):(t=vt,t!==0||(t=window.event,t=t===void 0?16:p_(t.type)),t):1}function wr(t,e,n,r){if(50<fa)throw fa=0,bh=null,Error(xe(185));Va(t,n,r),(!(ut&2)||t!==rn)&&(t===rn&&(!(ut&2)&&(Xu|=n),Qt===4&&mi(t,un)),In(t,r),n===1&&ut===0&&!(e.mode&1)&&(hs=Wt()+500,Gu&&Di()))}function In(t,e){var n=t.callbackNode;Ib(t,e);var r=lu(t,t===rn?un:0);if(r===0)n!==null&&dm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&dm(n),e===1)t.tag===0?N1(rg.bind(null,t)):R_(rg.bind(null,t)),O1(function(){!(ut&6)&&Di()}),n=null;else{switch(l_(r)){case 1:n=rf;break;case 4:n=o_;break;case 16:n=au;break;case 536870912:n=s_;break;default:n=au}n=Ov(n,kv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function kv(t,e){if(Jl=-1,Ql=0,ut&6)throw Error(xe(327));var n=t.callbackNode;if(is()&&t.callbackNode!==n)return null;var r=lu(t,t===rn?un:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Cu(t,r);else{e=r;var i=ut;ut|=2;var o=Cv();(rn!==t||un!==e)&&(Ur=null,hs=Wt()+500,ao(t,e));do try{n2();break}catch(l){Ev(t,l)}while(!0);yf(),Su.current=o,ut=i,Gt!==null?e=0:(rn=null,un=0,e=Qt)}if(e!==0){if(e===2&&(i=Gd(t),i!==0&&(r=i,e=Sh(t,i))),e===1)throw n=Na,ao(t,0),mi(t,r),In(t,Wt()),n;if(e===6)mi(t,r);else{if(i=t.current.alternate,!(r&30)&&!e2(i)&&(e=Cu(t,r),e===2&&(o=Gd(t),o!==0&&(r=o,e=Sh(t,o))),e===1))throw n=Na,ao(t,0),mi(t,r),In(t,Wt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(xe(345));case 2:Yi(t,On,Ur);break;case 3:if(mi(t,r),(r&130023424)===r&&(e=Df+500-Wt(),10<e)){if(lu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){kn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=rh(Yi.bind(null,t,On,Ur),e);break}Yi(t,On,Ur);break;case 4:if(mi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-vr(r);o=1<<a,a=e[a],a>i&&(i=a),r&=~o}if(r=i,r=Wt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*X1(r/1960))-r,10<r){t.timeoutHandle=rh(Yi.bind(null,t,On,Ur),r);break}Yi(t,On,Ur);break;case 5:Yi(t,On,Ur);break;default:throw Error(xe(329))}}}return In(t,Wt()),t.callbackNode===n?kv.bind(null,t):null}function Sh(t,e){var n=ha;return t.current.memoizedState.isDehydrated&&(ao(t,e).flags|=256),t=Cu(t,e),t!==2&&(e=On,On=n,e!==null&&kh(e)),t}function kh(t){On===null?On=t:On.push.apply(On,t)}function e2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!xr(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function mi(t,e){for(e&=~Of,e&=~Xu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vr(e),r=1<<n;t[n]=-1,e&=~r}}function rg(t){if(ut&6)throw Error(xe(327));is();var e=lu(t,0);if(!(e&1))return In(t,Wt()),null;var n=Cu(t,e);if(t.tag!==0&&n===2){var r=Gd(t);r!==0&&(e=r,n=Sh(t,r))}if(n===1)throw n=Na,ao(t,0),mi(t,e),In(t,Wt()),n;if(n===6)throw Error(xe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Yi(t,On,Ur),In(t,Wt()),null}function Rf(t,e){var n=ut;ut|=1;try{return t(e)}finally{ut=n,ut===0&&(hs=Wt()+500,Gu&&Di())}}function po(t){_i!==null&&_i.tag===0&&!(ut&6)&&is();var e=ut;ut|=1;var n=rr.transition,r=vt;try{if(rr.transition=null,vt=1,t)return t()}finally{vt=r,rr.transition=n,ut=e,!(ut&6)&&Di()}}function Lf(){Un=Ko.current,Tt(Ko)}function ao(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,A1(n)),Gt!==null)for(n=Gt.return;n!==null;){var r=n;switch(pf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&fu();break;case 3:cs(),Tt(Ln),Tt(vn),Sf();break;case 5:bf(r);break;case 4:cs();break;case 13:Tt(Rt);break;case 19:Tt(Rt);break;case 10:_f(r.type._context);break;case 22:case 23:Lf()}n=n.return}if(rn=t,Gt=t=Ti(t.current,null),un=Un=e,Qt=0,Na=null,Of=Xu=fo=0,On=ha=null,no!==null){for(e=0;e<no.length;e++)if(n=no[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}no=null}return t}function Ev(t,e){do{var n=Gt;try{if(yf(),Yl.current=bu,xu){for(var r=Lt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}xu=!1}if(ho=0,nn=Jt=Lt=null,ca=!1,Da=0,Af.current=null,n===null||n.return===null){Qt=1,Na=e,Gt=null;break}e:{var o=t,a=n.return,l=n,c=e;if(e=un,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,m=l,f=m.tag;if(!(m.mode&1)&&(f===0||f===11||f===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var y=Hm(a);if(y!==null){y.flags&=-257,Vm(y,a,l,o,e),y.mode&1&&$m(o,h,e),e=y,c=h;var v=e.updateQueue;if(v===null){var _=new Set;_.add(c),e.updateQueue=_}else v.add(c);break e}else{if(!(e&1)){$m(o,h,e),Nf();break e}c=Error(xe(426))}}else if(Ot&&l.mode&1){var S=Hm(a);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Vm(S,a,l,o,e),mf(ds(c,l));break e}}o=c=ds(c,l),Qt!==4&&(Qt=2),ha===null?ha=[o]:ha.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var w=lv(o,c,e);Mm(o,w);break e;case 1:l=c;var b=o.type,k=o.stateNode;if(!(o.flags&128)&&(typeof b.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Ei===null||!Ei.has(k)))){o.flags|=65536,e&=-e,o.lanes|=e;var T=uv(o,l,e);Mm(o,T);break e}}o=o.return}while(o!==null)}Pv(n)}catch(I){e=I,Gt===n&&n!==null&&(Gt=n=n.return);continue}break}while(!0)}function Cv(){var t=Su.current;return Su.current=bu,t===null?bu:t}function Nf(){(Qt===0||Qt===3||Qt===2)&&(Qt=4),rn===null||!(fo&268435455)&&!(Xu&268435455)||mi(rn,un)}function Cu(t,e){var n=ut;ut|=2;var r=Cv();(rn!==t||un!==e)&&(Ur=null,ao(t,e));do try{t2();break}catch(i){Ev(t,i)}while(!0);if(yf(),ut=n,Su.current=r,Gt!==null)throw Error(xe(261));return rn=null,un=0,Qt}function t2(){for(;Gt!==null;)Tv(Gt)}function n2(){for(;Gt!==null&&!Tb();)Tv(Gt)}function Tv(t){var e=Av(t.alternate,t,Un);t.memoizedProps=t.pendingProps,e===null?Pv(t):Gt=e,Af.current=null}function Pv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=G1(n,e),n!==null){n.flags&=32767,Gt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qt=6,Gt=null;return}}else if(n=Y1(n,e,Un),n!==null){Gt=n;return}if(e=e.sibling,e!==null){Gt=e;return}Gt=e=t}while(e!==null);Qt===0&&(Qt=5)}function Yi(t,e,n){var r=vt,i=rr.transition;try{rr.transition=null,vt=1,r2(t,e,n,r)}finally{rr.transition=i,vt=r}return null}function r2(t,e,n,r){do is();while(_i!==null);if(ut&6)throw Error(xe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(xe(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(Mb(t,o),t===rn&&(Gt=rn=null,un=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Tl||(Tl=!0,Ov(au,function(){return is(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=rr.transition,rr.transition=null;var a=vt;vt=1;var l=ut;ut|=4,Af.current=null,J1(t,n),bv(n,t),S1(th),uu=!!eh,th=eh=null,t.current=n,Q1(n),Pb(),ut=l,vt=a,rr.transition=o}else t.current=n;if(Tl&&(Tl=!1,_i=t,Eu=i),o=t.pendingLanes,o===0&&(Ei=null),Ob(n.stateNode),In(t,Wt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ku)throw ku=!1,t=xh,xh=null,t;return Eu&1&&t.tag!==0&&is(),o=t.pendingLanes,o&1?t===bh?fa++:(fa=0,bh=t):fa=0,Di(),null}function is(){if(_i!==null){var t=l_(Eu),e=rr.transition,n=vt;try{if(rr.transition=null,vt=16>t?16:t,_i===null)var r=!1;else{if(t=_i,_i=null,Eu=0,ut&6)throw Error(xe(331));var i=ut;for(ut|=4,Ie=t.current;Ie!==null;){var o=Ie,a=o.child;if(Ie.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var h=l[c];for(Ie=h;Ie!==null;){var m=Ie;switch(m.tag){case 0:case 11:case 15:da(8,m,o)}var f=m.child;if(f!==null)f.return=m,Ie=f;else for(;Ie!==null;){m=Ie;var g=m.sibling,y=m.return;if(vv(m),m===h){Ie=null;break}if(g!==null){g.return=y,Ie=g;break}Ie=y}}}var v=o.alternate;if(v!==null){var _=v.child;if(_!==null){v.child=null;do{var S=_.sibling;_.sibling=null,_=S}while(_!==null)}}Ie=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,Ie=a;else e:for(;Ie!==null;){if(o=Ie,o.flags&2048)switch(o.tag){case 0:case 11:case 15:da(9,o,o.return)}var w=o.sibling;if(w!==null){w.return=o.return,Ie=w;break e}Ie=o.return}}var b=t.current;for(Ie=b;Ie!==null;){a=Ie;var k=a.child;if(a.subtreeFlags&2064&&k!==null)k.return=a,Ie=k;else e:for(a=b;Ie!==null;){if(l=Ie,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Qu(9,l)}}catch(I){Mt(l,l.return,I)}if(l===a){Ie=null;break e}var T=l.sibling;if(T!==null){T.return=l.return,Ie=T;break e}Ie=l.return}}if(ut=i,Di(),Dr&&typeof Dr.onPostCommitFiberRoot=="function")try{Dr.onPostCommitFiberRoot(Hu,t)}catch{}r=!0}return r}finally{vt=n,rr.transition=e}}return!1}function ig(t,e,n){e=ds(n,e),e=lv(t,e,1),t=ki(t,e,1),e=kn(),t!==null&&(Va(t,1,e),In(t,e))}function Mt(t,e,n){if(t.tag===3)ig(t,t,n);else for(;e!==null;){if(e.tag===3){ig(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ei===null||!Ei.has(r))){t=ds(n,t),t=uv(e,t,1),e=ki(e,t,1),t=kn(),e!==null&&(Va(e,1,t),In(e,t));break}}e=e.return}}function i2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=kn(),t.pingedLanes|=t.suspendedLanes&n,rn===t&&(un&n)===n&&(Qt===4||Qt===3&&(un&130023424)===un&&500>Wt()-Df?ao(t,0):Of|=n),In(t,e)}function jv(t,e){e===0&&(t.mode&1?(e=yl,yl<<=1,!(yl&130023424)&&(yl=4194304)):e=1);var n=kn();t=Jr(t,e),t!==null&&(Va(t,e,n),In(t,n))}function o2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),jv(t,n)}function s2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(xe(314))}r!==null&&r.delete(e),jv(t,n)}var Av;Av=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ln.current)Rn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Rn=!1,q1(t,e,n);Rn=!!(t.flags&131072)}else Rn=!1,Ot&&e.flags&1048576&&L_(e,gu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Kl(t,e),t=e.pendingProps;var i=as(e,vn.current);rs(e,n),i=Ef(null,e,r,t,i,n);var o=Cf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nn(r)?(o=!0,pu(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,wf(e),i.updater=Ju,e.stateNode=i,i._reactInternals=e,ch(e,r,t,n),e=fh(null,e,r,!0,o,n)):(e.tag=0,Ot&&o&&ff(e),bn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Kl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=l2(r),t=fr(r,t),i){case 0:e=hh(null,e,r,t,n);break e;case 1:e=Ym(null,e,r,t,n);break e;case 11:e=Zm(null,e,r,t,n);break e;case 14:e=qm(null,e,r,fr(r.type,t),n);break e}throw Error(xe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fr(r,i),hh(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fr(r,i),Ym(t,e,r,i,n);case 3:e:{if(fv(e),t===null)throw Error(xe(387));r=e.pendingProps,o=e.memoizedState,i=o.element,F_(t,e),vu(e,r,null,n);var a=e.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=ds(Error(xe(423)),e),e=Gm(t,e,r,n,i);break e}else if(r!==i){i=ds(Error(xe(424)),e),e=Gm(t,e,r,n,i);break e}else for(Vn=Si(e.stateNode.containerInfo.firstChild),qn=e,Ot=!0,_r=null,n=z_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ls(),r===i){e=Qr(t,e,n);break e}bn(t,e,r,n)}e=e.child}return e;case 5:return U_(e),t===null&&ah(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,a=i.children,nh(r,i)?a=null:o!==null&&nh(r,o)&&(e.flags|=32),hv(t,e),bn(t,e,a,n),e.child;case 6:return t===null&&ah(e),null;case 13:return pv(t,e,n);case 4:return xf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=us(e,null,r,n):bn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fr(r,i),Zm(t,e,r,i,n);case 7:return bn(t,e,e.pendingProps,n),e.child;case 8:return bn(t,e,e.pendingProps.children,n),e.child;case 12:return bn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value,Et(yu,r._currentValue),r._currentValue=a,o!==null)if(xr(o.value,a)){if(o.children===i.children&&!Ln.current){e=Qr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=Zr(-1,n&-n),c.tag=2;var h=o.updateQueue;if(h!==null){h=h.shared;var m=h.pending;m===null?c.next=c:(c.next=m.next,m.next=c),h.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),lh(o.return,n,e),l.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(xe(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),lh(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}bn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,rs(e,n),i=ir(i),r=r(i),e.flags|=1,bn(t,e,r,n),e.child;case 14:return r=e.type,i=fr(r,e.pendingProps),i=fr(r.type,i),qm(t,e,r,i,n);case 15:return cv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fr(r,i),Kl(t,e),e.tag=1,Nn(r)?(t=!0,pu(e)):t=!1,rs(e,n),av(e,r,i),ch(e,r,i,n),fh(null,e,r,!0,t,n);case 19:return mv(t,e,n);case 22:return dv(t,e,n)}throw Error(xe(156,e.tag))};function Ov(t,e){return i_(t,e)}function a2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nr(t,e,n,r){return new a2(t,e,n,r)}function If(t){return t=t.prototype,!(!t||!t.isReactComponent)}function l2(t){if(typeof t=="function")return If(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ef)return 11;if(t===tf)return 14}return 2}function Ti(t,e){var n=t.alternate;return n===null?(n=nr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Xl(t,e,n,r,i,o){var a=2;if(r=t,typeof t=="function")If(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Fo:return lo(n.children,i,o,e);case Xh:a=8,i|=8;break;case Ld:return t=nr(12,n,e,i|2),t.elementType=Ld,t.lanes=o,t;case Nd:return t=nr(13,n,e,i),t.elementType=Nd,t.lanes=o,t;case Id:return t=nr(19,n,e,i),t.elementType=Id,t.lanes=o,t;case Uy:return ec(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case By:a=10;break e;case Fy:a=9;break e;case ef:a=11;break e;case tf:a=14;break e;case hi:a=16,r=null;break e}throw Error(xe(130,t==null?t:typeof t,""))}return e=nr(a,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function lo(t,e,n,r){return t=nr(7,t,r,e),t.lanes=n,t}function ec(t,e,n,r){return t=nr(22,t,r,e),t.elementType=Uy,t.lanes=n,t.stateNode={isHidden:!1},t}function dd(t,e,n){return t=nr(6,t,null,e),t.lanes=n,t}function hd(t,e,n){return e=nr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function u2(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zc(0),this.expirationTimes=Zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Mf(t,e,n,r,i,o,a,l,c){return t=new u2(t,e,n,l,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=nr(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wf(o),t}function c2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Dv(t){if(!t)return ji;t=t._reactInternals;e:{if(yo(t)!==t||t.tag!==1)throw Error(xe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Nn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(xe(171))}if(t.tag===1){var n=t.type;if(Nn(n))return D_(t,n,e)}return e}function Rv(t,e,n,r,i,o,a,l,c){return t=Mf(n,r,!0,t,i,o,a,l,c),t.context=Dv(null),n=t.current,r=kn(),i=Ci(n),o=Zr(r,i),o.callback=e??null,ki(n,o,i),t.current.lanes=i,Va(t,i,r),In(t,r),t}function tc(t,e,n,r){var i=e.current,o=kn(),a=Ci(i);return n=Dv(n),e.context===null?e.context=n:e.pendingContext=n,e=Zr(o,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ki(i,e,a),t!==null&&(wr(t,i,a,o),ql(t,i,a)),a}function Tu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function og(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zf(t,e){og(t,e),(t=t.alternate)&&og(t,e)}function d2(){return null}var Lv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Bf(t){this._internalRoot=t}nc.prototype.render=Bf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(xe(409));tc(t,e,null,null)};nc.prototype.unmount=Bf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;po(function(){tc(null,t,null,null)}),e[Kr]=null}};function nc(t){this._internalRoot=t}nc.prototype.unstable_scheduleHydration=function(t){if(t){var e=d_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<pi.length&&e!==0&&e<pi[n].priority;n++);pi.splice(n,0,t),n===0&&f_(t)}};function Ff(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function rc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function sg(){}function h2(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var h=Tu(a);o.call(h)}}var a=Rv(e,r,t,0,null,!1,!1,"",sg);return t._reactRootContainer=a,t[Kr]=a.current,Ta(t.nodeType===8?t.parentNode:t),po(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=Tu(c);l.call(h)}}var c=Mf(t,0,!1,null,null,!1,!1,"",sg);return t._reactRootContainer=c,t[Kr]=c.current,Ta(t.nodeType===8?t.parentNode:t),po(function(){tc(e,c,n,r)}),c}function ic(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var l=i;i=function(){var c=Tu(a);l.call(c)}}tc(e,a,t,i)}else a=h2(n,e,t,i,r);return Tu(a)}u_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ea(e.pendingLanes);n!==0&&(of(e,n|1),In(e,Wt()),!(ut&6)&&(hs=Wt()+500,Di()))}break;case 13:po(function(){var r=Jr(t,1);if(r!==null){var i=kn();wr(r,t,1,i)}}),zf(t,1)}};sf=function(t){if(t.tag===13){var e=Jr(t,134217728);if(e!==null){var n=kn();wr(e,t,134217728,n)}zf(t,134217728)}};c_=function(t){if(t.tag===13){var e=Ci(t),n=Jr(t,e);if(n!==null){var r=kn();wr(n,t,e,r)}zf(t,e)}};d_=function(){return vt};h_=function(t,e){var n=vt;try{return vt=t,e()}finally{vt=n}};Zd=function(t,e,n){switch(e){case"input":if(Bd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Yu(r);if(!i)throw Error(xe(90));$y(r),Bd(r,i)}}}break;case"textarea":Vy(t,n);break;case"select":e=n.value,e!=null&&Xo(t,!!n.multiple,e,!1)}};Qy=Rf;Xy=po;var f2={usingClientEntryPoint:!1,Events:[qa,Ho,Yu,Ky,Jy,Rf]},$s={findFiberByHostInstance:to,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},p2={bundleType:$s.bundleType,version:$s.version,rendererPackageName:$s.rendererPackageName,rendererConfig:$s.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ei.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=n_(t),t===null?null:t.stateNode},findFiberByHostInstance:$s.findFiberByHostInstance||d2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pl.isDisabled&&Pl.supportsFiber)try{Hu=Pl.inject(p2),Dr=Pl}catch{}}Gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f2;Gn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ff(e))throw Error(xe(200));return c2(t,e,null,n)};Gn.createRoot=function(t,e){if(!Ff(t))throw Error(xe(299));var n=!1,r="",i=Lv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Mf(t,1,!1,null,null,n,!1,r,i),t[Kr]=e.current,Ta(t.nodeType===8?t.parentNode:t),new Bf(e)};Gn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(xe(188)):(t=Object.keys(t).join(","),Error(xe(268,t)));return t=n_(e),t=t===null?null:t.stateNode,t};Gn.flushSync=function(t){return po(t)};Gn.hydrate=function(t,e,n){if(!rc(e))throw Error(xe(200));return ic(null,t,e,!0,n)};Gn.hydrateRoot=function(t,e,n){if(!Ff(t))throw Error(xe(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=Lv;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Rv(e,null,t,1,n??null,i,!1,o,a),t[Kr]=e.current,Ta(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new nc(e)};Gn.render=function(t,e,n){if(!rc(e))throw Error(xe(200));return ic(null,t,e,!1,n)};Gn.unmountComponentAtNode=function(t){if(!rc(t))throw Error(xe(40));return t._reactRootContainer?(po(function(){ic(null,null,t,!1,function(){t._reactRootContainer=null,t[Kr]=null})}),!0):!1};Gn.unstable_batchedUpdates=Rf;Gn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!rc(n))throw Error(xe(200));if(t==null||t._reactInternals===void 0)throw Error(xe(38));return ic(t,e,n,!1,r)};Gn.version="18.3.1-next-f1338f8080-20240426";function Nv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Nv)}catch(t){console.error(t)}}Nv(),Ny.exports=Gn;var oc=Ny.exports;const m2=Vh(oc),g2=Hh({__proto__:null,default:m2},[oc]);var ag=oc;Dd.createRoot=ag.createRoot,Dd.hydrateRoot=ag.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function At(){return At=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},At.apply(this,arguments)}var qt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(qt||(qt={}));const lg="popstate";function y2(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:a,hash:l}=r.location;return Ia("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:mo(i)}return v2(e,n,null,t)}function it(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function fs(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _2(){return Math.random().toString(36).substr(2,8)}function ug(t,e){return{usr:t.state,key:t.key,idx:e}}function Ia(t,e,n,r){return n===void 0&&(n=null),At({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ri(e):e,{state:n,key:e&&e.key||r||_2()})}function mo(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ri(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function v2(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,l=qt.Pop,c=null,h=m();h==null&&(h=0,a.replaceState(At({},a.state,{idx:h}),""));function m(){return(a.state||{idx:null}).idx}function f(){l=qt.Pop;let S=m(),w=S==null?null:S-h;h=S,c&&c({action:l,location:_.location,delta:w})}function g(S,w){l=qt.Push;let b=Ia(_.location,S,w);h=m()+1;let k=ug(b,h),T=_.createHref(b);try{a.pushState(k,"",T)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;i.location.assign(T)}o&&c&&c({action:l,location:_.location,delta:1})}function y(S,w){l=qt.Replace;let b=Ia(_.location,S,w);h=m();let k=ug(b,h),T=_.createHref(b);a.replaceState(k,"",T),o&&c&&c({action:l,location:_.location,delta:0})}function v(S){let w=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof S=="string"?S:mo(S);return b=b.replace(/ $/,"%20"),it(w,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,w)}let _={get action(){return l},get location(){return t(i,a)},listen(S){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(lg,f),c=S,()=>{i.removeEventListener(lg,f),c=null}},createHref(S){return e(i,S)},createURL:v,encodeLocation(S){let w=v(S);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:g,replace:y,go(S){return a.go(S)}};return _}var yt;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(yt||(yt={}));const w2=new Set(["lazy","caseSensitive","path","id","index","children"]);function x2(t){return t.index===!0}function Pu(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,o)=>{let a=[...n,String(o)],l=typeof i.id=="string"?i.id:a.join("-");if(it(i.index!==!0||!i.children,"Cannot specify children on an index route"),it(!r[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),x2(i)){let c=At({},i,e(i),{id:l});return r[l]=c,c}else{let c=At({},i,e(i),{id:l,children:void 0});return r[l]=c,i.children&&(c.children=Pu(i.children,e,a,r)),c}})}function Ji(t,e,n){return n===void 0&&(n="/"),eu(t,e,n,!1)}function eu(t,e,n,r){let i=typeof e=="string"?Ri(e):e,o=vs(i.pathname||"/",n);if(o==null)return null;let a=Iv(t);S2(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let h=L2(o);l=D2(a[c],h,r)}return l}function b2(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function Iv(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,a,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(it(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let h=qr([r,c.relativePath]),m=n.concat(c);o.children&&o.children.length>0&&(it(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),Iv(o.children,e,m,h)),!(o.path==null&&!o.index)&&e.push({path:h,score:A2(h,o.index),routesMeta:m})};return t.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,a);else for(let c of Mv(o.path))i(o,a,c)}),e}function Mv(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let a=Mv(r.join("/")),l=[];return l.push(...a.map(c=>c===""?o:[o,c].join("/"))),i&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function S2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:O2(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const k2=/^:[\w-]+$/,E2=3,C2=2,T2=1,P2=10,j2=-2,cg=t=>t==="*";function A2(t,e){let n=t.split("/"),r=n.length;return n.some(cg)&&(r+=j2),e&&(r+=C2),n.filter(i=>!cg(i)).reduce((i,o)=>i+(k2.test(o)?E2:o===""?T2:P2),r)}function O2(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function D2(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},o="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],h=l===r.length-1,m=o==="/"?e:e.slice(o.length)||"/",f=dg({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},m),g=c.route;if(!f&&h&&n&&!r[r.length-1].route.index&&(f=dg({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},m)),!f)return null;Object.assign(i,f.params),a.push({params:i,pathname:qr([o,f.pathname]),pathnameBase:M2(qr([o,f.pathnameBase])),route:g}),f.pathnameBase!=="/"&&(o=qr([o,f.pathnameBase]))}return a}function dg(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=R2(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((h,m,f)=>{let{paramName:g,isOptional:y}=m;if(g==="*"){let _=l[f]||"";a=o.slice(0,o.length-_.length).replace(/(.)\/+$/,"$1")}const v=l[f];return y&&!v?h[g]=void 0:h[g]=(v||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:a,pattern:t}}function R2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),fs(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function L2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fs(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function vs(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function N2(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ri(t):t;return{pathname:n?n.startsWith("/")?n:I2(n,e):e,search:z2(r),hash:B2(i)}}function I2(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function fd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function zv(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function sc(t,e){let n=zv(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function ac(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Ri(t):(i=At({},t),it(!i.pathname||!i.pathname.includes("?"),fd("?","pathname","search",i)),it(!i.pathname||!i.pathname.includes("#"),fd("#","pathname","hash",i)),it(!i.search||!i.search.includes("#"),fd("#","search","hash",i)));let o=t===""||i.pathname==="",a=o?"/":i.pathname,l;if(a==null)l=n;else{let f=e.length-1;if(!r&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),f-=1;i.pathname=g.join("/")}l=f>=0?e[f]:"/"}let c=N2(i,l),h=a&&a!=="/"&&a.endsWith("/"),m=(o||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(h||m)&&(c.pathname+="/"),c}const qr=t=>t.join("/").replace(/\/\/+/g,"/"),M2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),z2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,B2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class ju{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Ma(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Bv=["post","put","patch","delete"],F2=new Set(Bv),U2=["get",...Bv],W2=new Set(U2),$2=new Set([301,302,303,307,308]),H2=new Set([307,308]),pd={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},V2={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Hs={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Uf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Z2=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),Fv="remix-router-transitions";function q2(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;it(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let te=t.detectErrorBoundary;i=oe=>({hasErrorBoundary:te(oe)})}else i=Z2;let o={},a=Pu(t.routes,i,void 0,o),l,c=t.basename||"/",h=t.dataStrategy||J2,m=t.patchRoutesOnNavigation,f=At({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),g=null,y=new Set,v=null,_=null,S=null,w=t.hydrationData!=null,b=Ji(a,t.history.location,c),k=!1,T=null;if(b==null&&!m){let te=An(404,{pathname:t.history.location.pathname}),{matches:oe,route:de}=bg(a);b=oe,T={[de.id]:te}}b&&!t.hydrationData&&fn(b,a,t.history.location.pathname).active&&(b=null);let I;if(b)if(b.some(te=>te.route.lazy))I=!1;else if(!b.some(te=>te.route.loader))I=!0;else if(f.v7_partialHydration){let te=t.hydrationData?t.hydrationData.loaderData:null,oe=t.hydrationData?t.hydrationData.errors:null;if(oe){let de=b.findIndex(ye=>oe[ye.route.id]!==void 0);I=b.slice(0,de+1).every(ye=>!Ch(ye.route,te,oe))}else I=b.every(de=>!Ch(de.route,te,oe))}else I=t.hydrationData!=null;else if(I=!1,b=[],f.v7_partialHydration){let te=fn(null,a,t.history.location.pathname);te.active&&te.matches&&(k=!0,b=te.matches)}let R,j={historyAction:t.history.action,location:t.history.location,matches:b,initialized:I,navigation:pd,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||T,fetchers:new Map,blockers:new Map},P=qt.Pop,A=!1,F,K=!1,N=new Map,W=null,E=!1,Y=!1,H=[],M=new Set,B=new Map,D=0,z=-1,$=new Map,Z=new Set,re=new Map,ee=new Map,Q=new Set,fe=new Map,Ee=new Map,ke;function ae(){if(g=t.history.listen(te=>{let{action:oe,location:de,delta:ye}=te;if(ke){ke(),ke=void 0;return}fs(Ee.size===0||ye!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let me=dn({currentLocation:j.location,nextLocation:de,historyAction:oe});if(me&&ye!=null){let Be=new Promise(Ve=>{ke=Ve});t.history.go(ye*-1),Pn(me,{state:"blocked",location:de,proceed(){Pn(me,{state:"proceeding",proceed:void 0,reset:void 0,location:de}),Be.then(()=>t.history.go(ye))},reset(){let Ve=new Map(j.blockers);Ve.set(me,Hs),Te({blockers:Ve})}});return}return se(oe,de)}),n){dS(e,N);let te=()=>hS(e,N);e.addEventListener("pagehide",te),W=()=>e.removeEventListener("pagehide",te)}return j.initialized||se(qt.Pop,j.location,{initialHydration:!0}),R}function be(){g&&g(),W&&W(),y.clear(),F&&F.abort(),j.fetchers.forEach((te,oe)=>lt(oe)),j.blockers.forEach((te,oe)=>Mn(oe))}function Ce(te){return y.add(te),()=>y.delete(te)}function Te(te,oe){oe===void 0&&(oe={}),j=At({},j,te);let de=[],ye=[];f.v7_fetcherPersist&&j.fetchers.forEach((me,Be)=>{me.state==="idle"&&(Q.has(Be)?ye.push(Be):de.push(Be))}),Q.forEach(me=>{!j.fetchers.has(me)&&!B.has(me)&&ye.push(me)}),[...y].forEach(me=>me(j,{deletedFetchers:ye,viewTransitionOpts:oe.viewTransitionOpts,flushSync:oe.flushSync===!0})),f.v7_fetcherPersist?(de.forEach(me=>j.fetchers.delete(me)),ye.forEach(me=>lt(me))):ye.forEach(me=>Q.delete(me))}function nt(te,oe,de){var ye,me;let{flushSync:Be}=de===void 0?{}:de,Ve=j.actionData!=null&&j.navigation.formMethod!=null&&gr(j.navigation.formMethod)&&j.navigation.state==="loading"&&((ye=te.state)==null?void 0:ye._isRedirect)!==!0,Le;oe.actionData?Object.keys(oe.actionData).length>0?Le=oe.actionData:Le=null:Ve?Le=j.actionData:Le=null;let Me=oe.loaderData?wg(j.loaderData,oe.loaderData,oe.matches||[],oe.errors):j.loaderData,Ae=j.blockers;Ae.size>0&&(Ae=new Map(Ae),Ae.forEach((Ne,Ze)=>Ae.set(Ze,Hs)));let je=A===!0||j.navigation.formMethod!=null&&gr(j.navigation.formMethod)&&((me=te.state)==null?void 0:me._isRedirect)!==!0;l&&(a=l,l=void 0),E||P===qt.Pop||(P===qt.Push?t.history.push(te,te.state):P===qt.Replace&&t.history.replace(te,te.state));let Ue;if(P===qt.Pop){let Ne=N.get(j.location.pathname);Ne&&Ne.has(te.pathname)?Ue={currentLocation:j.location,nextLocation:te}:N.has(te.pathname)&&(Ue={currentLocation:te,nextLocation:j.location})}else if(K){let Ne=N.get(j.location.pathname);Ne?Ne.add(te.pathname):(Ne=new Set([te.pathname]),N.set(j.location.pathname,Ne)),Ue={currentLocation:j.location,nextLocation:te}}Te(At({},oe,{actionData:Le,loaderData:Me,historyAction:P,location:te,initialized:!0,navigation:pd,revalidation:"idle",restoreScrollPosition:Lr(te,oe.matches||j.matches),preventScrollReset:je,blockers:Ae}),{viewTransitionOpts:Ue,flushSync:Be===!0}),P=qt.Pop,A=!1,K=!1,E=!1,Y=!1,H=[]}async function O(te,oe){if(typeof te=="number"){t.history.go(te);return}let de=Eh(j.location,j.matches,c,f.v7_prependBasename,te,f.v7_relativeSplatPath,oe==null?void 0:oe.fromRouteId,oe==null?void 0:oe.relative),{path:ye,submission:me,error:Be}=hg(f.v7_normalizeFormMethod,!1,de,oe),Ve=j.location,Le=Ia(j.location,ye,oe&&oe.state);Le=At({},Le,t.history.encodeLocation(Le));let Me=oe&&oe.replace!=null?oe.replace:void 0,Ae=qt.Push;Me===!0?Ae=qt.Replace:Me===!1||me!=null&&gr(me.formMethod)&&me.formAction===j.location.pathname+j.location.search&&(Ae=qt.Replace);let je=oe&&"preventScrollReset"in oe?oe.preventScrollReset===!0:void 0,Ue=(oe&&oe.flushSync)===!0,Ne=dn({currentLocation:Ve,nextLocation:Le,historyAction:Ae});if(Ne){Pn(Ne,{state:"blocked",location:Le,proceed(){Pn(Ne,{state:"proceeding",proceed:void 0,reset:void 0,location:Le}),O(te,oe)},reset(){let Ze=new Map(j.blockers);Ze.set(Ne,Hs),Te({blockers:Ze})}});return}return await se(Ae,Le,{submission:me,pendingError:Be,preventScrollReset:je,replace:oe&&oe.replace,enableViewTransition:oe&&oe.viewTransition,flushSync:Ue})}function ue(){if(et(),Te({revalidation:"loading"}),j.navigation.state!=="submitting"){if(j.navigation.state==="idle"){se(j.historyAction,j.location,{startUninterruptedRevalidation:!0});return}se(P||j.historyAction,j.navigation.location,{overrideNavigation:j.navigation,enableViewTransition:K===!0})}}async function se(te,oe,de){F&&F.abort(),F=null,P=te,E=(de&&de.startUninterruptedRevalidation)===!0,hn(j.location,j.matches),A=(de&&de.preventScrollReset)===!0,K=(de&&de.enableViewTransition)===!0;let ye=l||a,me=de&&de.overrideNavigation,Be=de!=null&&de.initialHydration&&j.matches&&j.matches.length>0&&!k?j.matches:Ji(ye,oe,c),Ve=(de&&de.flushSync)===!0;if(Be&&j.initialized&&!Y&&rS(j.location,oe)&&!(de&&de.submission&&gr(de.submission.formMethod))){nt(oe,{matches:Be},{flushSync:Ve});return}let Le=fn(Be,ye,oe.pathname);if(Le.active&&Le.matches&&(Be=Le.matches),!Be){let{error:ct,notFoundMatches:V,route:Se}=zn(oe.pathname);nt(oe,{matches:V,loaderData:{},errors:{[Se.id]:ct}},{flushSync:Ve});return}F=new AbortController;let Me=jo(t.history,oe,F.signal,de&&de.submission),Ae;if(de&&de.pendingError)Ae=[Qi(Be).route.id,{type:yt.error,error:de.pendingError}];else if(de&&de.submission&&gr(de.submission.formMethod)){let ct=await G(Me,oe,de.submission,Be,Le.active,{replace:de.replace,flushSync:Ve});if(ct.shortCircuited)return;if(ct.pendingActionResult){let[V,Se]=ct.pendingActionResult;if(Wn(Se)&&Ma(Se.error)&&Se.error.status===404){F=null,nt(oe,{matches:ct.matches,loaderData:{},errors:{[V]:Se.error}});return}}Be=ct.matches||Be,Ae=ct.pendingActionResult,me=md(oe,de.submission),Ve=!1,Le.active=!1,Me=jo(t.history,Me.url,Me.signal)}let{shortCircuited:je,matches:Ue,loaderData:Ne,errors:Ze}=await q(Me,oe,Be,Le.active,me,de&&de.submission,de&&de.fetcherSubmission,de&&de.replace,de&&de.initialHydration===!0,Ve,Ae);je||(F=null,nt(oe,At({matches:Ue||Be},xg(Ae),{loaderData:Ne,errors:Ze})))}async function G(te,oe,de,ye,me,Be){Be===void 0&&(Be={}),et();let Ve=uS(oe,de);if(Te({navigation:Ve},{flushSync:Be.flushSync===!0}),me){let Ae=await on(ye,oe.pathname,te.signal);if(Ae.type==="aborted")return{shortCircuited:!0};if(Ae.type==="error"){let je=Qi(Ae.partialMatches).route.id;return{matches:Ae.partialMatches,pendingActionResult:[je,{type:yt.error,error:Ae.error}]}}else if(Ae.matches)ye=Ae.matches;else{let{notFoundMatches:je,error:Ue,route:Ne}=zn(oe.pathname);return{matches:je,pendingActionResult:[Ne.id,{type:yt.error,error:Ue}]}}}let Le,Me=na(ye,oe);if(!Me.route.action&&!Me.route.lazy)Le={type:yt.error,error:An(405,{method:te.method,pathname:oe.pathname,routeId:Me.route.id})};else if(Le=(await _e("action",j,te,[Me],ye,null))[Me.route.id],te.signal.aborted)return{shortCircuited:!0};if(io(Le)){let Ae;return Be&&Be.replace!=null?Ae=Be.replace:Ae=yg(Le.response.headers.get("Location"),new URL(te.url),c)===j.location.pathname+j.location.search,await ve(te,Le,!0,{submission:de,replace:Ae}),{shortCircuited:!0}}if(vi(Le))throw An(400,{type:"defer-action"});if(Wn(Le)){let Ae=Qi(ye,Me.route.id);return(Be&&Be.replace)!==!0&&(P=qt.Push),{matches:ye,pendingActionResult:[Ae.route.id,Le]}}return{matches:ye,pendingActionResult:[Me.route.id,Le]}}async function q(te,oe,de,ye,me,Be,Ve,Le,Me,Ae,je){let Ue=me||md(oe,Be),Ne=Be||Ve||kg(Ue),Ze=!E&&(!f.v7_partialHydration||!Me);if(ye){if(Ze){let bt=ne(je);Te(At({navigation:Ue},bt!==void 0?{actionData:bt}:{}),{flushSync:Ae})}let Qe=await on(de,oe.pathname,te.signal);if(Qe.type==="aborted")return{shortCircuited:!0};if(Qe.type==="error"){let bt=Qi(Qe.partialMatches).route.id;return{matches:Qe.partialMatches,loaderData:{},errors:{[bt]:Qe.error}}}else if(Qe.matches)de=Qe.matches;else{let{error:bt,notFoundMatches:Nr,route:sr}=zn(oe.pathname);return{matches:Nr,loaderData:{},errors:{[sr.id]:bt}}}}let ct=l||a,[V,Se]=pg(t.history,j,de,Ne,oe,f.v7_partialHydration&&Me===!0,f.v7_skipActionErrorRevalidation,Y,H,M,Q,re,Z,ct,c,je);if(jt(Qe=>!(de&&de.some(bt=>bt.route.id===Qe))||V&&V.some(bt=>bt.route.id===Qe)),z=++D,V.length===0&&Se.length===0){let Qe=$t();return nt(oe,At({matches:de,loaderData:{},errors:je&&Wn(je[1])?{[je[0]]:je[1].error}:null},xg(je),Qe?{fetchers:new Map(j.fetchers)}:{}),{flushSync:Ae}),{shortCircuited:!0}}if(Ze){let Qe={};if(!ye){Qe.navigation=Ue;let bt=ne(je);bt!==void 0&&(Qe.actionData=bt)}Se.length>0&&(Qe.fetchers=ce(Se)),Te(Qe,{flushSync:Ae})}Se.forEach(Qe=>{Ke(Qe.key),Qe.controller&&B.set(Qe.key,Qe.controller)});let Ge=()=>Se.forEach(Qe=>Ke(Qe.key));F&&F.signal.addEventListener("abort",Ge);let{loaderResults:De,fetcherResults:We}=await Pe(j,de,V,Se,te);if(te.signal.aborted)return{shortCircuited:!0};F&&F.signal.removeEventListener("abort",Ge),Se.forEach(Qe=>B.delete(Qe.key));let Je=jl(De);if(Je)return await ve(te,Je.result,!0,{replace:Le}),{shortCircuited:!0};if(Je=jl(We),Je)return Z.add(Je.key),await ve(te,Je.result,!0,{replace:Le}),{shortCircuited:!0};let{loaderData:xt,errors:ht}=vg(j,de,De,je,Se,We,fe);fe.forEach((Qe,bt)=>{Qe.subscribe(Nr=>{(Nr||Qe.done)&&fe.delete(bt)})}),f.v7_partialHydration&&Me&&j.errors&&(ht=At({},j.errors,ht));let pt=$t(),Xt=Bt(z),pn=pt||Xt||Se.length>0;return At({matches:de,loaderData:xt,errors:ht},pn?{fetchers:new Map(j.fetchers)}:{})}function ne(te){if(te&&!Wn(te[1]))return{[te[0]]:te[1].data};if(j.actionData)return Object.keys(j.actionData).length===0?null:j.actionData}function ce(te){return te.forEach(oe=>{let de=j.fetchers.get(oe.key),ye=Vs(void 0,de?de.data:void 0);j.fetchers.set(oe.key,ye)}),new Map(j.fetchers)}function pe(te,oe,de,ye){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Ke(te);let me=(ye&&ye.flushSync)===!0,Be=l||a,Ve=Eh(j.location,j.matches,c,f.v7_prependBasename,de,f.v7_relativeSplatPath,oe,ye==null?void 0:ye.relative),Le=Ji(Be,Ve,c),Me=fn(Le,Be,Ve);if(Me.active&&Me.matches&&(Le=Me.matches),!Le){st(te,oe,An(404,{pathname:Ve}),{flushSync:me});return}let{path:Ae,submission:je,error:Ue}=hg(f.v7_normalizeFormMethod,!0,Ve,ye);if(Ue){st(te,oe,Ue,{flushSync:me});return}let Ne=na(Le,Ae),Ze=(ye&&ye.preventScrollReset)===!0;if(je&&gr(je.formMethod)){ie(te,oe,Ae,Ne,Le,Me.active,me,Ze,je);return}re.set(te,{routeId:oe,path:Ae}),ge(te,oe,Ae,Ne,Le,Me.active,me,Ze,je)}async function ie(te,oe,de,ye,me,Be,Ve,Le,Me){et(),re.delete(te);function Ae(He){if(!He.route.action&&!He.route.lazy){let ft=An(405,{method:Me.formMethod,pathname:de,routeId:oe});return st(te,oe,ft,{flushSync:Ve}),!0}return!1}if(!Be&&Ae(ye))return;let je=j.fetchers.get(te);Re(te,cS(Me,je),{flushSync:Ve});let Ue=new AbortController,Ne=jo(t.history,de,Ue.signal,Me);if(Be){let He=await on(me,new URL(Ne.url).pathname,Ne.signal,te);if(He.type==="aborted")return;if(He.type==="error"){st(te,oe,He.error,{flushSync:Ve});return}else if(He.matches){if(me=He.matches,ye=na(me,de),Ae(ye))return}else{st(te,oe,An(404,{pathname:de}),{flushSync:Ve});return}}B.set(te,Ue);let Ze=D,V=(await _e("action",j,Ne,[ye],me,te))[ye.route.id];if(Ne.signal.aborted){B.get(te)===Ue&&B.delete(te);return}if(f.v7_fetcherPersist&&Q.has(te)){if(io(V)||Wn(V)){Re(te,di(void 0));return}}else{if(io(V))if(B.delete(te),z>Ze){Re(te,di(void 0));return}else return Z.add(te),Re(te,Vs(Me)),ve(Ne,V,!1,{fetcherSubmission:Me,preventScrollReset:Le});if(Wn(V)){st(te,oe,V.error);return}}if(vi(V))throw An(400,{type:"defer-action"});let Se=j.navigation.location||j.location,Ge=jo(t.history,Se,Ue.signal),De=l||a,We=j.navigation.state!=="idle"?Ji(De,j.navigation.location,c):j.matches;it(We,"Didn't find any matches after fetcher action");let Je=++D;$.set(te,Je);let xt=Vs(Me,V.data);j.fetchers.set(te,xt);let[ht,pt]=pg(t.history,j,We,Me,Se,!1,f.v7_skipActionErrorRevalidation,Y,H,M,Q,re,Z,De,c,[ye.route.id,V]);pt.filter(He=>He.key!==te).forEach(He=>{let ft=He.key,Ii=j.fetchers.get(ft),ii=Vs(void 0,Ii?Ii.data:void 0);j.fetchers.set(ft,ii),Ke(ft),He.controller&&B.set(ft,He.controller)}),Te({fetchers:new Map(j.fetchers)});let Xt=()=>pt.forEach(He=>Ke(He.key));Ue.signal.addEventListener("abort",Xt);let{loaderResults:pn,fetcherResults:Qe}=await Pe(j,We,ht,pt,Ge);if(Ue.signal.aborted)return;Ue.signal.removeEventListener("abort",Xt),$.delete(te),B.delete(te),pt.forEach(He=>B.delete(He.key));let bt=jl(pn);if(bt)return ve(Ge,bt.result,!1,{preventScrollReset:Le});if(bt=jl(Qe),bt)return Z.add(bt.key),ve(Ge,bt.result,!1,{preventScrollReset:Le});let{loaderData:Nr,errors:sr}=vg(j,We,pn,void 0,pt,Qe,fe);if(j.fetchers.has(te)){let He=di(V.data);j.fetchers.set(te,He)}Bt(Je),j.navigation.state==="loading"&&Je>z?(it(P,"Expected pending action"),F&&F.abort(),nt(j.navigation.location,{matches:We,loaderData:Nr,errors:sr,fetchers:new Map(j.fetchers)})):(Te({errors:sr,loaderData:wg(j.loaderData,Nr,We,sr),fetchers:new Map(j.fetchers)}),Y=!1)}async function ge(te,oe,de,ye,me,Be,Ve,Le,Me){let Ae=j.fetchers.get(te);Re(te,Vs(Me,Ae?Ae.data:void 0),{flushSync:Ve});let je=new AbortController,Ue=jo(t.history,de,je.signal);if(Be){let V=await on(me,new URL(Ue.url).pathname,Ue.signal,te);if(V.type==="aborted")return;if(V.type==="error"){st(te,oe,V.error,{flushSync:Ve});return}else if(V.matches)me=V.matches,ye=na(me,de);else{st(te,oe,An(404,{pathname:de}),{flushSync:Ve});return}}B.set(te,je);let Ne=D,ct=(await _e("loader",j,Ue,[ye],me,te))[ye.route.id];if(vi(ct)&&(ct=await Wf(ct,Ue.signal,!0)||ct),B.get(te)===je&&B.delete(te),!Ue.signal.aborted){if(Q.has(te)){Re(te,di(void 0));return}if(io(ct))if(z>Ne){Re(te,di(void 0));return}else{Z.add(te),await ve(Ue,ct,!1,{preventScrollReset:Le});return}if(Wn(ct)){st(te,oe,ct.error);return}it(!vi(ct),"Unhandled fetcher deferred data"),Re(te,di(ct.data))}}async function ve(te,oe,de,ye){let{submission:me,fetcherSubmission:Be,preventScrollReset:Ve,replace:Le}=ye===void 0?{}:ye;oe.response.headers.has("X-Remix-Revalidate")&&(Y=!0);let Me=oe.response.headers.get("Location");it(Me,"Expected a Location header on the redirect Response"),Me=yg(Me,new URL(te.url),c);let Ae=Ia(j.location,Me,{_isRedirect:!0});if(n){let V=!1;if(oe.response.headers.has("X-Remix-Reload-Document"))V=!0;else if(Uf.test(Me)){const Se=t.history.createURL(Me);V=Se.origin!==e.location.origin||vs(Se.pathname,c)==null}if(V){Le?e.location.replace(Me):e.location.assign(Me);return}}F=null;let je=Le===!0||oe.response.headers.has("X-Remix-Replace")?qt.Replace:qt.Push,{formMethod:Ue,formAction:Ne,formEncType:Ze}=j.navigation;!me&&!Be&&Ue&&Ne&&Ze&&(me=kg(j.navigation));let ct=me||Be;if(H2.has(oe.response.status)&&ct&&gr(ct.formMethod))await se(je,Ae,{submission:At({},ct,{formAction:Me}),preventScrollReset:Ve||A,enableViewTransition:de?K:void 0});else{let V=md(Ae,me);await se(je,Ae,{overrideNavigation:V,fetcherSubmission:Be,preventScrollReset:Ve||A,enableViewTransition:de?K:void 0})}}async function _e(te,oe,de,ye,me,Be){let Ve,Le={};try{Ve=await Q2(h,te,oe,de,ye,me,Be,o,i)}catch(Me){return ye.forEach(Ae=>{Le[Ae.route.id]={type:yt.error,error:Me}}),Le}for(let[Me,Ae]of Object.entries(Ve))if(iS(Ae)){let je=Ae.result;Le[Me]={type:yt.redirect,response:tS(je,de,Me,me,c,f.v7_relativeSplatPath)}}else Le[Me]=await eS(Ae);return Le}async function Pe(te,oe,de,ye,me){let Be=te.matches,Ve=_e("loader",te,me,de,oe,null),Le=Promise.all(ye.map(async je=>{if(je.matches&&je.match&&je.controller){let Ne=(await _e("loader",te,jo(t.history,je.path,je.controller.signal),[je.match],je.matches,je.key))[je.match.route.id];return{[je.key]:Ne}}else return Promise.resolve({[je.key]:{type:yt.error,error:An(404,{pathname:je.path})}})})),Me=await Ve,Ae=(await Le).reduce((je,Ue)=>Object.assign(je,Ue),{});return await Promise.all([aS(oe,Me,me.signal,Be,te.loaderData),lS(oe,Ae,ye)]),{loaderResults:Me,fetcherResults:Ae}}function et(){Y=!0,H.push(...jt()),re.forEach((te,oe)=>{B.has(oe)&&M.add(oe),Ke(oe)})}function Re(te,oe,de){de===void 0&&(de={}),j.fetchers.set(te,oe),Te({fetchers:new Map(j.fetchers)},{flushSync:(de&&de.flushSync)===!0})}function st(te,oe,de,ye){ye===void 0&&(ye={});let me=Qi(j.matches,oe);lt(te),Te({errors:{[me.route.id]:de},fetchers:new Map(j.fetchers)},{flushSync:(ye&&ye.flushSync)===!0})}function dt(te){return ee.set(te,(ee.get(te)||0)+1),Q.has(te)&&Q.delete(te),j.fetchers.get(te)||V2}function lt(te){let oe=j.fetchers.get(te);B.has(te)&&!(oe&&oe.state==="loading"&&$.has(te))&&Ke(te),re.delete(te),$.delete(te),Z.delete(te),f.v7_fetcherPersist&&Q.delete(te),M.delete(te),j.fetchers.delete(te)}function Pt(te){let oe=(ee.get(te)||0)-1;oe<=0?(ee.delete(te),Q.add(te),f.v7_fetcherPersist||lt(te)):ee.set(te,oe),Te({fetchers:new Map(j.fetchers)})}function Ke(te){let oe=B.get(te);oe&&(oe.abort(),B.delete(te))}function wt(te){for(let oe of te){let de=dt(oe),ye=di(de.data);j.fetchers.set(oe,ye)}}function $t(){let te=[],oe=!1;for(let de of Z){let ye=j.fetchers.get(de);it(ye,"Expected fetcher: "+de),ye.state==="loading"&&(Z.delete(de),te.push(de),oe=!0)}return wt(te),oe}function Bt(te){let oe=[];for(let[de,ye]of $)if(ye<te){let me=j.fetchers.get(de);it(me,"Expected fetcher: "+de),me.state==="loading"&&(Ke(de),$.delete(de),oe.push(de))}return wt(oe),oe.length>0}function It(te,oe){let de=j.blockers.get(te)||Hs;return Ee.get(te)!==oe&&Ee.set(te,oe),de}function Mn(te){j.blockers.delete(te),Ee.delete(te)}function Pn(te,oe){let de=j.blockers.get(te)||Hs;it(de.state==="unblocked"&&oe.state==="blocked"||de.state==="blocked"&&oe.state==="blocked"||de.state==="blocked"&&oe.state==="proceeding"||de.state==="blocked"&&oe.state==="unblocked"||de.state==="proceeding"&&oe.state==="unblocked","Invalid blocker state transition: "+de.state+" -> "+oe.state);let ye=new Map(j.blockers);ye.set(te,oe),Te({blockers:ye})}function dn(te){let{currentLocation:oe,nextLocation:de,historyAction:ye}=te;if(Ee.size===0)return;Ee.size>1&&fs(!1,"A router only supports one blocker at a time");let me=Array.from(Ee.entries()),[Be,Ve]=me[me.length-1],Le=j.blockers.get(Be);if(!(Le&&Le.state==="proceeding")&&Ve({currentLocation:oe,nextLocation:de,historyAction:ye}))return Be}function zn(te){let oe=An(404,{pathname:te}),de=l||a,{matches:ye,route:me}=bg(de);return jt(),{notFoundMatches:ye,route:me,error:oe}}function jt(te){let oe=[];return fe.forEach((de,ye)=>{(!te||te(ye))&&(de.cancel(),oe.push(ye),fe.delete(ye))}),oe}function Ht(te,oe,de){if(v=te,S=oe,_=de||null,!w&&j.navigation===pd){w=!0;let ye=Lr(j.location,j.matches);ye!=null&&Te({restoreScrollPosition:ye})}return()=>{v=null,S=null,_=null}}function Bn(te,oe){return _&&_(te,oe.map(ye=>b2(ye,j.loaderData)))||te.key}function hn(te,oe){if(v&&S){let de=Bn(te,oe);v[de]=S()}}function Lr(te,oe){if(v){let de=Bn(te,oe),ye=v[de];if(typeof ye=="number")return ye}return null}function fn(te,oe,de){if(m)if(te){if(Object.keys(te[0].params).length>0)return{active:!0,matches:eu(oe,de,c,!0)}}else return{active:!0,matches:eu(oe,de,c,!0)||[]};return{active:!1,matches:null}}async function on(te,oe,de,ye){if(!m)return{type:"success",matches:te};let me=te;for(;;){let Be=l==null,Ve=l||a,Le=o;try{await m({signal:de,path:oe,matches:me,fetcherKey:ye,patch:(je,Ue)=>{de.aborted||gg(je,Ue,Ve,Le,i)}})}catch(je){return{type:"error",error:je,partialMatches:me}}finally{Be&&!de.aborted&&(a=[...a])}if(de.aborted)return{type:"aborted"};let Me=Ji(Ve,oe,c);if(Me)return{type:"success",matches:Me};let Ae=eu(Ve,oe,c,!0);if(!Ae||me.length===Ae.length&&me.every((je,Ue)=>je.route.id===Ae[Ue].route.id))return{type:"success",matches:null};me=Ae}}function ri(te){o={},l=Pu(te,i,void 0,o)}function Es(te,oe){let de=l==null;gg(te,oe,l||a,o,i),de&&(a=[...a],Te({}))}return R={get basename(){return c},get future(){return f},get state(){return j},get routes(){return a},get window(){return e},initialize:ae,subscribe:Ce,enableScrollRestoration:Ht,navigate:O,fetch:pe,revalidate:ue,createHref:te=>t.history.createHref(te),encodeLocation:te=>t.history.encodeLocation(te),getFetcher:dt,deleteFetcher:Pt,dispose:be,getBlocker:It,deleteBlocker:Mn,patchRoutes:Es,_internalFetchControllers:B,_internalActiveDeferreds:fe,_internalSetRoutes:ri},R}function Y2(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Eh(t,e,n,r,i,o,a,l){let c,h;if(a){c=[];for(let f of e)if(c.push(f),f.route.id===a){h=f;break}}else c=e,h=e[e.length-1];let m=ac(i||".",sc(c,o),vs(t.pathname,n)||t.pathname,l==="path");if(i==null&&(m.search=t.search,m.hash=t.hash),(i==null||i===""||i===".")&&h){let f=$f(m.search);if(h.route.index&&!f)m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index";else if(!h.route.index&&f){let g=new URLSearchParams(m.search),y=g.getAll("index");g.delete("index"),y.filter(_=>_).forEach(_=>g.append("index",_));let v=g.toString();m.search=v?"?"+v:""}}return r&&n!=="/"&&(m.pathname=m.pathname==="/"?n:qr([n,m.pathname])),mo(m)}function hg(t,e,n,r){if(!r||!Y2(r))return{path:n};if(r.formMethod&&!sS(r.formMethod))return{path:n,error:An(405,{method:r.formMethod})};let i=()=>({path:n,error:An(400,{type:"invalid-body"})}),o=r.formMethod||"get",a=t?o.toUpperCase():o.toLowerCase(),l=$v(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!gr(a))return i();let g=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((y,v)=>{let[_,S]=v;return""+y+_+"="+S+`
`},""):String(r.body);return{path:n,submission:{formMethod:a,formAction:l,formEncType:r.formEncType,formData:void 0,json:void 0,text:g}}}else if(r.formEncType==="application/json"){if(!gr(a))return i();try{let g=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:a,formAction:l,formEncType:r.formEncType,formData:void 0,json:g,text:void 0}}}catch{return i()}}}it(typeof FormData=="function","FormData is not available in this environment");let c,h;if(r.formData)c=Th(r.formData),h=r.formData;else if(r.body instanceof FormData)c=Th(r.body),h=r.body;else if(r.body instanceof URLSearchParams)c=r.body,h=_g(c);else if(r.body==null)c=new URLSearchParams,h=new FormData;else try{c=new URLSearchParams(r.body),h=_g(c)}catch{return i()}let m={formMethod:a,formAction:l,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:h,json:void 0,text:void 0};if(gr(m.formMethod))return{path:n,submission:m};let f=Ri(n);return e&&f.search&&$f(f.search)&&c.append("index",""),f.search="?"+c,{path:mo(f),submission:m}}function fg(t,e,n){n===void 0&&(n=!1);let r=t.findIndex(i=>i.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function pg(t,e,n,r,i,o,a,l,c,h,m,f,g,y,v,_){let S=_?Wn(_[1])?_[1].error:_[1].data:void 0,w=t.createURL(e.location),b=t.createURL(i),k=n;o&&e.errors?k=fg(n,Object.keys(e.errors)[0],!0):_&&Wn(_[1])&&(k=fg(n,_[0]));let T=_?_[1].statusCode:void 0,I=a&&T&&T>=400,R=k.filter((P,A)=>{let{route:F}=P;if(F.lazy)return!0;if(F.loader==null)return!1;if(o)return Ch(F,e.loaderData,e.errors);if(G2(e.loaderData,e.matches[A],P)||c.some(W=>W===P.route.id))return!0;let K=e.matches[A],N=P;return mg(P,At({currentUrl:w,currentParams:K.params,nextUrl:b,nextParams:N.params},r,{actionResult:S,actionStatus:T,defaultShouldRevalidate:I?!1:l||w.pathname+w.search===b.pathname+b.search||w.search!==b.search||Uv(K,N)}))}),j=[];return f.forEach((P,A)=>{if(o||!n.some(E=>E.route.id===P.routeId)||m.has(A))return;let F=Ji(y,P.path,v);if(!F){j.push({key:A,routeId:P.routeId,path:P.path,matches:null,match:null,controller:null});return}let K=e.fetchers.get(A),N=na(F,P.path),W=!1;g.has(A)?W=!1:h.has(A)?(h.delete(A),W=!0):K&&K.state!=="idle"&&K.data===void 0?W=l:W=mg(N,At({currentUrl:w,currentParams:e.matches[e.matches.length-1].params,nextUrl:b,nextParams:n[n.length-1].params},r,{actionResult:S,actionStatus:T,defaultShouldRevalidate:I?!1:l})),W&&j.push({key:A,routeId:P.routeId,path:P.path,matches:F,match:N,controller:new AbortController})}),[R,j]}function Ch(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function G2(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function Uv(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function mg(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function gg(t,e,n,r,i){var o;let a;if(t){let h=r[t];it(h,"No route found to patch children into: routeId = "+t),h.children||(h.children=[]),a=h.children}else a=n;let l=e.filter(h=>!a.some(m=>Wv(h,m))),c=Pu(l,i,[t||"_","patch",String(((o=a)==null?void 0:o.length)||"0")],r);a.push(...c)}function Wv(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(o=>Wv(n,o))}):!1}async function K2(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];it(i,"No route found in manifest");let o={};for(let a in r){let c=i[a]!==void 0&&a!=="hasErrorBoundary";fs(!c,'Route "'+i.id+'" has a static property "'+a+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+a+'" will be ignored.')),!c&&!w2.has(a)&&(o[a]=r[a])}Object.assign(i,o),Object.assign(i,At({},e(i),{lazy:void 0}))}async function J2(t){let{matches:e}=t,n=e.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,o,a)=>Object.assign(i,{[n[a].route.id]:o}),{})}async function Q2(t,e,n,r,i,o,a,l,c,h){let m=o.map(y=>y.route.lazy?K2(y.route,c,l):void 0),f=o.map((y,v)=>{let _=m[v],S=i.some(b=>b.route.id===y.route.id);return At({},y,{shouldLoad:S,resolve:async b=>(b&&r.method==="GET"&&(y.route.lazy||y.route.loader)&&(S=!0),S?X2(e,r,y,_,b,h):Promise.resolve({type:yt.data,result:void 0}))})}),g=await t({matches:f,request:r,params:o[0].params,fetcherKey:a,context:h});try{await Promise.all(m)}catch{}return g}async function X2(t,e,n,r,i,o){let a,l,c=h=>{let m,f=new Promise((v,_)=>m=_);l=()=>m(),e.signal.addEventListener("abort",l);let g=v=>typeof h!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):h({request:e,params:n.params,context:o},...v!==void 0?[v]:[]),y=(async()=>{try{return{type:"data",result:await(i?i(_=>g(_)):g())}}catch(v){return{type:"error",result:v}}})();return Promise.race([y,f])};try{let h=n.route[t];if(r)if(h){let m,[f]=await Promise.all([c(h).catch(g=>{m=g}),r]);if(m!==void 0)throw m;a=f}else if(await r,h=n.route[t],h)a=await c(h);else if(t==="action"){let m=new URL(e.url),f=m.pathname+m.search;throw An(405,{method:e.method,pathname:f,routeId:n.route.id})}else return{type:yt.data,result:void 0};else if(h)a=await c(h);else{let m=new URL(e.url),f=m.pathname+m.search;throw An(404,{pathname:f})}it(a.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(h){return{type:yt.error,result:h}}finally{l&&e.signal.removeEventListener("abort",l)}return a}async function eS(t){let{result:e,type:n}=t;if(Hv(e)){let f;try{let g=e.headers.get("Content-Type");g&&/\bapplication\/json\b/.test(g)?e.body==null?f=null:f=await e.json():f=await e.text()}catch(g){return{type:yt.error,error:g}}return n===yt.error?{type:yt.error,error:new ju(e.status,e.statusText,f),statusCode:e.status,headers:e.headers}:{type:yt.data,data:f,statusCode:e.status,headers:e.headers}}if(n===yt.error){if(Sg(e)){var r,i;if(e.data instanceof Error){var o,a;return{type:yt.error,error:e.data,statusCode:(o=e.init)==null?void 0:o.status,headers:(a=e.init)!=null&&a.headers?new Headers(e.init.headers):void 0}}return{type:yt.error,error:new ju(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:Ma(e)?e.status:void 0,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}}return{type:yt.error,error:e,statusCode:Ma(e)?e.status:void 0}}if(oS(e)){var l,c;return{type:yt.deferred,deferredData:e,statusCode:(l=e.init)==null?void 0:l.status,headers:((c=e.init)==null?void 0:c.headers)&&new Headers(e.init.headers)}}if(Sg(e)){var h,m;return{type:yt.data,data:e.data,statusCode:(h=e.init)==null?void 0:h.status,headers:(m=e.init)!=null&&m.headers?new Headers(e.init.headers):void 0}}return{type:yt.data,data:e}}function tS(t,e,n,r,i,o){let a=t.headers.get("Location");if(it(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!Uf.test(a)){let l=r.slice(0,r.findIndex(c=>c.route.id===n)+1);a=Eh(new URL(e.url),l,i,!0,a,o),t.headers.set("Location",a)}return t}function yg(t,e,n){if(Uf.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),o=vs(i.pathname,n)!=null;if(i.origin===e.origin&&o)return i.pathname+i.search+i.hash}return t}function jo(t,e,n,r){let i=t.createURL($v(e)).toString(),o={signal:n};if(r&&gr(r.formMethod)){let{formMethod:a,formEncType:l}=r;o.method=a.toUpperCase(),l==="application/json"?(o.headers=new Headers({"Content-Type":l}),o.body=JSON.stringify(r.json)):l==="text/plain"?o.body=r.text:l==="application/x-www-form-urlencoded"&&r.formData?o.body=Th(r.formData):o.body=r.formData}return new Request(i,o)}function Th(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function _g(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function nS(t,e,n,r,i){let o={},a=null,l,c=!1,h={},m=n&&Wn(n[1])?n[1].error:void 0;return t.forEach(f=>{if(!(f.route.id in e))return;let g=f.route.id,y=e[g];if(it(!io(y),"Cannot handle redirect results in processLoaderData"),Wn(y)){let v=y.error;m!==void 0&&(v=m,m=void 0),a=a||{};{let _=Qi(t,g);a[_.route.id]==null&&(a[_.route.id]=v)}o[g]=void 0,c||(c=!0,l=Ma(y.error)?y.error.status:500),y.headers&&(h[g]=y.headers)}else vi(y)?(r.set(g,y.deferredData),o[g]=y.deferredData.data,y.statusCode!=null&&y.statusCode!==200&&!c&&(l=y.statusCode),y.headers&&(h[g]=y.headers)):(o[g]=y.data,y.statusCode&&y.statusCode!==200&&!c&&(l=y.statusCode),y.headers&&(h[g]=y.headers))}),m!==void 0&&n&&(a={[n[0]]:m},o[n[0]]=void 0),{loaderData:o,errors:a,statusCode:l||200,loaderHeaders:h}}function vg(t,e,n,r,i,o,a){let{loaderData:l,errors:c}=nS(e,n,r,a);return i.forEach(h=>{let{key:m,match:f,controller:g}=h,y=o[m];if(it(y,"Did not find corresponding fetcher result"),!(g&&g.signal.aborted))if(Wn(y)){let v=Qi(t.matches,f==null?void 0:f.route.id);c&&c[v.route.id]||(c=At({},c,{[v.route.id]:y.error})),t.fetchers.delete(m)}else if(io(y))it(!1,"Unhandled fetcher revalidation redirect");else if(vi(y))it(!1,"Unhandled fetcher deferred data");else{let v=di(y.data);t.fetchers.set(m,v)}}),{loaderData:l,errors:c}}function wg(t,e,n,r){let i=At({},e);for(let o of n){let a=o.route.id;if(e.hasOwnProperty(a)?e[a]!==void 0&&(i[a]=e[a]):t[a]!==void 0&&o.route.loader&&(i[a]=t[a]),r&&r.hasOwnProperty(a))break}return i}function xg(t){return t?Wn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Qi(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function bg(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function An(t,e){let{pathname:n,routeId:r,method:i,type:o,message:a}=e===void 0?{}:e,l="Unknown Server Error",c="Unknown @remix-run/router error";return t===400?(l="Bad Request",i&&n&&r?c="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":o==="defer-action"?c="defer() is not supported in actions":o==="invalid-body"&&(c="Unable to encode submission body")):t===403?(l="Forbidden",c='Route "'+r+'" does not match URL "'+n+'"'):t===404?(l="Not Found",c='No route matches URL "'+n+'"'):t===405&&(l="Method Not Allowed",i&&n&&r?c="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(c='Invalid request method "'+i.toUpperCase()+'"')),new ju(t||500,l,new Error(c),!0)}function jl(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(io(i))return{key:r,result:i}}}function $v(t){let e=typeof t=="string"?Ri(t):t;return mo(At({},e,{hash:""}))}function rS(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function iS(t){return Hv(t.result)&&$2.has(t.result.status)}function vi(t){return t.type===yt.deferred}function Wn(t){return t.type===yt.error}function io(t){return(t&&t.type)===yt.redirect}function Sg(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function oS(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function Hv(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function sS(t){return W2.has(t.toLowerCase())}function gr(t){return F2.has(t.toLowerCase())}async function aS(t,e,n,r,i){let o=Object.entries(e);for(let a=0;a<o.length;a++){let[l,c]=o[a],h=t.find(g=>(g==null?void 0:g.route.id)===l);if(!h)continue;let m=r.find(g=>g.route.id===h.route.id),f=m!=null&&!Uv(m,h)&&(i&&i[h.route.id])!==void 0;vi(c)&&f&&await Wf(c,n,!1).then(g=>{g&&(e[l]=g)})}}async function lS(t,e,n){for(let r=0;r<n.length;r++){let{key:i,routeId:o,controller:a}=n[r],l=e[i];t.find(h=>(h==null?void 0:h.route.id)===o)&&vi(l)&&(it(a,"Expected an AbortController for revalidating fetcher deferred result"),await Wf(l,a.signal,!0).then(h=>{h&&(e[i]=h)}))}}async function Wf(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:yt.data,data:t.deferredData.unwrappedData}}catch(i){return{type:yt.error,error:i}}return{type:yt.data,data:t.deferredData.data}}}function $f(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function na(t,e){let n=typeof e=="string"?Ri(e).search:e.search;if(t[t.length-1].route.index&&$f(n||""))return t[t.length-1];let r=zv(t);return r[r.length-1]}function kg(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:o,json:a}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(o!=null)return{formMethod:e,formAction:n,formEncType:r,formData:o,json:void 0,text:void 0};if(a!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:a,text:void 0}}}function md(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function uS(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Vs(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function cS(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function di(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function dS(t,e){try{let n=t.sessionStorage.getItem(Fv);if(n){let r=JSON.parse(n);for(let[i,o]of Object.entries(r||{}))o&&Array.isArray(o)&&e.set(i,new Set(o||[]))}}catch{}}function hS(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(Fv,JSON.stringify(n))}catch(r){fs(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Au(){return Au=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Au.apply(this,arguments)}const lc=J.createContext(null),Vv=J.createContext(null),Li=J.createContext(null),Hf=J.createContext(null),ti=J.createContext({outlet:null,matches:[],isDataRoute:!1}),Zv=J.createContext(null);function fS(t,e){let{relative:n}=e===void 0?{}:e;ws()||it(!1);let{basename:r,navigator:i}=J.useContext(Li),{hash:o,pathname:a,search:l}=Gv(t,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:qr([r,a])),i.createHref({pathname:c,search:l,hash:o})}function ws(){return J.useContext(Hf)!=null}function _o(){return ws()||it(!1),J.useContext(Hf).location}function qv(t){J.useContext(Li).static||J.useLayoutEffect(t)}function ni(){let{isDataRoute:t}=J.useContext(ti);return t?ES():pS()}function pS(){ws()||it(!1);let t=J.useContext(lc),{basename:e,future:n,navigator:r}=J.useContext(Li),{matches:i}=J.useContext(ti),{pathname:o}=_o(),a=JSON.stringify(sc(i,n.v7_relativeSplatPath)),l=J.useRef(!1);return qv(()=>{l.current=!0}),J.useCallback(function(h,m){if(m===void 0&&(m={}),!l.current)return;if(typeof h=="number"){r.go(h);return}let f=ac(h,JSON.parse(a),o,m.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:qr([e,f.pathname])),(m.replace?r.replace:r.push)(f,m.state,m)},[e,r,a,o,t])}function Yv(){let{matches:t}=J.useContext(ti),e=t[t.length-1];return e?e.params:{}}function Gv(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=J.useContext(Li),{matches:i}=J.useContext(ti),{pathname:o}=_o(),a=JSON.stringify(sc(i,r.v7_relativeSplatPath));return J.useMemo(()=>ac(t,JSON.parse(a),o,n==="path"),[t,a,o,n])}function mS(t,e,n,r){ws()||it(!1);let{navigator:i}=J.useContext(Li),{matches:o}=J.useContext(ti),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let h=_o(),m;m=h;let f=m.pathname||"/",g=f;if(c!=="/"){let _=c.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(_.length).join("/")}let y=Ji(t,{pathname:g});return wS(y&&y.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:qr([c,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:qr([c,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),o,n,r)}function gS(){let t=kS(),e=Ma(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return J.createElement(J.Fragment,null,J.createElement("h2",null,"Unexpected Application Error!"),J.createElement("h3",{style:{fontStyle:"italic"}},e),n?J.createElement("pre",{style:i},n):null,null)}const yS=J.createElement(gS,null);class _S extends J.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?J.createElement(ti.Provider,{value:this.props.routeContext},J.createElement(Zv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function vS(t){let{routeContext:e,match:n,children:r}=t,i=J.useContext(lc);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),J.createElement(ti.Provider,{value:e},r)}function wS(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let m=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);m>=0||it(!1),a=a.slice(0,Math.min(a.length,m+1))}let c=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let m=0;m<a.length;m++){let f=a[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(h=m),f.route.id){let{loaderData:g,errors:y}=n,v=f.route.loader&&g[f.route.id]===void 0&&(!y||y[f.route.id]===void 0);if(f.route.lazy||v){c=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((m,f,g)=>{let y,v=!1,_=null,S=null;n&&(y=l&&f.route.id?l[f.route.id]:void 0,_=f.route.errorElement||yS,c&&(h<0&&g===0?(CS("route-fallback"),v=!0,S=null):h===g&&(v=!0,S=f.route.hydrateFallbackElement||null)));let w=e.concat(a.slice(0,g+1)),b=()=>{let k;return y?k=_:v?k=S:f.route.Component?k=J.createElement(f.route.Component,null):f.route.element?k=f.route.element:k=m,J.createElement(vS,{match:f,routeContext:{outlet:m,matches:w,isDataRoute:n!=null},children:k})};return n&&(f.route.ErrorBoundary||f.route.errorElement||g===0)?J.createElement(_S,{location:n.location,revalidation:n.revalidation,component:_,error:y,children:b(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):b()},null)}var Kv=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Kv||{}),Jv=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Jv||{});function xS(t){let e=J.useContext(lc);return e||it(!1),e}function bS(t){let e=J.useContext(Vv);return e||it(!1),e}function SS(t){let e=J.useContext(ti);return e||it(!1),e}function Qv(t){let e=SS(),n=e.matches[e.matches.length-1];return n.route.id||it(!1),n.route.id}function kS(){var t;let e=J.useContext(Zv),n=bS(),r=Qv();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function ES(){let{router:t}=xS(Kv.UseNavigateStable),e=Qv(Jv.UseNavigateStable),n=J.useRef(!1);return qv(()=>{n.current=!0}),J.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Au({fromRouteId:e},o)))},[t,e])}const Eg={};function CS(t,e,n){Eg[t]||(Eg[t]=!0)}function TS(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function PS(t){let{to:e,replace:n,state:r,relative:i}=t;ws()||it(!1);let{future:o,static:a}=J.useContext(Li),{matches:l}=J.useContext(ti),{pathname:c}=_o(),h=ni(),m=ac(e,sc(l,o.v7_relativeSplatPath),c,i==="path"),f=JSON.stringify(m);return J.useEffect(()=>h(JSON.parse(f),{replace:n,state:r,relative:i}),[h,f,i,n,r]),null}function jS(t){let{basename:e="/",children:n=null,location:r,navigationType:i=qt.Pop,navigator:o,static:a=!1,future:l}=t;ws()&&it(!1);let c=e.replace(/^\/*/,"/"),h=J.useMemo(()=>({basename:c,navigator:o,static:a,future:Au({v7_relativeSplatPath:!1},l)}),[c,l,o,a]);typeof r=="string"&&(r=Ri(r));let{pathname:m="/",search:f="",hash:g="",state:y=null,key:v="default"}=r,_=J.useMemo(()=>{let S=vs(m,c);return S==null?null:{location:{pathname:S,search:f,hash:g,state:y,key:v},navigationType:i}},[c,m,f,g,y,v,i]);return _==null?null:J.createElement(Li.Provider,{value:h},J.createElement(Hf.Provider,{children:n,value:_}))}new Promise(()=>{});function AS(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:J.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:J.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:J.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function za(){return za=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},za.apply(this,arguments)}function OS(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function DS(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function RS(t,e){return t.button===0&&(!e||e==="_self")&&!DS(t)}function Ph(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function LS(t,e){let n=Ph(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(o=>{n.append(i,o)})}),n}const NS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],IS="6";try{window.__reactRouterVersion=IS}catch{}function MS(t,e){return q2({basename:e==null?void 0:e.basename,future:za({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:y2({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||zS(),routes:t,mapRouteProperties:AS,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function zS(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=za({},e,{errors:BS(e.errors)})),e}function BS(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new ju(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let o=window[i.__subType];if(typeof o=="function")try{let a=new o(i.message);a.stack="",n[r]=a}catch{}}if(n[r]==null){let o=new Error(i.message);o.stack="",n[r]=o}}else n[r]=i;return n}const FS=J.createContext({isTransitioning:!1}),US=J.createContext(new Map),WS="startTransition",Cg=ib[WS],$S="flushSync",Tg=g2[$S];function HS(t){Cg?Cg(t):t()}function Zs(t){Tg?Tg(t):t()}let VS=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function ZS(t){let{fallbackElement:e,router:n,future:r}=t,[i,o]=J.useState(n.state),[a,l]=J.useState(),[c,h]=J.useState({isTransitioning:!1}),[m,f]=J.useState(),[g,y]=J.useState(),[v,_]=J.useState(),S=J.useRef(new Map),{v7_startTransition:w}=r||{},b=J.useCallback(P=>{w?HS(P):P()},[w]),k=J.useCallback((P,A)=>{let{deletedFetchers:F,flushSync:K,viewTransitionOpts:N}=A;P.fetchers.forEach((E,Y)=>{E.data!==void 0&&S.current.set(Y,E.data)}),F.forEach(E=>S.current.delete(E));let W=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!N||W){K?Zs(()=>o(P)):b(()=>o(P));return}if(K){Zs(()=>{g&&(m&&m.resolve(),g.skipTransition()),h({isTransitioning:!0,flushSync:!0,currentLocation:N.currentLocation,nextLocation:N.nextLocation})});let E=n.window.document.startViewTransition(()=>{Zs(()=>o(P))});E.finished.finally(()=>{Zs(()=>{f(void 0),y(void 0),l(void 0),h({isTransitioning:!1})})}),Zs(()=>y(E));return}g?(m&&m.resolve(),g.skipTransition(),_({state:P,currentLocation:N.currentLocation,nextLocation:N.nextLocation})):(l(P),h({isTransitioning:!0,flushSync:!1,currentLocation:N.currentLocation,nextLocation:N.nextLocation}))},[n.window,g,m,S,b]);J.useLayoutEffect(()=>n.subscribe(k),[n,k]),J.useEffect(()=>{c.isTransitioning&&!c.flushSync&&f(new VS)},[c]),J.useEffect(()=>{if(m&&a&&n.window){let P=a,A=m.promise,F=n.window.document.startViewTransition(async()=>{b(()=>o(P)),await A});F.finished.finally(()=>{f(void 0),y(void 0),l(void 0),h({isTransitioning:!1})}),y(F)}},[b,a,m,n.window]),J.useEffect(()=>{m&&a&&i.location.key===a.location.key&&m.resolve()},[m,g,i.location,a]),J.useEffect(()=>{!c.isTransitioning&&v&&(l(v.state),h({isTransitioning:!0,flushSync:!1,currentLocation:v.currentLocation,nextLocation:v.nextLocation}),_(void 0))},[c.isTransitioning,v]),J.useEffect(()=>{},[]);let T=J.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:P=>n.navigate(P),push:(P,A,F)=>n.navigate(P,{state:A,preventScrollReset:F==null?void 0:F.preventScrollReset}),replace:(P,A,F)=>n.navigate(P,{replace:!0,state:A,preventScrollReset:F==null?void 0:F.preventScrollReset})}),[n]),I=n.basename||"/",R=J.useMemo(()=>({router:n,navigator:T,static:!1,basename:I}),[n,T,I]),j=J.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return J.useEffect(()=>TS(r,n.future),[r,n.future]),J.createElement(J.Fragment,null,J.createElement(lc.Provider,{value:R},J.createElement(Vv.Provider,{value:i},J.createElement(US.Provider,{value:S.current},J.createElement(FS.Provider,{value:c},J.createElement(jS,{basename:I,location:i.location,navigationType:i.historyAction,navigator:T,future:j},i.initialized||n.future.v7_partialHydration?J.createElement(qS,{routes:n.routes,future:n.future,state:i}):e))))),null)}const qS=J.memo(YS);function YS(t){let{routes:e,future:n,state:r}=t;return mS(e,void 0,r,n)}const GS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",KS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_t=J.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:o,replace:a,state:l,target:c,to:h,preventScrollReset:m,viewTransition:f}=e,g=OS(e,NS),{basename:y}=J.useContext(Li),v,_=!1;if(typeof h=="string"&&KS.test(h)&&(v=h,GS))try{let k=new URL(window.location.href),T=h.startsWith("//")?new URL(k.protocol+h):new URL(h),I=vs(T.pathname,y);T.origin===k.origin&&I!=null?h=I+T.search+T.hash:_=!0}catch{}let S=fS(h,{relative:i}),w=JS(h,{replace:a,state:l,target:c,preventScrollReset:m,relative:i,viewTransition:f});function b(k){r&&r(k),k.defaultPrevented||w(k)}return J.createElement("a",za({},g,{href:v||S,onClick:_||o?r:b,ref:n,target:c}))});var Pg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Pg||(Pg={}));var jg;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(jg||(jg={}));function JS(t,e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:a,viewTransition:l}=e===void 0?{}:e,c=ni(),h=_o(),m=Gv(t,{relative:a});return J.useCallback(f=>{if(RS(f,n)){f.preventDefault();let g=r!==void 0?r:mo(h)===mo(m);c(t,{replace:g,state:i,preventScrollReset:o,relative:a,viewTransition:l})}},[h,c,m,r,i,n,t,o,a,l])}function Vf(t){let e=J.useRef(Ph(t)),n=J.useRef(!1),r=_o(),i=J.useMemo(()=>LS(r.search,n.current?null:e.current),[r.search]),o=ni(),a=J.useCallback((l,c)=>{const h=Ph(typeof l=="function"?l(i):l);n.current=!0,o("?"+h,c)},[o,i]);return[i,a]}const QS="modulepreload",XS=function(t){return"/CipherDispatch/"+t},Ag={},vo=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=XS(c),c in Ag)return;Ag[c]=!0;const h=c.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${m}`))return;const f=document.createElement("link");if(f.rel=h?"stylesheet":QS,h||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),h)return new Promise((g,y)=>{f.addEventListener("load",g),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})};function ek(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:o,onRegisterError:a}=t;let l,c;const h=async(f=!0)=>{await c};async function m(){if("serviceWorker"in navigator){if(l=await vo(async()=>{const{Workbox:f}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:f}},[]).then(({Workbox:f})=>new f("/CipherDispatch/sw.js",{scope:"/CipherDispatch/",type:"classic"})).catch(f=>{a==null||a(f)}),!l)return;l.addEventListener("activated",f=>{(f.isUpdate||f.isExternal)&&window.location.reload()}),l.addEventListener("installed",f=>{f.isUpdate||r==null||r()}),l.register({immediate:e}).then(f=>{o?o("/CipherDispatch/sw.js",f):i==null||i(f)}).catch(f=>{a==null||a(f)})}}return c=m(),h}var jh=function(t,e){return jh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},jh(t,e)};function Xv(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");jh(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ou=function(){return Ou=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Ou.apply(this,arguments)};function xs(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function e0(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o}function t0(t,e){return function(n,r){e(n,r,t)}}function n0(t,e,n,r,i,o){function a(w){if(w!==void 0&&typeof w!="function")throw new TypeError("Function expected");return w}for(var l=r.kind,c=l==="getter"?"get":l==="setter"?"set":"value",h=!e&&t?r.static?t:t.prototype:null,m=e||(h?Object.getOwnPropertyDescriptor(h,r.name):{}),f,g=!1,y=n.length-1;y>=0;y--){var v={};for(var _ in r)v[_]=_==="access"?{}:r[_];for(var _ in r.access)v.access[_]=r.access[_];v.addInitializer=function(w){if(g)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(w||null))};var S=(0,n[y])(l==="accessor"?{get:m.get,set:m.set}:m[c],v);if(l==="accessor"){if(S===void 0)continue;if(S===null||typeof S!="object")throw new TypeError("Object expected");(f=a(S.get))&&(m.get=f),(f=a(S.set))&&(m.set=f),(f=a(S.init))&&i.unshift(f)}else(f=a(S))&&(l==="field"?i.unshift(f):m[c]=f)}h&&Object.defineProperty(h,r.name,m),g=!0}function r0(t,e,n){for(var r=arguments.length>2,i=0;i<e.length;i++)n=r?e[i].call(t,n):e[i].call(t);return r?n:void 0}function i0(t){return typeof t=="symbol"?t:"".concat(t)}function o0(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function s0(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Fe(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(m){try{h(r.next(m))}catch(f){a(f)}}function c(m){try{h(r.throw(m))}catch(f){a(f)}}function h(m){m.done?o(m.value):i(m.value).then(l,c)}h((r=r.apply(t,e||[])).next())})}function a0(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(h){return function(m){return c([h,m])}}function c(h){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,h[0]&&(n=0)),n;)try{if(r=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,i=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){n.label=h[1];break}if(h[0]===6&&n.label<o[1]){n.label=o[1],o=h;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(h);break}o[2]&&n.ops.pop(),n.trys.pop();continue}h=e.call(t,n)}catch(m){h=[6,m],i=0}finally{r=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}var uc=Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]};function l0(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&uc(e,t,n)}function Du(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zf(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){a={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function u0(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Zf(arguments[e]));return t}function c0(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,i++)r[i]=o[a];return r}function d0(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function ps(t){return this instanceof ps?(this.v=t,this):new ps(t)}function h0(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(y){return function(v){return Promise.resolve(v).then(y,f)}}function l(y,v){r[y]&&(i[y]=function(_){return new Promise(function(S,w){o.push([y,_,S,w])>1||c(y,_)})},v&&(i[y]=v(i[y])))}function c(y,v){try{h(r[y](v))}catch(_){g(o[0][3],_)}}function h(y){y.value instanceof ps?Promise.resolve(y.value.v).then(m,f):g(o[0][2],y)}function m(y){c("next",y)}function f(y){c("throw",y)}function g(y,v){y(v),o.shift(),o.length&&c(o[0][0],o[0][1])}}function f0(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,o){e[i]=t[i]?function(a){return(n=!n)?{value:ps(t[i](a)),done:!1}:o?o(a):a}:o}}function p0(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Du=="function"?Du(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(a){return new Promise(function(l,c){a=t[o](a),i(l,c,a.done,a.value)})}}function i(o,a,l,c){Promise.resolve(c).then(function(h){o({value:h,done:l})},a)}}function m0(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var tk=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},Ah=function(t){return Ah=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},Ah(t)};function g0(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=Ah(t),r=0;r<n.length;r++)n[r]!=="default"&&uc(e,t,n[r]);return tk(e,t),e}function y0(t){return t&&t.__esModule?t:{default:t}}function _0(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function v0(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n}function w0(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function x0(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var nk=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function b0(t){function e(o){t.error=t.hasError?new nk(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var n,r=0;function i(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(i);if(n.dispose){var o=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(o).then(i,function(a){return e(a),i()})}else r|=1}catch(a){e(a)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function S0(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,o,a){return r?e?".jsx":".js":i&&(!o||!a)?n:i+o+"."+a.toLowerCase()+"js"}):t}const rk={__extends:Xv,__assign:Ou,__rest:xs,__decorate:e0,__param:t0,__esDecorate:n0,__runInitializers:r0,__propKey:i0,__setFunctionName:o0,__metadata:s0,__awaiter:Fe,__generator:a0,__createBinding:uc,__exportStar:l0,__values:Du,__read:Zf,__spread:u0,__spreadArrays:c0,__spreadArray:d0,__await:ps,__asyncGenerator:h0,__asyncDelegator:f0,__asyncValues:p0,__makeTemplateObject:m0,__importStar:g0,__importDefault:y0,__classPrivateFieldGet:_0,__classPrivateFieldSet:v0,__classPrivateFieldIn:w0,__addDisposableResource:x0,__disposeResources:b0,__rewriteRelativeImportExtension:S0},ik=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:x0,get __assign(){return Ou},__asyncDelegator:f0,__asyncGenerator:h0,__asyncValues:p0,__await:ps,__awaiter:Fe,__classPrivateFieldGet:_0,__classPrivateFieldIn:w0,__classPrivateFieldSet:v0,__createBinding:uc,__decorate:e0,__disposeResources:b0,__esDecorate:n0,__exportStar:l0,__extends:Xv,__generator:a0,__importDefault:y0,__importStar:g0,__makeTemplateObject:m0,__metadata:s0,__param:t0,__propKey:i0,__read:Zf,__rest:xs,__rewriteRelativeImportExtension:S0,__runInitializers:r0,__setFunctionName:o0,__spread:u0,__spreadArray:d0,__spreadArrays:c0,__values:Du,default:rk},Symbol.toStringTag,{value:"Module"})),ok=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>vo(async()=>{const{default:r}=await Promise.resolve().then(()=>wo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class qf extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Og extends qf{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Dg extends qf{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Rg extends qf{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Oh;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Oh||(Oh={}));class sk{constructor(e,{headers:n={},customFetch:r,region:i=Oh.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=ok(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Fe(this,arguments,void 0,function*(n,r={}){var i;try{const{headers:o,method:a,body:l,signal:c}=r;let h={},{region:m}=r;m||(m=this.region);const f=new URL(`${this.url}/${n}`);m&&m!=="any"&&(h["x-region"]=m,f.searchParams.set("forceFunctionRegion",m));let g;l&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",g=l):typeof l=="string"?(h["Content-Type"]="text/plain",g=l):typeof FormData<"u"&&l instanceof FormData?g=l:(h["Content-Type"]="application/json",g=JSON.stringify(l)):g=l;const y=yield this.fetch(f.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),o),body:g,signal:c}).catch(w=>{throw w.name==="AbortError"?w:new Og(w)}),v=y.headers.get("x-relay-error");if(v&&v==="true")throw new Dg(y);if(!y.ok)throw new Rg(y);let _=((i=y.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),S;return _==="application/json"?S=yield y.json():_==="application/octet-stream"||_==="application/pdf"?S=yield y.blob():_==="text/event-stream"?S=y:_==="multipart/form-data"?S=yield y.formData():S=yield y.text(),{data:S,error:null,response:y}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new Og(o)}:{data:null,error:o,response:o instanceof Rg||o instanceof Dg?o.context:void 0}}})}}var Sn={};const bs=Sy(ik);var Al={},Ol={},Dl={},Rl={},Ll={},ak=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ms=ak();const lk=ms.fetch,k0=ms.fetch.bind(ms),E0=ms.Headers,uk=ms.Request,ck=ms.Response,wo=Object.freeze(Object.defineProperty({__proto__:null,Headers:E0,Request:uk,Response:ck,default:k0,fetch:lk},Symbol.toStringTag,{value:"Module"})),dk=Sy(wo);var Nl={},Lg;function C0(){if(Lg)return Nl;Lg=1,Object.defineProperty(Nl,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Nl.default=t,Nl}var Ng;function T0(){if(Ng)return Ll;Ng=1,Object.defineProperty(Ll,"__esModule",{value:!0});const t=bs,e=t.__importDefault(dk),n=t.__importDefault(C0());class r{constructor(o){var a,l;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(a=o.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=o.signal,this.isMaybeSingle=(l=o.isMaybeSingle)!==null&&l!==void 0?l:!1,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,a){return this.headers=new Headers(this.headers),this.headers.set(o,a),this}then(o,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let c=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var m,f,g,y;let v=null,_=null,S=null,w=h.status,b=h.statusText;if(h.ok){if(this.method!=="HEAD"){const R=await h.text();R===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((m=this.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?_=R:_=JSON.parse(R))}const T=(f=this.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),I=(g=h.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");T&&I&&I.length>1&&(S=parseInt(I[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(v={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,S=null,w=406,b="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const T=await h.text();try{v=JSON.parse(T),Array.isArray(v)&&h.status===404&&(_=[],v=null,w=200,b="OK")}catch{h.status===404&&T===""?(w=204,b="No Content"):v={message:T}}if(v&&this.isMaybeSingle&&(!((y=v==null?void 0:v.details)===null||y===void 0)&&y.includes("0 rows"))&&(v=null,w=200,b="OK"),v&&this.shouldThrowOnError)throw new n.default(v)}return{error:v,data:_,count:S,status:w,statusText:b}});return this.shouldThrowOnError||(c=c.catch(h=>{var m,f,g;return{error:{message:`${(m=h==null?void 0:h.name)!==null&&m!==void 0?m:"FetchError"}: ${h==null?void 0:h.message}`,details:`${(f=h==null?void 0:h.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(g=h==null?void 0:h.code)!==null&&g!==void 0?g:""}`},data:null,count:null,status:0,statusText:""}})),c.then(o,a)}returns(){return this}overrideTypes(){return this}}return Ll.default=r,Ll}var Ig;function P0(){if(Ig)return Rl;Ig=1,Object.defineProperty(Rl,"__esModule",{value:!0});const e=bs.__importDefault(T0());class n extends e.default{select(i){let o=!1;const a=(i??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:o=!0,nullsFirst:a,foreignTable:l,referencedTable:c=l}={}){const h=c?`${c}.order`:"order",m=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${m?`${m},`:""}${i}.${o?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${i}`),this}range(i,o,{foreignTable:a,referencedTable:l=a}={}){const c=typeof l>"u"?"offset":`${l}.offset`,h=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${i}`),this.url.searchParams.set(h,`${o-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:o=!1,settings:a=!1,buffers:l=!1,wal:c=!1,format:h="text"}={}){var m;const f=[i?"analyze":null,o?"verbose":null,a?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),g=(m=this.headers.get("Accept"))!==null&&m!==void 0?m:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${h}; for="${g}"; options=${f};`),h==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Rl.default=n,Rl}var Mg;function Yf(){if(Mg)return Dl;Mg=1,Object.defineProperty(Dl,"__esModule",{value:!0});const e=bs.__importDefault(P0()),n=new RegExp("[,()]");class r extends e.default{eq(o,a){return this.url.searchParams.append(o,`eq.${a}`),this}neq(o,a){return this.url.searchParams.append(o,`neq.${a}`),this}gt(o,a){return this.url.searchParams.append(o,`gt.${a}`),this}gte(o,a){return this.url.searchParams.append(o,`gte.${a}`),this}lt(o,a){return this.url.searchParams.append(o,`lt.${a}`),this}lte(o,a){return this.url.searchParams.append(o,`lte.${a}`),this}like(o,a){return this.url.searchParams.append(o,`like.${a}`),this}likeAllOf(o,a){return this.url.searchParams.append(o,`like(all).{${a.join(",")}}`),this}likeAnyOf(o,a){return this.url.searchParams.append(o,`like(any).{${a.join(",")}}`),this}ilike(o,a){return this.url.searchParams.append(o,`ilike.${a}`),this}ilikeAllOf(o,a){return this.url.searchParams.append(o,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(o,a){return this.url.searchParams.append(o,`ilike(any).{${a.join(",")}}`),this}is(o,a){return this.url.searchParams.append(o,`is.${a}`),this}in(o,a){const l=Array.from(new Set(a)).map(c=>typeof c=="string"&&n.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(o,`in.(${l})`),this}contains(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cs.{${a.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(a)}`),this}containedBy(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cd.{${a.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(a)}`),this}rangeGt(o,a){return this.url.searchParams.append(o,`sr.${a}`),this}rangeGte(o,a){return this.url.searchParams.append(o,`nxl.${a}`),this}rangeLt(o,a){return this.url.searchParams.append(o,`sl.${a}`),this}rangeLte(o,a){return this.url.searchParams.append(o,`nxr.${a}`),this}rangeAdjacent(o,a){return this.url.searchParams.append(o,`adj.${a}`),this}overlaps(o,a){return typeof a=="string"?this.url.searchParams.append(o,`ov.${a}`):this.url.searchParams.append(o,`ov.{${a.join(",")}}`),this}textSearch(o,a,{config:l,type:c}={}){let h="";c==="plain"?h="pl":c==="phrase"?h="ph":c==="websearch"&&(h="w");const m=l===void 0?"":`(${l})`;return this.url.searchParams.append(o,`${h}fts${m}.${a}`),this}match(o){return Object.entries(o).forEach(([a,l])=>{this.url.searchParams.append(a,`eq.${l}`)}),this}not(o,a,l){return this.url.searchParams.append(o,`not.${a}.${l}`),this}or(o,{foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${o})`),this}filter(o,a,l){return this.url.searchParams.append(o,`${a}.${l}`),this}}return Dl.default=r,Dl}var zg;function j0(){if(zg)return Ol;zg=1,Object.defineProperty(Ol,"__esModule",{value:!0});const e=bs.__importDefault(Yf());class n{constructor(i,{headers:o={},schema:a,fetch:l}){this.url=i,this.headers=new Headers(o),this.schema=a,this.fetch=l}select(i,o){const{head:a=!1,count:l}=o??{},c=a?"HEAD":"GET";let h=!1;const m=(i??"*").split("").map(f=>/\s/.test(f)&&!h?"":(f==='"'&&(h=!h),f)).join("");return this.url.searchParams.set("select",m),l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:o,defaultToNull:a=!0}={}){var l;const c="POST";if(o&&this.headers.append("Prefer",`count=${o}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const h=i.reduce((m,f)=>m.concat(Object.keys(f)),[]);if(h.length>0){const m=[...new Set(h)].map(f=>`"${f}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(i,{onConflict:o,ignoreDuplicates:a=!1,count:l,defaultToNull:c=!0}={}){var h;const m="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const f=i.reduce((g,y)=>g.concat(Object.keys(y)),[]);if(f.length>0){const g=[...new Set(f)].map(y=>`"${y}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}update(i,{count:o}={}){var a;const l="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:i}={}){var o;const a="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return Ol.default=n,Ol}var Bg;function hk(){if(Bg)return Al;Bg=1,Object.defineProperty(Al,"__esModule",{value:!0});const t=bs,e=t.__importDefault(j0()),n=t.__importDefault(Yf());class r{constructor(o,{headers:a={},schema:l,fetch:c}={}){this.url=o,this.headers=new Headers(a),this.schemaName=l,this.fetch=c}from(o){const a=new URL(`${this.url}/${o}`);return new e.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new r(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:l=!1,get:c=!1,count:h}={}){var m;let f;const g=new URL(`${this.url}/rpc/${o}`);let y;l||c?(f=l?"HEAD":"GET",Object.entries(a).filter(([_,S])=>S!==void 0).map(([_,S])=>[_,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([_,S])=>{g.searchParams.append(_,S)})):(f="POST",y=a);const v=new Headers(this.headers);return h&&v.set("Prefer",`count=${h}`),new n.default({method:f,url:g,headers:v,schema:this.schemaName,body:y,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}}return Al.default=r,Al}Object.defineProperty(Sn,"__esModule",{value:!0});var A0=Sn.PostgrestError=F0=Sn.PostgrestBuilder=z0=Sn.PostgrestTransformBuilder=I0=Sn.PostgrestFilterBuilder=L0=Sn.PostgrestQueryBuilder=D0=Sn.PostgrestClient=void 0;const Ss=bs,O0=Ss.__importDefault(hk());var D0=Sn.PostgrestClient=O0.default;const R0=Ss.__importDefault(j0());var L0=Sn.PostgrestQueryBuilder=R0.default;const N0=Ss.__importDefault(Yf());var I0=Sn.PostgrestFilterBuilder=N0.default;const M0=Ss.__importDefault(P0());var z0=Sn.PostgrestTransformBuilder=M0.default;const B0=Ss.__importDefault(T0());var F0=Sn.PostgrestBuilder=B0.default;const U0=Ss.__importDefault(C0());A0=Sn.PostgrestError=U0.default;var W0=Sn.default={PostgrestClient:O0.default,PostgrestQueryBuilder:R0.default,PostgrestFilterBuilder:N0.default,PostgrestTransformBuilder:M0.default,PostgrestBuilder:B0.default,PostgrestError:U0.default};const fk=Hh({__proto__:null,get PostgrestBuilder(){return F0},get PostgrestClient(){return D0},get PostgrestError(){return A0},get PostgrestFilterBuilder(){return I0},get PostgrestQueryBuilder(){return L0},get PostgrestTransformBuilder(){return z0},default:W0},[Sn]),{PostgrestClient:pk,PostgrestQueryBuilder:zj,PostgrestFilterBuilder:Bj,PostgrestTransformBuilder:Fj,PostgrestBuilder:Uj,PostgrestError:Wj}=W0||fk;class mk{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const gk="2.78.0",yk=`realtime-js/${gk}`,_k="1.0.0",Dh=1e4,vk=1e3,wk=100;var pa;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(pa||(pa={}));var Kt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Kt||(Kt={}));var yr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(yr||(yr={}));var Rh;(function(t){t.websocket="websocket"})(Rh||(Rh={}));var Xi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Xi||(Xi={}));class xk{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const i=n.getUint8(1),o=n.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(e.slice(a,a+i));a=a+i;const c=r.decode(e.slice(a,a+o));a=a+o;const h=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:l,event:c,payload:h}}}class $0{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var kt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(kt||(kt={}));const Fg=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,a)=>(o[a]=bk(a,t,e,i),o),{}):{}},bk=(t,e,n,r)=>{const i=e.find(l=>l.name===t),o=i==null?void 0:i.type,a=n[t];return o&&!r.includes(o)?H0(o,a):Lh(a)},H0=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Ck(e,n)}switch(t){case kt.bool:return Sk(e);case kt.float4:case kt.float8:case kt.int2:case kt.int4:case kt.int8:case kt.numeric:case kt.oid:return kk(e);case kt.json:case kt.jsonb:return Ek(e);case kt.timestamp:return Tk(e);case kt.abstime:case kt.date:case kt.daterange:case kt.int4range:case kt.int8range:case kt.money:case kt.reltime:case kt.text:case kt.time:case kt.timestamptz:case kt.timetz:case kt.tsrange:case kt.tstzrange:return Lh(e);default:return Lh(e)}},Lh=t=>t,Sk=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},kk=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Ek=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Ck=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const a=t.slice(1,n);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(l=>H0(e,l))}return t},Tk=t=>typeof t=="string"?t.replace(" ","T"):t,V0=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class gd{constructor(e,n,r={},i=Dh){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ug;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Ug||(Ug={}));class ma{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ma.syncState(this.state,i,o,a),this.pendingDiffs.forEach(c=>{this.state=ma.syncDiff(this.state,c,o,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=ma.syncDiff(this.state,i,o,a),l())}),this.onJoin((i,o,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:a})}),this.onLeave((i,o,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const o=this.cloneDeep(e),a=this.transformState(n),l={},c={};return this.map(o,(h,m)=>{a[h]||(c[h]=m)}),this.map(a,(h,m)=>{const f=o[h];if(f){const g=m.map(S=>S.presence_ref),y=f.map(S=>S.presence_ref),v=m.filter(S=>y.indexOf(S.presence_ref)<0),_=f.filter(S=>g.indexOf(S.presence_ref)<0);v.length>0&&(l[h]=v),_.length>0&&(c[h]=_)}else l[h]=m}),this.syncDiff(o,{joins:l,leaves:c},r,i)}static syncDiff(e,n,r,i){const{joins:o,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(l,c)=>{var h;const m=(h=e[l])!==null&&h!==void 0?h:[];if(e[l]=this.cloneDeep(c),m.length>0){const f=e[l].map(y=>y.presence_ref),g=m.filter(y=>f.indexOf(y.presence_ref)<0);e[l].unshift(...g)}r(l,m,c)}),this.map(a,(l,c)=>{let h=e[l];if(!h)return;const m=c.map(f=>f.presence_ref);h=h.filter(f=>m.indexOf(f.presence_ref)<0),e[l]=h,i(l,h,c),h.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Wg;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Wg||(Wg={}));var ga;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(ga||(ga={}));var Wr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Wr||(Wr={}));class Gf{constructor(e,n={config:{}},r){var i,o;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Kt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new gd(this,yr.join,this.params,this.timeout),this.rejoinTimer=new $0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Kt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Kt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Kt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Kt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Kt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(yr.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new ma(this),this.broadcastEndpointURL=V0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Kt.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,h=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(y=>y.filter))!==null&&i!==void 0?i:[],m=!!this.bindings[ga.PRESENCE]&&this.bindings[ga.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,f={},g={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:m}),postgres_changes:h,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(y=>e==null?void 0:e(Wr.CHANNEL_ERROR,y)),this._onClose(()=>e==null?void 0:e(Wr.CLOSED)),this.updateJoinPayload(Object.assign({config:g},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:y})=>{var v;if(this.socket.setAuth(),y===void 0){e==null||e(Wr.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,S=(v=_==null?void 0:_.length)!==null&&v!==void 0?v:0,w=[];for(let b=0;b<S;b++){const k=_[b],{filter:{event:T,schema:I,table:R,filter:j}}=k,P=y&&y[b];if(P&&P.event===T&&P.schema===I&&P.table===R&&P.filter===j)w.push(Object.assign(Object.assign({},k),{id:P.id}));else{this.unsubscribe(),this.state=Kt.errored,e==null||e(Wr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(Wr.SUBSCRIBED);return}}).receive("error",y=>{this.state=Kt.errored,e==null||e(Wr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Wr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Kt.joined&&e===ga.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;const o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const h=await l.json();c=h.error||h.message||c}catch{}return Promise.reject(new Error(c))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=h.body)===null||i===void 0?void 0:i.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,l,c;const h=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),h.receive("ok",()=>o("ok")),h.receive("error",()=>o("error")),h.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Kt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(yr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new gd(this,yr.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Kt.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new gd(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>wk){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,o;const a=e.toLocaleLowerCase(),{close:l,error:c,leave:h,join:m}=yr;if(r&&[l,c,h,m].indexOf(a)>=0&&r!==this._joinRef())return;let g=this._onMessage(a,n,r);if(n&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(y=>{var v,_,S;return((v=y.filter)===null||v===void 0?void 0:v.event)==="*"||((S=(_=y.filter)===null||_===void 0?void 0:_.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===a}).map(y=>y.callback(g,r)):(o=this.bindings[a])===null||o===void 0||o.filter(y=>{var v,_,S,w,b,k;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in y){const T=y.id,I=(v=y.filter)===null||v===void 0?void 0:v.event;return T&&((_=n.ids)===null||_===void 0?void 0:_.includes(T))&&(I==="*"||(I==null?void 0:I.toLocaleLowerCase())===((S=n.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const T=(b=(w=y==null?void 0:y.filter)===null||w===void 0?void 0:w.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return T==="*"||T===((k=n==null?void 0:n.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===a}).map(y=>{if(typeof g=="object"&&"ids"in g){const v=g.data,{schema:_,table:S,commit_timestamp:w,type:b,errors:k}=v;g=Object.assign(Object.assign({},{schema:_,table:S,commit_timestamp:w,eventType:b,new:{},old:{},errors:k}),this._getPayloadRecords(v))}y.callback(g,r)})}_isClosed(){return this.state===Kt.closed}_isJoined(){return this.state===Kt.joined}_isJoining(){return this.state===Kt.joining}_isLeaving(){return this.state===Kt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Gf.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(yr.close,{},e)}_onError(e){this._on(yr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Kt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Fg(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Fg(e.columns,e.old_record)),n}}const yd=()=>{},Il={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Pk=[1e3,2e3,5e3,1e4],jk=1e4,Ak=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ok{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Dh,this.transport=null,this.heartbeatIntervalMs=Il.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yd,this.ref=0,this.reconnectTimer=null,this.logger=yd,this.conn=null,this.sendBuffer=[],this.serializer=new xk,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>vo(async()=>{const{default:l}=await Promise.resolve().then(()=>wo);return{default:l}},void 0).then(({default:l})=>l(...a)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...a)=>o(...a)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Rh.websocket}`,this.httpEndpoint=V0(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=mk.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:_k}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case pa.connecting:return Xi.Connecting;case pa.open:return Xi.Open;case pa.closing:return Xi.Closing;default:return Xi.Closed}}isConnected(){return this.connectionState()===Xi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new Gf(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:r,payload:i,ref:o}=e,a=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(vk,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Il.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(h){this.log("error","error in heartbeat callback",h)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:o,ref:a}=n,l=a?`(${a})`:"",c=o.status||"";this.log("receive",`${c} ${r} ${i} ${l}`.trim(),o),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(i,o,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(yr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Ak],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:yk};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(yr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new $0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Il.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,o,a,l,c,h,m;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Dh,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Il.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:yd,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:f=>Pk[f-1]||jk,this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:(f,g)=>g(JSON.stringify(f)),this.decode=(m=e==null?void 0:e.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Kf extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Dt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Dk extends Kf{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Nh extends Kf{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const Jf=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>vo(async()=>{const{default:r}=await Promise.resolve().then(()=>wo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Rk=()=>Fe(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield vo(()=>Promise.resolve().then(()=>wo),void 0)).Response:Response}),Ih=t=>{if(Array.isArray(t))return t.map(n=>Ih(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=Ih(r)}),e},Lk=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},_d=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},Nk=(t,e,n)=>Fe(void 0,void 0,void 0,function*(){const r=yield Rk();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{const o=t.status||500,a=(i==null?void 0:i.statusCode)||o+"";e(new Dk(_d(i),o,a))}).catch(i=>{e(new Nh(_d(i),i))}):e(new Nh(_d(t),t))}),Ik=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(Lk(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),n))};function Ga(t,e,n,r,i,o){return Fe(this,void 0,void 0,function*(){return new Promise((a,l)=>{t(n,Ik(e,r,i,o)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>Nk(c,l,r))})})}function Ba(t,e,n,r){return Fe(this,void 0,void 0,function*(){return Ga(t,"GET",e,n,r)})}function pr(t,e,n,r,i){return Fe(this,void 0,void 0,function*(){return Ga(t,"POST",e,r,i,n)})}function Mh(t,e,n,r,i){return Fe(this,void 0,void 0,function*(){return Ga(t,"PUT",e,r,i,n)})}function Mk(t,e,n,r){return Fe(this,void 0,void 0,function*(){return Ga(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Qf(t,e,n,r,i){return Fe(this,void 0,void 0,function*(){return Ga(t,"DELETE",e,r,i,n)})}class zk{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return Fe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Dt(e))return{data:null,error:e};throw e}})}}var Z0;class Bk{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[Z0]="BlobDownloadBuilder",this.promise=null}asStream(){return new zk(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Fe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Dt(e))return{data:null,error:e};throw e}})}}Z0=Symbol.toStringTag;const Fk={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$g={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Uk{constructor(e,n={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=Jf(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,i){return Fe(this,void 0,void 0,function*(){try{let o;const a=Object.assign(Object.assign({},$g),i);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",a.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(l=Object.assign(Object.assign({},l),i.headers));const h=this._removeEmptyFolders(n),m=this._getFinalPath(h),f=yield(e=="PUT"?Mh:pr)(this.fetch,`${this.url}/object/${m}`,o,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:h,id:f.Id,fullPath:f.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Dt(o))return{data:null,error:o};throw o}})}upload(e,n,r){return Fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return Fe(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),a=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",n);try{let c;const h=Object.assign({upsert:$g.upsert},i),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",h.cacheControl)):(c=r,m["cache-control"]=`max-age=${h.cacheControl}`,m["content-type"]=h.contentType);const f=yield Mh(this.fetch,l.toString(),c,{headers:m});return{data:{path:o,fullPath:f.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Dt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return Fe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const o=yield pr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+o.url),l=a.searchParams.get("token");if(!l)throw new Kf("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}})}update(e,n,r){return Fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Fe(this,void 0,void 0,function*(){try{return{data:yield pr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Dt(i))return{data:null,error:i};throw i}})}copy(e,n,r){return Fe(this,void 0,void 0,function*(){try{return{data:{path:(yield pr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Dt(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return Fe(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),o=yield pr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Dt(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return Fe(this,void 0,void 0,function*(){try{const i=yield pr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${o}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Dt(i))return{data:null,error:i};throw i}})}download(e,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=o?`?${o}`:"",l=this._getFinalPath(e),c=()=>Ba(this.fetch,`${this.url}/${i}/${l}${a}`,{headers:this.headers,noResolveJson:!0});return new Bk(c,this.shouldThrowOnError)}info(e){return Fe(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Ba(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Ih(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}})}exists(e){return Fe(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Mk(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dt(r)&&r instanceof Nh){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&i.push(o);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&i.push(c);let h=i.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${h}`)}}}remove(e){return Fe(this,void 0,void 0,function*(){try{return{data:yield Qf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}})}list(e,n,r){return Fe(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Fk),n),{prefix:e||""});return{data:yield pr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Dt(i))return{data:null,error:i};throw i}})}listV2(e,n){return Fe(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield pr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const q0="2.78.0",Y0={"X-Client-Info":`storage-js/${q0}`};class Wk{constructor(e,n={},r,i){this.shouldThrowOnError=!1;const o=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Y0),n),this.fetch=Jf(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return Fe(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield Ba(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}})}getBucket(e){return Fe(this,void 0,void 0,function*(){try{return{data:yield Ba(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}})}createBucket(e){return Fe(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield pr(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Dt(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return Fe(this,void 0,void 0,function*(){try{return{data:yield Mh(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Fe(this,void 0,void 0,function*(){try{return{data:yield pr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Fe(this,void 0,void 0,function*(){try{return{data:yield Qf(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class $k{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Y0),n),this.fetch=Jf(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Fe(this,void 0,void 0,function*(){try{return{data:yield pr(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}})}listBuckets(e){return Fe(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Ba(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Fe(this,void 0,void 0,function*(){try{return{data:yield Qf(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}})}}const Xf={"X-Client-Info":`storage-js/${q0}`,"Content-Type":"application/json"};class G0 extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function $n(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class vd extends G0{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Hk extends G0{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var Hg;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Hg||(Hg={}));const ep=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>vo(async()=>{const{default:r}=await Promise.resolve().then(()=>wo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Vk=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Vg=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Zk=(t,e,n)=>Fe(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const i=t.status||500,o=t;if(typeof o.json=="function")o.json().then(a=>{const l=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||i+"";e(new vd(Vg(a),i,l))}).catch(()=>{const a=i+"",l=o.statusText||`HTTP ${i} error`;e(new vd(l,i,a))});else{const a=i+"",l=o.statusText||`HTTP ${i} error`;e(new vd(l,i,a))}}else e(new Hk(Vg(t),t))}),qk=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(Vk(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n)):i};function Yk(t,e,n,r,i,o){return Fe(this,void 0,void 0,function*(){return new Promise((a,l)=>{t(n,qk(e,r,i,o)).then(c=>{if(!c.ok)throw c;if(r!=null&&r.noResolveJson)return c;const h=c.headers.get("content-type");return!h||!h.includes("application/json")?{}:c.json()}).then(c=>a(c)).catch(c=>Zk(c,l,r))})})}function Hn(t,e,n,r,i){return Fe(this,void 0,void 0,function*(){return Yk(t,"POST",e,r,i,n)})}class Gk{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Xf),n),this.fetch=ep(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Fe(this,void 0,void 0,function*(){try{return{data:(yield Hn(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($n(n))return{data:null,error:n};throw n}})}getIndex(e,n){return Fe(this,void 0,void 0,function*(){try{return{data:yield Hn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($n(r))return{data:null,error:r};throw r}})}listIndexes(e){return Fe(this,void 0,void 0,function*(){try{return{data:yield Hn(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($n(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return Fe(this,void 0,void 0,function*(){try{return{data:(yield Hn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($n(r))return{data:null,error:r};throw r}})}}class Kk{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Xf),n),this.fetch=ep(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Fe(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Hn(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($n(n))return{data:null,error:n};throw n}})}getVectors(e){return Fe(this,void 0,void 0,function*(){try{return{data:yield Hn(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($n(n))return{data:null,error:n};throw n}})}listVectors(e){return Fe(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Hn(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($n(n))return{data:null,error:n};throw n}})}queryVectors(e){return Fe(this,void 0,void 0,function*(){try{return{data:yield Hn(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($n(n))return{data:null,error:n};throw n}})}deleteVectors(e){return Fe(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Hn(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($n(n))return{data:null,error:n};throw n}})}}class Jk{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Xf),n),this.fetch=ep(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Fe(this,void 0,void 0,function*(){try{return{data:(yield Hn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($n(n))return{data:null,error:n};throw n}})}getBucket(e){return Fe(this,void 0,void 0,function*(){try{return{data:yield Hn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($n(n))return{data:null,error:n};throw n}})}listBuckets(){return Fe(this,arguments,void 0,function*(e={}){try{return{data:yield Hn(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($n(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Fe(this,void 0,void 0,function*(){try{return{data:(yield Hn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($n(n))return{data:null,error:n};throw n}})}}class Qk extends Jk{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new Xk(this.url,this.headers,e,this.fetch)}}class Xk extends Gk{constructor(e,n,r,i){super(e,n,i),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Fe(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Fe(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Fe(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Fe(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new eE(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class eE extends Kk{constructor(e,n,r,i,o){super(e,n,o),this.vectorBucketName=r,this.indexName=i}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Fe(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Fe(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Fe(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Fe(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Fe(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class tE extends Wk{constructor(e,n={},r,i){super(e,n,r,i)}from(e){return new Uk(this.url,this.headers,e,this.fetch)}get vectors(){return new Qk(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new $k(this.url+"/iceberg",this.headers,this.fetch)}}const nE="2.78.0";let ra="";typeof Deno<"u"?ra="deno":typeof document<"u"?ra="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ra="react-native":ra="node";const rE={"X-Client-Info":`supabase-js-${ra}/${nE}`},iE={headers:rE},oE={schema:"public"},sE={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},aE={},lE=t=>{let e;return t?e=t:typeof fetch>"u"?e=k0:e=fetch,(...n)=>e(...n)},uE=()=>typeof Headers>"u"?E0:Headers,cE=(t,e,n)=>{const r=lE(n),i=uE();return async(o,a)=>{var l;const c=(l=await e())!==null&&l!==void 0?l:t;let h=new i(a==null?void 0:a.headers);return h.has("apikey")||h.set("apikey",t),h.has("Authorization")||h.set("Authorization",`Bearer ${c}`),r(o,Object.assign(Object.assign({},a),{headers:h}))}};function dE(t){return t.endsWith("/")?t:t+"/"}function hE(t,e){var n,r;const{db:i,auth:o,realtime:a,global:l}=t,{db:c,auth:h,realtime:m,global:f}=e,g={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},h),o),realtime:Object.assign(Object.assign({},m),a),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?g.accessToken=t.accessToken:delete g.accessToken,g}function fE(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(dE(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const K0="2.78.0",Mo=30*1e3,zh=3,wd=zh*Mo,pE="http://localhost:9999",mE="supabase.auth.token",gE={"X-Client-Info":`gotrue-js/${K0}`},Bh="X-Supabase-Api-Version",J0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},yE=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,_E=10*60*1e3;class Fa extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function $e(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class vE extends Fa{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function wE(t){return $e(t)&&t.name==="AuthApiError"}class eo extends Fa{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Ni extends Fa{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class cr extends Ni{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function xE(t){return $e(t)&&t.name==="AuthSessionMissingError"}class Ao extends Ni{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ml extends Ni{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class zl extends Ni{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function bE(t){return $e(t)&&t.name==="AuthImplicitGrantRedirectError"}class Zg extends Ni{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Fh extends Ni{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function xd(t){return $e(t)&&t.name==="AuthRetryableFetchError"}class qg extends Ni{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Uh extends Ni{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ru="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Yg=` 	
\r=`.split(""),SE=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Yg.length;e+=1)t[Yg[e].charCodeAt(0)]=-2;for(let e=0;e<Ru.length;e+=1)t[Ru[e].charCodeAt(0)]=e;return t})();function Gg(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Ru[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Ru[r]),e.queuedBits-=6}}function Q0(t,e,n){const r=SE[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Kg(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=a=>{CE(a,r,n)};for(let a=0;a<t.length;a+=1)Q0(t.charCodeAt(a),i,o);return e.join("")}function kE(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function EE(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}kE(r,e)}}function CE(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function os(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)Q0(t.charCodeAt(i),n,r);return new Uint8Array(e)}function TE(t){const e=[];return EE(t,n=>e.push(n)),new Uint8Array(e)}function oo(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>Gg(i,n,r)),Gg(null,n,r),e.join("")}function PE(t){return Math.round(Date.now()/1e3)+t}function jE(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const xn=()=>typeof window<"u"&&typeof document<"u",Wi={tested:!1,writable:!1},X0=()=>{if(!xn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Wi.tested)return Wi.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Wi.tested=!0,Wi.writable=!0}catch{Wi.tested=!0,Wi.writable=!1}return Wi.writable};function AE(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const ew=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>vo(async()=>{const{default:r}=await Promise.resolve().then(()=>wo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},OE=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",zo=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},$i=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ui=async(t,e)=>{await t.removeItem(e)};class cc{constructor(){this.promise=new cc.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}cc.promiseConstructor=Promise;function bd(t){const e=t.split(".");if(e.length!==3)throw new Uh("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!yE.test(e[r]))throw new Uh("JWT not in base64url format");return{header:JSON.parse(Kg(e[0])),payload:JSON.parse(Kg(e[1])),signature:os(e[2]),raw:{header:e[0],payload:e[1]}}}async function DE(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function RE(t,e){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await t(o);if(!e(o,null,a)){r(a);return}}catch(a){if(!e(o,a)){i(a);return}}})()})}function LE(t){return("0"+t.toString(16)).substr(-2)}function NE(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,LE).join("")}async function IE(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function ME(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await IE(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Oo(t,e,n=!1){const r=NE();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await zo(t,`${e}-code-verifier`,i);const o=await ME(r);return[o,r===o?"plain":"s256"]}const zE=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function BE(t){const e=t.headers.get(Bh);if(!e||!e.match(zE))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function FE(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function UE(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const WE=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Do(t){if(!WE.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Sd(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function $E(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function Jg(t){return JSON.parse(JSON.stringify(t))}const Gi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),HE=[502,503,504];async function Qg(t){var e;if(!OE(t))throw new Fh(Gi(t),0);if(HE.includes(t.status))throw new Fh(Gi(t),t.status);let n;try{n=await t.json()}catch(o){throw new eo(Gi(o),o)}let r;const i=BE(t);if(i&&i.getTime()>=J0["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new qg(Gi(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new cr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new qg(Gi(n),t.status,n.weak_password.reasons);throw new vE(Gi(n),t.status||500,r)}const VE=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function Ye(t,e,n,r){var i;const o=Object.assign({},r==null?void 0:r.headers);o[Bh]||(o[Bh]=J0["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await ZE(t,e,n+l,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function ZE(t,e,n,r,i,o){const a=VE(e,r,i,o);let l;try{l=await t(n,Object.assign({},a))}catch(c){throw console.error(c),new Fh(Gi(c),0)}if(l.ok||await Qg(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await Qg(c)}}function dr(t){var e;let n=null;GE(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=PE(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Xg(t){const e=dr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function gi(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function qE(t){return{data:t,error:null}}function YE(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=t,a=xs(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function ey(t){return t}function GE(t){return t.access_token&&t.refresh_token&&t.expires_in}const kd=["global","local","others"];class KE{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=ew(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=kd[0]){if(kd.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${kd.join(", ")}`);try{return await Ye(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if($e(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ye(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:gi})}catch(r){if($e(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=xs(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Ye(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:YE,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if($e(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ye(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:gi})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,o,a,l,c;try{const h={nextPage:null,lastPage:0,total:0},m=await Ye(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:ey});if(m.error)throw m.error;const f=await m.json(),g=(a=m.headers.get("x-total-count"))!==null&&a!==void 0?a:0,y=(c=(l=m.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(v=>{const _=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(v.split(";")[1].split("=")[1]);h[`${S}Page`]=_}),h.total=parseInt(g)),{data:Object.assign(Object.assign({},f),h),error:null}}catch(h){if($e(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){Do(e);try{return await Ye(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:gi})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Do(e);try{return await Ye(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:gi})}catch(r){if($e(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Do(e);try{return await Ye(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:gi})}catch(r){if($e(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Do(e.userId);try{const{data:n,error:r}=await Ye(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if($e(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Do(e.userId),Do(e.id);try{return{data:await Ye(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,o,a,l,c;try{const h={nextPage:null,lastPage:0,total:0},m=await Ye(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:ey});if(m.error)throw m.error;const f=await m.json(),g=(a=m.headers.get("x-total-count"))!==null&&a!==void 0?a:0,y=(c=(l=m.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(v=>{const _=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(v.split(";")[1].split("=")[1]);h[`${S}Page`]=_}),h.total=parseInt(g)),{data:Object.assign(Object.assign({},f),h),error:null}}catch(h){if($e(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(e){try{return await Ye(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Ye(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await Ye(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if($e(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Ye(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Ye(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if($e(n))return{data:null,error:n};throw n}}}function ty(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Ro={debug:!!(globalThis&&X0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class tw extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class JE extends tw{}async function QE(t,e,n){Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new JE(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ro.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function XE(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function nw(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function eC(t){return parseInt(t,16)}function tC(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function nC(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:a,notBefore:l,requestId:c,resources:h,scheme:m,uri:f,version:g}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(g!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${g}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const y=nw(t.address),v=m?`${m}://${r}`:r,_=t.statement?`${t.statement}
`:"",S=`${v} wants you to sign in with your Ethereum account:
${y}

${_}`;let w=`URI: ${f}
Version: ${g}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${o.toISOString()}`;if(i&&(w+=`
Expiration Time: ${i.toISOString()}`),l&&(w+=`
Not Before: ${l.toISOString()}`),c&&(w+=`
Request ID: ${c}`),h){let b=`
Resources:`;for(const k of h){if(!k||typeof k!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${k}`);b+=`
- ${k}`}w+=b}return`${S}
${w}`}class Yt extends Error{constructor({message:e,code:n,cause:r,name:i}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class Lu extends Yt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function rC({error:t,options:e}){var n,r,i;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Yt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Yt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Yt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Yt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Yt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Yt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Yt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Yt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(rw(a)){if(o.rp.id!==a)return new Yt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Yt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Yt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Yt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Yt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function iC({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Yt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Yt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(rw(r)){if(n.rpId!==r)return new Yt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Yt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Yt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Yt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class oC{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const sC=new oC;function aC(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=xs(t,["challenge","user","excludeCredentials"]),o=os(e).buffer,a=Object.assign(Object.assign({},n),{id:os(n.id).buffer}),l=Object.assign(Object.assign({},i),{challenge:o,user:a});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const h=r[c];l.excludeCredentials[c]=Object.assign(Object.assign({},h),{id:os(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return l}function lC(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=xs(t,["challenge","allowCredentials"]),i=os(e).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const l=n[a];o.allowCredentials[a]=Object.assign(Object.assign({},l),{id:os(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return o}function uC(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:oo(new Uint8Array(t.response.attestationObject)),clientDataJSON:oo(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function cC(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:oo(new Uint8Array(i.authenticatorData)),clientDataJSON:oo(new Uint8Array(i.clientDataJSON)),signature:oo(new Uint8Array(i.signature)),userHandle:i.userHandle?oo(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function rw(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function ny(){var t,e;return!!(xn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function dC(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Lu("Browser returned unexpected credential type",e)}:{data:null,error:new Lu("Empty credential response",e)}}catch(e){return{data:null,error:rC({error:e,options:t})}}}async function hC(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Lu("Browser returned unexpected credential type",e)}:{data:null,error:new Lu("Empty credential response",e)}}catch(e){return{data:null,error:iC({error:e,options:t})}}}const fC={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},pC={userVerification:"preferred",hints:["security-key"]};function Nu(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const o in i){const a=i[o];if(a!==void 0)if(Array.isArray(a))r[o]=a;else if(n(a))r[o]=a;else if(e(a)){const l=r[o];e(l)?r[o]=Nu(l,a):r[o]=Nu(a)}else r[o]=a}return r}function mC(t,e){return Nu(fC,t,e||{})}function gC(t,e){return Nu(pC,t,e||{})}class yC{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},o){try{const{data:a,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:l};const c=i??sC.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:h}=a.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${r}`),h.displayName||(h.displayName=h.name)}switch(a.webauthn.type){case"create":{const h=mC(a.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:m,error:f}=await dC({publicKey:h,signal:c});return m?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:m}},error:null}:{data:null,error:f}}case"request":{const h=gC(a.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:m,error:f}=await hC(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:h,signal:c}));return m?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:m}},error:null}:{data:null,error:f}}}}catch(a){return $e(a)?{data:null,error:a}:{data:null,error:new eo("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},o){if(!n)return{data:null,error:new Fa("rpId is required for WebAuthn authentication")};try{if(!ny())return{data:null,error:new eo("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!a)return{data:null,error:l};const{webauthn:c}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(a){return $e(a)?{data:null,error:a}:{data:null,error:new eo("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},o){if(!n)return{data:null,error:new Fa("rpId is required for WebAuthn registration")};try{if(!ny())return{data:null,error:new eo("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(m=>{var f;return(f=m.data)===null||f===void 0?void 0:f.all.find(g=>g.factor_type==="webauthn"&&g.friendly_name===e&&g.status!=="unverified")}).then(m=>m?this.client.mfa.unenroll({factorId:m==null?void 0:m.id}):void 0),{data:null,error:l};const{data:c,error:h}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return c?this._verify({factorId:a.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:h}}catch(a){return $e(a)?{data:null,error:a}:{data:null,error:new eo("Unexpected error in register",a)}}}}XE();const _C={url:pE,storageKey:mE,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:gE,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ry(t,e,n){return await n()}const Lo={};class Ua{get jwks(){var e,n;return(n=(e=Lo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Lo[this.storageKey]=Object.assign(Object.assign({},Lo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Lo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Lo[this.storageKey]=Object.assign(Object.assign({},Lo[this.storageKey]),{cachedAt:e})}constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ua.nextInstanceID,Ua.nextInstanceID+=1,this.instanceID>0&&xn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},_C),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new KE({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=ew(i.fetch),this.lock=i.lock||ry,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:xn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=QE:this.lock=ry,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new yC(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:X0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ty(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=ty(this.memoryStorage)),xn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${K0}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=AE(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),xn()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),bE(o)){const c=(e=o.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return $e(n)?{error:n}:{error:new eo("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const o=await Ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:dr}),{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,h=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(o){if($e(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var n,r,i;try{let o;if("email"in e){const{email:m,password:f,options:g}=e;let y=null,v=null;this.flowType==="pkce"&&([y,v]=await Oo(this.storage,this.storageKey)),o=await Ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:m,password:f,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:y,code_challenge_method:v},xform:dr})}else if("phone"in e){const{phone:m,password:f,options:g}=e;o=await Ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:f,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},channel:(i=g==null?void 0:g.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:dr})}else throw new Ml("You must provide either an email or phone number and a password");const{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,h=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(o){if($e(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:a,options:l}=e;n=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Xg})}else if("phone"in e){const{phone:o,password:a,options:l}=e;n=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Xg})}else throw new Ml("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Ao}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if($e(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,o,a,l,c,h,m,f,g;let y,v;if("message"in e)y=e.message,v=e.signature;else{const{chain:_,wallet:S,statement:w,options:b}=e;let k;if(xn())if(typeof S=="object")k=S;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")k=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=S}const T=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href),I=await k.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!I||I.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const R=nw(I[0]);let j=(r=b==null?void 0:b.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!j){const A=await k.request({method:"eth_chainId"});j=eC(A)}const P={domain:T.host,address:R,statement:w,uri:T.href,version:"1",chainId:j,nonce:(i=b==null?void 0:b.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(o=b==null?void 0:b.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(l=b==null?void 0:b.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=b==null?void 0:b.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(h=b==null?void 0:b.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(m=b==null?void 0:b.signInWithEthereum)===null||m===void 0?void 0:m.resources};y=nC(P),v=await k.request({method:"personal_sign",params:[tC(y),R]})}try{const{data:_,error:S}=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:v},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:dr});if(S)throw S;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new Ao}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:S})}catch(_){if($e(_))return{data:{user:null,session:null},error:_};throw _}}async signInWithSolana(e){var n,r,i,o,a,l,c,h,m,f,g,y;let v,_;if("message"in e)v=e.message,_=e.signature;else{const{chain:S,wallet:w,statement:b,options:k}=e;let T;if(xn())if(typeof w=="object")T=w;else{const R=window;if("solana"in R&&typeof R.solana=="object"&&("signIn"in R.solana&&typeof R.solana.signIn=="function"||"signMessage"in R.solana&&typeof R.solana.signMessage=="function"))T=R.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=w}const I=new URL((n=k==null?void 0:k.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in T&&T.signIn){const R=await T.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k==null?void 0:k.signInWithSolana),{version:"1",domain:I.host,uri:I.href}),b?{statement:b}:null));let j;if(Array.isArray(R)&&R[0]&&typeof R[0]=="object")j=R[0];else if(R&&typeof R=="object"&&"signedMessage"in R&&"signature"in R)j=R;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)v=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),_=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in T)||typeof T.signMessage!="function"||!("publicKey"in T)||typeof T!="object"||!T.publicKey||!("toBase58"in T.publicKey)||typeof T.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${I.host} wants you to sign in with your Solana account:`,T.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${I.href}`,`Issued At: ${(i=(r=k==null?void 0:k.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=k==null?void 0:k.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((a=k==null?void 0:k.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((l=k==null?void 0:k.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((c=k==null?void 0:k.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((h=k==null?void 0:k.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((f=(m=k==null?void 0:k.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||f===void 0)&&f.length?["Resources",...k.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const R=await T.signMessage(new TextEncoder().encode(v),"utf8");if(!R||!(R instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=R}}try{const{data:S,error:w}=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:oo(_)},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:dr});if(w)throw w;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new Ao}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:w})}catch(S){if($e(S))return{data:{user:null,session:null},error:S};throw S}}async _exchangeCodeForSession(e){const n=await $i(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:o,error:a}=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:dr});if(await ui(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Ao}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:a})}catch(o){if($e(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:o,nonce:a}=e,l=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:dr}),{data:c,error:h}=l;return h?{data:{user:null,session:null},error:h}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ao}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:h})}catch(n){if($e(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,i,o,a;try{if("email"in e){const{email:l,options:c}=e;let h=null,m=null;this.flowType==="pkce"&&([h,m]=await Oo(this.storage,this.storageKey));const{error:f}=await Ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:h,code_challenge_method:m},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:l,options:c}=e,{data:h,error:m}=await Ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:m}}throw new Ml("You must provide either an email or phone number.")}catch(l){if($e(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,r;try{let i,o;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await Ye(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:dr});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,h=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(i){if($e(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,r,i;try{let o=null,a=null;return this.flowType==="pkce"&&([o,a]=await Oo(this.storage,this.storageKey)),await Ye(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:qE})}catch(o){if($e(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new cr;const{error:i}=await Ye(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if($e(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:o}=e,{error:a}=await Ye(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:i,options:o}=e,{data:a,error:l}=await Ye(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new Ml("You must provide either an email or phone number and a type")}catch(n){if($e(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await $i(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<wd:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await $i(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=Sd()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=$E(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:gi}):await this._useSession(async n=>{var r,i,o;const{data:a,error:l}=n;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new cr}:await Ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:gi})})}catch(n){if($e(n))return xE(n)&&(await this._removeSession(),await ui(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new cr;const a=i.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Oo(this.storage,this.storageKey));const{data:h,error:m}=await Ye(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:gi});if(m)throw m;return a.user=h.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if($e(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new cr;const n=Date.now()/1e3;let r=n,i=!0,o=null;const{payload:a}=bd(e.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{data:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if($e(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:l}=n;if(l)throw l;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new cr;const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if($e(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!xn())throw new zl("No browser detected.");if(e.error||e.error_description||e.error_code)throw new zl(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Zg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new zl("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Zg("No code detected.");const{data:b,error:k}=await this._exchangeCodeForSession(e.code);if(k)throw k;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:a,expires_in:l,expires_at:c,token_type:h}=e;if(!o||!l||!a||!h)throw new zl("No session defined in URL");const m=Math.round(Date.now()/1e3),f=parseInt(l);let g=m+f;c&&(g=parseInt(c));const y=g-m;y*1e3<=Mo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${f}s`);const v=g-f;m-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,g,m):m-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,g,m);const{data:_,error:S}=await this._getUser(o);if(S)throw S;const w={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:f,expires_at:g,refresh_token:a,token_type:h,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(r){if($e(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await $i(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{error:o};const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(wE(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await ui(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=jE(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Oo(this.storage,this.storageKey,!0));try{return await Ye(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if($e(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var a,l,c,h,m;const{data:f,error:g}=o;if(g)throw g;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ye(this.fetch,"GET",y,{headers:this.headers,jwt:(m=(h=f.session)===null||h===void 0?void 0:h.access_token)!==null&&m!==void 0?m:void 0})});if(i)throw i;return xn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if($e(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:o}}=n;if(i)throw i;const{options:a,provider:l,token:c,access_token:h,nonce:m}=e,f=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:c,access_token:h,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:dr}),{data:g,error:y}=f;return y?{data:{user:null,session:null},error:y}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new Ao}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("USER_UPDATED",g.session)),{data:g,error:y})}catch(i){if($e(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:a}=n;if(a)throw a;return await Ye(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await RE(async i=>(i>0&&await DE(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await Ye(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:dr})),(i,o)=>{const a=200*Math.pow(2,i);return o&&xd(o)&&Date.now()+a-r<Mo})}catch(r){if(this._debug(n,"error",r),$e(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),xn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await $i(this.storage,this.storageKey);if(i&&this.userStorage){let a=await $i(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await zo(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:Sd()}else if(i&&!i.user&&!i.user){const a=await $i(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await ui(this.storage,this.storageKey+"-user"),await zo(this.storage,this.storageKey,i)):i.user=Sd()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<wd;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${wd}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),xd(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(i.access_token);!l&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new cr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new cc;const{data:o,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new cr;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={data:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(i,"error",o),$e(o)){const a={data:null,error:o};return xd(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(c){o.push(c)}});if(await Promise.all(a),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await zo(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const o=Jg(i);await zo(this.storage,this.storageKey,o)}else{const i=Jg(n);await zo(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await ui(this.storage,this.storageKey),await ui(this.storage,this.storageKey+"-code-verifier"),await ui(this.storage,this.storageKey+"-user"),this.userStorage&&await ui(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&xn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Mo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Mo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Mo}ms, refresh threshold is ${zh} ticks`),i<=zh&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof tw)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!xn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,a]=await Oo(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(l.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?{data:null,error:o}:await Ye(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:a}=n;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:h}=await Ye(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(e.factorType==="totp"&&c.type==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?uC(e.webauthn.credential_response):cC(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:c}=await Ye(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(n){if($e(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=await Ye(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:l}=a;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:aC(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:lC(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if($e(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=bd(r.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(m=>m.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const h=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?{data:null,error:i}:r?await Ye(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):{data:null,error:new cr}})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return{data:null,error:o};if(!i)return{data:null,error:new cr};const a=await Ye(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&xn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if($e(r))return{data:null,error:r};throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return{data:null,error:o};if(!i)return{data:null,error:new cr};const a=await Ye(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&xn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if($e(r))return{data:null,error:r};throw r}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(l=>l.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+_E>i)return r;const{data:o,error:a}=await Ye(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:y,error:v}=await this.getSession();if(v||!y.session)return{data:null,error:v};r=y.session.access_token}const{header:i,payload:o,signature:a,raw:{header:l,payload:c}}=bd(r);n!=null&&n.allowExpired||FE(o.exp);const h=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!h){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:o,header:i,signature:a},error:null}}const m=UE(i.alg),f=await crypto.subtle.importKey("jwk",h,m,!0,["verify"]);if(!await crypto.subtle.verify(m,f,a,TE(`${l}.${c}`)))throw new Uh("Invalid JWT signature");return{data:{claims:o,header:i,signature:a},error:null}}catch(r){if($e(r))return{data:null,error:r};throw r}}}Ua.nextInstanceID=0;const vC=Ua;class wC extends vC{constructor(e){super(e)}}class xC{constructor(e,n,r){var i,o,a;this.supabaseUrl=e,this.supabaseKey=n;const l=fE(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,h={db:oE,realtime:aE,auth:Object.assign(Object.assign({},sE),{storageKey:c}),global:iE},m=hE(r??{},h);this.storageKey=(i=m.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=m.global.headers)!==null&&o!==void 0?o:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(f,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=m.auth)!==null&&a!==void 0?a:{},this.headers,m.global.fetch),this.fetch=cE(n,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new pk(new URL("rest/v1",l).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new tE(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new sk(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:o,storageKey:a,flowType:l,lock:c,debug:h},m,f){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new wC({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),m),storageKey:a,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:o,flowType:l,lock:c,debug:h,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Ok(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const bC=(t,e,n)=>new xC(t,e,n);function SC(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}SC()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ze=bC("https://qrouuoycvxxxutkxkxpp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFyb3V1b3ljdnh4eHV0a3hreHBwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIxODMyNDgsImV4cCI6MjA3Nzc1OTI0OH0.LXKVdTXNgHgoILlHJcSaGnzyWlaT0-oBxbEgl5ipA48");function kC(){console.log("GITHUB PAGES BASENAME ACTIVE");const t=ni(),[e,n]=J.useState(null);J.useEffect(()=>{(async()=>{console.log("App: Checking authentication...");const{data:{user:i}}=await ze.auth.getUser();if(console.log("App: User from auth:",i),!i)return console.log("App: No user found, redirecting to login"),t("/login");console.log("App: Fetching profile for user_id:",i.id);const{data:o,error:a}=await ze.from("profiles").select("user_id, role").eq("user_id",i.id).single();if(console.log("App: Profile data:",o,"Error:",a),!o)return console.log("App: No profile found, redirecting to login"),t("/login");console.log("App: Profile loaded successfully:",o),n(o)})()},[]);const r=async()=>{await ze.auth.signOut(),t("/login")};return e?d.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a202c 0%, #2d3748 100%)",padding:32},children:d.jsxs("div",{style:{maxWidth:800,margin:"0 auto"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:32,background:"#2d3748",border:"1px solid #4a5568",padding:20,borderRadius:12,boxShadow:"0 4px 6px rgba(0,0,0,0.5)"},children:[d.jsxs("h2",{style:{margin:0,color:"#e2e8f0"},children:["Welcome, ",e.role==="admin"?"Admin":"Appraiser"]}),d.jsx("button",{onClick:r,style:{padding:"10px 20px",background:"#ef4444",color:"white",border:"none",borderRadius:6,fontWeight:"bold",cursor:"pointer"},onMouseOver:i=>i.currentTarget.style.background="#dc2626",onMouseOut:i=>i.currentTarget.style.background="#ef4444",children:"Logout"})]}),e.role==="admin"?d.jsxs("div",{style:{display:"grid",gap:16},children:[d.jsxs(_t,{to:"/admin/claims",style:{background:"#2d3748",border:"1px solid #4a5568",padding:24,borderRadius:12,textDecoration:"none",color:"#e2e8f0",boxShadow:"0 4px 6px rgba(0,0,0,0.5)",transition:"transform 0.2s"},onMouseOver:i=>i.currentTarget.style.transform="translateY(-2px)",onMouseOut:i=>i.currentTarget.style.transform="translateY(0)",children:[d.jsx("div",{style:{fontSize:48,marginBottom:12},children:""}),d.jsx("h3",{style:{margin:0,marginBottom:8,color:"#e2e8f0"},children:"View All Claims"}),d.jsx("p",{style:{margin:0,color:"#a0aec0"},children:"View and manage all active claims in the system"})]}),d.jsxs(_t,{to:"/admin/claims/new",style:{background:"#2d3748",border:"1px solid #4a5568",padding:24,borderRadius:12,textDecoration:"none",color:"#e2e8f0",boxShadow:"0 4px 6px rgba(0,0,0,0.5)",transition:"transform 0.2s"},onMouseOver:i=>i.currentTarget.style.transform="translateY(-2px)",onMouseOut:i=>i.currentTarget.style.transform="translateY(0)",children:[d.jsx("div",{style:{fontSize:48,marginBottom:12},children:""}),d.jsx("h3",{style:{margin:0,marginBottom:8,color:"#e2e8f0"},children:"Create New Claim"}),d.jsx("p",{style:{margin:0,color:"#a0aec0"},children:"Start a new insurance claim with customer and vehicle details"})]}),d.jsxs(_t,{to:"/admin/claims?archived=true",style:{background:"#2d3748",border:"1px solid #4a5568",padding:24,borderRadius:12,textDecoration:"none",color:"#e2e8f0",boxShadow:"0 4px 6px rgba(0,0,0,0.5)",transition:"transform 0.2s"},onMouseOver:i=>i.currentTarget.style.transform="translateY(-2px)",onMouseOut:i=>i.currentTarget.style.transform="translateY(0)",children:[d.jsx("div",{style:{fontSize:48,marginBottom:12},children:""}),d.jsx("h3",{style:{margin:0,marginBottom:8,color:"#e2e8f0"},children:"Archived Claims"}),d.jsx("p",{style:{margin:0,color:"#a0aec0"},children:"View completed and archived claims for record keeping"})]}),d.jsxs(_t,{to:"/admin/vendors",style:{background:"#2d3748",border:"1px solid #4a5568",padding:24,borderRadius:12,textDecoration:"none",color:"#e2e8f0",boxShadow:"0 4px 6px rgba(0,0,0,0.5)",transition:"transform 0.2s"},onMouseOver:i=>i.currentTarget.style.transform="translateY(-2px)",onMouseOut:i=>i.currentTarget.style.transform="translateY(0)",children:[d.jsx("div",{style:{fontSize:48,marginBottom:12},children:""}),d.jsx("h3",{style:{margin:0,marginBottom:8,color:"#e2e8f0"},children:"Manage Vendors"}),d.jsx("p",{style:{margin:0,color:"#a0aec0"},children:"Add and edit vendors that provide payouts"})]}),d.jsxs(_t,{to:"/admin/payouts",style:{background:"#2d3748",border:"1px solid #4a5568",padding:24,borderRadius:12,textDecoration:"none",color:"#e2e8f0",boxShadow:"0 4px 6px rgba(0,0,0,0.5)",transition:"transform 0.2s"},onMouseOver:i=>i.currentTarget.style.transform="translateY(-2px)",onMouseOut:i=>i.currentTarget.style.transform="translateY(0)",children:[d.jsx("div",{style:{fontSize:48,marginBottom:12},children:""}),d.jsx("h3",{style:{margin:0,marginBottom:8,color:"#e2e8f0"},children:"Payout Dashboard"}),d.jsx("p",{style:{margin:0,color:"#a0aec0"},children:"View upcoming vendor payouts and revenue projections"})]}),d.jsxs(_t,{to:"/admin/kpi",style:{background:"#2d3748",border:"1px solid #4a5568",padding:24,borderRadius:12,textDecoration:"none",color:"#e2e8f0",boxShadow:"0 4px 6px rgba(0,0,0,0.5)",transition:"transform 0.2s"},onMouseOver:i=>i.currentTarget.style.transform="translateY(-2px)",onMouseOut:i=>i.currentTarget.style.transform="translateY(0)",children:[d.jsx("div",{style:{fontSize:48,marginBottom:12},children:""}),d.jsx("h3",{style:{margin:0,marginBottom:8,color:"#e2e8f0"},children:"KPI Dashboard"}),d.jsx("p",{style:{margin:0,color:"#a0aec0"},children:"Month-over-month performance metrics for meetings"})]})]}):d.jsxs("div",{style:{display:"grid",gap:16},children:[d.jsxs(_t,{to:"/my-claims",style:{background:"#2d3748",border:"1px solid #4a5568",padding:24,borderRadius:12,textDecoration:"none",color:"#e2e8f0",boxShadow:"0 4px 6px rgba(0,0,0,0.5)",transition:"transform 0.2s"},onMouseOver:i=>i.currentTarget.style.transform="translateY(-2px)",onMouseOut:i=>i.currentTarget.style.transform="translateY(0)",children:[d.jsx("div",{style:{fontSize:48,marginBottom:12},children:""}),d.jsx("h3",{style:{margin:0,marginBottom:8,color:"#e2e8f0"},children:"My Claims"}),d.jsx("p",{style:{margin:0,color:"#a0aec0"},children:"View claims assigned to you and manage appraisals"})]}),d.jsxs(_t,{to:"/my-claims?view=calendar",style:{background:"#2d3748",border:"1px solid #4a5568",padding:24,borderRadius:12,textDecoration:"none",color:"#e2e8f0",boxShadow:"0 4px 6px rgba(0,0,0,0.5)",transition:"transform 0.2s"},onMouseOver:i=>i.currentTarget.style.transform="translateY(-2px)",onMouseOut:i=>i.currentTarget.style.transform="translateY(0)",children:[d.jsx("div",{style:{fontSize:48,marginBottom:12},children:""}),d.jsx("h3",{style:{margin:0,marginBottom:8,color:"#e2e8f0"},children:"Calendar View"}),d.jsx("p",{style:{margin:0,color:"#a0aec0"},children:"View and schedule your claims on a monthly calendar"})]}),d.jsxs(_t,{to:"/my-routes",style:{background:"#2d3748",border:"1px solid #4a5568",padding:24,borderRadius:12,textDecoration:"none",color:"#e2e8f0",boxShadow:"0 4px 6px rgba(0,0,0,0.5)",transition:"transform 0.2s"},onMouseOver:i=>i.currentTarget.style.transform="translateY(-2px)",onMouseOut:i=>i.currentTarget.style.transform="translateY(0)",children:[d.jsx("div",{style:{fontSize:48,marginBottom:12},children:""}),d.jsx("h3",{style:{margin:0,marginBottom:8,color:"#e2e8f0"},children:"My Routes"}),d.jsx("p",{style:{margin:0,color:"#a0aec0"},children:"View routes and log mileage for tax records"})]})]})]})}):null}function EC(){const[t,e]=J.useState(""),[n,r]=J.useState(""),i=ni(),o=async()=>{console.log("Attempting login with:",t);const{data:a,error:l}=await ze.auth.signInWithPassword({email:t,password:n});if(l)return console.error("Login error:",l),alert(l.message);console.log("Login successful:",a),i("/")};return d.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1a202c 0%, #2d3748 100%)"},children:d.jsxs("div",{style:{background:"rgba(45, 55, 72, 0.85)",backdropFilter:"blur(10px)",padding:40,borderRadius:16,boxShadow:"0 15px 35px rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)",width:"100%",maxWidth:400},children:[d.jsx("h2",{style:{marginTop:0,marginBottom:32,textAlign:"center",color:"#e2e8f0"},children:"Auto Appraisal Login"}),d.jsxs("div",{style:{display:"grid",gap:16},children:[d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:8,fontWeight:"bold",color:"#e2e8f0"},children:"Email"}),d.jsx("input",{placeholder:"Enter your email",value:t,onChange:a=>e(a.target.value),style:{width:"100%",padding:12,fontSize:16,border:"1px solid #4a5568",borderRadius:6,boxSizing:"border-box",background:"#2d3748",color:"#e2e8f0"}})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:8,fontWeight:"bold",color:"#e2e8f0"},children:"Password"}),d.jsx("input",{placeholder:"Enter your password",type:"password",value:n,onChange:a=>r(a.target.value),style:{width:"100%",padding:12,fontSize:16,border:"1px solid #4a5568",borderRadius:6,boxSizing:"border-box",background:"#2d3748",color:"#e2e8f0"}})]}),d.jsx("button",{onClick:o,style:{width:"100%",padding:14,fontSize:16,fontWeight:"bold",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:6,cursor:"pointer",marginTop:8},onMouseOver:a=>a.currentTarget.style.background="linear-gradient(135deg, #764ba2 0%, #667eea 100%)",onMouseOut:a=>a.currentTarget.style.background="linear-gradient(135deg, #667eea 0%, #764ba2 100%)",children:"Sign In"})]})]})})}function iw(t,e){const n=J.useRef(e);J.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const CC=1;function TC(t){return Object.freeze({__version:CC,map:t})}function PC(t,e){return Object.freeze({...t,...e})}const ow=J.createContext(null),sw=ow.Provider;function aw(){const t=J.useContext(ow);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function jC(t){function e(n,r){const{instance:i,context:o}=t(n).current;return J.useImperativeHandle(r,()=>i),n.children==null?null:_a.createElement(sw,{value:o},n.children)}return J.forwardRef(e)}function AC(t){function e(n,r){const[i,o]=J.useState(!1),{instance:a}=t(n,o).current;J.useImperativeHandle(r,()=>a),J.useEffect(function(){i&&a.update()},[a,i,n.children]);const l=a._contentNode;return l?oc.createPortal(n.children,l):null}return J.forwardRef(e)}function OC(t){function e(n,r){const{instance:i}=t(n).current;return J.useImperativeHandle(r,()=>i),null}return J.forwardRef(e)}function lw(t,e){const n=J.useRef();J.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function tp(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function DC(t,e){return function(r,i){const o=aw(),a=t(tp(r,o),o);return iw(o.map,r.attribution),lw(a.current,r.eventHandlers),e(a.current,o,r,i),a}}var Wh={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(Js,function(n){var r="1.9.4";function i(s){var u,p,x,C;for(p=1,x=arguments.length;p<x;p++){C=arguments[p];for(u in C)s[u]=C[u]}return s}var o=Object.create||function(){function s(){}return function(u){return s.prototype=u,new s}}();function a(s,u){var p=Array.prototype.slice;if(s.bind)return s.bind.apply(s,p.call(arguments,1));var x=p.call(arguments,2);return function(){return s.apply(u,x.length?x.concat(p.call(arguments)):arguments)}}var l=0;function c(s){return"_leaflet_id"in s||(s._leaflet_id=++l),s._leaflet_id}function h(s,u,p){var x,C,U,X;return X=function(){x=!1,C&&(U.apply(p,C),C=!1)},U=function(){x?C=arguments:(s.apply(p,arguments),setTimeout(X,u),x=!0)},U}function m(s,u,p){var x=u[1],C=u[0],U=x-C;return s===x&&p?s:((s-C)%U+U)%U+C}function f(){return!1}function g(s,u){if(u===!1)return s;var p=Math.pow(10,u===void 0?6:u);return Math.round(s*p)/p}function y(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function v(s){return y(s).split(/\s+/)}function _(s,u){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var p in u)s.options[p]=u[p];return s.options}function S(s,u,p){var x=[];for(var C in s)x.push(encodeURIComponent(p?C.toUpperCase():C)+"="+encodeURIComponent(s[C]));return(!u||u.indexOf("?")===-1?"?":"&")+x.join("&")}var w=/\{ *([\w_ -]+) *\}/g;function b(s,u){return s.replace(w,function(p,x){var C=u[x];if(C===void 0)throw new Error("No value provided for variable "+p);return typeof C=="function"&&(C=C(u)),C})}var k=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function T(s,u){for(var p=0;p<s.length;p++)if(s[p]===u)return p;return-1}var I="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function R(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var j=0;function P(s){var u=+new Date,p=Math.max(0,16-(u-j));return j=u+p,window.setTimeout(s,p)}var A=window.requestAnimationFrame||R("RequestAnimationFrame")||P,F=window.cancelAnimationFrame||R("CancelAnimationFrame")||R("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function K(s,u,p){if(p&&A===P)s.call(u);else return A.call(window,a(s,u))}function N(s){s&&F.call(window,s)}var W={__proto__:null,extend:i,create:o,bind:a,get lastId(){return l},stamp:c,throttle:h,wrapNum:m,falseFn:f,formatNum:g,trim:y,splitWords:v,setOptions:_,getParamString:S,template:b,isArray:k,indexOf:T,emptyImageUrl:I,requestFn:A,cancelFn:F,requestAnimFrame:K,cancelAnimFrame:N};function E(){}E.extend=function(s){var u=function(){_(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},p=u.__super__=this.prototype,x=o(p);x.constructor=u,u.prototype=x;for(var C in this)Object.prototype.hasOwnProperty.call(this,C)&&C!=="prototype"&&C!=="__super__"&&(u[C]=this[C]);return s.statics&&i(u,s.statics),s.includes&&(Y(s.includes),i.apply(null,[x].concat(s.includes))),i(x,s),delete x.statics,delete x.includes,x.options&&(x.options=p.options?o(p.options):{},i(x.options,s.options)),x._initHooks=[],x.callInitHooks=function(){if(!this._initHooksCalled){p.callInitHooks&&p.callInitHooks.call(this),this._initHooksCalled=!0;for(var U=0,X=x._initHooks.length;U<X;U++)x._initHooks[U].call(this)}},u},E.include=function(s){var u=this.prototype.options;return i(this.prototype,s),s.options&&(this.prototype.options=u,this.mergeOptions(s.options)),this},E.mergeOptions=function(s){return i(this.prototype.options,s),this},E.addInitHook=function(s){var u=Array.prototype.slice.call(arguments,1),p=typeof s=="function"?s:function(){this[s].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(p),this};function Y(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=k(s)?s:[s];for(var u=0;u<s.length;u++)s[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var H={on:function(s,u,p){if(typeof s=="object")for(var x in s)this._on(x,s[x],u);else{s=v(s);for(var C=0,U=s.length;C<U;C++)this._on(s[C],u,p)}return this},off:function(s,u,p){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var x in s)this._off(x,s[x],u);else{s=v(s);for(var C=arguments.length===1,U=0,X=s.length;U<X;U++)C?this._off(s[U]):this._off(s[U],u,p)}return this},_on:function(s,u,p,x){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(s,u,p)===!1){p===this&&(p=void 0);var C={fn:u,ctx:p};x&&(C.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(C)}},_off:function(s,u,p){var x,C,U;if(this._events&&(x=this._events[s],!!x)){if(arguments.length===1){if(this._firingCount)for(C=0,U=x.length;C<U;C++)x[C].fn=f;delete this._events[s];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var X=this._listens(s,u,p);if(X!==!1){var le=x[X];this._firingCount&&(le.fn=f,this._events[s]=x=x.slice()),x.splice(X,1)}}},fire:function(s,u,p){if(!this.listens(s,p))return this;var x=i({},u,{type:s,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var C=this._events[s];if(C){this._firingCount=this._firingCount+1||1;for(var U=0,X=C.length;U<X;U++){var le=C[U],he=le.fn;le.once&&this.off(s,he,le.ctx),he.call(le.ctx||this,x)}this._firingCount--}}return p&&this._propagateEvent(x),this},listens:function(s,u,p,x){typeof s!="string"&&console.warn('"string" type argument expected');var C=u;typeof u!="function"&&(x=!!u,C=void 0,p=void 0);var U=this._events&&this._events[s];if(U&&U.length&&this._listens(s,C,p)!==!1)return!0;if(x){for(var X in this._eventParents)if(this._eventParents[X].listens(s,u,p,x))return!0}return!1},_listens:function(s,u,p){if(!this._events)return!1;var x=this._events[s]||[];if(!u)return!!x.length;p===this&&(p=void 0);for(var C=0,U=x.length;C<U;C++)if(x[C].fn===u&&x[C].ctx===p)return C;return!1},once:function(s,u,p){if(typeof s=="object")for(var x in s)this._on(x,s[x],u,!0);else{s=v(s);for(var C=0,U=s.length;C<U;C++)this._on(s[C],u,p,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[c(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[c(s)],this},_propagateEvent:function(s){for(var u in this._eventParents)this._eventParents[u].fire(s.type,i({layer:s.target,propagatedFrom:s.target},s),!0)}};H.addEventListener=H.on,H.removeEventListener=H.clearAllEventListeners=H.off,H.addOneTimeEventListener=H.once,H.fireEvent=H.fire,H.hasEventListeners=H.listens;var M=E.extend(H);function B(s,u,p){this.x=p?Math.round(s):s,this.y=p?Math.round(u):u}var D=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};B.prototype={clone:function(){return new B(this.x,this.y)},add:function(s){return this.clone()._add(z(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(z(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new B(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new B(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=D(this.x),this.y=D(this.y),this},distanceTo:function(s){s=z(s);var u=s.x-this.x,p=s.y-this.y;return Math.sqrt(u*u+p*p)},equals:function(s){return s=z(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=z(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+g(this.x)+", "+g(this.y)+")"}};function z(s,u,p){return s instanceof B?s:k(s)?new B(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new B(s.x,s.y):new B(s,u,p)}function $(s,u){if(s)for(var p=u?[s,u]:s,x=0,C=p.length;x<C;x++)this.extend(p[x])}$.prototype={extend:function(s){var u,p;if(!s)return this;if(s instanceof B||typeof s[0]=="number"||"x"in s)u=p=z(s);else if(s=Z(s),u=s.min,p=s.max,!u||!p)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=p.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(p.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(p.y,this.max.y)),this},getCenter:function(s){return z((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return z(this.min.x,this.max.y)},getTopRight:function(){return z(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var u,p;return typeof s[0]=="number"||s instanceof B?s=z(s):s=Z(s),s instanceof $?(u=s.min,p=s.max):u=p=s,u.x>=this.min.x&&p.x<=this.max.x&&u.y>=this.min.y&&p.y<=this.max.y},intersects:function(s){s=Z(s);var u=this.min,p=this.max,x=s.min,C=s.max,U=C.x>=u.x&&x.x<=p.x,X=C.y>=u.y&&x.y<=p.y;return U&&X},overlaps:function(s){s=Z(s);var u=this.min,p=this.max,x=s.min,C=s.max,U=C.x>u.x&&x.x<p.x,X=C.y>u.y&&x.y<p.y;return U&&X},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var u=this.min,p=this.max,x=Math.abs(u.x-p.x)*s,C=Math.abs(u.y-p.y)*s;return Z(z(u.x-x,u.y-C),z(p.x+x,p.y+C))},equals:function(s){return s?(s=Z(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function Z(s,u){return!s||s instanceof $?s:new $(s,u)}function re(s,u){if(s)for(var p=u?[s,u]:s,x=0,C=p.length;x<C;x++)this.extend(p[x])}re.prototype={extend:function(s){var u=this._southWest,p=this._northEast,x,C;if(s instanceof Q)x=s,C=s;else if(s instanceof re){if(x=s._southWest,C=s._northEast,!x||!C)return this}else return s?this.extend(fe(s)||ee(s)):this;return!u&&!p?(this._southWest=new Q(x.lat,x.lng),this._northEast=new Q(C.lat,C.lng)):(u.lat=Math.min(x.lat,u.lat),u.lng=Math.min(x.lng,u.lng),p.lat=Math.max(C.lat,p.lat),p.lng=Math.max(C.lng,p.lng)),this},pad:function(s){var u=this._southWest,p=this._northEast,x=Math.abs(u.lat-p.lat)*s,C=Math.abs(u.lng-p.lng)*s;return new re(new Q(u.lat-x,u.lng-C),new Q(p.lat+x,p.lng+C))},getCenter:function(){return new Q((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Q(this.getNorth(),this.getWest())},getSouthEast:function(){return new Q(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Q||"lat"in s?s=fe(s):s=ee(s);var u=this._southWest,p=this._northEast,x,C;return s instanceof re?(x=s.getSouthWest(),C=s.getNorthEast()):x=C=s,x.lat>=u.lat&&C.lat<=p.lat&&x.lng>=u.lng&&C.lng<=p.lng},intersects:function(s){s=ee(s);var u=this._southWest,p=this._northEast,x=s.getSouthWest(),C=s.getNorthEast(),U=C.lat>=u.lat&&x.lat<=p.lat,X=C.lng>=u.lng&&x.lng<=p.lng;return U&&X},overlaps:function(s){s=ee(s);var u=this._southWest,p=this._northEast,x=s.getSouthWest(),C=s.getNorthEast(),U=C.lat>u.lat&&x.lat<p.lat,X=C.lng>u.lng&&x.lng<p.lng;return U&&X},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,u){return s?(s=ee(s),this._southWest.equals(s.getSouthWest(),u)&&this._northEast.equals(s.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ee(s,u){return s instanceof re?s:new re(s,u)}function Q(s,u,p){if(isNaN(s)||isNaN(u))throw new Error("Invalid LatLng object: ("+s+", "+u+")");this.lat=+s,this.lng=+u,p!==void 0&&(this.alt=+p)}Q.prototype={equals:function(s,u){if(!s)return!1;s=fe(s);var p=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return p<=(u===void 0?1e-9:u)},toString:function(s){return"LatLng("+g(this.lat,s)+", "+g(this.lng,s)+")"},distanceTo:function(s){return ke.distance(this,fe(s))},wrap:function(){return ke.wrapLatLng(this)},toBounds:function(s){var u=180*s/40075017,p=u/Math.cos(Math.PI/180*this.lat);return ee([this.lat-u,this.lng-p],[this.lat+u,this.lng+p])},clone:function(){return new Q(this.lat,this.lng,this.alt)}};function fe(s,u,p){return s instanceof Q?s:k(s)&&typeof s[0]!="object"?s.length===3?new Q(s[0],s[1],s[2]):s.length===2?new Q(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Q(s.lat,"lng"in s?s.lng:s.lon,s.alt):u===void 0?null:new Q(s,u,p)}var Ee={latLngToPoint:function(s,u){var p=this.projection.project(s),x=this.scale(u);return this.transformation._transform(p,x)},pointToLatLng:function(s,u){var p=this.scale(u),x=this.transformation.untransform(s,p);return this.projection.unproject(x)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var u=this.projection.bounds,p=this.scale(s),x=this.transformation.transform(u.min,p),C=this.transformation.transform(u.max,p);return new $(x,C)},infinite:!1,wrapLatLng:function(s){var u=this.wrapLng?m(s.lng,this.wrapLng,!0):s.lng,p=this.wrapLat?m(s.lat,this.wrapLat,!0):s.lat,x=s.alt;return new Q(p,u,x)},wrapLatLngBounds:function(s){var u=s.getCenter(),p=this.wrapLatLng(u),x=u.lat-p.lat,C=u.lng-p.lng;if(x===0&&C===0)return s;var U=s.getSouthWest(),X=s.getNorthEast(),le=new Q(U.lat-x,U.lng-C),he=new Q(X.lat-x,X.lng-C);return new re(le,he)}},ke=i({},Ee,{wrapLng:[-180,180],R:6371e3,distance:function(s,u){var p=Math.PI/180,x=s.lat*p,C=u.lat*p,U=Math.sin((u.lat-s.lat)*p/2),X=Math.sin((u.lng-s.lng)*p/2),le=U*U+Math.cos(x)*Math.cos(C)*X*X,he=2*Math.atan2(Math.sqrt(le),Math.sqrt(1-le));return this.R*he}}),ae=6378137,be={R:ae,MAX_LATITUDE:85.0511287798,project:function(s){var u=Math.PI/180,p=this.MAX_LATITUDE,x=Math.max(Math.min(p,s.lat),-p),C=Math.sin(x*u);return new B(this.R*s.lng*u,this.R*Math.log((1+C)/(1-C))/2)},unproject:function(s){var u=180/Math.PI;return new Q((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*u,s.x*u/this.R)},bounds:function(){var s=ae*Math.PI;return new $([-s,-s],[s,s])}()};function Ce(s,u,p,x){if(k(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=u,this._c=p,this._d=x}Ce.prototype={transform:function(s,u){return this._transform(s.clone(),u)},_transform:function(s,u){return u=u||1,s.x=u*(this._a*s.x+this._b),s.y=u*(this._c*s.y+this._d),s},untransform:function(s,u){return u=u||1,new B((s.x/u-this._b)/this._a,(s.y/u-this._d)/this._c)}};function Te(s,u,p,x){return new Ce(s,u,p,x)}var nt=i({},ke,{code:"EPSG:3857",projection:be,transformation:function(){var s=.5/(Math.PI*be.R);return Te(s,.5,-s,.5)}()}),O=i({},nt,{code:"EPSG:900913"});function ue(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function se(s,u){var p="",x,C,U,X,le,he;for(x=0,U=s.length;x<U;x++){for(le=s[x],C=0,X=le.length;C<X;C++)he=le[C],p+=(C?"L":"M")+he.x+" "+he.y;p+=u?me.svg?"z":"x":""}return p||"M0 0"}var G=document.documentElement.style,q="ActiveXObject"in window,ne=q&&!document.addEventListener,ce="msLaunchUri"in navigator&&!("documentMode"in document),pe=ye("webkit"),ie=ye("android"),ge=ye("android 2")||ye("android 3"),ve=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),_e=ie&&ye("Google")&&ve<537&&!("AudioNode"in window),Pe=!!window.opera,et=!ce&&ye("chrome"),Re=ye("gecko")&&!pe&&!Pe&&!q,st=!et&&ye("safari"),dt=ye("phantom"),lt="OTransition"in G,Pt=navigator.platform.indexOf("Win")===0,Ke=q&&"transition"in G,wt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ge,$t="MozPerspective"in G,Bt=!window.L_DISABLE_3D&&(Ke||wt||$t)&&!lt&&!dt,It=typeof orientation<"u"||ye("mobile"),Mn=It&&pe,Pn=It&&wt,dn=!window.PointerEvent&&window.MSPointerEvent,zn=!!(window.PointerEvent||dn),jt="ontouchstart"in window||!!window.TouchEvent,Ht=!window.L_NO_TOUCH&&(jt||zn),Bn=It&&Pe,hn=It&&Re,Lr=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,fn=function(){var s=!1;try{var u=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",f,u),window.removeEventListener("testPassiveEventSupport",f,u)}catch{}return s}(),on=function(){return!!document.createElement("canvas").getContext}(),ri=!!(document.createElementNS&&ue("svg").createSVGRect),Es=!!ri&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),te=!ri&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var u=s.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}}(),oe=navigator.platform.indexOf("Mac")===0,de=navigator.platform.indexOf("Linux")===0;function ye(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var me={ie:q,ielt9:ne,edge:ce,webkit:pe,android:ie,android23:ge,androidStock:_e,opera:Pe,chrome:et,gecko:Re,safari:st,phantom:dt,opera12:lt,win:Pt,ie3d:Ke,webkit3d:wt,gecko3d:$t,any3d:Bt,mobile:It,mobileWebkit:Mn,mobileWebkit3d:Pn,msPointer:dn,pointer:zn,touch:Ht,touchNative:jt,mobileOpera:Bn,mobileGecko:hn,retina:Lr,passiveEvents:fn,canvas:on,svg:ri,vml:te,inlineSvg:Es,mac:oe,linux:de},Be=me.msPointer?"MSPointerDown":"pointerdown",Ve=me.msPointer?"MSPointerMove":"pointermove",Le=me.msPointer?"MSPointerUp":"pointerup",Me=me.msPointer?"MSPointerCancel":"pointercancel",Ae={touchstart:Be,touchmove:Ve,touchend:Le,touchcancel:Me},je={touchstart:Je,touchmove:We,touchend:We,touchcancel:We},Ue={},Ne=!1;function Ze(s,u,p){return u==="touchstart"&&De(),je[u]?(p=je[u].bind(this,p),s.addEventListener(Ae[u],p,!1),p):(console.warn("wrong event specified:",u),f)}function ct(s,u,p){if(!Ae[u]){console.warn("wrong event specified:",u);return}s.removeEventListener(Ae[u],p,!1)}function V(s){Ue[s.pointerId]=s}function Se(s){Ue[s.pointerId]&&(Ue[s.pointerId]=s)}function Ge(s){delete Ue[s.pointerId]}function De(){Ne||(document.addEventListener(Be,V,!0),document.addEventListener(Ve,Se,!0),document.addEventListener(Le,Ge,!0),document.addEventListener(Me,Ge,!0),Ne=!0)}function We(s,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var p in Ue)u.touches.push(Ue[p]);u.changedTouches=[u],s(u)}}function Je(s,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&sn(u),We(s,u)}function xt(s){var u={},p,x;for(x in s)p=s[x],u[x]=p&&p.bind?p.bind(s):p;return s=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var ht=200;function pt(s,u){s.addEventListener("dblclick",u);var p=0,x;function C(U){if(U.detail!==1){x=U.detail;return}if(!(U.pointerType==="mouse"||U.sourceCapabilities&&!U.sourceCapabilities.firesTouchEvents)){var X=mp(U);if(!(X.some(function(he){return he instanceof HTMLLabelElement&&he.attributes.for})&&!X.some(function(he){return he instanceof HTMLInputElement||he instanceof HTMLSelectElement}))){var le=Date.now();le-p<=ht?(x++,x===2&&u(xt(U))):x=1,p=le}}}return s.addEventListener("click",C),{dblclick:u,simDblclick:C}}function Xt(s,u){s.removeEventListener("dblclick",u.dblclick),s.removeEventListener("click",u.simDblclick)}var pn=Ja(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Qe=Ja(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),bt=Qe==="webkitTransition"||Qe==="OTransition"?Qe+"End":"transitionend";function Nr(s){return typeof s=="string"?document.getElementById(s):s}function sr(s,u){var p=s.style[u]||s.currentStyle&&s.currentStyle[u];if((!p||p==="auto")&&document.defaultView){var x=document.defaultView.getComputedStyle(s,null);p=x?x[u]:null}return p==="auto"?null:p}function He(s,u,p){var x=document.createElement(s);return x.className=u||"",p&&p.appendChild(x),x}function ft(s){var u=s.parentNode;u&&u.removeChild(s)}function Ii(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function ii(s){var u=s.parentNode;u&&u.lastChild!==s&&u.appendChild(s)}function xo(s){var u=s.parentNode;u&&u.firstChild!==s&&u.insertBefore(s,u.firstChild)}function yc(s,u){if(s.classList!==void 0)return s.classList.contains(u);var p=Ka(s);return p.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(p)}function tt(s,u){if(s.classList!==void 0)for(var p=v(u),x=0,C=p.length;x<C;x++)s.classList.add(p[x]);else if(!yc(s,u)){var U=Ka(s);_c(s,(U?U+" ":"")+u)}}function Ft(s,u){s.classList!==void 0?s.classList.remove(u):_c(s,y((" "+Ka(s)+" ").replace(" "+u+" "," ")))}function _c(s,u){s.className.baseVal===void 0?s.className=u:s.className.baseVal=u}function Ka(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function Jn(s,u){"opacity"in s.style?s.style.opacity=u:"filter"in s.style&&Zw(s,u)}function Zw(s,u){var p=!1,x="DXImageTransform.Microsoft.Alpha";try{p=s.filters.item(x)}catch{if(u===1)return}u=Math.round(u*100),p?(p.Enabled=u!==100,p.Opacity=u):s.style.filter+=" progid:"+x+"(opacity="+u+")"}function Ja(s){for(var u=document.documentElement.style,p=0;p<s.length;p++)if(s[p]in u)return s[p];return!1}function Mi(s,u,p){var x=u||new B(0,0);s.style[pn]=(me.ie3d?"translate("+x.x+"px,"+x.y+"px)":"translate3d("+x.x+"px,"+x.y+"px,0)")+(p?" scale("+p+")":"")}function Vt(s,u){s._leaflet_pos=u,me.any3d?Mi(s,u):(s.style.left=u.x+"px",s.style.top=u.y+"px")}function zi(s){return s._leaflet_pos||new B(0,0)}var Cs,Ts,vc;if("onselectstart"in document)Cs=function(){Xe(window,"selectstart",sn)},Ts=function(){St(window,"selectstart",sn)};else{var Ps=Ja(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Cs=function(){if(Ps){var s=document.documentElement.style;vc=s[Ps],s[Ps]="none"}},Ts=function(){Ps&&(document.documentElement.style[Ps]=vc,vc=void 0)}}function wc(){Xe(window,"dragstart",sn)}function xc(){St(window,"dragstart",sn)}var Qa,bc;function Sc(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Xa(),Qa=s,bc=s.style.outlineStyle,s.style.outlineStyle="none",Xe(window,"keydown",Xa))}function Xa(){Qa&&(Qa.style.outlineStyle=bc,Qa=void 0,bc=void 0,St(window,"keydown",Xa))}function fp(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function kc(s){var u=s.getBoundingClientRect();return{x:u.width/s.offsetWidth||1,y:u.height/s.offsetHeight||1,boundingClientRect:u}}var qw={__proto__:null,TRANSFORM:pn,TRANSITION:Qe,TRANSITION_END:bt,get:Nr,getStyle:sr,create:He,remove:ft,empty:Ii,toFront:ii,toBack:xo,hasClass:yc,addClass:tt,removeClass:Ft,setClass:_c,getClass:Ka,setOpacity:Jn,testProp:Ja,setTransform:Mi,setPosition:Vt,getPosition:zi,get disableTextSelection(){return Cs},get enableTextSelection(){return Ts},disableImageDrag:wc,enableImageDrag:xc,preventOutline:Sc,restoreOutline:Xa,getSizedParentNode:fp,getScale:kc};function Xe(s,u,p,x){if(u&&typeof u=="object")for(var C in u)Cc(s,C,u[C],p);else{u=v(u);for(var U=0,X=u.length;U<X;U++)Cc(s,u[U],p,x)}return this}var Sr="_leaflet_events";function St(s,u,p,x){if(arguments.length===1)pp(s),delete s[Sr];else if(u&&typeof u=="object")for(var C in u)Tc(s,C,u[C],p);else if(u=v(u),arguments.length===2)pp(s,function(le){return T(u,le)!==-1});else for(var U=0,X=u.length;U<X;U++)Tc(s,u[U],p,x);return this}function pp(s,u){for(var p in s[Sr]){var x=p.split(/\d/)[0];(!u||u(x))&&Tc(s,x,null,null,p)}}var Ec={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Cc(s,u,p,x){var C=u+c(p)+(x?"_"+c(x):"");if(s[Sr]&&s[Sr][C])return this;var U=function(le){return p.call(x||s,le||window.event)},X=U;!me.touchNative&&me.pointer&&u.indexOf("touch")===0?U=Ze(s,u,U):me.touch&&u==="dblclick"?U=pt(s,U):"addEventListener"in s?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?s.addEventListener(Ec[u]||u,U,me.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(U=function(le){le=le||window.event,jc(s,le)&&X(le)},s.addEventListener(Ec[u],U,!1)):s.addEventListener(u,X,!1):s.attachEvent("on"+u,U),s[Sr]=s[Sr]||{},s[Sr][C]=U}function Tc(s,u,p,x,C){C=C||u+c(p)+(x?"_"+c(x):"");var U=s[Sr]&&s[Sr][C];if(!U)return this;!me.touchNative&&me.pointer&&u.indexOf("touch")===0?ct(s,u,U):me.touch&&u==="dblclick"?Xt(s,U):"removeEventListener"in s?s.removeEventListener(Ec[u]||u,U,!1):s.detachEvent("on"+u,U),s[Sr][C]=null}function Bi(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Pc(s){return Cc(s,"wheel",Bi),this}function js(s){return Xe(s,"mousedown touchstart dblclick contextmenu",Bi),s._leaflet_disable_click=!0,this}function sn(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function Fi(s){return sn(s),Bi(s),this}function mp(s){if(s.composedPath)return s.composedPath();for(var u=[],p=s.target;p;)u.push(p),p=p.parentNode;return u}function gp(s,u){if(!u)return new B(s.clientX,s.clientY);var p=kc(u),x=p.boundingClientRect;return new B((s.clientX-x.left)/p.x-u.clientLeft,(s.clientY-x.top)/p.y-u.clientTop)}var Yw=me.linux&&me.chrome?window.devicePixelRatio:me.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function yp(s){return me.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/Yw:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function jc(s,u){var p=u.relatedTarget;if(!p)return!0;try{for(;p&&p!==s;)p=p.parentNode}catch{return!1}return p!==s}var Gw={__proto__:null,on:Xe,off:St,stopPropagation:Bi,disableScrollPropagation:Pc,disableClickPropagation:js,preventDefault:sn,stop:Fi,getPropagationPath:mp,getMousePosition:gp,getWheelDelta:yp,isExternalTarget:jc,addListener:Xe,removeListener:St},_p=M.extend({run:function(s,u,p,x){this.stop(),this._el=s,this._inProgress=!0,this._duration=p||.25,this._easeOutPower=1/Math.max(x||.5,.2),this._startPos=zi(s),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=K(this._animate,this),this._step()},_step:function(s){var u=+new Date-this._startTime,p=this._duration*1e3;u<p?this._runFrame(this._easeOut(u/p),s):(this._runFrame(1),this._complete())},_runFrame:function(s,u){var p=this._startPos.add(this._offset.multiplyBy(s));u&&p._round(),Vt(this._el,p),this.fire("step")},_complete:function(){N(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),at=M.extend({options:{crs:nt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,u){u=_(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(fe(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Qe&&me.any3d&&!me.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Xe(this._proxy,bt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,u,p){if(u=u===void 0?this._zoom:this._limitZoom(u),s=this._limitCenter(fe(s),u,this.options.maxBounds),p=p||{},this._stop(),this._loaded&&!p.reset&&p!==!0){p.animate!==void 0&&(p.zoom=i({animate:p.animate},p.zoom),p.pan=i({animate:p.animate,duration:p.duration},p.pan));var x=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,u,p.zoom):this._tryAnimatedPan(s,p.pan);if(x)return clearTimeout(this._sizeTimer),this}return this._resetView(s,u,p.pan&&p.pan.noMoveStart),this},setZoom:function(s,u){return this._loaded?this.setView(this.getCenter(),s,{zoom:u}):(this._zoom=s,this)},zoomIn:function(s,u){return s=s||(me.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,u)},zoomOut:function(s,u){return s=s||(me.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,u)},setZoomAround:function(s,u,p){var x=this.getZoomScale(u),C=this.getSize().divideBy(2),U=s instanceof B?s:this.latLngToContainerPoint(s),X=U.subtract(C).multiplyBy(1-1/x),le=this.containerPointToLatLng(C.add(X));return this.setView(le,u,{zoom:p})},_getBoundsCenterZoom:function(s,u){u=u||{},s=s.getBounds?s.getBounds():ee(s);var p=z(u.paddingTopLeft||u.padding||[0,0]),x=z(u.paddingBottomRight||u.padding||[0,0]),C=this.getBoundsZoom(s,!1,p.add(x));if(C=typeof u.maxZoom=="number"?Math.min(u.maxZoom,C):C,C===1/0)return{center:s.getCenter(),zoom:C};var U=x.subtract(p).divideBy(2),X=this.project(s.getSouthWest(),C),le=this.project(s.getNorthEast(),C),he=this.unproject(X.add(le).divideBy(2).add(U),C);return{center:he,zoom:C}},fitBounds:function(s,u){if(s=ee(s),!s.isValid())throw new Error("Bounds are not valid.");var p=this._getBoundsCenterZoom(s,u);return this.setView(p.center,p.zoom,u)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,u){return this.setView(s,this._zoom,{pan:u})},panBy:function(s,u){if(s=z(s).round(),u=u||{},!s.x&&!s.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new _p,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){tt(this._mapPane,"leaflet-pan-anim");var p=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,p,u.duration||.25,u.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,u,p){if(p=p||{},p.animate===!1||!me.any3d)return this.setView(s,u,p);this._stop();var x=this.project(this.getCenter()),C=this.project(s),U=this.getSize(),X=this._zoom;s=fe(s),u=u===void 0?X:u;var le=Math.max(U.x,U.y),he=le*this.getZoomScale(X,u),we=C.distanceTo(x)||1,Oe=1.42,qe=Oe*Oe;function rt(Zt){var dl=Zt?-1:1,Mx=Zt?he:le,zx=he*he-le*le+dl*qe*qe*we*we,Bx=2*Mx*qe*we,Fc=zx/Bx,Qp=Math.sqrt(Fc*Fc+1)-Fc,Fx=Qp<1e-9?-18:Math.log(Qp);return Fx}function wn(Zt){return(Math.exp(Zt)-Math.exp(-Zt))/2}function en(Zt){return(Math.exp(Zt)+Math.exp(-Zt))/2}function Xn(Zt){return wn(Zt)/en(Zt)}var jn=rt(0);function To(Zt){return le*(en(jn)/en(jn+Oe*Zt))}function Rx(Zt){return le*(en(jn)*Xn(jn+Oe*Zt)-wn(jn))/qe}function Lx(Zt){return 1-Math.pow(1-Zt,1.5)}var Nx=Date.now(),Kp=(rt(1)-jn)/Oe,Ix=p.duration?1e3*p.duration:1e3*Kp*.8;function Jp(){var Zt=(Date.now()-Nx)/Ix,dl=Lx(Zt)*Kp;Zt<=1?(this._flyToFrame=K(Jp,this),this._move(this.unproject(x.add(C.subtract(x).multiplyBy(Rx(dl)/we)),X),this.getScaleZoom(le/To(dl),X),{flyTo:!0})):this._move(s,u)._moveEnd(!0)}return this._moveStart(!0,p.noMoveStart),Jp.call(this),this},flyToBounds:function(s,u){var p=this._getBoundsCenterZoom(s,u);return this.flyTo(p.center,p.zoom,u)},setMaxBounds:function(s){return s=ee(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var u=this.options.minZoom;return this.options.minZoom=s,this._loaded&&u!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var u=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&u!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,u){this._enforcingBounds=!0;var p=this.getCenter(),x=this._limitCenter(p,this._zoom,ee(s));return p.equals(x)||this.panTo(x,u),this._enforcingBounds=!1,this},panInside:function(s,u){u=u||{};var p=z(u.paddingTopLeft||u.padding||[0,0]),x=z(u.paddingBottomRight||u.padding||[0,0]),C=this.project(this.getCenter()),U=this.project(s),X=this.getPixelBounds(),le=Z([X.min.add(p),X.max.subtract(x)]),he=le.getSize();if(!le.contains(U)){this._enforcingBounds=!0;var we=U.subtract(le.getCenter()),Oe=le.extend(U).getSize().subtract(he);C.x+=we.x<0?-Oe.x:Oe.x,C.y+=we.y<0?-Oe.y:Oe.y,this.panTo(this.unproject(C),u),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=i({animate:!1,pan:!0},s===!0?{animate:!0}:s);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var p=this.getSize(),x=u.divideBy(2).round(),C=p.divideBy(2).round(),U=x.subtract(C);return!U.x&&!U.y?this:(s.animate&&s.pan?this.panBy(U):(s.pan&&this._rawPanBy(U),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:p}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=i({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=a(this._handleGeolocationResponse,this),p=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,p,s):navigator.geolocation.getCurrentPosition(u,p,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var u=s.code,p=s.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+p+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var u=s.coords.latitude,p=s.coords.longitude,x=new Q(u,p),C=x.toBounds(s.coords.accuracy*2),U=this._locateOptions;if(U.setView){var X=this.getBoundsZoom(C);this.setView(x,U.maxZoom?Math.min(X,U.maxZoom):X)}var le={latlng:x,bounds:C,timestamp:s.timestamp};for(var he in s.coords)typeof s.coords[he]=="number"&&(le[he]=s.coords[he]);this.fire("locationfound",le)}},addHandler:function(s,u){if(!u)return this;var p=this[s]=new u(this);return this._handlers.push(p),this.options[s]&&p.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ft(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(N(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)ft(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,u){var p="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),x=He("div",p,u||this._mapPane);return s&&(this._panes[s]=x),x},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),u=this.unproject(s.getBottomLeft()),p=this.unproject(s.getTopRight());return new re(u,p)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,u,p){s=ee(s),p=z(p||[0,0]);var x=this.getZoom()||0,C=this.getMinZoom(),U=this.getMaxZoom(),X=s.getNorthWest(),le=s.getSouthEast(),he=this.getSize().subtract(p),we=Z(this.project(le,x),this.project(X,x)).getSize(),Oe=me.any3d?this.options.zoomSnap:1,qe=he.x/we.x,rt=he.y/we.y,wn=u?Math.max(qe,rt):Math.min(qe,rt);return x=this.getScaleZoom(wn,x),Oe&&(x=Math.round(x/(Oe/100))*(Oe/100),x=u?Math.ceil(x/Oe)*Oe:Math.floor(x/Oe)*Oe),Math.max(C,Math.min(U,x))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new B(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,u){var p=this._getTopLeftPoint(s,u);return new $(p,p.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,u){var p=this.options.crs;return u=u===void 0?this._zoom:u,p.scale(s)/p.scale(u)},getScaleZoom:function(s,u){var p=this.options.crs;u=u===void 0?this._zoom:u;var x=p.zoom(s*p.scale(u));return isNaN(x)?1/0:x},project:function(s,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(fe(s),u)},unproject:function(s,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(z(s),u)},layerPointToLatLng:function(s){var u=z(s).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(s){var u=this.project(fe(s))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(fe(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(ee(s))},distance:function(s,u){return this.options.crs.distance(fe(s),fe(u))},containerPointToLayerPoint:function(s){return z(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return z(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var u=this.containerPointToLayerPoint(z(s));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(fe(s)))},mouseEventToContainerPoint:function(s){return gp(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var u=this._container=Nr(s);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Xe(u,"scroll",this._onScroll,this),this._containerId=c(u)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&me.any3d,tt(s,"leaflet-container"+(me.touch?" leaflet-touch":"")+(me.retina?" leaflet-retina":"")+(me.ielt9?" leaflet-oldie":"")+(me.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=sr(s,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Vt(this._mapPane,new B(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(tt(s.markerPane,"leaflet-zoom-hide"),tt(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,u,p){Vt(this._mapPane,new B(0,0));var x=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var C=this._zoom!==u;this._moveStart(C,p)._move(s,u)._moveEnd(C),this.fire("viewreset"),x&&this.fire("load")},_moveStart:function(s,u){return s&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(s,u,p,x){u===void 0&&(u=this._zoom);var C=this._zoom!==u;return this._zoom=u,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),x?p&&p.pinch&&this.fire("zoom",p):((C||p&&p.pinch)&&this.fire("zoom",p),this.fire("move",p)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return N(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){Vt(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[c(this._container)]=this;var u=s?St:Xe;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),me.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){N(this._resizeRequest),this._resizeRequest=K(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,u){for(var p=[],x,C=u==="mouseout"||u==="mouseover",U=s.target||s.srcElement,X=!1;U;){if(x=this._targets[c(U)],x&&(u==="click"||u==="preclick")&&this._draggableMoved(x)){X=!0;break}if(x&&x.listens(u,!0)&&(C&&!jc(U,s)||(p.push(x),C))||U===this._container)break;U=U.parentNode}return!p.length&&!X&&!C&&this.listens(u,!0)&&(p=[this]),p},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var u=s.target||s.srcElement;if(!(!this._loaded||u._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(u))){var p=s.type;p==="mousedown"&&Sc(u),this._fireDOMEvent(s,p)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,u,p){if(s.type==="click"){var x=i({},s);x.type="preclick",this._fireDOMEvent(x,x.type,p)}var C=this._findEventTargets(s,u);if(p){for(var U=[],X=0;X<p.length;X++)p[X].listens(u,!0)&&U.push(p[X]);C=U.concat(C)}if(C.length){u==="contextmenu"&&sn(s);var le=C[0],he={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var we=le.getLatLng&&(!le._radius||le._radius<=10);he.containerPoint=we?this.latLngToContainerPoint(le.getLatLng()):this.mouseEventToContainerPoint(s),he.layerPoint=this.containerPointToLayerPoint(he.containerPoint),he.latlng=we?le.getLatLng():this.layerPointToLatLng(he.layerPoint)}for(X=0;X<C.length;X++)if(C[X].fire(u,he,!0),he.originalEvent._stopped||C[X].options.bubblingMouseEvents===!1&&T(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,u=this._handlers.length;s<u;s++)this._handlers[s].disable()},whenReady:function(s,u){return this._loaded?s.call(u||this,{target:this}):this.on("load",s,u),this},_getMapPanePos:function(){return zi(this._mapPane)||new B(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,u){var p=s&&u!==void 0?this._getNewPixelOrigin(s,u):this.getPixelOrigin();return p.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,u){var p=this.getSize()._divideBy(2);return this.project(s,u)._subtract(p)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,u,p){var x=this._getNewPixelOrigin(p,u);return this.project(s,u)._subtract(x)},_latLngBoundsToNewLayerBounds:function(s,u,p){var x=this._getNewPixelOrigin(p,u);return Z([this.project(s.getSouthWest(),u)._subtract(x),this.project(s.getNorthWest(),u)._subtract(x),this.project(s.getSouthEast(),u)._subtract(x),this.project(s.getNorthEast(),u)._subtract(x)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,u,p){if(!p)return s;var x=this.project(s,u),C=this.getSize().divideBy(2),U=new $(x.subtract(C),x.add(C)),X=this._getBoundsOffset(U,p,u);return Math.abs(X.x)<=1&&Math.abs(X.y)<=1?s:this.unproject(x.add(X),u)},_limitOffset:function(s,u){if(!u)return s;var p=this.getPixelBounds(),x=new $(p.min.add(s),p.max.add(s));return s.add(this._getBoundsOffset(x,u))},_getBoundsOffset:function(s,u,p){var x=Z(this.project(u.getNorthEast(),p),this.project(u.getSouthWest(),p)),C=x.min.subtract(s.min),U=x.max.subtract(s.max),X=this._rebound(C.x,-U.x),le=this._rebound(C.y,-U.y);return new B(X,le)},_rebound:function(s,u){return s+u>0?Math.round(s-u)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(u))},_limitZoom:function(s){var u=this.getMinZoom(),p=this.getMaxZoom(),x=me.any3d?this.options.zoomSnap:1;return x&&(s=Math.round(s/x)*x),Math.max(u,Math.min(p,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ft(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,u){var p=this._getCenterOffset(s)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(p)?!1:(this.panBy(p,u),!0)},_createAnimProxy:function(){var s=this._proxy=He("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(u){var p=pn,x=this._proxy.style[p];Mi(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),x===this._proxy.style[p]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ft(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),u=this.getZoom();Mi(this._proxy,this.project(s,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,u,p){if(this._animatingZoom)return!0;if(p=p||{},!this._zoomAnimated||p.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var x=this.getZoomScale(u),C=this._getCenterOffset(s)._divideBy(1-1/x);return p.animate!==!0&&!this.getSize().contains(C)?!1:(K(function(){this._moveStart(!0,p.noMoveStart||!1)._animateZoom(s,u,!0)},this),!0)},_animateZoom:function(s,u,p,x){this._mapPane&&(p&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=u,tt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:u,noUpdate:x}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ft(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Kw(s,u){return new at(s,u)}var ar=E.extend({options:{position:"topright"},initialize:function(s){_(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var u=this._map;return u&&u.removeControl(this),this.options.position=s,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var u=this._container=this.onAdd(s),p=this.getPosition(),x=s._controlCorners[p];return tt(u,"leaflet-control"),p.indexOf("bottom")!==-1?x.insertBefore(u,x.firstChild):x.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ft(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),As=function(s){return new ar(s)};at.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},u="leaflet-",p=this._controlContainer=He("div",u+"control-container",this._container);function x(C,U){var X=u+C+" "+u+U;s[C+U]=He("div",X,p)}x("top","left"),x("top","right"),x("bottom","left"),x("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)ft(this._controlCorners[s]);ft(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var vp=ar.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,u,p,x){return p<x?-1:x<p?1:0}},initialize:function(s,u,p){_(this,p),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var x in s)this._addLayer(s[x],x);for(x in u)this._addLayer(u[x],x,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return ar.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,u){return this._addLayer(s,u),this._map?this._update():this},addOverlay:function(s,u){return this._addLayer(s,u,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var u=this._getLayer(c(s));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){tt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(tt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Ft(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ft(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",u=this._container=He("div",s),p=this.options.collapsed;u.setAttribute("aria-haspopup",!0),js(u),Pc(u);var x=this._section=He("section",s+"-list");p&&(this._map.on("click",this.collapse,this),Xe(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var C=this._layersLink=He("a",s+"-toggle",u);C.href="#",C.title="Layers",C.setAttribute("role","button"),Xe(C,{keydown:function(U){U.keyCode===13&&this._expandSafely()},click:function(U){sn(U),this._expandSafely()}},this),p||this.expand(),this._baseLayersList=He("div",s+"-base",x),this._separator=He("div",s+"-separator",x),this._overlaysList=He("div",s+"-overlays",x),u.appendChild(x)},_getLayer:function(s){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&c(this._layers[u].layer)===s)return this._layers[u]},_addLayer:function(s,u,p){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:u,overlay:p}),this.options.sortLayers&&this._layers.sort(a(function(x,C){return this.options.sortFunction(x.layer,C.layer,x.name,C.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ii(this._baseLayersList),Ii(this._overlaysList),this._layerControlInputs=[];var s,u,p,x,C=0;for(p=0;p<this._layers.length;p++)x=this._layers[p],this._addItem(x),u=u||x.overlay,s=s||!x.overlay,C+=x.overlay?0:1;return this.options.hideSingleBase&&(s=s&&C>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=u&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var u=this._getLayer(c(s.target)),p=u.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;p&&this._map.fire(p,u)},_createRadioElement:function(s,u){var p='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(u?' checked="checked"':"")+"/>",x=document.createElement("div");return x.innerHTML=p,x.firstChild},_addItem:function(s){var u=document.createElement("label"),p=this._map.hasLayer(s.layer),x;s.overlay?(x=document.createElement("input"),x.type="checkbox",x.className="leaflet-control-layers-selector",x.defaultChecked=p):x=this._createRadioElement("leaflet-base-layers_"+c(this),p),this._layerControlInputs.push(x),x.layerId=c(s.layer),Xe(x,"click",this._onInputClick,this);var C=document.createElement("span");C.innerHTML=" "+s.name;var U=document.createElement("span");u.appendChild(U),U.appendChild(x),U.appendChild(C);var X=s.overlay?this._overlaysList:this._baseLayersList;return X.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,u,p,x=[],C=[];this._handlingClick=!0;for(var U=s.length-1;U>=0;U--)u=s[U],p=this._getLayer(u.layerId).layer,u.checked?x.push(p):u.checked||C.push(p);for(U=0;U<C.length;U++)this._map.hasLayer(C[U])&&this._map.removeLayer(C[U]);for(U=0;U<x.length;U++)this._map.hasLayer(x[U])||this._map.addLayer(x[U]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,u,p,x=this._map.getZoom(),C=s.length-1;C>=0;C--)u=s[C],p=this._getLayer(u.layerId).layer,u.disabled=p.options.minZoom!==void 0&&x<p.options.minZoom||p.options.maxZoom!==void 0&&x>p.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,Xe(s,"click",sn),this.expand();var u=this;setTimeout(function(){St(s,"click",sn),u._preventClick=!1})}}),Jw=function(s,u,p){return new vp(s,u,p)},Ac=ar.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var u="leaflet-control-zoom",p=He("div",u+" leaflet-bar"),x=this.options;return this._zoomInButton=this._createButton(x.zoomInText,x.zoomInTitle,u+"-in",p,this._zoomIn),this._zoomOutButton=this._createButton(x.zoomOutText,x.zoomOutTitle,u+"-out",p,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),p},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,u,p,x,C){var U=He("a",p,x);return U.innerHTML=s,U.href="#",U.title=u,U.setAttribute("role","button"),U.setAttribute("aria-label",u),js(U),Xe(U,"click",Fi),Xe(U,"click",C,this),Xe(U,"click",this._refocusOnMap,this),U},_updateDisabled:function(){var s=this._map,u="leaflet-disabled";Ft(this._zoomInButton,u),Ft(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(tt(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(tt(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});at.mergeOptions({zoomControl:!0}),at.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ac,this.addControl(this.zoomControl))});var Qw=function(s){return new Ac(s)},wp=ar.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var u="leaflet-control-scale",p=He("div",u),x=this.options;return this._addScales(x,u+"-line",p),s.on(x.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),p},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,u,p){s.metric&&(this._mScale=He("div",u,p)),s.imperial&&(this._iScale=He("div",u,p))},_update:function(){var s=this._map,u=s.getSize().y/2,p=s.distance(s.containerPointToLatLng([0,u]),s.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(p)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var u=this._getRoundNum(s),p=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,p,u/s)},_updateImperial:function(s){var u=s*3.2808399,p,x,C;u>5280?(p=u/5280,x=this._getRoundNum(p),this._updateScale(this._iScale,x+" mi",x/p)):(C=this._getRoundNum(u),this._updateScale(this._iScale,C+" ft",C/u))},_updateScale:function(s,u,p){s.style.width=Math.round(this.options.maxWidth*p)+"px",s.innerHTML=u},_getRoundNum:function(s){var u=Math.pow(10,(Math.floor(s)+"").length-1),p=s/u;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,u*p}}),Xw=function(s){return new wp(s)},ex='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Oc=ar.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(me.inlineSvg?ex+" ":"")+"Leaflet</a>"},initialize:function(s){_(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=He("div","leaflet-control-attribution"),js(this._container);for(var u in s._layers)s._layers[u].getAttribution&&this.addAttribution(s._layers[u].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var u in this._attributions)this._attributions[u]&&s.push(u);var p=[];this.options.prefix&&p.push(this.options.prefix),s.length&&p.push(s.join(", ")),this._container.innerHTML=p.join(' <span aria-hidden="true">|</span> ')}}});at.mergeOptions({attributionControl:!0}),at.addInitHook(function(){this.options.attributionControl&&new Oc().addTo(this)});var tx=function(s){return new Oc(s)};ar.Layers=vp,ar.Zoom=Ac,ar.Scale=wp,ar.Attribution=Oc,As.layers=Jw,As.zoom=Qw,As.scale=Xw,As.attribution=tx;var kr=E.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});kr.addTo=function(s,u){return s.addHandler(u,this),this};var nx={Events:H},xp=me.touch?"touchstart mousedown":"mousedown",oi=M.extend({options:{clickTolerance:3},initialize:function(s,u,p,x){_(this,x),this._element=s,this._dragStartTarget=u||s,this._preventOutline=p},enable:function(){this._enabled||(Xe(this._dragStartTarget,xp,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(oi._dragging===this&&this.finishDrag(!0),St(this._dragStartTarget,xp,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!yc(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){oi._dragging===this&&this.finishDrag();return}if(!(oi._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(oi._dragging=this,this._preventOutline&&Sc(this._element),wc(),Cs(),!this._moving)){this.fire("down");var u=s.touches?s.touches[0]:s,p=fp(this._element);this._startPoint=new B(u.clientX,u.clientY),this._startPos=zi(this._element),this._parentScale=kc(p);var x=s.type==="mousedown";Xe(document,x?"mousemove":"touchmove",this._onMove,this),Xe(document,x?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var u=s.touches&&s.touches.length===1?s.touches[0]:s,p=new B(u.clientX,u.clientY)._subtract(this._startPoint);!p.x&&!p.y||Math.abs(p.x)+Math.abs(p.y)<this.options.clickTolerance||(p.x/=this._parentScale.x,p.y/=this._parentScale.y,sn(s),this._moved||(this.fire("dragstart"),this._moved=!0,tt(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),tt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(p),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),Vt(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Ft(document.body,"leaflet-dragging"),this._lastTarget&&(Ft(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),St(document,"mousemove touchmove",this._onMove,this),St(document,"mouseup touchend touchcancel",this._onUp,this),xc(),Ts();var u=this._moved&&this._moving;this._moving=!1,oi._dragging=!1,u&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function bp(s,u,p){var x,C=[1,4,2,8],U,X,le,he,we,Oe,qe,rt;for(U=0,Oe=s.length;U<Oe;U++)s[U]._code=Ui(s[U],u);for(le=0;le<4;le++){for(qe=C[le],x=[],U=0,Oe=s.length,X=Oe-1;U<Oe;X=U++)he=s[U],we=s[X],he._code&qe?we._code&qe||(rt=el(we,he,qe,u,p),rt._code=Ui(rt,u),x.push(rt)):(we._code&qe&&(rt=el(we,he,qe,u,p),rt._code=Ui(rt,u),x.push(rt)),x.push(he));s=x}return s}function Sp(s,u){var p,x,C,U,X,le,he,we,Oe;if(!s||s.length===0)throw new Error("latlngs not passed");Qn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var qe=fe([0,0]),rt=ee(s),wn=rt.getNorthWest().distanceTo(rt.getSouthWest())*rt.getNorthEast().distanceTo(rt.getNorthWest());wn<1700&&(qe=Dc(s));var en=s.length,Xn=[];for(p=0;p<en;p++){var jn=fe(s[p]);Xn.push(u.project(fe([jn.lat-qe.lat,jn.lng-qe.lng])))}for(le=he=we=0,p=0,x=en-1;p<en;x=p++)C=Xn[p],U=Xn[x],X=C.y*U.x-U.y*C.x,he+=(C.x+U.x)*X,we+=(C.y+U.y)*X,le+=X*3;le===0?Oe=Xn[0]:Oe=[he/le,we/le];var To=u.unproject(z(Oe));return fe([To.lat+qe.lat,To.lng+qe.lng])}function Dc(s){for(var u=0,p=0,x=0,C=0;C<s.length;C++){var U=fe(s[C]);u+=U.lat,p+=U.lng,x++}return fe([u/x,p/x])}var rx={__proto__:null,clipPolygon:bp,polygonCenter:Sp,centroid:Dc};function kp(s,u){if(!u||!s.length)return s.slice();var p=u*u;return s=sx(s,p),s=ox(s,p),s}function Ep(s,u,p){return Math.sqrt(Os(s,u,p,!0))}function ix(s,u,p){return Os(s,u,p)}function ox(s,u){var p=s.length,x=typeof Uint8Array<"u"?Uint8Array:Array,C=new x(p);C[0]=C[p-1]=1,Rc(s,C,u,0,p-1);var U,X=[];for(U=0;U<p;U++)C[U]&&X.push(s[U]);return X}function Rc(s,u,p,x,C){var U=0,X,le,he;for(le=x+1;le<=C-1;le++)he=Os(s[le],s[x],s[C],!0),he>U&&(X=le,U=he);U>p&&(u[X]=1,Rc(s,u,p,x,X),Rc(s,u,p,X,C))}function sx(s,u){for(var p=[s[0]],x=1,C=0,U=s.length;x<U;x++)ax(s[x],s[C])>u&&(p.push(s[x]),C=x);return C<U-1&&p.push(s[U-1]),p}var Cp;function Tp(s,u,p,x,C){var U=x?Cp:Ui(s,p),X=Ui(u,p),le,he,we;for(Cp=X;;){if(!(U|X))return[s,u];if(U&X)return!1;le=U||X,he=el(s,u,le,p,C),we=Ui(he,p),le===U?(s=he,U=we):(u=he,X=we)}}function el(s,u,p,x,C){var U=u.x-s.x,X=u.y-s.y,le=x.min,he=x.max,we,Oe;return p&8?(we=s.x+U*(he.y-s.y)/X,Oe=he.y):p&4?(we=s.x+U*(le.y-s.y)/X,Oe=le.y):p&2?(we=he.x,Oe=s.y+X*(he.x-s.x)/U):p&1&&(we=le.x,Oe=s.y+X*(le.x-s.x)/U),new B(we,Oe,C)}function Ui(s,u){var p=0;return s.x<u.min.x?p|=1:s.x>u.max.x&&(p|=2),s.y<u.min.y?p|=4:s.y>u.max.y&&(p|=8),p}function ax(s,u){var p=u.x-s.x,x=u.y-s.y;return p*p+x*x}function Os(s,u,p,x){var C=u.x,U=u.y,X=p.x-C,le=p.y-U,he=X*X+le*le,we;return he>0&&(we=((s.x-C)*X+(s.y-U)*le)/he,we>1?(C=p.x,U=p.y):we>0&&(C+=X*we,U+=le*we)),X=s.x-C,le=s.y-U,x?X*X+le*le:new B(C,U)}function Qn(s){return!k(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Pp(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Qn(s)}function jp(s,u){var p,x,C,U,X,le,he,we;if(!s||s.length===0)throw new Error("latlngs not passed");Qn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var Oe=fe([0,0]),qe=ee(s),rt=qe.getNorthWest().distanceTo(qe.getSouthWest())*qe.getNorthEast().distanceTo(qe.getNorthWest());rt<1700&&(Oe=Dc(s));var wn=s.length,en=[];for(p=0;p<wn;p++){var Xn=fe(s[p]);en.push(u.project(fe([Xn.lat-Oe.lat,Xn.lng-Oe.lng])))}for(p=0,x=0;p<wn-1;p++)x+=en[p].distanceTo(en[p+1])/2;if(x===0)we=en[0];else for(p=0,U=0;p<wn-1;p++)if(X=en[p],le=en[p+1],C=X.distanceTo(le),U+=C,U>x){he=(U-x)/C,we=[le.x-he*(le.x-X.x),le.y-he*(le.y-X.y)];break}var jn=u.unproject(z(we));return fe([jn.lat+Oe.lat,jn.lng+Oe.lng])}var lx={__proto__:null,simplify:kp,pointToSegmentDistance:Ep,closestPointOnSegment:ix,clipSegment:Tp,_getEdgeIntersection:el,_getBitCode:Ui,_sqClosestPointOnSegment:Os,isFlat:Qn,_flat:Pp,polylineCenter:jp},Lc={project:function(s){return new B(s.lng,s.lat)},unproject:function(s){return new Q(s.y,s.x)},bounds:new $([-180,-90],[180,90])},Nc={R:6378137,R_MINOR:6356752314245179e-9,bounds:new $([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var u=Math.PI/180,p=this.R,x=s.lat*u,C=this.R_MINOR/p,U=Math.sqrt(1-C*C),X=U*Math.sin(x),le=Math.tan(Math.PI/4-x/2)/Math.pow((1-X)/(1+X),U/2);return x=-p*Math.log(Math.max(le,1e-10)),new B(s.lng*u*p,x)},unproject:function(s){for(var u=180/Math.PI,p=this.R,x=this.R_MINOR/p,C=Math.sqrt(1-x*x),U=Math.exp(-s.y/p),X=Math.PI/2-2*Math.atan(U),le=0,he=.1,we;le<15&&Math.abs(he)>1e-7;le++)we=C*Math.sin(X),we=Math.pow((1-we)/(1+we),C/2),he=Math.PI/2-2*Math.atan(U*we)-X,X+=he;return new Q(X*u,s.x*u/p)}},ux={__proto__:null,LonLat:Lc,Mercator:Nc,SphericalMercator:be},cx=i({},ke,{code:"EPSG:3395",projection:Nc,transformation:function(){var s=.5/(Math.PI*Nc.R);return Te(s,.5,-s,.5)}()}),Ap=i({},ke,{code:"EPSG:4326",projection:Lc,transformation:Te(1/180,1,-1/180,.5)}),dx=i({},Ee,{projection:Lc,transformation:Te(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,u){var p=u.lng-s.lng,x=u.lat-s.lat;return Math.sqrt(p*p+x*x)},infinite:!0});Ee.Earth=ke,Ee.EPSG3395=cx,Ee.EPSG3857=nt,Ee.EPSG900913=O,Ee.EPSG4326=Ap,Ee.Simple=dx;var lr=M.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[c(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[c(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var u=s.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var p=this.getEvents();u.on(p,this),this.once("remove",function(){u.off(p,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});at.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var u=c(s);return this._layers[u]?this:(this._layers[u]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var u=c(s);return this._layers[u]?(this._loaded&&s.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return c(s)in this._layers},eachLayer:function(s,u){for(var p in this._layers)s.call(u,this._layers[p]);return this},_addLayers:function(s){s=s?k(s)?s:[s]:[];for(var u=0,p=s.length;u<p;u++)this.addLayer(s[u])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[c(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var u=c(s);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,u=-1/0,p=this._getZoomSpan();for(var x in this._zoomBoundLayers){var C=this._zoomBoundLayers[x].options;s=C.minZoom===void 0?s:Math.min(s,C.minZoom),u=C.maxZoom===void 0?u:Math.max(u,C.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=s===1/0?void 0:s,p!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var bo=lr.extend({initialize:function(s,u){_(this,u),this._layers={};var p,x;if(s)for(p=0,x=s.length;p<x;p++)this.addLayer(s[p])},addLayer:function(s){var u=this.getLayerId(s);return this._layers[u]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var u=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(s){var u=typeof s=="number"?s:this.getLayerId(s);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var u=Array.prototype.slice.call(arguments,1),p,x;for(p in this._layers)x=this._layers[p],x[s]&&x[s].apply(x,u);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,u){for(var p in this._layers)s.call(u,this._layers[p]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return c(s)}}),hx=function(s,u){return new bo(s,u)},Ir=bo.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),bo.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),bo.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new re;for(var u in this._layers){var p=this._layers[u];s.extend(p.getBounds?p.getBounds():p.getLatLng())}return s}}),fx=function(s,u){return new Ir(s,u)},So=E.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){_(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,u){var p=this._getIconUrl(s);if(!p){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var x=this._createImg(p,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(x,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(x.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),x},_setIconStyles:function(s,u){var p=this.options,x=p[u+"Size"];typeof x=="number"&&(x=[x,x]);var C=z(x),U=z(u==="shadow"&&p.shadowAnchor||p.iconAnchor||C&&C.divideBy(2,!0));s.className="leaflet-marker-"+u+" "+(p.className||""),U&&(s.style.marginLeft=-U.x+"px",s.style.marginTop=-U.y+"px"),C&&(s.style.width=C.x+"px",s.style.height=C.y+"px")},_createImg:function(s,u){return u=u||document.createElement("img"),u.src=s,u},_getIconUrl:function(s){return me.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function px(s){return new So(s)}var Ds=So.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Ds.imagePath!="string"&&(Ds.imagePath=this._detectIconPath()),(this.options.imagePath||Ds.imagePath)+So.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var u=function(p,x,C){var U=x.exec(p);return U&&U[C]};return s=u(s,/^url\((['"])?(.+)\1\)$/,2),s&&u(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=He("div","leaflet-default-icon-path",document.body),u=sr(s,"background-image")||sr(s,"backgroundImage");if(document.body.removeChild(s),u=this._stripUrl(u),u)return u;var p=document.querySelector('link[href$="leaflet.css"]');return p?p.href.substring(0,p.href.length-11-1):""}}),Op=kr.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new oi(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),tt(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ft(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var u=this._marker,p=u._map,x=this._marker.options.autoPanSpeed,C=this._marker.options.autoPanPadding,U=zi(u._icon),X=p.getPixelBounds(),le=p.getPixelOrigin(),he=Z(X.min._subtract(le).add(C),X.max._subtract(le).subtract(C));if(!he.contains(U)){var we=z((Math.max(he.max.x,U.x)-he.max.x)/(X.max.x-he.max.x)-(Math.min(he.min.x,U.x)-he.min.x)/(X.min.x-he.min.x),(Math.max(he.max.y,U.y)-he.max.y)/(X.max.y-he.max.y)-(Math.min(he.min.y,U.y)-he.min.y)/(X.min.y-he.min.y)).multiplyBy(x);p.panBy(we,{animate:!1}),this._draggable._newPos._add(we),this._draggable._startPos._add(we),Vt(u._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=K(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(N(this._panRequest),this._panRequest=K(this._adjustPan.bind(this,s)))},_onDrag:function(s){var u=this._marker,p=u._shadow,x=zi(u._icon),C=u._map.layerPointToLatLng(x);p&&Vt(p,x),u._latlng=C,s.latlng=C,s.oldLatLng=this._oldLatLng,u.fire("move",s).fire("drag",s)},_onDragEnd:function(s){N(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),tl=lr.extend({options:{icon:new Ds,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,u){_(this,u),this._latlng=fe(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var u=this._latlng;return this._latlng=fe(s),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),p=s.icon.createIcon(this._icon),x=!1;p!==this._icon&&(this._icon&&this._removeIcon(),x=!0,s.title&&(p.title=s.title),p.tagName==="IMG"&&(p.alt=s.alt||"")),tt(p,u),s.keyboard&&(p.tabIndex="0",p.setAttribute("role","button")),this._icon=p,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Xe(p,"focus",this._panOnFocus,this);var C=s.icon.createShadow(this._shadow),U=!1;C!==this._shadow&&(this._removeShadow(),U=!0),C&&(tt(C,u),C.alt=""),this._shadow=C,s.opacity<1&&this._updateOpacity(),x&&this.getPane().appendChild(this._icon),this._initInteraction(),C&&U&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&St(this._icon,"focus",this._panOnFocus,this),ft(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ft(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&Vt(this._icon,s),this._shadow&&Vt(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var u=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(tt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Op)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Op(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&Jn(this._icon,s),this._shadow&&Jn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var u=this.options.icon.options,p=u.iconSize?z(u.iconSize):z(0,0),x=u.iconAnchor?z(u.iconAnchor):z(0,0);s.panInside(this._latlng,{paddingTopLeft:x,paddingBottomRight:p.subtract(x)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function mx(s,u){return new tl(s,u)}var si=lr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return _(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),nl=si.extend({options:{fill:!0,radius:10},initialize:function(s,u){_(this,u),this._latlng=fe(s),this._radius=this.options.radius},setLatLng:function(s){var u=this._latlng;return this._latlng=fe(s),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var u=s&&s.radius||this._radius;return si.prototype.setStyle.call(this,s),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,u=this._radiusY||s,p=this._clickTolerance(),x=[s+p,u+p];this._pxBounds=new $(this._point.subtract(x),this._point.add(x))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function gx(s,u){return new nl(s,u)}var Ic=nl.extend({initialize:function(s,u,p){if(typeof u=="number"&&(u=i({},p,{radius:u})),_(this,u),this._latlng=fe(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new re(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:si.prototype.setStyle,_project:function(){var s=this._latlng.lng,u=this._latlng.lat,p=this._map,x=p.options.crs;if(x.distance===ke.distance){var C=Math.PI/180,U=this._mRadius/ke.R/C,X=p.project([u+U,s]),le=p.project([u-U,s]),he=X.add(le).divideBy(2),we=p.unproject(he).lat,Oe=Math.acos((Math.cos(U*C)-Math.sin(u*C)*Math.sin(we*C))/(Math.cos(u*C)*Math.cos(we*C)))/C;(isNaN(Oe)||Oe===0)&&(Oe=U/Math.cos(Math.PI/180*u)),this._point=he.subtract(p.getPixelOrigin()),this._radius=isNaN(Oe)?0:he.x-p.project([we,s-Oe]).x,this._radiusY=he.y-X.y}else{var qe=x.unproject(x.project(this._latlng).subtract([this._mRadius,0]));this._point=p.latLngToLayerPoint(this._latlng),this._radius=this._point.x-p.latLngToLayerPoint(qe).x}this._updateBounds()}});function yx(s,u,p){return new Ic(s,u,p)}var Mr=si.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,u){_(this,u),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var u=1/0,p=null,x=Os,C,U,X=0,le=this._parts.length;X<le;X++)for(var he=this._parts[X],we=1,Oe=he.length;we<Oe;we++){C=he[we-1],U=he[we];var qe=x(s,C,U,!0);qe<u&&(u=qe,p=x(s,C,U))}return p&&(p.distance=Math.sqrt(u)),p},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return jp(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,u){return u=u||this._defaultShape(),s=fe(s),u.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new re,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Qn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var u=[],p=Qn(s),x=0,C=s.length;x<C;x++)p?(u[x]=fe(s[x]),this._bounds.extend(u[x])):u[x]=this._convertLatLngs(s[x]);return u},_project:function(){var s=new $;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),u=new B(s,s);this._rawPxBounds&&(this._pxBounds=new $([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(s,u,p){var x=s[0]instanceof Q,C=s.length,U,X;if(x){for(X=[],U=0;U<C;U++)X[U]=this._map.latLngToLayerPoint(s[U]),p.extend(X[U]);u.push(X)}else for(U=0;U<C;U++)this._projectLatlngs(s[U],u,p)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,p,x,C,U,X,le,he;for(p=0,C=0,U=this._rings.length;p<U;p++)for(he=this._rings[p],x=0,X=he.length;x<X-1;x++)le=Tp(he[x],he[x+1],s,x,!0),le&&(u[C]=u[C]||[],u[C].push(le[0]),(le[1]!==he[x+1]||x===X-2)&&(u[C].push(le[1]),C++))}},_simplifyPoints:function(){for(var s=this._parts,u=this.options.smoothFactor,p=0,x=s.length;p<x;p++)s[p]=kp(s[p],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,u){var p,x,C,U,X,le,he=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(p=0,U=this._parts.length;p<U;p++)for(le=this._parts[p],x=0,X=le.length,C=X-1;x<X;C=x++)if(!(!u&&x===0)&&Ep(s,le[C],le[x])<=he)return!0;return!1}});function _x(s,u){return new Mr(s,u)}Mr._flat=Pp;var ko=Mr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Sp(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var u=Mr.prototype._convertLatLngs.call(this,s),p=u.length;return p>=2&&u[0]instanceof Q&&u[0].equals(u[p-1])&&u.pop(),u},_setLatLngs:function(s){Mr.prototype._setLatLngs.call(this,s),Qn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Qn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,u=this.options.weight,p=new B(u,u);if(s=new $(s.min.subtract(p),s.max.add(p)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var x=0,C=this._rings.length,U;x<C;x++)U=bp(this._rings[x],s,!0),U.length&&this._parts.push(U)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var u=!1,p,x,C,U,X,le,he,we;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(U=0,he=this._parts.length;U<he;U++)for(p=this._parts[U],X=0,we=p.length,le=we-1;X<we;le=X++)x=p[X],C=p[le],x.y>s.y!=C.y>s.y&&s.x<(C.x-x.x)*(s.y-x.y)/(C.y-x.y)+x.x&&(u=!u);return u||Mr.prototype._containsPoint.call(this,s,!0)}});function vx(s,u){return new ko(s,u)}var zr=Ir.extend({initialize:function(s,u){_(this,u),this._layers={},s&&this.addData(s)},addData:function(s){var u=k(s)?s:s.features,p,x,C;if(u){for(p=0,x=u.length;p<x;p++)C=u[p],(C.geometries||C.geometry||C.features||C.coordinates)&&this.addData(C);return this}var U=this.options;if(U.filter&&!U.filter(s))return this;var X=rl(s,U);return X?(X.feature=sl(s),X.defaultOptions=X.options,this.resetStyle(X),U.onEachFeature&&U.onEachFeature(s,X),this.addLayer(X)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=i({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(u){this._setLayerStyle(u,s)},this)},_setLayerStyle:function(s,u){s.setStyle&&(typeof u=="function"&&(u=u(s.feature)),s.setStyle(u))}});function rl(s,u){var p=s.type==="Feature"?s.geometry:s,x=p?p.coordinates:null,C=[],U=u&&u.pointToLayer,X=u&&u.coordsToLatLng||Mc,le,he,we,Oe;if(!x&&!p)return null;switch(p.type){case"Point":return le=X(x),Dp(U,s,le,u);case"MultiPoint":for(we=0,Oe=x.length;we<Oe;we++)le=X(x[we]),C.push(Dp(U,s,le,u));return new Ir(C);case"LineString":case"MultiLineString":return he=il(x,p.type==="LineString"?0:1,X),new Mr(he,u);case"Polygon":case"MultiPolygon":return he=il(x,p.type==="Polygon"?1:2,X),new ko(he,u);case"GeometryCollection":for(we=0,Oe=p.geometries.length;we<Oe;we++){var qe=rl({geometry:p.geometries[we],type:"Feature",properties:s.properties},u);qe&&C.push(qe)}return new Ir(C);case"FeatureCollection":for(we=0,Oe=p.features.length;we<Oe;we++){var rt=rl(p.features[we],u);rt&&C.push(rt)}return new Ir(C);default:throw new Error("Invalid GeoJSON object.")}}function Dp(s,u,p,x){return s?s(u,p):new tl(p,x&&x.markersInheritOptions&&x)}function Mc(s){return new Q(s[1],s[0],s[2])}function il(s,u,p){for(var x=[],C=0,U=s.length,X;C<U;C++)X=u?il(s[C],u-1,p):(p||Mc)(s[C]),x.push(X);return x}function zc(s,u){return s=fe(s),s.alt!==void 0?[g(s.lng,u),g(s.lat,u),g(s.alt,u)]:[g(s.lng,u),g(s.lat,u)]}function ol(s,u,p,x){for(var C=[],U=0,X=s.length;U<X;U++)C.push(u?ol(s[U],Qn(s[U])?0:u-1,p,x):zc(s[U],x));return!u&&p&&C.length>0&&C.push(C[0].slice()),C}function Eo(s,u){return s.feature?i({},s.feature,{geometry:u}):sl(u)}function sl(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Bc={toGeoJSON:function(s){return Eo(this,{type:"Point",coordinates:zc(this.getLatLng(),s)})}};tl.include(Bc),Ic.include(Bc),nl.include(Bc),Mr.include({toGeoJSON:function(s){var u=!Qn(this._latlngs),p=ol(this._latlngs,u?1:0,!1,s);return Eo(this,{type:(u?"Multi":"")+"LineString",coordinates:p})}}),ko.include({toGeoJSON:function(s){var u=!Qn(this._latlngs),p=u&&!Qn(this._latlngs[0]),x=ol(this._latlngs,p?2:u?1:0,!0,s);return u||(x=[x]),Eo(this,{type:(p?"Multi":"")+"Polygon",coordinates:x})}}),bo.include({toMultiPoint:function(s){var u=[];return this.eachLayer(function(p){u.push(p.toGeoJSON(s).geometry.coordinates)}),Eo(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(s){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(s);var p=u==="GeometryCollection",x=[];return this.eachLayer(function(C){if(C.toGeoJSON){var U=C.toGeoJSON(s);if(p)x.push(U.geometry);else{var X=sl(U);X.type==="FeatureCollection"?x.push.apply(x,X.features):x.push(X)}}}),p?Eo(this,{geometries:x,type:"GeometryCollection"}):{type:"FeatureCollection",features:x}}});function Rp(s,u){return new zr(s,u)}var wx=Rp,al=lr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,u,p){this._url=s,this._bounds=ee(u),_(this,p)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(tt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ft(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&ii(this._image),this},bringToBack:function(){return this._map&&xo(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=ee(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",u=this._image=s?this._url:He("img");if(tt(u,"leaflet-image-layer"),this._zoomAnimated&&tt(u,"leaflet-zoom-animated"),this.options.className&&tt(u,this.options.className),u.onselectstart=f,u.onmousemove=f,u.onload=a(this.fire,this,"load"),u.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(s){var u=this._map.getZoomScale(s.zoom),p=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Mi(this._image,p,u)},_reset:function(){var s=this._image,u=new $(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),p=u.getSize();Vt(s,u.min),s.style.width=p.x+"px",s.style.height=p.y+"px"},_updateOpacity:function(){Jn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),xx=function(s,u,p){return new al(s,u,p)},Lp=al.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",u=this._image=s?this._url:He("video");if(tt(u,"leaflet-image-layer"),this._zoomAnimated&&tt(u,"leaflet-zoom-animated"),this.options.className&&tt(u,this.options.className),u.onselectstart=f,u.onmousemove=f,u.onloadeddata=a(this.fire,this,"load"),s){for(var p=u.getElementsByTagName("source"),x=[],C=0;C<p.length;C++)x.push(p[C].src);this._url=p.length>0?x:[u.src];return}k(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var U=0;U<this._url.length;U++){var X=He("source");X.src=this._url[U],u.appendChild(X)}}});function bx(s,u,p){return new Lp(s,u,p)}var Np=al.extend({_initImage:function(){var s=this._image=this._url;tt(s,"leaflet-image-layer"),this._zoomAnimated&&tt(s,"leaflet-zoom-animated"),this.options.className&&tt(s,this.options.className),s.onselectstart=f,s.onmousemove=f}});function Sx(s,u,p){return new Np(s,u,p)}var Er=lr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,u){s&&(s instanceof Q||k(s))?(this._latlng=fe(s),_(this,u)):(_(this,s),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&Jn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&Jn(this._container,1),this.bringToFront(),this.options.interactive&&(tt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(Jn(this._container,0),this._removeTimeout=setTimeout(a(ft,void 0,this._container),200)):ft(this._container),this.options.interactive&&(Ft(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=fe(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ii(this._container),this},bringToBack:function(){return this._map&&xo(this._container),this},_prepareOpen:function(s){var u=this._source;if(!u._map)return!1;if(u instanceof Ir){u=null;var p=this._source._layers;for(var x in p)if(p[x]._map){u=p[x];break}if(!u)return!1;this._source=u}if(!s)if(u.getCenter)s=u.getCenter();else if(u.getLatLng)s=u.getLatLng();else if(u.getBounds)s=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")s.innerHTML=u;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),u=z(this.options.offset),p=this._getAnchor();this._zoomAnimated?Vt(this._container,s.add(p)):u=u.add(s).add(p);var x=this._containerBottom=-u.y,C=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=x+"px",this._container.style.left=C+"px"}},_getAnchor:function(){return[0,0]}});at.include({_initOverlay:function(s,u,p,x){var C=u;return C instanceof s||(C=new s(x).setContent(u)),p&&C.setLatLng(p),C}}),lr.include({_initOverlay:function(s,u,p,x){var C=p;return C instanceof s?(_(C,x),C._source=this):(C=u&&!x?u:new s(x,this),C.setContent(p)),C}});var ll=Er.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Er.prototype.openOn.call(this,s)},onAdd:function(s){Er.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof si||this._source.on("preclick",Bi))},onRemove:function(s){Er.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof si||this._source.off("preclick",Bi))},getEvents:function(){var s=Er.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",u=this._container=He("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),p=this._wrapper=He("div",s+"-content-wrapper",u);if(this._contentNode=He("div",s+"-content",p),js(u),Pc(this._contentNode),Xe(u,"contextmenu",Bi),this._tipContainer=He("div",s+"-tip-container",u),this._tip=He("div",s+"-tip",this._tipContainer),this.options.closeButton){var x=this._closeButton=He("a",s+"-close-button",u);x.setAttribute("role","button"),x.setAttribute("aria-label","Close popup"),x.href="#close",x.innerHTML='<span aria-hidden="true">&#215;</span>',Xe(x,"click",function(C){sn(C),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,u=s.style;u.width="",u.whiteSpace="nowrap";var p=s.offsetWidth;p=Math.min(p,this.options.maxWidth),p=Math.max(p,this.options.minWidth),u.width=p+1+"px",u.whiteSpace="",u.height="";var x=s.offsetHeight,C=this.options.maxHeight,U="leaflet-popup-scrolled";C&&x>C?(u.height=C+"px",tt(s,U)):Ft(s,U),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var u=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),p=this._getAnchor();Vt(this._container,u.add(p))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,u=parseInt(sr(this._container,"marginBottom"),10)||0,p=this._container.offsetHeight+u,x=this._containerWidth,C=new B(this._containerLeft,-p-this._containerBottom);C._add(zi(this._container));var U=s.layerPointToContainerPoint(C),X=z(this.options.autoPanPadding),le=z(this.options.autoPanPaddingTopLeft||X),he=z(this.options.autoPanPaddingBottomRight||X),we=s.getSize(),Oe=0,qe=0;U.x+x+he.x>we.x&&(Oe=U.x+x-we.x+he.x),U.x-Oe-le.x<0&&(Oe=U.x-le.x),U.y+p+he.y>we.y&&(qe=U.y+p-we.y+he.y),U.y-qe-le.y<0&&(qe=U.y-le.y),(Oe||qe)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([Oe,qe]))}},_getAnchor:function(){return z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),kx=function(s,u){return new ll(s,u)};at.mergeOptions({closePopupOnClick:!0}),at.include({openPopup:function(s,u,p){return this._initOverlay(ll,s,u,p).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),lr.include({bindPopup:function(s,u){return this._popup=this._initOverlay(ll,this._popup,s,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Ir||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){Fi(s);var u=s.layer||s.target;if(this._popup._source===u&&!(u instanceof si)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=u,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var ul=Er.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Er.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Er.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Er.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",u=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=He("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var u,p,x=this._map,C=this._container,U=x.latLngToContainerPoint(x.getCenter()),X=x.layerPointToContainerPoint(s),le=this.options.direction,he=C.offsetWidth,we=C.offsetHeight,Oe=z(this.options.offset),qe=this._getAnchor();le==="top"?(u=he/2,p=we):le==="bottom"?(u=he/2,p=0):le==="center"?(u=he/2,p=we/2):le==="right"?(u=0,p=we/2):le==="left"?(u=he,p=we/2):X.x<U.x?(le="right",u=0,p=we/2):(le="left",u=he+(Oe.x+qe.x)*2,p=we/2),s=s.subtract(z(u,p,!0)).add(Oe).add(qe),Ft(C,"leaflet-tooltip-right"),Ft(C,"leaflet-tooltip-left"),Ft(C,"leaflet-tooltip-top"),Ft(C,"leaflet-tooltip-bottom"),tt(C,"leaflet-tooltip-"+le),Vt(C,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&Jn(this._container,s)},_animateZoom:function(s){var u=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(u)},_getAnchor:function(){return z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ex=function(s,u){return new ul(s,u)};at.include({openTooltip:function(s,u,p){return this._initOverlay(ul,s,u,p).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),lr.include({bindTooltip:function(s,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ul,this._tooltip,s,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var u=s?"off":"on",p={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?p.add=this._openTooltip:(p.mouseover=this._openTooltip,p.mouseout=this.closeTooltip,p.click=this._openTooltip,this._map?this._addFocusListeners():p.add=this._addFocusListeners),this._tooltip.options.sticky&&(p.mousemove=this._moveTooltip),this[u](p),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Ir||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var u=typeof s.getElement=="function"&&s.getElement();u&&(Xe(u,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),Xe(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var u=typeof s.getElement=="function"&&s.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var u=s.latlng,p,x;this._tooltip.options.sticky&&s.originalEvent&&(p=this._map.mouseEventToContainerPoint(s.originalEvent),x=this._map.containerPointToLayerPoint(p),u=this._map.layerPointToLatLng(x)),this._tooltip.setLatLng(u)}});var Ip=So.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var u=s&&s.tagName==="DIV"?s:document.createElement("div"),p=this.options;if(p.html instanceof Element?(Ii(u),u.appendChild(p.html)):u.innerHTML=p.html!==!1?p.html:"",p.bgPos){var x=z(p.bgPos);u.style.backgroundPosition=-x.x+"px "+-x.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function Cx(s){return new Ip(s)}So.Default=Ds;var Rs=lr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:me.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){_(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),ft(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ii(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(xo(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof B?s:new B(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var u=this.getPane().children,p=-s(-1/0,1/0),x=0,C=u.length,U;x<C;x++)U=u[x].style.zIndex,u[x]!==this._container&&U&&(p=s(p,+U));isFinite(p)&&(this.options.zIndex=p+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!me.ielt9){Jn(this._container,this.options.opacity);var s=+new Date,u=!1,p=!1;for(var x in this._tiles){var C=this._tiles[x];if(!(!C.current||!C.loaded)){var U=Math.min(1,(s-C.loaded)/200);Jn(C.el,U),U<1?u=!0:(C.active?p=!0:this._onOpaqueTile(C),C.active=!0)}}p&&!this._noPrune&&this._pruneTiles(),u&&(N(this._fadeFrame),this._fadeFrame=K(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=He("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,u=this.options.maxZoom;if(s!==void 0){for(var p in this._levels)p=Number(p),this._levels[p].el.children.length||p===s?(this._levels[p].el.style.zIndex=u-Math.abs(s-p),this._onUpdateLevel(p)):(ft(this._levels[p].el),this._removeTilesAtZoom(p),this._onRemoveLevel(p),delete this._levels[p]);var x=this._levels[s],C=this._map;return x||(x=this._levels[s]={},x.el=He("div","leaflet-tile-container leaflet-zoom-animated",this._container),x.el.style.zIndex=u,x.origin=C.project(C.unproject(C.getPixelOrigin()),s).round(),x.zoom=s,this._setZoomTransform(x,C.getCenter(),C.getZoom()),f(x.el.offsetWidth),this._onCreateLevel(x)),this._level=x,x}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var s,u,p=this._map.getZoom();if(p>this.options.maxZoom||p<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)u=this._tiles[s],u.retain=u.current;for(s in this._tiles)if(u=this._tiles[s],u.current&&!u.active){var x=u.coords;this._retainParent(x.x,x.y,x.z,x.z-5)||this._retainChildren(x.x,x.y,x.z,x.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var u in this._tiles)this._tiles[u].coords.z===s&&this._removeTile(u)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)ft(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,u,p,x){var C=Math.floor(s/2),U=Math.floor(u/2),X=p-1,le=new B(+C,+U);le.z=+X;var he=this._tileCoordsToKey(le),we=this._tiles[he];return we&&we.active?(we.retain=!0,!0):(we&&we.loaded&&(we.retain=!0),X>x?this._retainParent(C,U,X,x):!1)},_retainChildren:function(s,u,p,x){for(var C=2*s;C<2*s+2;C++)for(var U=2*u;U<2*u+2;U++){var X=new B(C,U);X.z=p+1;var le=this._tileCoordsToKey(X),he=this._tiles[le];if(he&&he.active){he.retain=!0;continue}else he&&he.loaded&&(he.retain=!0);p+1<x&&this._retainChildren(C,U,p+1,x)}},_resetView:function(s){var u=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var u=this.options;return u.minNativeZoom!==void 0&&s<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<s?u.maxNativeZoom:s},_setView:function(s,u,p,x){var C=Math.round(u);this.options.maxZoom!==void 0&&C>this.options.maxZoom||this.options.minZoom!==void 0&&C<this.options.minZoom?C=void 0:C=this._clampZoom(C);var U=this.options.updateWhenZooming&&C!==this._tileZoom;(!x||U)&&(this._tileZoom=C,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),C!==void 0&&this._update(s),p||this._pruneTiles(),this._noPrune=!!p),this._setZoomTransforms(s,u)},_setZoomTransforms:function(s,u){for(var p in this._levels)this._setZoomTransform(this._levels[p],s,u)},_setZoomTransform:function(s,u,p){var x=this._map.getZoomScale(p,s.zoom),C=s.origin.multiplyBy(x).subtract(this._map._getNewPixelOrigin(u,p)).round();me.any3d?Mi(s.el,C,x):Vt(s.el,C)},_resetGrid:function(){var s=this._map,u=s.options.crs,p=this._tileSize=this.getTileSize(),x=this._tileZoom,C=this._map.getPixelWorldBounds(this._tileZoom);C&&(this._globalTileRange=this._pxBoundsToTileRange(C)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,u.wrapLng[0]],x).x/p.x),Math.ceil(s.project([0,u.wrapLng[1]],x).x/p.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([u.wrapLat[0],0],x).y/p.x),Math.ceil(s.project([u.wrapLat[1],0],x).y/p.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var u=this._map,p=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),x=u.getZoomScale(p,this._tileZoom),C=u.project(s,this._tileZoom).floor(),U=u.getSize().divideBy(x*2);return new $(C.subtract(U),C.add(U))},_update:function(s){var u=this._map;if(u){var p=this._clampZoom(u.getZoom());if(s===void 0&&(s=u.getCenter()),this._tileZoom!==void 0){var x=this._getTiledPixelBounds(s),C=this._pxBoundsToTileRange(x),U=C.getCenter(),X=[],le=this.options.keepBuffer,he=new $(C.getBottomLeft().subtract([le,-le]),C.getTopRight().add([le,-le]));if(!(isFinite(C.min.x)&&isFinite(C.min.y)&&isFinite(C.max.x)&&isFinite(C.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var we in this._tiles){var Oe=this._tiles[we].coords;(Oe.z!==this._tileZoom||!he.contains(new B(Oe.x,Oe.y)))&&(this._tiles[we].current=!1)}if(Math.abs(p-this._tileZoom)>1){this._setView(s,p);return}for(var qe=C.min.y;qe<=C.max.y;qe++)for(var rt=C.min.x;rt<=C.max.x;rt++){var wn=new B(rt,qe);if(wn.z=this._tileZoom,!!this._isValidTile(wn)){var en=this._tiles[this._tileCoordsToKey(wn)];en?en.current=!0:X.push(wn)}}if(X.sort(function(jn,To){return jn.distanceTo(U)-To.distanceTo(U)}),X.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Xn=document.createDocumentFragment();for(rt=0;rt<X.length;rt++)this._addTile(X[rt],Xn);this._level.el.appendChild(Xn)}}}},_isValidTile:function(s){var u=this._map.options.crs;if(!u.infinite){var p=this._globalTileRange;if(!u.wrapLng&&(s.x<p.min.x||s.x>p.max.x)||!u.wrapLat&&(s.y<p.min.y||s.y>p.max.y))return!1}if(!this.options.bounds)return!0;var x=this._tileCoordsToBounds(s);return ee(this.options.bounds).overlaps(x)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var u=this._map,p=this.getTileSize(),x=s.scaleBy(p),C=x.add(p),U=u.unproject(x,s.z),X=u.unproject(C,s.z);return[U,X]},_tileCoordsToBounds:function(s){var u=this._tileCoordsToNwSe(s),p=new re(u[0],u[1]);return this.options.noWrap||(p=this._map.wrapLatLngBounds(p)),p},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var u=s.split(":"),p=new B(+u[0],+u[1]);return p.z=+u[2],p},_removeTile:function(s){var u=this._tiles[s];u&&(ft(u.el),delete this._tiles[s],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){tt(s,"leaflet-tile");var u=this.getTileSize();s.style.width=u.x+"px",s.style.height=u.y+"px",s.onselectstart=f,s.onmousemove=f,me.ielt9&&this.options.opacity<1&&Jn(s,this.options.opacity)},_addTile:function(s,u){var p=this._getTilePos(s),x=this._tileCoordsToKey(s),C=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(C),this.createTile.length<2&&K(a(this._tileReady,this,s,null,C)),Vt(C,p),this._tiles[x]={el:C,coords:s,current:!0},u.appendChild(C),this.fire("tileloadstart",{tile:C,coords:s})},_tileReady:function(s,u,p){u&&this.fire("tileerror",{error:u,tile:p,coords:s});var x=this._tileCoordsToKey(s);p=this._tiles[x],p&&(p.loaded=+new Date,this._map._fadeAnimated?(Jn(p.el,0),N(this._fadeFrame),this._fadeFrame=K(this._updateOpacity,this)):(p.active=!0,this._pruneTiles()),u||(tt(p.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:p.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),me.ielt9||!this._map._fadeAnimated?K(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var u=new B(this._wrapX?m(s.x,this._wrapX):s.x,this._wrapY?m(s.y,this._wrapY):s.y);return u.z=s.z,u},_pxBoundsToTileRange:function(s){var u=this.getTileSize();return new $(s.min.unscaleBy(u).floor(),s.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function Tx(s){return new Rs(s)}var Co=Rs.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,u){this._url=s,u=_(this,u),u.detectRetina&&me.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,u){return this._url===s&&u===void 0&&(u=!0),this._url=s,u||this.redraw(),this},createTile:function(s,u){var p=document.createElement("img");return Xe(p,"load",a(this._tileOnLoad,this,u,p)),Xe(p,"error",a(this._tileOnError,this,u,p)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(p.referrerPolicy=this.options.referrerPolicy),p.alt="",p.src=this.getTileUrl(s),p},getTileUrl:function(s){var u={r:me.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var p=this._globalTileRange.max.y-s.y;this.options.tms&&(u.y=p),u["-y"]=p}return b(this._url,i(u,this.options))},_tileOnLoad:function(s,u){me.ielt9?setTimeout(a(s,this,null,u),0):s(null,u)},_tileOnError:function(s,u,p){var x=this.options.errorTileUrl;x&&u.getAttribute("src")!==x&&(u.src=x),s(p,u)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,u=this.options.maxZoom,p=this.options.zoomReverse,x=this.options.zoomOffset;return p&&(s=u-s),s+x},_getSubdomain:function(s){var u=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var s,u;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(u=this._tiles[s].el,u.onload=f,u.onerror=f,!u.complete)){u.src=I;var p=this._tiles[s].coords;ft(u),delete this._tiles[s],this.fire("tileabort",{tile:u,coords:p})}},_removeTile:function(s){var u=this._tiles[s];if(u)return u.el.setAttribute("src",I),Rs.prototype._removeTile.call(this,s)},_tileReady:function(s,u,p){if(!(!this._map||p&&p.getAttribute("src")===I))return Rs.prototype._tileReady.call(this,s,u,p)}});function Mp(s,u){return new Co(s,u)}var zp=Co.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,u){this._url=s;var p=i({},this.defaultWmsParams);for(var x in u)x in this.options||(p[x]=u[x]);u=_(this,u);var C=u.detectRetina&&me.retina?2:1,U=this.getTileSize();p.width=U.x*C,p.height=U.y*C,this.wmsParams=p},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,Co.prototype.onAdd.call(this,s)},getTileUrl:function(s){var u=this._tileCoordsToNwSe(s),p=this._crs,x=Z(p.project(u[0]),p.project(u[1])),C=x.min,U=x.max,X=(this._wmsVersion>=1.3&&this._crs===Ap?[C.y,C.x,U.y,U.x]:[C.x,C.y,U.x,U.y]).join(","),le=Co.prototype.getTileUrl.call(this,s);return le+S(this.wmsParams,le,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+X},setParams:function(s,u){return i(this.wmsParams,s),u||this.redraw(),this}});function Px(s,u){return new zp(s,u)}Co.WMS=zp,Mp.wms=Px;var Br=lr.extend({options:{padding:.1},initialize:function(s){_(this,s),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),tt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,u){var p=this._map.getZoomScale(u,this._zoom),x=this._map.getSize().multiplyBy(.5+this.options.padding),C=this._map.project(this._center,u),U=x.multiplyBy(-p).add(C).subtract(this._map._getNewPixelOrigin(s,u));me.any3d?Mi(this._container,U,p):Vt(this._container,U)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,u=this._map.getSize(),p=this._map.containerPointToLayerPoint(u.multiplyBy(-s)).round();this._bounds=new $(p,p.add(u.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Bp=Br.extend({options:{tolerance:0},getEvents:function(){var s=Br.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Br.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");Xe(s,"mousemove",this._onMouseMove,this),Xe(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Xe(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){N(this._redrawRequest),delete this._ctx,ft(this._container),St(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var u in this._layers)s=this._layers[u],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Br.prototype._update.call(this);var s=this._bounds,u=this._container,p=s.getSize(),x=me.retina?2:1;Vt(u,s.min),u.width=x*p.x,u.height=x*p.y,u.style.width=p.x+"px",u.style.height=p.y+"px",me.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Br.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[c(s)]=s;var u=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var u=s._order,p=u.next,x=u.prev;p?p.prev=x:this._drawLast=x,x?x.next=p:this._drawFirst=p,delete s._order,delete this._layers[c(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var u=s.options.dashArray.split(/[, ]+/),p=[],x,C;for(C=0;C<u.length;C++){if(x=Number(u[C]),isNaN(x))return;p.push(x)}s.options._dashArray=p}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||K(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var u=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new $,this._redrawBounds.extend(s._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(s._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var u=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,u=this._redrawBounds;if(this._ctx.save(),u){var p=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,p.x,p.y),this._ctx.clip()}this._drawing=!0;for(var x=this._drawFirst;x;x=x.next)s=x.layer,(!u||s._pxBounds&&s._pxBounds.intersects(u))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,u){if(this._drawing){var p,x,C,U,X=s._parts,le=X.length,he=this._ctx;if(le){for(he.beginPath(),p=0;p<le;p++){for(x=0,C=X[p].length;x<C;x++)U=X[p][x],he[x?"lineTo":"moveTo"](U.x,U.y);u&&he.closePath()}this._fillStroke(he,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var u=s._point,p=this._ctx,x=Math.max(Math.round(s._radius),1),C=(Math.max(Math.round(s._radiusY),1)||x)/x;C!==1&&(p.save(),p.scale(1,C)),p.beginPath(),p.arc(u.x,u.y/C,x,0,Math.PI*2,!1),C!==1&&p.restore(),this._fillStroke(p,s)}},_fillStroke:function(s,u){var p=u.options;p.fill&&(s.globalAlpha=p.fillOpacity,s.fillStyle=p.fillColor||p.color,s.fill(p.fillRule||"evenodd")),p.stroke&&p.weight!==0&&(s.setLineDash&&s.setLineDash(u.options&&u.options._dashArray||[]),s.globalAlpha=p.opacity,s.lineWidth=p.weight,s.strokeStyle=p.color,s.lineCap=p.lineCap,s.lineJoin=p.lineJoin,s.stroke())},_onClick:function(s){for(var u=this._map.mouseEventToLayerPoint(s),p,x,C=this._drawFirst;C;C=C.next)p=C.layer,p.options.interactive&&p._containsPoint(u)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(p))&&(x=p);this._fireEvent(x?[x]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,u)}},_handleMouseOut:function(s){var u=this._hoveredLayer;u&&(Ft(this._container,"leaflet-interactive"),this._fireEvent([u],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,u){if(!this._mouseHoverThrottled){for(var p,x,C=this._drawFirst;C;C=C.next)p=C.layer,p.options.interactive&&p._containsPoint(u)&&(x=p);x!==this._hoveredLayer&&(this._handleMouseOut(s),x&&(tt(this._container,"leaflet-interactive"),this._fireEvent([x],s,"mouseover"),this._hoveredLayer=x)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,u,p){this._map._fireDOMEvent(u,p||u.type,s)},_bringToFront:function(s){var u=s._order;if(u){var p=u.next,x=u.prev;if(p)p.prev=x;else return;x?x.next=p:p&&(this._drawFirst=p),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(s)}},_bringToBack:function(s){var u=s._order;if(u){var p=u.next,x=u.prev;if(x)x.next=p;else return;p?p.prev=x:x&&(this._drawLast=x),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(s)}}});function Fp(s){return me.canvas?new Bp(s):null}var Ls=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),jx={_initContainer:function(){this._container=He("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Br.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var u=s._container=Ls("shape");tt(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",s._path=Ls("path"),u.appendChild(s._path),this._updateStyle(s),this._layers[c(s)]=s},_addPath:function(s){var u=s._container;this._container.appendChild(u),s.options.interactive&&s.addInteractiveTarget(u)},_removePath:function(s){var u=s._container;ft(u),s.removeInteractiveTarget(u),delete this._layers[c(s)]},_updateStyle:function(s){var u=s._stroke,p=s._fill,x=s.options,C=s._container;C.stroked=!!x.stroke,C.filled=!!x.fill,x.stroke?(u||(u=s._stroke=Ls("stroke")),C.appendChild(u),u.weight=x.weight+"px",u.color=x.color,u.opacity=x.opacity,x.dashArray?u.dashStyle=k(x.dashArray)?x.dashArray.join(" "):x.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=x.lineCap.replace("butt","flat"),u.joinstyle=x.lineJoin):u&&(C.removeChild(u),s._stroke=null),x.fill?(p||(p=s._fill=Ls("fill")),C.appendChild(p),p.color=x.fillColor||x.color,p.opacity=x.fillOpacity):p&&(C.removeChild(p),s._fill=null)},_updateCircle:function(s){var u=s._point.round(),p=Math.round(s._radius),x=Math.round(s._radiusY||p);this._setPath(s,s._empty()?"M0 0":"AL "+u.x+","+u.y+" "+p+","+x+" 0,"+65535*360)},_setPath:function(s,u){s._path.v=u},_bringToFront:function(s){ii(s._container)},_bringToBack:function(s){xo(s._container)}},cl=me.vml?Ls:ue,Ns=Br.extend({_initContainer:function(){this._container=cl("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=cl("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ft(this._container),St(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Br.prototype._update.call(this);var s=this._bounds,u=s.getSize(),p=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,p.setAttribute("width",u.x),p.setAttribute("height",u.y)),Vt(p,s.min),p.setAttribute("viewBox",[s.min.x,s.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(s){var u=s._path=cl("path");s.options.className&&tt(u,s.options.className),s.options.interactive&&tt(u,"leaflet-interactive"),this._updateStyle(s),this._layers[c(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){ft(s._path),s.removeInteractiveTarget(s._path),delete this._layers[c(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var u=s._path,p=s.options;u&&(p.stroke?(u.setAttribute("stroke",p.color),u.setAttribute("stroke-opacity",p.opacity),u.setAttribute("stroke-width",p.weight),u.setAttribute("stroke-linecap",p.lineCap),u.setAttribute("stroke-linejoin",p.lineJoin),p.dashArray?u.setAttribute("stroke-dasharray",p.dashArray):u.removeAttribute("stroke-dasharray"),p.dashOffset?u.setAttribute("stroke-dashoffset",p.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),p.fill?(u.setAttribute("fill",p.fillColor||p.color),u.setAttribute("fill-opacity",p.fillOpacity),u.setAttribute("fill-rule",p.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(s,u){this._setPath(s,se(s._parts,u))},_updateCircle:function(s){var u=s._point,p=Math.max(Math.round(s._radius),1),x=Math.max(Math.round(s._radiusY),1)||p,C="a"+p+","+x+" 0 1,0 ",U=s._empty()?"M0 0":"M"+(u.x-p)+","+u.y+C+p*2+",0 "+C+-p*2+",0 ";this._setPath(s,U)},_setPath:function(s,u){s._path.setAttribute("d",u)},_bringToFront:function(s){ii(s._path)},_bringToBack:function(s){xo(s._path)}});me.vml&&Ns.include(jx);function Up(s){return me.svg||me.vml?new Ns(s):null}at.include({getRenderer:function(s){var u=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var u=this._paneRenderers[s];return u===void 0&&(u=this._createRenderer({pane:s}),this._paneRenderers[s]=u),u},_createRenderer:function(s){return this.options.preferCanvas&&Fp(s)||Up(s)}});var Wp=ko.extend({initialize:function(s,u){ko.prototype.initialize.call(this,this._boundsToLatLngs(s),u)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=ee(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function Ax(s,u){return new Wp(s,u)}Ns.create=cl,Ns.pointsToPath=se,zr.geometryToLayer=rl,zr.coordsToLatLng=Mc,zr.coordsToLatLngs=il,zr.latLngToCoords=zc,zr.latLngsToCoords=ol,zr.getFeature=Eo,zr.asFeature=sl,at.mergeOptions({boxZoom:!0});var $p=kr.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){Xe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){St(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ft(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Cs(),wc(),this._startPoint=this._map.mouseEventToContainerPoint(s),Xe(document,{contextmenu:Fi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=He("div","leaflet-zoom-box",this._container),tt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var u=new $(this._point,this._startPoint),p=u.getSize();Vt(this._box,u.min),this._box.style.width=p.x+"px",this._box.style.height=p.y+"px"},_finish:function(){this._moved&&(ft(this._box),Ft(this._container,"leaflet-crosshair")),Ts(),xc(),St(document,{contextmenu:Fi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var u=new re(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});at.addInitHook("addHandler","boxZoom",$p),at.mergeOptions({doubleClickZoom:!0});var Hp=kr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var u=this._map,p=u.getZoom(),x=u.options.zoomDelta,C=s.originalEvent.shiftKey?p-x:p+x;u.options.doubleClickZoom==="center"?u.setZoom(C):u.setZoomAround(s.containerPoint,C)}});at.addInitHook("addHandler","doubleClickZoom",Hp),at.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Vp=kr.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new oi(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}tt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ft(this._map._container,"leaflet-grab"),Ft(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=ee(this._map.options.maxBounds);this._offsetLimit=Z(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var u=this._lastTime=+new Date,p=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(p),this._times.push(u),this._prunePositions(u)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,u){return s-(s-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;s.x<u.min.x&&(s.x=this._viscousLimit(s.x,u.min.x)),s.y<u.min.y&&(s.y=this._viscousLimit(s.y,u.min.y)),s.x>u.max.x&&(s.x=this._viscousLimit(s.x,u.max.x)),s.y>u.max.y&&(s.y=this._viscousLimit(s.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,u=Math.round(s/2),p=this._initialWorldOffset,x=this._draggable._newPos.x,C=(x-u+p)%s+u-p,U=(x+u+p)%s-u-p,X=Math.abs(C+p)<Math.abs(U+p)?C:U;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=X},_onDragEnd:function(s){var u=this._map,p=u.options,x=!p.inertia||s.noInertia||this._times.length<2;if(u.fire("dragend",s),x)u.fire("moveend");else{this._prunePositions(+new Date);var C=this._lastPos.subtract(this._positions[0]),U=(this._lastTime-this._times[0])/1e3,X=p.easeLinearity,le=C.multiplyBy(X/U),he=le.distanceTo([0,0]),we=Math.min(p.inertiaMaxSpeed,he),Oe=le.multiplyBy(we/he),qe=we/(p.inertiaDeceleration*X),rt=Oe.multiplyBy(-qe/2).round();!rt.x&&!rt.y?u.fire("moveend"):(rt=u._limitOffset(rt,u.options.maxBounds),K(function(){u.panBy(rt,{duration:qe,easeLinearity:X,noMoveStart:!0,animate:!0})}))}}});at.addInitHook("addHandler","dragging",Vp),at.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Zp=kr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),Xe(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),St(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,u=document.documentElement,p=s.scrollTop||u.scrollTop,x=s.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(x,p)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var u=this._panKeys={},p=this.keyCodes,x,C;for(x=0,C=p.left.length;x<C;x++)u[p.left[x]]=[-1*s,0];for(x=0,C=p.right.length;x<C;x++)u[p.right[x]]=[s,0];for(x=0,C=p.down.length;x<C;x++)u[p.down[x]]=[0,s];for(x=0,C=p.up.length;x<C;x++)u[p.up[x]]=[0,-1*s]},_setZoomDelta:function(s){var u=this._zoomKeys={},p=this.keyCodes,x,C;for(x=0,C=p.zoomIn.length;x<C;x++)u[p.zoomIn[x]]=s;for(x=0,C=p.zoomOut.length;x<C;x++)u[p.zoomOut[x]]=-s},_addHooks:function(){Xe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){St(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var u=s.keyCode,p=this._map,x;if(u in this._panKeys){if(!p._panAnim||!p._panAnim._inProgress)if(x=this._panKeys[u],s.shiftKey&&(x=z(x).multiplyBy(3)),p.options.maxBounds&&(x=p._limitOffset(z(x),p.options.maxBounds)),p.options.worldCopyJump){var C=p.wrapLatLng(p.unproject(p.project(p.getCenter()).add(x)));p.panTo(C)}else p.panBy(x)}else if(u in this._zoomKeys)p.setZoom(p.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&p._popup&&p._popup.options.closeOnEscapeKey)p.closePopup();else return;Fi(s)}}});at.addInitHook("addHandler","keyboard",Zp),at.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var qp=kr.extend({addHooks:function(){Xe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){St(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var u=yp(s),p=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var x=Math.max(p-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),x),Fi(s)},_performZoom:function(){var s=this._map,u=s.getZoom(),p=this._map.options.zoomSnap||0;s._stop();var x=this._delta/(this._map.options.wheelPxPerZoomLevel*4),C=4*Math.log(2/(1+Math.exp(-Math.abs(x))))/Math.LN2,U=p?Math.ceil(C/p)*p:C,X=s._limitZoom(u+(this._delta>0?U:-U))-u;this._delta=0,this._startTime=null,X&&(s.options.scrollWheelZoom==="center"?s.setZoom(u+X):s.setZoomAround(this._lastMousePos,u+X))}});at.addInitHook("addHandler","scrollWheelZoom",qp);var Ox=600;at.mergeOptions({tapHold:me.touchNative&&me.safari&&me.mobile,tapTolerance:15});var Yp=kr.extend({addHooks:function(){Xe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){St(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var u=s.touches[0];this._startPos=this._newPos=new B(u.clientX,u.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(Xe(document,"touchend",sn),Xe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),Ox),Xe(document,"touchend touchcancel contextmenu",this._cancel,this),Xe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){St(document,"touchend",sn),St(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),St(document,"touchend touchcancel contextmenu",this._cancel,this),St(document,"touchmove",this._onMove,this)},_onMove:function(s){var u=s.touches[0];this._newPos=new B(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,u){var p=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});p._simulated=!0,u.target.dispatchEvent(p)}});at.addInitHook("addHandler","tapHold",Yp),at.mergeOptions({touchZoom:me.touch,bounceAtZoomLimits:!0});var Gp=kr.extend({addHooks:function(){tt(this._map._container,"leaflet-touch-zoom"),Xe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ft(this._map._container,"leaflet-touch-zoom"),St(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var u=this._map;if(!(!s.touches||s.touches.length!==2||u._animatingZoom||this._zooming)){var p=u.mouseEventToContainerPoint(s.touches[0]),x=u.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(p.add(x)._divideBy(2))),this._startDist=p.distanceTo(x),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),Xe(document,"touchmove",this._onTouchMove,this),Xe(document,"touchend touchcancel",this._onTouchEnd,this),sn(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var u=this._map,p=u.mouseEventToContainerPoint(s.touches[0]),x=u.mouseEventToContainerPoint(s.touches[1]),C=p.distanceTo(x)/this._startDist;if(this._zoom=u.getScaleZoom(C,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&C<1||this._zoom>u.getMaxZoom()&&C>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,C===1)return}else{var U=p._add(x)._divideBy(2)._subtract(this._centerPoint);if(C===1&&U.x===0&&U.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(U),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),N(this._animRequest);var X=a(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=K(X,this,!0),sn(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,N(this._animRequest),St(document,"touchmove",this._onTouchMove,this),St(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});at.addInitHook("addHandler","touchZoom",Gp),at.BoxZoom=$p,at.DoubleClickZoom=Hp,at.Drag=Vp,at.Keyboard=Zp,at.ScrollWheelZoom=qp,at.TapHold=Yp,at.TouchZoom=Gp,n.Bounds=$,n.Browser=me,n.CRS=Ee,n.Canvas=Bp,n.Circle=Ic,n.CircleMarker=nl,n.Class=E,n.Control=ar,n.DivIcon=Ip,n.DivOverlay=Er,n.DomEvent=Gw,n.DomUtil=qw,n.Draggable=oi,n.Evented=M,n.FeatureGroup=Ir,n.GeoJSON=zr,n.GridLayer=Rs,n.Handler=kr,n.Icon=So,n.ImageOverlay=al,n.LatLng=Q,n.LatLngBounds=re,n.Layer=lr,n.LayerGroup=bo,n.LineUtil=lx,n.Map=at,n.Marker=tl,n.Mixin=nx,n.Path=si,n.Point=B,n.PolyUtil=rx,n.Polygon=ko,n.Polyline=Mr,n.Popup=ll,n.PosAnimation=_p,n.Projection=ux,n.Rectangle=Wp,n.Renderer=Br,n.SVG=Ns,n.SVGOverlay=Np,n.TileLayer=Co,n.Tooltip=ul,n.Transformation=Ce,n.Util=W,n.VideoOverlay=Lp,n.bind=a,n.bounds=Z,n.canvas=Fp,n.circle=yx,n.circleMarker=gx,n.control=As,n.divIcon=Cx,n.extend=i,n.featureGroup=fx,n.geoJSON=Rp,n.geoJson=wx,n.gridLayer=Tx,n.icon=px,n.imageOverlay=xx,n.latLng=fe,n.latLngBounds=ee,n.layerGroup=hx,n.map=Kw,n.marker=mx,n.point=z,n.polygon=vx,n.polyline=_x,n.popup=kx,n.rectangle=Ax,n.setOptions=_,n.stamp=c,n.svg=Up,n.svgOverlay=Sx,n.tileLayer=Mp,n.tooltip=Ex,n.transformation=Te,n.version=r,n.videoOverlay=bx;var Dx=window.L;n.noConflict=function(){return window.L=Dx,this},window.L=n})})(Wh,Wh.exports);var dc=Wh.exports;function np(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function rp(t,e){return e==null?function(r,i){const o=J.useRef();return o.current||(o.current=t(r,i)),o}:function(r,i){const o=J.useRef();o.current||(o.current=t(r,i));const a=J.useRef(r),{instance:l}=o.current;return J.useEffect(function(){a.current!==r&&(e(l,r,a.current),a.current=r)},[l,r,i]),o}}function RC(t,e){J.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function uw(t){return function(n){const r=aw(),i=t(tp(n,r),r);return iw(r.map,n.attribution),lw(i.current,n.eventHandlers),RC(i.current,r),i}}function LC(t,e){const n=rp(t,e),r=uw(n);return jC(r)}function NC(t,e){const n=rp(t),r=DC(n,e);return AC(r)}function IC(t,e){const n=rp(t,e),r=uw(n);return OC(r)}function MC(t,e,n){const{opacity:r,zIndex:i}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),i!=null&&i!==n.zIndex&&t.setZIndex(i)}function $h(){return $h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$h.apply(this,arguments)}function zC({bounds:t,boundsOptions:e,center:n,children:r,className:i,id:o,placeholder:a,style:l,whenReady:c,zoom:h,...m},f){const[g]=J.useState({className:i,id:o,style:l}),[y,v]=J.useState(null);J.useImperativeHandle(f,()=>(y==null?void 0:y.map)??null,[y]);const _=J.useCallback(w=>{if(w!==null&&y===null){const b=new dc.Map(w,m);n!=null&&h!=null?b.setView(n,h):t!=null&&b.fitBounds(t,e),c!=null&&b.whenReady(c),v(TC(b))}},[]);J.useEffect(()=>()=>{y==null||y.map.remove()},[y]);const S=y?_a.createElement(sw,{value:y},r):a??null;return _a.createElement("div",$h({},g,{ref:_}),S)}const cw=J.forwardRef(zC),dw=LC(function({position:e,...n},r){const i=new dc.Marker(e,n);return np(i,PC(r,{overlayContainer:i}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),hw=NC(function(e,n){const r=new dc.Popup(e,n.overlayContainer);return np(r,n)},function(e,n,{position:r},i){J.useEffect(function(){const{instance:a}=e;function l(h){h.popup===a&&(a.update(),i(!0))}function c(h){h.popup===a&&i(!1)}return n.map.on({popupopen:l,popupclose:c}),n.overlayContainer==null?(r!=null&&a.setLatLng(r),a.openOn(n.map)):n.overlayContainer.bindPopup(a),function(){var m;n.map.off({popupopen:l,popupclose:c}),(m=n.overlayContainer)==null||m.unbindPopup(),n.map.removeLayer(a)}},[e,n,i,r])}),fw=IC(function({url:e,...n},r){const i=new dc.TileLayer(e,tp(n,r));return np(i,r)},function(e,n,r){MC(e,n,r);const{url:i}=n;i!=null&&i!==r.url&&e.setUrl(i)});function No(t,e,n,r){if(r===-1){const i=new Date(t,e+1,0),a=(i.getDay()-n+7)%7;return new Date(t,e,i.getDate()-a)}else{const o=new Date(t,e,1).getDay(),l=1+(n-o+7)%7+(r-1)*7;return new Date(t,e,l)}}function Tr(t){const e=t.getDay();if(e===6){const n=new Date(t);return n.setDate(t.getDate()-1),n}else if(e===0){const n=new Date(t);return n.setDate(t.getDate()+1),n}return t}function BC(t){const e=[],n=new Date(t,0,1);e.push({name:"New Year's Day",date:n,observed:Tr(n),isObserved:n.getTime()!==Tr(n).getTime()});const r=No(t,0,1,3);e.push({name:"Martin Luther King Jr. Day",date:r,observed:r,isObserved:!1});const i=No(t,1,1,3);e.push({name:"Presidents' Day",date:i,observed:i,isObserved:!1});const o=No(t,4,1,-1);e.push({name:"Memorial Day",date:o,observed:o,isObserved:!1});const a=new Date(t,5,19);e.push({name:"Juneteenth",date:a,observed:Tr(a),isObserved:a.getTime()!==Tr(a).getTime()});const l=new Date(t,6,4);e.push({name:"Independence Day",date:l,observed:Tr(l),isObserved:l.getTime()!==Tr(l).getTime()});const c=No(t,8,1,1);e.push({name:"Labor Day",date:c,observed:c,isObserved:!1});const h=No(t,9,1,2);e.push({name:"Columbus Day",date:h,observed:h,isObserved:!1});const m=new Date(t,10,11);e.push({name:"Veterans Day",date:m,observed:Tr(m),isObserved:m.getTime()!==Tr(m).getTime()});const f=No(t,10,4,4);e.push({name:"Thanksgiving Day",date:f,observed:f,isObserved:!1});const g=new Date(t,11,25);return e.push({name:"Christmas Day",date:g,observed:Tr(g),isObserved:g.getTime()!==Tr(g).getTime()}),e}function tu(t){const e=t.getFullYear(),n=BC(e),r=new Date(t.getFullYear(),t.getMonth(),t.getDate());for(const i of n){const o=new Date(i.observed.getFullYear(),i.observed.getMonth(),i.observed.getDate());if(r.getTime()===o.getTime())return i}return null}function Jo(t){return t.isObserved?`${t.name} (observed)`:t.name}function iy(t){if(!t)return null;const e=new Date(t);return tu(e)}const FC=(()=>{let t=0;return async()=>{const n=Date.now()-t;n<1100&&await new Promise(r=>setTimeout(r,1100-n)),t=Date.now()}})();async function oy(t){await FC();const e=new URL("https://nominatim.openstreetmap.org/search");e.searchParams.set("q",t),e.searchParams.set("format","json"),e.searchParams.set("limit","1");const r=await(await fetch(e.toString(),{headers:{"Accept-Language":"en","User-Agent":"auto-appraisal-mvp"}})).json();return r&&r[0]?{lat:parseFloat(r[0].lat),lng:parseFloat(r[0].lon)}:{lat:null,lng:null}}function UC(){const t={padding:12,fontSize:16,border:"1px solid #4a5568",borderRadius:6,background:"#2d3748",color:"#e2e8f0"},[e,n]=J.useState({claim_number:"",customer_name:"",address_line1:"",status:"IN_PROGRESS"}),[r,i]=J.useState([]),[o,a]=J.useState([]),[l,c]=J.useState(null),[h,m]=J.useState(!1),f=ni();J.useEffect(()=>{(async()=>{const{data:v}=await ze.from("profiles").select("user_id, full_name, role");i(v||[])})(),(async()=>{const{data:v}=await ze.from("vendors").select("id, name, pay_amount").eq("active",!0).order("name");a(v||[])})()},[]);const g=async()=>{const v=`${e.address_line1} ${e.address_line2||""} ${e.city||""} ${e.state||""} ${e.zip||""}`.trim();if(!v)return alert("Please enter an address first");m(!0);const _=await oy(v);m(!1),_.lat&&_.lng?c(_):alert("Could not geocode address. Please verify it is correct.")},y=async(v=!1)=>{if(!e.claim_number){alert("Please enter a Claim Number");return}if(!e.customer_name){alert("Please enter a Customer Name");return}if(!e.address_line1){alert("Please enter an Address");return}const _=`${e.address_line1} ${e.address_line2||""} ${e.city||""} ${e.state||""} ${e.zip||""}`.trim();let S={lat:null,lng:null};if(_&&(S=await oy(_)),v){const{error:b}=await ze.from("claims").update({...e,...S}).eq("claim_number",e.claim_number);b?alert(`Error updating claim: ${b.message}`):(alert(" Claim updated successfully!"),f("/admin/claims"));return}const{error:w}=await ze.from("claims").insert([{...e,...S}]);w?w.code==="23505"?confirm(` A claim with the number "${e.claim_number}" already exists!

Click OK to UPDATE the existing claim with this new data.
Click Cancel to go back and change the claim number.`)&&y(!0):alert(`Error: ${w.message}`):(alert(" Claim saved successfully!"),f("/admin/claims"))};return d.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a202c 0%, #2d3748 100%)",padding:16},children:d.jsxs("div",{style:{maxWidth:800,margin:"0 auto",display:"grid",gap:8},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,background:"#2d3748",border:"1px solid #4a5568",padding:16,borderRadius:8},children:[d.jsx("h3",{style:{margin:0,color:"#e2e8f0"},children:"New Claim"}),d.jsxs("div",{style:{display:"flex",gap:8},children:[d.jsx(_t,{to:"/admin/claims",style:{padding:"8px 16px",background:"#4a5568",color:"white",textDecoration:"none",borderRadius:4,fontWeight:"bold"},children:" Back to Claims"}),d.jsx(_t,{to:"/",style:{padding:"8px 16px",background:"#4a5568",color:"white",textDecoration:"none",borderRadius:4,fontWeight:"bold"},children:" Home"})]})]}),d.jsx("h4",{style:{color:"#e2e8f0",marginTop:16},children:"Claim Information"}),d.jsx("input",{placeholder:"Claim #",value:e.claim_number,onChange:v=>n({...e,claim_number:v.target.value}),style:{padding:12,fontSize:16,border:"1px solid #4a5568",borderRadius:6,background:"#2d3748",color:"#e2e8f0"}}),d.jsx("input",{placeholder:"Customer name",value:e.customer_name,onChange:v=>n({...e,customer_name:v.target.value}),style:t}),d.jsx("input",{placeholder:"Phone",value:e.phone||"",onChange:v=>n({...e,phone:v.target.value}),style:t}),d.jsx("input",{placeholder:"Email",value:e.email||"",onChange:v=>n({...e,email:v.target.value}),style:t}),d.jsx("h4",{style:{color:"#e2e8f0",marginTop:16},children:"Vehicle Information"}),d.jsx("input",{placeholder:"VIN",value:e.vin||"",onChange:v=>n({...e,vin:v.target.value}),style:t}),d.jsx("input",{placeholder:"Year",type:"number",value:e.vehicle_year||"",onChange:v=>n({...e,vehicle_year:v.target.value?parseInt(v.target.value):void 0}),style:t}),d.jsx("input",{placeholder:"Make",value:e.vehicle_make||"",onChange:v=>n({...e,vehicle_make:v.target.value}),style:t}),d.jsx("input",{placeholder:"Model",value:e.vehicle_model||"",onChange:v=>n({...e,vehicle_model:v.target.value}),style:t}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"#e2e8f0"},children:"Date of Loss"}),d.jsx("input",{type:"date",value:e.date_of_loss||"",onChange:v=>n({...e,date_of_loss:v.target.value}),style:t})]}),d.jsx("input",{placeholder:"Insurance Company",value:e.insurance_company||"",onChange:v=>n({...e,insurance_company:v.target.value}),style:t}),d.jsx("h4",{style:{color:"#e2e8f0",marginTop:16},children:"Accident Description"}),d.jsx("textarea",{placeholder:"Describe the accident and damage...",value:e.notes||"",onChange:v=>n({...e,notes:v.target.value}),rows:4,style:{...t,resize:"vertical"}}),d.jsx("h4",{style:{color:"#e2e8f0",marginTop:16},children:"Location"}),d.jsx("input",{placeholder:"Address line 1",value:e.address_line1,onChange:v=>n({...e,address_line1:v.target.value}),style:t}),d.jsx("input",{placeholder:"Address line 2 (optional)",value:e.address_line2||"",onChange:v=>n({...e,address_line2:v.target.value}),style:t}),d.jsx("input",{placeholder:"City",value:e.city||"",onChange:v=>n({...e,city:v.target.value}),style:t}),d.jsx("input",{placeholder:"State",value:e.state||"",onChange:v=>n({...e,state:v.target.value}),style:t}),d.jsx("input",{placeholder:"ZIP",value:e.zip||"",onChange:v=>n({...e,zip:v.target.value}),style:t}),d.jsx("button",{onClick:g,disabled:h,style:{padding:12,fontSize:16,fontWeight:"bold",background:h?"#4a5568":"#3b82f6",color:"white",border:"none",borderRadius:6,cursor:h?"not-allowed":"pointer"},children:h?"Loading map...":"Preview Map Location"}),l&&d.jsx("div",{style:{height:300,marginTop:8},children:d.jsxs(cw,{center:[l.lat,l.lng],zoom:15,style:{height:"100%",width:"100%"},children:[d.jsx(fw,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:" OpenStreetMap contributors"}),d.jsx(dw,{position:[l.lat,l.lng],children:d.jsx(hw,{children:"Claim Location"})})]})}),d.jsx("h4",{style:{color:"#e2e8f0",marginTop:16},children:"Status"}),d.jsxs("select",{value:e.status||"IN_PROGRESS",onChange:v=>n({...e,status:v.target.value}),style:{padding:12,fontSize:16,border:"1px solid #4a5568",borderRadius:6,background:"#2d3748",color:"#e2e8f0"},children:[d.jsx("option",{value:"IN_PROGRESS",children:" In Progress (Not Scheduled Yet)"}),d.jsx("option",{value:"SCHEDULED",children:" Scheduled"})]}),d.jsxs("h4",{style:{color:"#e2e8f0",marginTop:16},children:["Appointment Schedule ",e.status==="IN_PROGRESS"?"(Optional)":""]}),d.jsxs("div",{style:{display:"grid",gap:8},children:[d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"#e2e8f0"},children:"Appointment Start (Date & Time)"}),d.jsx("input",{type:"datetime-local",value:e.appointment_start?(()=>{const v=new Date(e.appointment_start),_=v.getFullYear(),S=String(v.getMonth()+1).padStart(2,"0"),w=String(v.getDate()).padStart(2,"0"),b=String(v.getHours()).padStart(2,"0"),k=String(v.getMinutes()).padStart(2,"0");return`${_}-${S}-${w}T${b}:${k}`})():"",onChange:v=>{if(!v.target.value){n({...e,appointment_start:void 0});return}const[_,S]=v.target.value.split("T"),[w,b,k]=_.split("-").map(Number),[T,I]=S.split(":").map(Number),R=new Date(w,b-1,k,T,I,0);n({...e,appointment_start:R.toISOString()})},style:t}),e.appointment_start&&(()=>{const v=iy(e.appointment_start);return v?d.jsxs("div",{style:{marginTop:8,padding:12,background:"#f59e0b",border:"2px solid #d97706",borderRadius:6,color:"#1a202c",fontWeight:"bold",display:"flex",alignItems:"center",gap:8},children:[d.jsx("span",{style:{fontSize:20},children:""}),d.jsxs("span",{children:["Warning: This appointment is scheduled on ",Jo(v)," (Federal Holiday)"]})]}):null})()]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:4,fontWeight:"bold",color:"#e2e8f0"},children:"Appointment End (Date & Time)"}),d.jsx("input",{type:"datetime-local",value:e.appointment_end?(()=>{const v=new Date(e.appointment_end),_=v.getFullYear(),S=String(v.getMonth()+1).padStart(2,"0"),w=String(v.getDate()).padStart(2,"0"),b=String(v.getHours()).padStart(2,"0"),k=String(v.getMinutes()).padStart(2,"0");return`${_}-${S}-${w}T${b}:${k}`})():"",onChange:v=>{if(!v.target.value){n({...e,appointment_end:void 0});return}const[_,S]=v.target.value.split("T"),[w,b,k]=_.split("-").map(Number),[T,I]=S.split(":").map(Number),R=new Date(w,b-1,k,T,I,0);n({...e,appointment_end:R.toISOString()})},style:t}),e.appointment_end&&(()=>{const v=iy(e.appointment_end);return v?d.jsxs("div",{style:{marginTop:8,padding:12,background:"#f59e0b",border:"2px solid #d97706",borderRadius:6,color:"#1a202c",fontWeight:"bold",display:"flex",alignItems:"center",gap:8},children:[d.jsx("span",{style:{fontSize:20},children:""}),d.jsxs("span",{children:["Warning: This appointment is scheduled on ",Jo(v)," (Federal Holiday)"]})]}):null})()]})]}),d.jsx("h4",{style:{color:"#e2e8f0",marginTop:16},children:"Firm"}),d.jsxs("select",{value:e.firm||"",onChange:v=>{const _=v.target.value||void 0,S=o.find(w=>w.name===_);n({...e,firm:_,pay_amount:(S==null?void 0:S.pay_amount)||null})},style:{padding:12,fontSize:16,border:"1px solid #4a5568",borderRadius:6,background:"#2d3748",color:"#e2e8f0"},children:[d.jsx("option",{value:"",children:"No Firm"}),o.map(v=>d.jsx("option",{value:v.name,children:v.name},v.id))]}),d.jsx("h4",{style:{color:"#e2e8f0",marginTop:16},children:"Pay Amount"}),d.jsx("input",{type:"number",step:"0.01",placeholder:"Pay amount",value:e.pay_amount||"",onChange:v=>{const _=v.target.value;n({...e,pay_amount:_?parseFloat(_):null})},style:{padding:12,fontSize:16,border:"1px solid #4a5568",borderRadius:6,background:"#2d3748",color:"#e2e8f0"}}),d.jsx("h4",{style:{color:"#e2e8f0",marginTop:16},children:"Assignment"}),d.jsxs("select",{value:e.assigned_to||"",onChange:v=>n({...e,assigned_to:v.target.value||null}),style:{padding:12,fontSize:16,border:"1px solid #4a5568",borderRadius:6,background:"#2d3748",color:"#e2e8f0"},children:[d.jsx("option",{value:"",children:"Unassigned"}),r==null?void 0:r.map(v=>d.jsxs("option",{value:v.user_id,children:[v.full_name||v.user_id," (",v.role,")"]},v.user_id))]}),d.jsx("button",{onClick:()=>y(!1),style:{marginTop:16,padding:12,fontSize:16,fontWeight:"bold",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:6,cursor:"pointer"},children:"Save Claim"})]})})}class WC{constructor(e){ai(this,"supabaseClient");ai(this,"currentUser",null);ai(this,"userProfile",null);ai(this,"initialized",!1);this.supabaseClient=e}get isAdmin(){var e;return this.initialized&&((e=this.userProfile)==null?void 0:e.role)==="admin"}get isInitialized(){return this.initialized}async initialize(){try{console.log("Initializing React Supabase authorization...");const{data:{session:e},error:n}=await this.supabaseClient.auth.getSession();if(n)return console.error("Session error:",n),{success:!1,error:"Authentication failed"};if(!e)return console.warn("No active session"),{success:!1,error:"No active session"};this.currentUser=e.user,console.log("Current user ID:",this.currentUser.id);const{data:r,error:i}=await this.supabaseClient.from("profiles").select("user_id, role, full_name").eq("user_id",this.currentUser.id).single();return i?(console.error("Profile fetch error:",i),{success:!1,error:"Unable to load user profile"}):r?(this.userProfile=r,this.initialized=!0,console.log("React authorization initialized:",{userId:this.currentUser.id,role:r.role,isAdmin:this.isAdmin,fullName:r.full_name}),{success:!0}):(console.error("No profile found for user"),{success:!1,error:"User profile not found"})}catch(e){return console.error("Authorization initialization failed:",e),{success:!1,error:e.message}}}scopedClaimsQuery(e){var r;if(!this.initialized)throw new Error("Authorization not initialized. Call initialize() first.");console.log("Applying query scoping:",{isAdmin:this.isAdmin,userId:(r=this.currentUser)==null?void 0:r.id});let n=e.is("archived_at",null);return this.isAdmin?(console.log("Admin access: returning active claims only"),n):(console.log("Appraiser access: filtering by assigned_to =",this.currentUser.id),n.eq("assigned_to",this.currentUser.id))}canAccessClaim(e){return this.initialized?this.isAdmin?!0:e.assigned_to===this.currentUser.id:!1}getCurrentUser(){return this.initialized?{id:this.currentUser.id,email:this.currentUser.email,role:this.userProfile.role,fullName:this.userProfile.full_name,isAdmin:this.isAdmin}:null}handleAuthError(e){var n,r;return console.error("Authentication error:",e),(n=e.message)!=null&&n.includes("JWT")||e.code==="PGRST301"||(r=e.message)!=null&&r.includes("401")?{shouldRedirect:!0,message:"Your session has expired. Please log in again."}:e.code==="PGRST116"?{shouldRedirect:!1,message:"Access denied. You do not have permission to view this data."}:{shouldRedirect:!1,message:`Error: ${e.message}`}}}let ia=null;async function hc(t){ia||(ia=new WC(t));const e=await ia.initialize();if(!e.success)throw new Error(e.error);return ia}function Zn(){return ia}const Fn={Sedgwick:"#9CA3AF",ACD:"#F59E0B",ClaimSolution:"#EC4899","Complete Claims":"#EF4444",Doan:"#10B981",Legacy:"#3B82F6",AMA:"#FACC15",IANET:"#92400E","A-TEAM":"#06B6D4",HEA:"#6366F1",Frontline:"#1F2937",SCA:"#78350F"},_n=t=>{if(!t)return"#9CA3AF";const e=t.toUpperCase().trim();return e.includes("SEDGWK")||e.includes("SEDGWICK")?Fn.Sedgwick:e.includes("AUTOCLAIMSDI")||e.includes("AUTOCLAIMS")||e.includes("ACD")?Fn.ACD:e==="CS"||e==="CCS"||e.includes("CLAIMSOLUTION")||e.includes("CLAIM SOLUTION")?Fn.ClaimSolution:e.includes("COMPLETE CLAIMS")?Fn["Complete Claims"]:e.includes("SL APPRAISAL")||e.includes("DOAN")?Fn.Doan:e.includes("G T APPRAISALS")||e.includes("LEGACY")?Fn.Legacy:e.includes("AMA")?Fn.AMA:e.includes("IANET")?Fn.IANET:e.includes("A TEAM")||e.includes("A-TEAM")||e.includes("ATEAM")?Fn["A-TEAM"]:e.includes("HEAVY EQUIPMENT")||e.includes("HEA")?Fn.HEA:e.includes("FRONTLINE")?Fn.Frontline:e.includes("SCA")?Fn.SCA:"#9CA3AF"},$C=t=>{const e=["Claim Number","Customer Name","Phone","Email","VIN","Vehicle Year","Vehicle Make","Vehicle Model","Address Line 1","Address Line 2","City","State","Postal Code","Status","Assigned To","Appointment Start","Appointment End","Notes","Firm Name","Created At"],n=t.map(l=>{var c,h;return[l.claim_number||"",l.customer_name||"",l.phone||"",l.email||"",l.vin||"",((c=l.vehicle_year)==null?void 0:c.toString())||"",l.vehicle_make||"",l.vehicle_model||"",l.address_line1||"",l.address_line2||"",l.city||"",l.state||"",l.zip||"",l.status||"",((h=l.profiles)==null?void 0:h.full_name)||"Unassigned",l.appointment_start||"",l.appointment_end||"",l.notes||"",l.firm||"",l.created_at||""].map(m=>`"${String(m).replace(/"/g,'""')}"`)}),r=[e.join(","),...n.map(l=>l.join(","))].join(`
`),i=new Blob([r],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),a=URL.createObjectURL(i);o.setAttribute("href",a),o.setAttribute("download",`claims_${new Date().toISOString().split("T")[0]}.csv`),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)},HC=3;function pw({claims:t,onClaimUpdate:e}){const n=ni(),[r,i]=J.useState(new Date),[o,a]=J.useState(null),[l,c]=J.useState(null),[h,m]=J.useState(null),[f,g]=J.useState(null),[y,v]=J.useState("09:00"),[_,S]=J.useState(""),[w,b]=J.useState(""),[k,T]=J.useState([]),I=Zn(),R=I==null?void 0:I.getCurrentUser(),j=(R==null?void 0:R.role)==="admin",P=["January","February","March","April","May","June","July","August","September","October","November","December"],A=r.getFullYear(),F=r.getMonth();J.useEffect(()=>{(async()=>{const{data:be,error:Ce}=await ze.from("profiles").select("user_id, full_name").eq("role","appraiser").order("full_name");!Ce&&be&&T(be)})()},[]);const K=t.filter(ae=>ae.appointment_start),N=t.filter(ae=>!ae.appointment_start),W=new Date(A,F,1),Y=new Date(A,F+1,0).getDate(),H=W.getDay(),M=()=>{i(new Date(A,F-1,1))},B=()=>{i(new Date(A,F+1,1))},D=(ae,be)=>{ae.dataTransfer.effectAllowed="move",ae.dataTransfer.setData("text/claim-id",be),a(be)},z=()=>{a(null)},$=ae=>{ae.preventDefault(),ae.dataTransfer.dropEffect="move"},Z=(ae,be)=>{ae.preventDefault(),ae.stopPropagation();const Ce=ae.dataTransfer.getData("text/claim-id");Ce&&(m(Ce),g(be),v("09:00"),S(""),b(""))},re=async()=>{if(!h||!f)return;const[ae,be,Ce]=f.split("-").map(Number),[Te,nt]=y.split(":").map(Number),O=new Date(ae,be-1,Ce,Te,nt,0),ue=new Date(O.getTime()+2*60*60*1e3);try{const se={appointment_start:O.toISOString(),appointment_end:ue.toISOString(),status:"SCHEDULED"};_.trim()&&(se.notes=_.trim()),w&&(se.assigned_to=w);const{error:G}=await ze.from("claims").update(se).eq("id",h);if(G)throw G;m(null),g(null),e()}catch(se){alert(`Error scheduling claim: ${se.message}`)}},ee=()=>{m(null),g(null),v("09:00"),S(""),b("")},Q=async ae=>{ae.preventDefault(),ae.stopPropagation();const be=ae.dataTransfer.getData("text/claim-id");if(!be)return;const Ce=t.find(Te=>Te.id===be);if(!Ce){alert("Claim not found");return}if(!Ce.appointment_start){alert("Claim is already unscheduled");return}try{const{error:Te}=await ze.from("claims").update({appointment_start:null,appointment_end:null,status:"IN_PROGRESS"}).eq("id",be);if(Te)throw Te;e()}catch(Te){alert(`Error unscheduling claim: ${Te.message}`)}},fe=ae=>{const be=_n(ae.firm),Ce=ae.appointment_start?new Date(ae.appointment_start).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):"";return d.jsxs("div",{draggable:!0,onDragStart:Te=>D(Te,ae.id),onDragEnd:z,onClick:Te=>{Te.stopPropagation(),n(`/claim/${ae.id}?from=calendar`)},style:{cursor:"grab",padding:"6px 8px",margin:"4px 0",background:"#2d3748",border:`2px solid ${be}`,borderRadius:"4px",fontSize:"12px",color:"#e2e8f0",opacity:o===ae.id?.5:1,userSelect:"none"},children:[d.jsxs("div",{style:{fontWeight:"bold",marginBottom:"2px",fontSize:"13px"},children:["#",ae.claim_number]}),d.jsx("div",{style:{fontSize:"11px",color:"#a0aec0",marginBottom:"2px"},children:ae.customer_name}),Ce&&d.jsxs("div",{style:{fontSize:"10px",color:"#cbd5e0"},children:[" ",Ce]})]},ae.id)},Ee=ae=>{const be=_n(ae.firm);return d.jsxs("div",{draggable:!0,onDragStart:Ce=>D(Ce,ae.id),onDragEnd:z,onClick:Ce=>{Ce.stopPropagation(),window.open(`/CipherDispatch/claim/${ae.id}`,"_blank")},style:{cursor:"grab",padding:"10px",margin:"6px 0",background:"#2d3748",borderLeft:`4px solid ${be}`,borderRadius:"6px",fontSize:"14px",color:"#e2e8f0",opacity:o===ae.id?.5:1,transition:"transform 0.2s"},onMouseEnter:Ce=>Ce.currentTarget.style.transform="translateX(4px)",onMouseLeave:Ce=>Ce.currentTarget.style.transform="translateX(0)",children:[d.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px",fontSize:"15px"},children:ae.customer_name}),d.jsxs("div",{style:{fontSize:"12px",color:"#a0aec0",marginBottom:"2px"},children:["#",ae.claim_number]}),d.jsx("div",{style:{fontSize:"11px",color:"#718096"},children:ae.city||"No location"}),ae.firm&&d.jsx("div",{style:{marginTop:"4px",fontSize:"10px",color:be,fontWeight:"bold"},children:ae.firm})]},ae.id)},ke=()=>{const ae=[];for(let be=0;be<H;be++)ae.push(d.jsx("div",{style:{background:"#1a202c"}},`empty-${be}`));for(let be=1;be<=Y;be++){const Ce=new Date(A,F,be),Te=Ce.toDateString()===new Date().toDateString(),nt=`${A}-${String(F+1).padStart(2,"0")}-${String(be).padStart(2,"0")}`,O=tu(Ce),ue=K.filter(ce=>{if(!ce.appointment_start)return!1;const pe=new Date(ce.appointment_start);return pe.getFullYear()===A&&pe.getMonth()===F&&pe.getDate()===be}).sort((ce,pe)=>{const ie=new Date(ce.appointment_start).getTime(),ge=new Date(pe.appointment_start).getTime();return ie-ge}),se=ue.slice(0,HC),G=ue.length-se.length,q=ue.reduce((ce,pe)=>ce+(pe.pay_amount||0),0),ne=ue.reduce((ce,pe)=>ce+(pe.file_total||0),0);ae.push(d.jsxs("div",{onDragOver:$,onDrop:ce=>Z(ce,nt),onClick:()=>c({date:nt,claims:ue}),style:{background:Te?"#2d3748":"#1e2938",border:Te?"2px solid #667eea":"1px solid #4a5568",padding:"6px",minHeight:"120px",cursor:"pointer",transition:"all 0.2s",position:"relative"},onMouseEnter:ce=>ce.currentTarget.style.borderColor="#667eea",onMouseLeave:ce=>ce.currentTarget.style.borderColor=Te?"#667eea":"#4a5568",children:[d.jsx("div",{style:{fontWeight:"bold",fontSize:"16px",color:Te?"#667eea":"#e2e8f0",marginBottom:"6px"},children:be}),O&&d.jsxs("div",{style:{background:"linear-gradient(135deg, #dc2626 0%, #991b1b 100%)",color:"#ffffff",fontSize:"9px",padding:"3px 6px",borderRadius:"4px",marginBottom:"6px",fontWeight:"bold",textAlign:"center",boxShadow:"0 2px 4px rgba(220, 38, 38, 0.3)",border:"1px solid #7f1d1d"},title:Jo(O),children:[" ",Jo(O)]}),ue.length>0&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{style:{fontSize:"10px",color:"#a0aec0",marginBottom:"2px"},children:[ue.length," claim",ue.length>1?"s":""]}),j&&q>0&&d.jsxs("div",{style:{fontSize:"10px",color:"#10b981",marginBottom:"2px",fontWeight:"bold"},children:[" $",q.toFixed(2)]}),j&&ne>0&&d.jsxs("div",{style:{fontSize:"10px",color:"#3b82f6",marginBottom:"4px",fontWeight:"bold"},children:[" $",ne.toFixed(2)]})]}),d.jsx("div",{children:se.map(ce=>fe(ce))}),G>0&&d.jsxs("div",{style:{fontSize:"11px",color:"#667eea",textAlign:"center",marginTop:"4px",fontWeight:"bold"},children:["+ ",G," more"]})]},be))}return ae};return d.jsxs("div",{style:{display:"flex",gap:"16px",minHeight:"80vh"},children:[d.jsxs("div",{style:{width:"280px",background:"#1a202c",border:"2px solid #4a5568",borderRadius:"8px",padding:"16px",flexShrink:0,position:"sticky",top:"16px",alignSelf:"flex-start",maxHeight:"calc(100vh - 32px)",display:"flex",flexDirection:"column"},onDragOver:$,onDrop:Q,children:[d.jsxs("div",{style:{marginBottom:"16px",flexShrink:0},children:[d.jsx("h3",{style:{margin:0,color:"#e2e8f0",fontSize:"18px",fontWeight:"bold"},children:" Needs Scheduling"}),d.jsxs("div",{style:{fontSize:"14px",color:"#a0aec0",marginTop:"4px"},children:[N.length," claim",N.length!==1?"s":""]})]}),d.jsxs("div",{style:{overflowY:"auto",flex:1,minHeight:0},children:[N.map(ae=>Ee(ae)),N.length===0&&d.jsx("div",{style:{textAlign:"center",color:"#718096",fontSize:"14px",padding:"20px"},children:"All claims scheduled!"})]})]}),d.jsxs("div",{style:{flex:1},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px",background:"#2d3748",padding:"12px 16px",borderRadius:"8px"},children:[d.jsx("button",{onClick:M,style:{background:"#4a5568",color:"#e2e8f0",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"18px",fontWeight:"bold"},children:""}),d.jsxs("h3",{style:{margin:0,color:"#e2e8f0",fontSize:"20px",fontWeight:"bold"},children:[P[F]," ",A]}),d.jsx("button",{onClick:B,style:{background:"#4a5568",color:"#e2e8f0",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"18px",fontWeight:"bold"},children:""})]}),d.jsxs("div",{style:{background:"#2d3748",padding:"12px 16px",borderRadius:"8px",marginBottom:"12px"},children:[d.jsx("div",{style:{fontSize:"12px",color:"#a0aec0",marginBottom:"8px",fontWeight:"bold"},children:" Firm Color Legend"}),d.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:Object.entries(Fn).map(([ae,be])=>d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px 10px",background:"#1a202c",borderRadius:"6px",fontSize:"12px"},children:[d.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"3px",background:be,border:"1px solid rgba(255,255,255,0.2)"}}),d.jsx("span",{style:{color:"#e2e8f0"},children:ae})]},ae))})]}),d.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"2px",marginBottom:"2px"},children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(ae=>d.jsx("div",{style:{background:"#2d3748",padding:"12px 6px",textAlign:"center",fontWeight:"bold",fontSize:"14px",color:"#a0aec0"},children:ae},ae))}),d.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"2px",background:"#4a5568"},children:ke()})]}),l&&d.jsx("div",{onClick:()=>c(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:d.jsxs("div",{onClick:ae=>ae.stopPropagation(),style:{background:"#1a202c",border:"2px solid #4a5568",borderRadius:"12px",maxWidth:"600px",width:"100%",maxHeight:"80vh",overflow:"auto",padding:"24px"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"16px"},children:[d.jsx("h3",{style:{margin:0,color:"#e2e8f0",fontSize:"20px"},children:new Date(l.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),d.jsx("button",{onClick:()=>c(null),style:{background:"#ef4444",color:"white",border:"none",borderRadius:"6px",padding:"8px 16px",cursor:"pointer",fontSize:"16px",fontWeight:"bold"},children:""})]}),(()=>{const ae=tu(new Date(l.date));return ae?d.jsxs("div",{style:{background:"linear-gradient(135deg, #dc2626 0%, #991b1b 100%)",color:"#ffffff",padding:"12px 16px",borderRadius:"8px",marginBottom:"16px",fontWeight:"bold",textAlign:"center",boxShadow:"0 4px 6px rgba(220, 38, 38, 0.3)",border:"2px solid #7f1d1d",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[d.jsx("span",{style:{fontSize:"20px"},children:""}),d.jsxs("span",{style:{fontSize:"15px"},children:[Jo(ae)," - Federal Holiday"]})]}):null})(),d.jsxs("div",{style:{fontSize:"14px",color:"#a0aec0",marginBottom:"16px"},children:[l.claims.length," claim",l.claims.length!==1?"s":""," scheduled"]}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[l.claims.map(ae=>d.jsxs("div",{onClick:()=>n(`/claim/${ae.id}?from=calendar`),style:{background:"#2d3748",borderLeft:`4px solid ${_n(ae.firm)}`,borderRadius:"6px",padding:"16px",cursor:"pointer",transition:"transform 0.2s"},onMouseEnter:be=>be.currentTarget.style.transform="translateX(4px)",onMouseLeave:be=>be.currentTarget.style.transform="translateX(0)",children:[d.jsxs("div",{style:{fontSize:"18px",fontWeight:"bold",color:"#e2e8f0",marginBottom:"8px"},children:["#",ae.claim_number]}),d.jsx("div",{style:{fontSize:"15px",color:"#e2e8f0",marginBottom:"8px"},children:ae.customer_name}),d.jsxs("div",{style:{fontSize:"13px",color:"#a0aec0",marginBottom:"4px"},children:[ae.vehicle_year," ",ae.vehicle_make," ",ae.vehicle_model]}),ae.appointment_start&&d.jsxs("div",{style:{fontSize:"13px",color:"#cbd5e0"},children:[" ",new Date(ae.appointment_start).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})]})]},ae.id)),l.claims.length===0&&d.jsx("div",{style:{textAlign:"center",color:"#718096",padding:"40px"},children:"No claims scheduled for this day"})]})]})}),h&&f&&d.jsx("div",{onClick:ee,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:d.jsxs("div",{onClick:ae=>ae.stopPropagation(),style:{background:"#1a202c",border:"2px solid #4a5568",borderRadius:"12px",maxWidth:"500px",width:"100%",padding:"24px"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},children:[d.jsx("h3",{style:{margin:0,color:"#e2e8f0",fontSize:"20px",fontWeight:"bold"},children:" Schedule Appointment"}),d.jsx("button",{onClick:ee,style:{background:"transparent",color:"#a0aec0",border:"none",cursor:"pointer",fontSize:"24px",padding:0,lineHeight:1},children:""})]}),d.jsxs("div",{style:{marginBottom:"20px",padding:"12px",background:"#2d3748",borderRadius:"8px"},children:[d.jsx("div",{style:{fontSize:"14px",color:"#a0aec0",marginBottom:"4px"},children:"Selected Date"}),d.jsx("div",{style:{fontSize:"16px",color:"#e2e8f0",fontWeight:"bold"},children:new Date(f).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),(()=>{const ae=tu(new Date(f));return ae?d.jsxs("div",{style:{marginBottom:"20px",padding:"12px 16px",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",border:"2px solid #92400e",borderRadius:"8px",color:"#1a202c",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 6px rgba(245, 158, 11, 0.3)"},children:[d.jsx("span",{style:{fontSize:"20px"},children:""}),d.jsxs("span",{style:{fontSize:"14px"},children:["Warning: ",Jo(ae)," - Federal Holiday"]})]}):null})(),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("label",{style:{display:"block",fontSize:"14px",color:"#cbd5e1",marginBottom:"8px",fontWeight:"600"},children:"Appointment Time"}),d.jsx("input",{type:"time",value:y,onChange:ae=>v(ae.target.value),style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff"}})]}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("label",{style:{display:"block",fontSize:"14px",color:"#cbd5e1",marginBottom:"8px",fontWeight:"600"},children:"Assign Appraiser (Optional)"}),d.jsxs("select",{value:w,onChange:ae=>b(ae.target.value),style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",cursor:"pointer"},children:[d.jsx("option",{value:"",children:"-- Select Appraiser --"}),k.map(ae=>d.jsx("option",{value:ae.user_id,children:ae.full_name},ae.user_id))]})]}),d.jsxs("div",{style:{marginBottom:"24px"},children:[d.jsx("label",{style:{display:"block",fontSize:"14px",color:"#cbd5e1",marginBottom:"8px",fontWeight:"600"},children:"Additional Notes (Optional)"}),d.jsx("textarea",{value:_,onChange:ae=>S(ae.target.value),placeholder:"Add any notes about this appointment...",rows:4,style:{width:"100%",padding:"12px",fontSize:"15px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",fontFamily:"inherit",resize:"vertical"}})]}),d.jsxs("div",{style:{display:"flex",gap:"12px"},children:[d.jsx("button",{onClick:re,style:{flex:1,padding:"14px 24px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",fontSize:"16px",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},onMouseEnter:ae=>{ae.currentTarget.style.transform="translateY(-1px)",ae.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)"},onMouseLeave:ae=>{ae.currentTarget.style.transform="translateY(0)",ae.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)"},children:" Save Schedule"}),d.jsx("button",{onClick:ee,style:{flex:1,padding:"14px 24px",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",fontSize:"16px",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},onMouseEnter:ae=>{ae.currentTarget.style.background="#4b5563",ae.currentTarget.style.transform="translateY(-1px)",ae.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)"},onMouseLeave:ae=>{ae.currentTarget.style.background="#6b7280",ae.currentTarget.style.transform="translateY(0)",ae.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)"},children:" Cancel"})]})]})})]})}const mw=6048e5,VC=864e5,ip=6e4,gw=36e5,sy=Symbol.for("constructDateFrom");function En(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&sy in t?t[sy](e):t instanceof Date?new t.constructor(e):new Date(e)}function zt(t,e){return En(e||t,t)}function yw(t,e,n){const r=zt(t,n==null?void 0:n.in);return isNaN(e)?En(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function ZC(t,e,n){const r=zt(t,n==null?void 0:n.in);if(isNaN(e))return En(t,NaN);const i=r.getDate(),o=En(t,r.getTime());o.setMonth(r.getMonth()+e+1,0);const a=o.getDate();return i>=a?o:(r.setFullYear(o.getFullYear(),o.getMonth(),i),r)}function qC(t,e){const n=zt(t,e==null?void 0:e.in).getDay();return n===0||n===6}let YC={};function fc(){return YC}function Wa(t,e){var l,c,h,m;const n=fc(),r=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((m=(h=n.locale)==null?void 0:h.options)==null?void 0:m.weekStartsOn)??0,i=zt(t,e==null?void 0:e.in),o=i.getDay(),a=(o<r?7:0)+o-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function Iu(t,e){return Wa(t,{...e,weekStartsOn:1})}function _w(t,e){const n=zt(t,e==null?void 0:e.in),r=n.getFullYear(),i=En(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const o=Iu(i),a=En(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const l=Iu(a);return n.getTime()>=o.getTime()?r+1:n.getTime()>=l.getTime()?r:r-1}function ay(t){const e=zt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function pc(t,...e){const n=En.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function Mu(t,e){const n=zt(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function vw(t,e,n){const[r,i]=pc(n==null?void 0:n.in,t,e),o=Mu(r),a=Mu(i),l=+o-ay(o),c=+a-ay(a);return Math.round((l-c)/VC)}function GC(t,e){const n=_w(t,e),r=En(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Iu(r)}function $a(t,e){let n,r=e==null?void 0:e.in;return t.forEach(i=>{!r&&typeof i=="object"&&(r=En.bind(null,i));const o=zt(i,r);(!n||n>o||isNaN(+o))&&(n=o)}),En(r,n||NaN)}function ly(t,e,n){const[r,i]=pc(n==null?void 0:n.in,t,e);return+Mu(r)==+Mu(i)}function KC(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function br(t){return!(!KC(t)&&typeof t!="number"||isNaN(+zt(t)))}function JC(t,e,n){const[r,i]=pc(n==null?void 0:n.in,t,e),o=uy(r,i),a=Math.abs(vw(r,i));r.setDate(r.getDate()-o*a);const l=+(uy(r,i)===-o),c=o*(a-l);return c===0?0:c}function uy(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function QC(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function XC(t,e){return+zt(t)-+zt(e)}function eT(t,e,n){const r=XC(t,e)/ip;return QC(n==null?void 0:n.roundingMethod)(r)}function op(t,e){const n=zt(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function tT(t,e){const[n,r]=pc(t,e.start,e.end);return{start:n,end:r}}function nT(t,e){const{start:n,end:r}=tT(e==null?void 0:e.in,t);let i=+n>+r;const o=i?+n:+r,a=i?r:n;a.setHours(0,0,0,0);let l=1;const c=[];for(;+a<=o;)c.push(En(n,a)),a.setDate(a.getDate()+l),a.setHours(0,0,0,0);return i?c.reverse():c}function sp(t,e){const n=zt(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function rT(t,e){const n=zt(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const iT={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},oT=(t,e,n)=>{let r;const i=iT[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Ed(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const sT={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},aT={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},lT={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},uT={date:Ed({formats:sT,defaultWidth:"full"}),time:Ed({formats:aT,defaultWidth:"full"}),dateTime:Ed({formats:lT,defaultWidth:"full"})},cT={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},dT=(t,e,n,r)=>cT[t];function qs(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):a;i=t.formattingValues[l]||t.formattingValues[a]}else{const a=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[l]||t.values[a]}const o=t.argumentCallback?t.argumentCallback(e):e;return i[o]}}const hT={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},fT={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},pT={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},mT={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},gT={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},yT={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},_T=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},vT={ordinalNumber:_T,era:qs({values:hT,defaultWidth:"wide"}),quarter:qs({values:fT,defaultWidth:"wide",argumentCallback:t=>t-1}),month:qs({values:pT,defaultWidth:"wide"}),day:qs({values:mT,defaultWidth:"wide"}),dayPeriod:qs({values:gT,defaultWidth:"wide",formattingValues:yT,defaultFormattingWidth:"wide"})};function Ys(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=e.match(i);if(!o)return null;const a=o[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?xT(l,f=>f.test(a)):wT(l,f=>f.test(a));let h;h=t.valueCallback?t.valueCallback(c):c,h=n.valueCallback?n.valueCallback(h):h;const m=e.slice(a.length);return{value:h,rest:m}}}function wT(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function xT(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function bT(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],o=e.match(t.parsePattern);if(!o)return null;let a=t.valueCallback?t.valueCallback(o[0]):o[0];a=n.valueCallback?n.valueCallback(a):a;const l=e.slice(i.length);return{value:a,rest:l}}}const ST=/^(\d+)(th|st|nd|rd)?/i,kT=/\d+/i,ET={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},CT={any:[/^b/i,/^(a|c)/i]},TT={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},PT={any:[/1/i,/2/i,/3/i,/4/i]},jT={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},AT={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},OT={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},DT={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},RT={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},LT={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},NT={ordinalNumber:bT({matchPattern:ST,parsePattern:kT,valueCallback:t=>parseInt(t,10)}),era:Ys({matchPatterns:ET,defaultMatchWidth:"wide",parsePatterns:CT,defaultParseWidth:"any"}),quarter:Ys({matchPatterns:TT,defaultMatchWidth:"wide",parsePatterns:PT,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ys({matchPatterns:jT,defaultMatchWidth:"wide",parsePatterns:AT,defaultParseWidth:"any"}),day:Ys({matchPatterns:OT,defaultMatchWidth:"wide",parsePatterns:DT,defaultParseWidth:"any"}),dayPeriod:Ys({matchPatterns:RT,defaultMatchWidth:"any",parsePatterns:LT,defaultParseWidth:"any"})},IT={code:"en-US",formatDistance:oT,formatLong:uT,formatRelative:dT,localize:vT,match:NT,options:{weekStartsOn:0,firstWeekContainsDate:1}};function MT(t,e){const n=zt(t,e==null?void 0:e.in);return vw(n,rT(n))+1}function zT(t,e){const n=zt(t,e==null?void 0:e.in),r=+Iu(n)-+GC(n);return Math.round(r/mw)+1}function ww(t,e){var m,f,g,y;const n=zt(t,e==null?void 0:e.in),r=n.getFullYear(),i=fc(),o=(e==null?void 0:e.firstWeekContainsDate)??((f=(m=e==null?void 0:e.locale)==null?void 0:m.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((y=(g=i.locale)==null?void 0:g.options)==null?void 0:y.firstWeekContainsDate)??1,a=En((e==null?void 0:e.in)||t,0);a.setFullYear(r+1,0,o),a.setHours(0,0,0,0);const l=Wa(a,e),c=En((e==null?void 0:e.in)||t,0);c.setFullYear(r,0,o),c.setHours(0,0,0,0);const h=Wa(c,e);return+n>=+l?r+1:+n>=+h?r:r-1}function BT(t,e){var l,c,h,m;const n=fc(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(h=n.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,i=ww(t,e),o=En((e==null?void 0:e.in)||t,0);return o.setFullYear(i,0,r),o.setHours(0,0,0,0),Wa(o,e)}function xw(t,e){const n=zt(t,e==null?void 0:e.in),r=+Wa(n,e)-+BT(n,e);return Math.round(r/mw)+1}function gt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const ci={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return gt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):gt(n+1,2)},d(t,e){return gt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return gt(t.getHours()%12||12,e.length)},H(t,e){return gt(t.getHours(),e.length)},m(t,e){return gt(t.getMinutes(),e.length)},s(t,e){return gt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return gt(i,e.length)}},Io={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},cy={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return ci.y(t,e)},Y:function(t,e,n,r){const i=ww(t,r),o=i>0?i:1-i;if(e==="YY"){const a=o%100;return gt(a,2)}return e==="Yo"?n.ordinalNumber(o,{unit:"year"}):gt(o,e.length)},R:function(t,e){const n=_w(t);return gt(n,e.length)},u:function(t,e){const n=t.getFullYear();return gt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return gt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return gt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return ci.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return gt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=xw(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):gt(i,e.length)},I:function(t,e,n){const r=zT(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):gt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ci.d(t,e)},D:function(t,e,n){const r=MT(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):gt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return gt(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return gt(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return gt(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Io.noon:r===0?i=Io.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Io.evening:r>=12?i=Io.afternoon:r>=4?i=Io.morning:i=Io.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ci.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ci.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):gt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):gt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ci.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ci.s(t,e)},S:function(t,e){return ci.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return hy(r);case"XXXX":case"XX":return Ki(r);case"XXXXX":case"XXX":default:return Ki(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return hy(r);case"xxxx":case"xx":return Ki(r);case"xxxxx":case"xxx":default:return Ki(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+dy(r,":");case"OOOO":default:return"GMT"+Ki(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+dy(r,":");case"zzzz":default:return"GMT"+Ki(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return gt(r,e.length)},T:function(t,e,n){return gt(+t,e.length)}};function dy(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),o=r%60;return o===0?n+String(i):n+String(i)+e+gt(o,2)}function hy(t,e){return t%60===0?(t>0?"-":"+")+gt(Math.abs(t)/60,2):Ki(t,e)}function Ki(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=gt(Math.trunc(r/60),2),o=gt(r%60,2);return n+i+e+o}const fy=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},bw=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},FT=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return fy(t,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",fy(r,e)).replace("{{time}}",bw(i,e))},UT={p:bw,P:FT},WT=/^D+$/,$T=/^Y+$/,HT=["D","DD","YY","YYYY"];function VT(t){return WT.test(t)}function ZT(t){return $T.test(t)}function qT(t,e,n){const r=YT(t,e,n);if(console.warn(r),HT.includes(t))throw new RangeError(r)}function YT(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const GT=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,KT=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,JT=/^'([^]*?)'?$/,QT=/''/g,XT=/[a-zA-Z]/;function Yr(t,e,n){var m,f,g,y;const r=fc(),i=r.locale??IT,o=r.firstWeekContainsDate??((f=(m=r.locale)==null?void 0:m.options)==null?void 0:f.firstWeekContainsDate)??1,a=r.weekStartsOn??((y=(g=r.locale)==null?void 0:g.options)==null?void 0:y.weekStartsOn)??0,l=zt(t,n==null?void 0:n.in);if(!br(l))throw new RangeError("Invalid time value");let c=e.match(KT).map(v=>{const _=v[0];if(_==="p"||_==="P"){const S=UT[_];return S(v,i.formatLong)}return v}).join("").match(GT).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const _=v[0];if(_==="'")return{isToken:!1,value:eP(v)};if(cy[_])return{isToken:!0,value:v};if(_.match(XT))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:v}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const h={firstWeekContainsDate:o,weekStartsOn:a,locale:i};return c.map(v=>{if(!v.isToken)return v.value;const _=v.value;(ZT(_)||VT(_))&&qT(_,e,String(t));const S=cy[_[0]];return S(l,_,i.localize,h)}).join("")}function eP(t){const e=t.match(JT);return e?e[1].replace(QT,"'"):t}function tP(t,e){return zt(t,e==null?void 0:e.in).getDay()}function nP(t,e,n){return yw(t,-1,n)}function Ut(t,e){const n=()=>En(e==null?void 0:e.in,NaN),i=sP(t);let o;if(i.date){const h=aP(i.date,2);o=lP(h.restDateString,h.year)}if(!o||isNaN(+o))return n();const a=+o;let l=0,c;if(i.time&&(l=uP(i.time),isNaN(l)))return n();if(i.timezone){if(c=cP(i.timezone),isNaN(c))return n()}else{const h=new Date(a+l),m=zt(0,e==null?void 0:e.in);return m.setFullYear(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()),m.setHours(h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()),m}return zt(a+l+c,e==null?void 0:e.in)}const Bl={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},rP=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,iP=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,oP=/^([+-])(\d{2})(?::?(\d{2}))?$/;function sP(t){const e={},n=t.split(Bl.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],Bl.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Bl.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const i=Bl.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function aP(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:o===null?i:o*100,restDateString:t.slice((r[1]||r[2]).length)}}function lP(t,e){if(e===null)return new Date(NaN);const n=t.match(rP);if(!n)return new Date(NaN);const r=!!n[4],i=Gs(n[1]),o=Gs(n[2])-1,a=Gs(n[3]),l=Gs(n[4]),c=Gs(n[5])-1;if(r)return mP(e,l,c)?dP(e,l,c):new Date(NaN);{const h=new Date(0);return!fP(e,o,a)||!pP(e,i)?new Date(NaN):(h.setUTCFullYear(e,o,Math.max(i,a)),h)}}function Gs(t){return t?parseInt(t):1}function uP(t){const e=t.match(iP);if(!e)return NaN;const n=Cd(e[1]),r=Cd(e[2]),i=Cd(e[3]);return gP(n,r,i)?n*gw+r*ip+i*1e3:NaN}function Cd(t){return t&&parseFloat(t.replace(",","."))||0}function cP(t){if(t==="Z")return 0;const e=t.match(oP);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return yP(r,i)?n*(r*gw+i*ip):NaN}function dP(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const i=r.getUTCDay()||7,o=(e-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+o),r}const hP=[31,null,31,30,31,30,31,31,30,31,30,31];function Sw(t){return t%400===0||t%4===0&&t%100!==0}function fP(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(hP[e]||(Sw(t)?29:28))}function pP(t,e){return e>=1&&e<=(Sw(t)?366:365)}function mP(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function gP(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function yP(t,e){return e>=0&&e<=59}function _P(t,e,n){return ZC(t,-1,n)}const vP={SCHEDULED:"#2196F3",IN_PROGRESS:"#FF9800",COMPLETED:"#4CAF50",CANCELED:"#ef4444"};function kw({claims:t,onClaimUpdate:e}){const[n,r]=J.useState(()=>new Date),[i,o]=J.useState(!1),a=J.useMemo(()=>t.filter(_=>{if(!_.appointment_start)return!1;try{const S=Ut(_.appointment_start);return br(S)&&ly(S,n)}catch{return!1}}).sort((_,S)=>{const w=_.appointment_start?new Date(_.appointment_start).getTime():0,b=S.appointment_start?new Date(S.appointment_start).getTime():0;return w-b}),[t,n]),l=J.useMemo(()=>t.filter(_=>!_.appointment_start),[t]),c=()=>r(_=>nP(_)),h=()=>r(_=>yw(_,1)),m=()=>r(new Date),f=_=>{if(!_)return"";try{const S=Ut(_);return br(S)?Yr(S,"h:mm a"):""}catch{return""}},g=(_,S)=>{const w=f(_),b=f(S);return w&&b?`${w} - ${b}`:w||"No time set"},y=_=>_?_.replace("_"," "):"Assigned",v=ly(n,new Date);return d.jsxs("div",{className:"mobile-agenda",children:[d.jsxs("div",{className:"mobile-agenda__header",children:[d.jsxs("div",{className:"mobile-agenda__date",children:[Yr(n,"EEEE"),d.jsx("span",{className:"mobile-agenda__date-detail",children:Yr(n,"MMM d")})]}),d.jsxs("div",{className:"mobile-agenda__nav",children:[d.jsx("button",{className:"mobile-agenda__nav-btn",onClick:c,"aria-label":"Previous day",children:"<"}),d.jsx("button",{className:`mobile-agenda__nav-btn mobile-agenda__nav-btn--today ${v?"mobile-agenda__nav-btn--active":""}`,onClick:m,children:"Today"}),d.jsx("button",{className:"mobile-agenda__nav-btn",onClick:h,"aria-label":"Next day",children:">"})]})]}),d.jsxs("button",{className:"mobile-agenda__backlog-btn",onClick:()=>o(!0),children:["Needs Scheduling",d.jsx("span",{className:"mobile-agenda__backlog-count",children:l.length})]}),d.jsx("div",{className:"mobile-agenda__list",children:a.length===0?d.jsxs("div",{className:"mobile-agenda__empty",children:[d.jsx("div",{className:"mobile-agenda__empty-text",children:"No inspections scheduled for this day."}),d.jsxs("div",{className:"mobile-agenda__empty-actions",children:[!v&&d.jsx("button",{className:"mobile-agenda__empty-btn",onClick:m,children:"Go to Today"}),l.length>0&&d.jsxs("button",{className:"mobile-agenda__empty-btn mobile-agenda__empty-btn--secondary",onClick:()=>o(!0),children:["View Backlog (",l.length,")"]})]})]}):a.map(_=>d.jsxs(_t,{to:`/claim/${_.id}`,className:"mobile-agenda__item",style:{borderLeftColor:_n(_.firm)},children:[d.jsxs("div",{className:"mobile-agenda__item-header",children:[d.jsx("span",{className:"mobile-agenda__item-time",children:g(_.appointment_start,_.appointment_end)}),d.jsx("span",{className:"mobile-agenda__item-status",style:{backgroundColor:vP[_.status]||"#9E9E9E"},children:y(_.status)})]}),d.jsx("div",{className:"mobile-agenda__item-client",children:_.customer_name}),d.jsxs("div",{className:"mobile-agenda__item-location",children:[d.jsx("span",{className:"mobile-agenda__item-city",children:_.city||"No location"}),_.firm&&d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"mobile-agenda__item-divider",children:"/"}),d.jsx("span",{className:"mobile-agenda__item-firm",style:{color:_n(_.firm)},children:_.firm})]})]})]},_.id))}),i&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"mobile-agenda__overlay",onClick:()=>o(!1)}),d.jsxs("div",{className:"mobile-agenda__sheet",children:[d.jsxs("div",{className:"mobile-agenda__sheet-header",children:[d.jsxs("span",{className:"mobile-agenda__sheet-title",children:["Needs Scheduling (",l.length,")"]}),d.jsx("button",{className:"mobile-agenda__sheet-close",onClick:()=>o(!1),"aria-label":"Close backlog",children:""})]}),d.jsx("div",{className:"mobile-agenda__sheet-content",children:l.length===0?d.jsx("div",{className:"mobile-agenda__sheet-empty",children:"No unscheduled claims"}):l.map(_=>d.jsx(_t,{to:`/claim/${_.id}`,className:"mobile-agenda__backlog-item",style:{borderLeftColor:_n(_.firm)},onClick:()=>o(!1),children:d.jsxs("div",{className:"mobile-agenda__backlog-item-main",children:[d.jsx("div",{className:"mobile-agenda__backlog-item-customer",children:_.customer_name}),d.jsxs("div",{className:"mobile-agenda__backlog-item-location",children:[_.city||"No location",_.firm&&d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"mobile-agenda__backlog-divider",children:"/"}),d.jsx("span",{style:{color:_n(_.firm)},children:_.firm})]})]})]})},_.id))})]})]})]})}const wP={SCHEDULED:"#2196F3",IN_PROGRESS:"#FF9800",COMPLETED:"#4CAF50",CANCELED:"#ef4444"};function Ew({claims:t,showCreateButton:e=!1,createButtonPath:n="/admin/claims/new"}){const[r,i]=J.useState("ALL"),[o,a]=J.useState("newest"),[l,c]=J.useState(!1),[h,m]=J.useState(""),f=J.useMemo(()=>{let v=[...t];if(h.trim()){const _=h.toLowerCase();v=v.filter(S=>{var w,b,k;return((w=S.claim_number)==null?void 0:w.toLowerCase().includes(_))||((b=S.customer_name)==null?void 0:b.toLowerCase().includes(_))||((k=S.firm)==null?void 0:k.toLowerCase().includes(_))})}return r!=="ALL"&&(v=v.filter(_=>_.status===r)),v.sort((_,S)=>{const w=_.appointment_start?new Date(_.appointment_start).getTime():0,b=S.appointment_start?new Date(S.appointment_start).getTime():0;return o==="newest"?b-w:w-b}),v},[t,r,o,h]),g=v=>{if(!v)return{date:"Not scheduled",time:""};try{const _=Ut(v);return br(_)?{date:Yr(_,"MMM d"),time:Yr(_,"h:mm a")}:{date:"Invalid date",time:""}}catch{return{date:"Invalid date",time:""}}},y=v=>v?v.replace("_"," "):"Assigned";return d.jsxs("div",{className:"mobile-claims",children:[d.jsx("div",{className:"mobile-claims__header",children:l?d.jsxs("div",{className:"mobile-claims__search-bar",children:[d.jsx("input",{type:"text",className:"mobile-claims__search-input",placeholder:"Search claims...",value:h,onChange:v=>m(v.target.value),autoFocus:!0}),d.jsx("button",{className:"mobile-claims__search-close",onClick:()=>{c(!1),m("")},children:""})]}):d.jsxs(d.Fragment,{children:[d.jsx("h1",{className:"mobile-claims__title",children:"My Claims"}),d.jsx("button",{className:"mobile-claims__search-btn",onClick:()=>c(!0),"aria-label":"Search claims",children:""})]})}),d.jsxs("div",{className:"mobile-claims__filters",children:[d.jsx("button",{className:`mobile-claims__filter-pill ${r==="ALL"?"mobile-claims__filter-pill--active":""}`,onClick:()=>i("ALL"),children:"All"}),d.jsx("button",{className:`mobile-claims__filter-pill ${r==="SCHEDULED"?"mobile-claims__filter-pill--active":""}`,onClick:()=>i("SCHEDULED"),children:"Scheduled"}),d.jsx("button",{className:`mobile-claims__filter-pill ${r==="IN_PROGRESS"?"mobile-claims__filter-pill--active":""}`,onClick:()=>i("IN_PROGRESS"),children:"In Progress"}),d.jsx("button",{className:`mobile-claims__filter-pill ${r==="COMPLETED"?"mobile-claims__filter-pill--active":""}`,onClick:()=>i("COMPLETED"),children:"Completed"})]}),d.jsx("div",{className:"mobile-claims__sort",children:d.jsxs("select",{className:"mobile-claims__sort-select",value:o,onChange:v=>a(v.target.value),children:[d.jsx("option",{value:"newest",children:"Newest First"}),d.jsx("option",{value:"oldest",children:"Oldest First"})]})}),d.jsx("div",{className:"mobile-claims__list",children:f.length===0?d.jsxs("div",{className:"mobile-claims__empty",children:[d.jsx("div",{className:"mobile-claims__empty-text",children:"No claims found"}),d.jsx("div",{className:"mobile-claims__empty-subtext",children:h?"Try a different search term":r!=="ALL"?"Try selecting a different filter":"No claims assigned yet"})]}):f.map(v=>{const{date:_,time:S}=g(v.appointment_start);return d.jsxs(_t,{to:`/claim/${v.id}`,className:"mobile-claims__card",style:{borderLeftColor:_n(v.firm)},children:[d.jsxs("div",{className:"mobile-claims__card-row1",children:[d.jsxs("span",{className:"mobile-claims__card-number",children:["#",v.claim_number]}),d.jsx("span",{className:"mobile-claims__card-status",style:{backgroundColor:wP[v.status]||"#9E9E9E"},children:y(v.status)})]}),d.jsx("div",{className:"mobile-claims__card-row2",children:v.customer_name}),d.jsxs("div",{className:"mobile-claims__card-row3",children:[_,S&&d.jsx("span",{className:"mobile-claims__card-time-sep",children:"  "}),S]}),v.firm&&d.jsx("div",{className:"mobile-claims__card-row4",style:{color:_n(v.firm)},children:v.firm})]},v.id)})}),e&&d.jsx(_t,{to:n,className:"mobile-claims__fab",children:"+"})]})}const xP={Sedgwick:{type:"weekly",payDay:4},Legacy:{type:"bi-weekly",payDay:4},"Complete Claims":{type:"bi-weekly",payDay:4},ClaimSolution:{type:"bi-weekly",payDay:5},Doan:{type:"bi-weekly",payDay:5},HEA:{type:"monthly",payDate:15},ACD:{type:"semi-monthly",payDates:[15,30]},IANET:{type:"last-day"}};function bP(t,e){const n=xP[t];if(!n)return null;if(new Date().setHours(0,0,0,0),n.type==="weekly"&&"payDay"in n){const i=new Date(e),o=(n.payDay-i.getDay()+7)%7;return i.setDate(i.getDate()+o),o===0&&i.setDate(i.getDate()+7),i}if(n.type==="bi-weekly"&&"payDay"in n){const i=new Date(e),o=(n.payDay-i.getDay()+7)%7;return i.setDate(i.getDate()+o),o===0&&i.setDate(i.getDate()+14),i}if(n.type==="monthly"&&"payDate"in n)return new Date(e.getFullYear(),e.getMonth()+1,n.payDate);if(n.type==="semi-monthly"&&"payDates"in n){const i=e.getDate();if(i>=1&&i<=15)return new Date(e.getFullYear(),e.getMonth(),15);{const o=new Date(e.getFullYear(),e.getMonth()+1,0).getDate();return new Date(e.getFullYear(),e.getMonth(),o)}}return n.type==="last-day"?new Date(e.getFullYear(),e.getMonth()+1,0):null}function SP(t){if(!t)return!1;const e=new Date;e.setHours(0,0,0,0);const n=new Date(e);n.setDate(e.getDate()-e.getDay());const r=new Date(n);return r.setDate(n.getDate()+6),t>=n&&t<=r}function kP({claims:t}){const e=J.useMemo(()=>{const r=new Map;return t.filter(o=>o.pay_amount&&o.appointment_start&&(o.status==="SCHEDULED"||o.status==="COMPLETED")).forEach(o=>{if(!o.firm||!o.pay_amount||!o.appointment_start)return;const a=new Date(o.appointment_start),l=bP(o.firm,a);if(!l||!SP(l))return;const c=r.get(o.firm)||{firmName:o.firm,amount:0,claimCount:0};r.set(o.firm,{firmName:o.firm,amount:c.amount+o.pay_amount,claimCount:c.claimCount+1})}),Array.from(r.values()).sort((o,a)=>a.amount-o.amount)},[t]),n=e.reduce((r,i)=>r+i.amount,0);return e.length===0?d.jsxs("div",{style:{background:"#1a202c",border:"2px solid #4a5568",borderRadius:"12px",padding:"20px"},children:[d.jsx("h3",{style:{margin:"0 0 12px 0",color:"#e2e8f0",fontSize:"20px",fontWeight:"bold"},children:" Expected Payout This Week"}),d.jsx("p",{style:{color:"#a0aec0",fontSize:"14px",textAlign:"center",padding:"20px"},children:"No payouts scheduled for this week"})]}):d.jsxs("div",{style:{background:"#1a202c",border:"2px solid #4a5568",borderRadius:"12px",padding:"20px"},children:[d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("h3",{style:{margin:"0 0 8px 0",color:"#e2e8f0",fontSize:"20px",fontWeight:"bold"},children:" Expected Payout This Week"}),d.jsxs("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#10b981",marginTop:"12px"},children:["$",n.toFixed(2)]})]}),d.jsxs("div",{style:{borderTop:"1px solid #4a5568",paddingTop:"16px"},children:[d.jsx("h4",{style:{margin:"0 0 12px 0",color:"#cbd5e1",fontSize:"14px",fontWeight:"600"},children:"Breakdown by Firm"}),d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:e.map(r=>d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",background:"#2d3748",borderRadius:"8px",borderLeft:"4px solid #667eea"},children:[d.jsxs("div",{children:[d.jsx("div",{style:{color:"#e2e8f0",fontSize:"15px",fontWeight:"600"},children:r.firmName}),d.jsxs("div",{style:{color:"#a0aec0",fontSize:"12px",marginTop:"2px"},children:[r.claimCount," claim",r.claimCount>1?"s":""]})]}),d.jsxs("div",{style:{color:"#10b981",fontSize:"18px",fontWeight:"bold"},children:["$",r.amount.toFixed(2)]})]},r.firmName))})]})]})}const py=600;function ap(){const[t,e]=J.useState(()=>typeof window>"u"?!1:window.innerWidth<=py);return J.useEffect(()=>{const n=()=>{e(window.innerWidth<=py)};n();let r;const i=()=>{clearTimeout(r),r=setTimeout(n,100)};return window.addEventListener("resize",i),window.addEventListener("orientationchange",n),()=>{clearTimeout(r),window.removeEventListener("resize",i),window.removeEventListener("orientationchange",n)}},[]),t}function Fl(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Cw={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,i,o){function a(h,m){if(!i[h]){if(!r[h]){var f=typeof Fl=="function"&&Fl;if(!m&&f)return f(h,!0);if(l)return l(h,!0);var g=new Error("Cannot find module '"+h+"'");throw g.code="MODULE_NOT_FOUND",g}var y=i[h]={exports:{}};r[h][0].call(y.exports,function(v){var _=r[h][1][v];return a(_||v)},y,y.exports,n,r,i,o)}return i[h].exports}for(var l=typeof Fl=="function"&&Fl,c=0;c<o.length;c++)a(o[c]);return a}({1:[function(n,r,i){var o=n("./utils"),a=n("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(c){for(var h,m,f,g,y,v,_,S=[],w=0,b=c.length,k=b,T=o.getTypeOf(c)!=="string";w<c.length;)k=b-w,f=T?(h=c[w++],m=w<b?c[w++]:0,w<b?c[w++]:0):(h=c.charCodeAt(w++),m=w<b?c.charCodeAt(w++):0,w<b?c.charCodeAt(w++):0),g=h>>2,y=(3&h)<<4|m>>4,v=1<k?(15&m)<<2|f>>6:64,_=2<k?63&f:64,S.push(l.charAt(g)+l.charAt(y)+l.charAt(v)+l.charAt(_));return S.join("")},i.decode=function(c){var h,m,f,g,y,v,_=0,S=0,w="data:";if(c.substr(0,w.length)===w)throw new Error("Invalid base64 input, it looks like a data url.");var b,k=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===l.charAt(64)&&k--,c.charAt(c.length-2)===l.charAt(64)&&k--,k%1!=0)throw new Error("Invalid base64 input, bad content length.");for(b=a.uint8array?new Uint8Array(0|k):new Array(0|k);_<c.length;)h=l.indexOf(c.charAt(_++))<<2|(g=l.indexOf(c.charAt(_++)))>>4,m=(15&g)<<4|(y=l.indexOf(c.charAt(_++)))>>2,f=(3&y)<<6|(v=l.indexOf(c.charAt(_++))),b[S++]=h,y!==64&&(b[S++]=m),v!==64&&(b[S++]=f);return b}},{"./support":30,"./utils":32}],2:[function(n,r,i){var o=n("./external"),a=n("./stream/DataWorker"),l=n("./stream/Crc32Probe"),c=n("./stream/DataLengthProbe");function h(m,f,g,y,v){this.compressedSize=m,this.uncompressedSize=f,this.crc32=g,this.compression=y,this.compressedContent=v}h.prototype={getContentWorker:function(){var m=new a(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),f=this;return m.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),m},getCompressedWorker:function(){return new a(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(m,f,g){return m.pipe(new l).pipe(new c("uncompressedSize")).pipe(f.compressWorker(g)).pipe(new c("compressedSize")).withStreamInfo("compression",f)},r.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var o=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var o=n("./utils"),a=function(){for(var l,c=[],h=0;h<256;h++){l=h;for(var m=0;m<8;m++)l=1&l?3988292384^l>>>1:l>>>1;c[h]=l}return c}();r.exports=function(l,c){return l!==void 0&&l.length?o.getTypeOf(l)!=="string"?function(h,m,f,g){var y=a,v=g+f;h^=-1;for(var _=g;_<v;_++)h=h>>>8^y[255&(h^m[_])];return-1^h}(0|c,l,l.length,0):function(h,m,f,g){var y=a,v=g+f;h^=-1;for(var _=g;_<v;_++)h=h>>>8^y[255&(h^m.charCodeAt(_))];return-1^h}(0|c,l,l.length,0):0}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var o=null;o=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:o}},{lie:37}],7:[function(n,r,i){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=n("pako"),l=n("./utils"),c=n("./stream/GenericWorker"),h=o?"uint8array":"array";function m(f,g){c.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=g,this.meta={}}i.magic="\b\0",l.inherits(m,c),m.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(h,f.data),!1)},m.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},m.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},m.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(g){f.push({data:g,meta:f.meta})}},i.compressWorker=function(f){return new m("Deflate",f)},i.uncompressWorker=function(){return new m("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){function o(y,v){var _,S="";for(_=0;_<v;_++)S+=String.fromCharCode(255&y),y>>>=8;return S}function a(y,v,_,S,w,b){var k,T,I=y.file,R=y.compression,j=b!==h.utf8encode,P=l.transformTo("string",b(I.name)),A=l.transformTo("string",h.utf8encode(I.name)),F=I.comment,K=l.transformTo("string",b(F)),N=l.transformTo("string",h.utf8encode(F)),W=A.length!==I.name.length,E=N.length!==F.length,Y="",H="",M="",B=I.dir,D=I.date,z={crc32:0,compressedSize:0,uncompressedSize:0};v&&!_||(z.crc32=y.crc32,z.compressedSize=y.compressedSize,z.uncompressedSize=y.uncompressedSize);var $=0;v&&($|=8),j||!W&&!E||($|=2048);var Z=0,re=0;B&&(Z|=16),w==="UNIX"?(re=798,Z|=function(Q,fe){var Ee=Q;return Q||(Ee=fe?16893:33204),(65535&Ee)<<16}(I.unixPermissions,B)):(re=20,Z|=function(Q){return 63&(Q||0)}(I.dosPermissions)),k=D.getUTCHours(),k<<=6,k|=D.getUTCMinutes(),k<<=5,k|=D.getUTCSeconds()/2,T=D.getUTCFullYear()-1980,T<<=4,T|=D.getUTCMonth()+1,T<<=5,T|=D.getUTCDate(),W&&(H=o(1,1)+o(m(P),4)+A,Y+="up"+o(H.length,2)+H),E&&(M=o(1,1)+o(m(K),4)+N,Y+="uc"+o(M.length,2)+M);var ee="";return ee+=`
\0`,ee+=o($,2),ee+=R.magic,ee+=o(k,2),ee+=o(T,2),ee+=o(z.crc32,4),ee+=o(z.compressedSize,4),ee+=o(z.uncompressedSize,4),ee+=o(P.length,2),ee+=o(Y.length,2),{fileRecord:f.LOCAL_FILE_HEADER+ee+P+Y,dirRecord:f.CENTRAL_FILE_HEADER+o(re,2)+ee+o(K.length,2)+"\0\0\0\0"+o(Z,4)+o(S,4)+P+Y+K}}var l=n("../utils"),c=n("../stream/GenericWorker"),h=n("../utf8"),m=n("../crc32"),f=n("../signature");function g(y,v,_,S){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=_,this.encodeFileName=S,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(g,c),g.prototype.push=function(y){var v=y.meta.percent||0,_=this.entriesCount,S=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,c.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:_?(v+100*(_-S-1))/_:100}}))},g.prototype.openedSource=function(y){this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name;var v=this.streamFiles&&!y.file.dir;if(v){var _=a(y,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:_.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(y){this.accumulate=!1;var v=this.streamFiles&&!y.file.dir,_=a(y,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(_.dirRecord),v)this.push({data:function(S){return f.DATA_DESCRIPTOR+o(S.crc32,4)+o(S.compressedSize,4)+o(S.uncompressedSize,4)}(y),meta:{percent:100}});else for(this.push({data:_.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var y=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var _=this.bytesWritten-y,S=function(w,b,k,T,I){var R=l.transformTo("string",I(T));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(w,2)+o(w,2)+o(b,4)+o(k,4)+o(R.length,2)+R}(this.dirRecords.length,_,y,this.zipComment,this.encodeFileName);this.push({data:S,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(y){this._sources.push(y);var v=this;return y.on("data",function(_){v.processChunk(_)}),y.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),y.on("error",function(_){v.error(_)}),this},g.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(y){var v=this._sources;if(!c.prototype.error.call(this,y))return!1;for(var _=0;_<v.length;_++)try{v[_].error(y)}catch{}return!0},g.prototype.lock=function(){c.prototype.lock.call(this);for(var y=this._sources,v=0;v<y.length;v++)y[v].lock()},r.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var o=n("../compressions"),a=n("./ZipFileWorker");i.generateWorker=function(l,c,h){var m=new a(c.streamFiles,h,c.platform,c.encodeFileName),f=0;try{l.forEach(function(g,y){f++;var v=function(b,k){var T=b||k,I=o[T];if(!I)throw new Error(T+" is not a valid compression method !");return I}(y.options.compression,c.compression),_=y.options.compressionOptions||c.compressionOptions||{},S=y.dir,w=y.date;y._compressWorker(v,_).withStreamInfo("file",{name:g,dir:S,date:w,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(m)}),m.entriesCount=f}catch(g){m.error(g)}return m}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new o;for(var l in this)typeof this[l]!="function"&&(a[l]=this[l]);return a}}(o.prototype=n("./object")).loadAsync=n("./load"),o.support=n("./support"),o.defaults=n("./defaults"),o.version="3.10.1",o.loadAsync=function(a,l){return new o().loadAsync(a,l)},o.external=n("./external"),r.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var o=n("./utils"),a=n("./external"),l=n("./utf8"),c=n("./zipEntries"),h=n("./stream/Crc32Probe"),m=n("./nodejsUtils");function f(g){return new a.Promise(function(y,v){var _=g.decompressed.getContentWorker().pipe(new h);_.on("error",function(S){v(S)}).on("end",function(){_.streamInfo.crc32!==g.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}r.exports=function(g,y){var v=this;return y=o.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),m.isNode&&m.isStream(g)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",g,!0,y.optimizedBinaryString,y.base64).then(function(_){var S=new c(y);return S.load(_),S}).then(function(_){var S=[a.Promise.resolve(_)],w=_.files;if(y.checkCRC32)for(var b=0;b<w.length;b++)S.push(f(w[b]));return a.Promise.all(S)}).then(function(_){for(var S=_.shift(),w=S.files,b=0;b<w.length;b++){var k=w[b],T=k.fileNameStr,I=o.resolve(k.fileNameStr);v.file(I,k.decompressed,{binary:!0,optimizedBinaryString:!0,date:k.date,dir:k.dir,comment:k.fileCommentStr.length?k.fileCommentStr:null,unixPermissions:k.unixPermissions,dosPermissions:k.dosPermissions,createFolders:y.createFolders}),k.dir||(v.file(I).unsafeOriginalName=T)}return S.zipComment.length&&(v.comment=S.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var o=n("../utils"),a=n("../stream/GenericWorker");function l(c,h){a.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(h)}o.inherits(l,a),l.prototype._bindStream=function(c){var h=this;(this._stream=c).pause(),c.on("data",function(m){h.push({data:m,meta:{percent:0}})}).on("error",function(m){h.isPaused?this.generatedError=m:h.error(m)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},l.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var o=n("readable-stream").Readable;function a(l,c,h){o.call(this,c),this._helper=l;var m=this;l.on("data",function(f,g){m.push(f)||m._helper.pause(),h&&h(g)}).on("error",function(f){m.emit("error",f)}).on("end",function(){m.push(null)})}n("../utils").inherits(a,o),a.prototype._read=function(){this._helper.resume()},r.exports=a},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,a);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,a)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var a=new Buffer(o);return a.fill(0),a},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(n,r,i){function o(I,R,j){var P,A=l.getTypeOf(R),F=l.extend(j||{},m);F.date=F.date||new Date,F.compression!==null&&(F.compression=F.compression.toUpperCase()),typeof F.unixPermissions=="string"&&(F.unixPermissions=parseInt(F.unixPermissions,8)),F.unixPermissions&&16384&F.unixPermissions&&(F.dir=!0),F.dosPermissions&&16&F.dosPermissions&&(F.dir=!0),F.dir&&(I=w(I)),F.createFolders&&(P=S(I))&&b.call(this,P,!0);var K=A==="string"&&F.binary===!1&&F.base64===!1;j&&j.binary!==void 0||(F.binary=!K),(R instanceof f&&R.uncompressedSize===0||F.dir||!R||R.length===0)&&(F.base64=!1,F.binary=!0,R="",F.compression="STORE",A="string");var N=null;N=R instanceof f||R instanceof c?R:v.isNode&&v.isStream(R)?new _(I,R):l.prepareContent(I,R,F.binary,F.optimizedBinaryString,F.base64);var W=new g(I,N,F);this.files[I]=W}var a=n("./utf8"),l=n("./utils"),c=n("./stream/GenericWorker"),h=n("./stream/StreamHelper"),m=n("./defaults"),f=n("./compressedObject"),g=n("./zipObject"),y=n("./generate"),v=n("./nodejsUtils"),_=n("./nodejs/NodejsStreamInputAdapter"),S=function(I){I.slice(-1)==="/"&&(I=I.substring(0,I.length-1));var R=I.lastIndexOf("/");return 0<R?I.substring(0,R):""},w=function(I){return I.slice(-1)!=="/"&&(I+="/"),I},b=function(I,R){return R=R!==void 0?R:m.createFolders,I=w(I),this.files[I]||o.call(this,I,null,{dir:!0,createFolders:R}),this.files[I]};function k(I){return Object.prototype.toString.call(I)==="[object RegExp]"}var T={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(I){var R,j,P;for(R in this.files)P=this.files[R],(j=R.slice(this.root.length,R.length))&&R.slice(0,this.root.length)===this.root&&I(j,P)},filter:function(I){var R=[];return this.forEach(function(j,P){I(j,P)&&R.push(P)}),R},file:function(I,R,j){if(arguments.length!==1)return I=this.root+I,o.call(this,I,R,j),this;if(k(I)){var P=I;return this.filter(function(F,K){return!K.dir&&P.test(F)})}var A=this.files[this.root+I];return A&&!A.dir?A:null},folder:function(I){if(!I)return this;if(k(I))return this.filter(function(A,F){return F.dir&&I.test(A)});var R=this.root+I,j=b.call(this,R),P=this.clone();return P.root=j.name,P},remove:function(I){I=this.root+I;var R=this.files[I];if(R||(I.slice(-1)!=="/"&&(I+="/"),R=this.files[I]),R&&!R.dir)delete this.files[I];else for(var j=this.filter(function(A,F){return F.name.slice(0,I.length)===I}),P=0;P<j.length;P++)delete this.files[j[P].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(I){var R,j={};try{if((j=l.extend(I||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=j.type.toLowerCase(),j.compression=j.compression.toUpperCase(),j.type==="binarystring"&&(j.type="string"),!j.type)throw new Error("No output type specified.");l.checkSupport(j.type),j.platform!=="darwin"&&j.platform!=="freebsd"&&j.platform!=="linux"&&j.platform!=="sunos"||(j.platform="UNIX"),j.platform==="win32"&&(j.platform="DOS");var P=j.comment||this.comment||"";R=y.generateWorker(this,j,P)}catch(A){(R=new c("error")).error(A)}return new h(R,j.type||"string",j.mimeType)},generateAsync:function(I,R){return this.generateInternalStream(I).accumulate(R)},generateNodeStream:function(I,R){return(I=I||{}).type||(I.type="nodebuffer"),this.generateInternalStream(I).toNodejsStream(R)}};r.exports=T},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var o=n("./DataReader");function a(l){o.call(this,l);for(var c=0;c<this.data.length;c++)l[c]=255&l[c]}n("../utils").inherits(a,o),a.prototype.byteAt=function(l){return this.data[this.zero+l]},a.prototype.lastIndexOfSignature=function(l){for(var c=l.charCodeAt(0),h=l.charCodeAt(1),m=l.charCodeAt(2),f=l.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===c&&this.data[g+1]===h&&this.data[g+2]===m&&this.data[g+3]===f)return g-this.zero;return-1},a.prototype.readAndCheckSignature=function(l){var c=l.charCodeAt(0),h=l.charCodeAt(1),m=l.charCodeAt(2),f=l.charCodeAt(3),g=this.readData(4);return c===g[0]&&h===g[1]&&m===g[2]&&f===g[3]},a.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},r.exports=a},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var o=n("../utils");function a(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var c,h=0;for(this.checkOffset(l),c=this.index+l-1;c>=this.index;c--)h=(h<<8)+this.byteAt(c);return this.index+=l,h},readString:function(l){return o.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},r.exports=a},{"../utils":32}],19:[function(n,r,i){var o=n("./Uint8ArrayReader");function a(l){o.call(this,l)}n("../utils").inherits(a,o),a.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},r.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var o=n("./DataReader");function a(l){o.call(this,l)}n("../utils").inherits(a,o),a.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},a.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},a.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},a.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},r.exports=a},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var o=n("./ArrayReader");function a(l){o.call(this,l)}n("../utils").inherits(a,o),a.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},r.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var o=n("../utils"),a=n("../support"),l=n("./ArrayReader"),c=n("./StringReader"),h=n("./NodeBufferReader"),m=n("./Uint8ArrayReader");r.exports=function(f){var g=o.getTypeOf(f);return o.checkSupport(g),g!=="string"||a.uint8array?g==="nodebuffer"?new h(f):a.uint8array?new m(o.transformTo("uint8array",f)):new l(o.transformTo("array",f)):new c(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var o=n("./GenericWorker"),a=n("../utils");function l(c){o.call(this,"ConvertWorker to "+c),this.destType=c}a.inherits(l,o),l.prototype.processChunk=function(c){this.push({data:a.transformTo(this.destType,c.data),meta:c.meta})},r.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var o=n("./GenericWorker"),a=n("../crc32");function l(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(l,o),l.prototype.processChunk=function(c){this.streamInfo.crc32=a(c.data,this.streamInfo.crc32||0),this.push(c)},r.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var o=n("../utils"),a=n("./GenericWorker");function l(c){a.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}o.inherits(l,a),l.prototype.processChunk=function(c){if(c){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+c.data.length}a.prototype.processChunk.call(this,c)},r.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var o=n("../utils"),a=n("./GenericWorker");function l(c){a.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(m){h.dataIsReady=!0,h.data=m,h.max=m&&m.length||0,h.type=o.getTypeOf(m),h.isPaused||h._tickAndRepeat()},function(m){h.error(m)})}o.inherits(l,a),l.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,h);break;case"uint8array":c=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":c=this.data.slice(this.index,h)}return this.index=h,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function o(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,l){return this._listeners[a].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,l){if(this._listeners[a])for(var c=0;c<this._listeners[a].length;c++)this._listeners[a][c].call(this,l)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var l=this;return a.on("data",function(c){l.processChunk(c)}),a.on("end",function(){l.end()}),a.on("error",function(c){l.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,l){return this.extraStreamInfo[a]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},r.exports=o},{}],29:[function(n,r,i){var o=n("../utils"),a=n("./ConvertWorker"),l=n("./GenericWorker"),c=n("../base64"),h=n("../support"),m=n("../external"),f=null;if(h.nodestream)try{f=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(v,_){return new m.Promise(function(S,w){var b=[],k=v._internalType,T=v._outputType,I=v._mimeType;v.on("data",function(R,j){b.push(R),_&&_(j)}).on("error",function(R){b=[],w(R)}).on("end",function(){try{var R=function(j,P,A){switch(j){case"blob":return o.newBlob(o.transformTo("arraybuffer",P),A);case"base64":return c.encode(P);default:return o.transformTo(j,P)}}(T,function(j,P){var A,F=0,K=null,N=0;for(A=0;A<P.length;A++)N+=P[A].length;switch(j){case"string":return P.join("");case"array":return Array.prototype.concat.apply([],P);case"uint8array":for(K=new Uint8Array(N),A=0;A<P.length;A++)K.set(P[A],F),F+=P[A].length;return K;case"nodebuffer":return Buffer.concat(P);default:throw new Error("concat : unsupported type '"+j+"'")}}(k,b),I);S(R)}catch(j){w(j)}b=[]}).resume()})}function y(v,_,S){var w=_;switch(_){case"blob":case"arraybuffer":w="uint8array";break;case"base64":w="string"}try{this._internalType=w,this._outputType=_,this._mimeType=S,o.checkSupport(w),this._worker=v.pipe(new a(w)),v.lock()}catch(b){this._worker=new l("error"),this._worker.error(b)}}y.prototype={accumulate:function(v){return g(this,v)},on:function(v,_){var S=this;return v==="data"?this._worker.on(v,function(w){_.call(S,w.data,w.meta)}):this._worker.on(v,function(){o.delay(_,arguments,S)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},v)}},r.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var o=new ArrayBuffer(0);try{i.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(o),i.blob=a.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var o=n("./utils"),a=n("./support"),l=n("./nodejsUtils"),c=n("./stream/GenericWorker"),h=new Array(256),m=0;m<256;m++)h[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;h[254]=h[254]=1;function f(){c.call(this,"utf-8 decode"),this.leftOver=null}function g(){c.call(this,"utf-8 encode")}i.utf8encode=function(y){return a.nodebuffer?l.newBufferFrom(y,"utf-8"):function(v){var _,S,w,b,k,T=v.length,I=0;for(b=0;b<T;b++)(64512&(S=v.charCodeAt(b)))==55296&&b+1<T&&(64512&(w=v.charCodeAt(b+1)))==56320&&(S=65536+(S-55296<<10)+(w-56320),b++),I+=S<128?1:S<2048?2:S<65536?3:4;for(_=a.uint8array?new Uint8Array(I):new Array(I),b=k=0;k<I;b++)(64512&(S=v.charCodeAt(b)))==55296&&b+1<T&&(64512&(w=v.charCodeAt(b+1)))==56320&&(S=65536+(S-55296<<10)+(w-56320),b++),S<128?_[k++]=S:(S<2048?_[k++]=192|S>>>6:(S<65536?_[k++]=224|S>>>12:(_[k++]=240|S>>>18,_[k++]=128|S>>>12&63),_[k++]=128|S>>>6&63),_[k++]=128|63&S);return _}(y)},i.utf8decode=function(y){return a.nodebuffer?o.transformTo("nodebuffer",y).toString("utf-8"):function(v){var _,S,w,b,k=v.length,T=new Array(2*k);for(_=S=0;_<k;)if((w=v[_++])<128)T[S++]=w;else if(4<(b=h[w]))T[S++]=65533,_+=b-1;else{for(w&=b===2?31:b===3?15:7;1<b&&_<k;)w=w<<6|63&v[_++],b--;1<b?T[S++]=65533:w<65536?T[S++]=w:(w-=65536,T[S++]=55296|w>>10&1023,T[S++]=56320|1023&w)}return T.length!==S&&(T.subarray?T=T.subarray(0,S):T.length=S),o.applyFromCharCode(T)}(y=o.transformTo(a.uint8array?"uint8array":"array",y))},o.inherits(f,c),f.prototype.processChunk=function(y){var v=o.transformTo(a.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var _=v;(v=new Uint8Array(_.length+this.leftOver.length)).set(this.leftOver,0),v.set(_,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var S=function(b,k){var T;for((k=k||b.length)>b.length&&(k=b.length),T=k-1;0<=T&&(192&b[T])==128;)T--;return T<0||T===0?k:T+h[b[T]]>k?T:k}(v),w=v;S!==v.length&&(a.uint8array?(w=v.subarray(0,S),this.leftOver=v.subarray(S,v.length)):(w=v.slice(0,S),this.leftOver=v.slice(S,v.length))),this.push({data:i.utf8decode(w),meta:y.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=f,o.inherits(g,c),g.prototype.processChunk=function(y){this.push({data:i.utf8encode(y.data),meta:y.meta})},i.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var o=n("./support"),a=n("./base64"),l=n("./nodejsUtils"),c=n("./external");function h(_){return _}function m(_,S){for(var w=0;w<_.length;++w)S[w]=255&_.charCodeAt(w);return S}n("setimmediate"),i.newBlob=function(_,S){i.checkSupport("blob");try{return new Blob([_],{type:S})}catch{try{var w=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return w.append(_),w.getBlob(S)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(_,S,w){var b=[],k=0,T=_.length;if(T<=w)return String.fromCharCode.apply(null,_);for(;k<T;)S==="array"||S==="nodebuffer"?b.push(String.fromCharCode.apply(null,_.slice(k,Math.min(k+w,T)))):b.push(String.fromCharCode.apply(null,_.subarray(k,Math.min(k+w,T)))),k+=w;return b.join("")},stringifyByChar:function(_){for(var S="",w=0;w<_.length;w++)S+=String.fromCharCode(_[w]);return S},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}}()}};function g(_){var S=65536,w=i.getTypeOf(_),b=!0;if(w==="uint8array"?b=f.applyCanBeUsed.uint8array:w==="nodebuffer"&&(b=f.applyCanBeUsed.nodebuffer),b)for(;1<S;)try{return f.stringifyByChunk(_,w,S)}catch{S=Math.floor(S/2)}return f.stringifyByChar(_)}function y(_,S){for(var w=0;w<_.length;w++)S[w]=_[w];return S}i.applyFromCharCode=g;var v={};v.string={string:h,array:function(_){return m(_,new Array(_.length))},arraybuffer:function(_){return v.string.uint8array(_).buffer},uint8array:function(_){return m(_,new Uint8Array(_.length))},nodebuffer:function(_){return m(_,l.allocBuffer(_.length))}},v.array={string:g,array:h,arraybuffer:function(_){return new Uint8Array(_).buffer},uint8array:function(_){return new Uint8Array(_)},nodebuffer:function(_){return l.newBufferFrom(_)}},v.arraybuffer={string:function(_){return g(new Uint8Array(_))},array:function(_){return y(new Uint8Array(_),new Array(_.byteLength))},arraybuffer:h,uint8array:function(_){return new Uint8Array(_)},nodebuffer:function(_){return l.newBufferFrom(new Uint8Array(_))}},v.uint8array={string:g,array:function(_){return y(_,new Array(_.length))},arraybuffer:function(_){return _.buffer},uint8array:h,nodebuffer:function(_){return l.newBufferFrom(_)}},v.nodebuffer={string:g,array:function(_){return y(_,new Array(_.length))},arraybuffer:function(_){return v.nodebuffer.uint8array(_).buffer},uint8array:function(_){return y(_,new Uint8Array(_.length))},nodebuffer:h},i.transformTo=function(_,S){if(S=S||"",!_)return S;i.checkSupport(_);var w=i.getTypeOf(S);return v[w][_](S)},i.resolve=function(_){for(var S=_.split("/"),w=[],b=0;b<S.length;b++){var k=S[b];k==="."||k===""&&b!==0&&b!==S.length-1||(k===".."?w.pop():w.push(k))}return w.join("/")},i.getTypeOf=function(_){return typeof _=="string"?"string":Object.prototype.toString.call(_)==="[object Array]"?"array":o.nodebuffer&&l.isBuffer(_)?"nodebuffer":o.uint8array&&_ instanceof Uint8Array?"uint8array":o.arraybuffer&&_ instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(_){if(!o[_.toLowerCase()])throw new Error(_+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(_){var S,w,b="";for(w=0;w<(_||"").length;w++)b+="\\x"+((S=_.charCodeAt(w))<16?"0":"")+S.toString(16).toUpperCase();return b},i.delay=function(_,S,w){setImmediate(function(){_.apply(w||null,S||[])})},i.inherits=function(_,S){function w(){}w.prototype=S.prototype,_.prototype=new w},i.extend=function(){var _,S,w={};for(_=0;_<arguments.length;_++)for(S in arguments[_])Object.prototype.hasOwnProperty.call(arguments[_],S)&&w[S]===void 0&&(w[S]=arguments[_][S]);return w},i.prepareContent=function(_,S,w,b,k){return c.Promise.resolve(S).then(function(T){return o.blob&&(T instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(T))!==-1)&&typeof FileReader<"u"?new c.Promise(function(I,R){var j=new FileReader;j.onload=function(P){I(P.target.result)},j.onerror=function(P){R(P.target.error)},j.readAsArrayBuffer(T)}):T}).then(function(T){var I=i.getTypeOf(T);return I?(I==="arraybuffer"?T=i.transformTo("uint8array",T):I==="string"&&(k?T=a.decode(T):w&&b!==!0&&(T=function(R){return m(R,o.uint8array?new Uint8Array(R.length):new Array(R.length))}(T))),T):c.Promise.reject(new Error("Can't read the data of '"+_+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var o=n("./reader/readerFor"),a=n("./utils"),l=n("./signature"),c=n("./zipEntry"),h=n("./support");function m(f){this.files=[],this.loadOptions=f}m.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(g)+", expected "+a.pretty(f)+")")}},isSignature:function(f,g){var y=this.reader.index;this.reader.setIndex(f);var v=this.reader.readString(4)===g;return this.reader.setIndex(y),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),g=h.uint8array?"uint8array":"array",y=a.transformTo(g,f);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,g,y,v=this.zip64EndOfCentralSize-44;0<v;)f=this.reader.readInt(2),g=this.reader.readInt(4),y=this.reader.readData(g),this.zip64ExtensibleData[f]={id:f,length:g,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,g;for(f=0;f<this.files.length;f++)g=this.files[f],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(f=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var g=f;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var v=g-y;if(0<v)this.isSignature(g,l.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(f){this.reader=o(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=m},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var o=n("./reader/readerFor"),a=n("./utils"),l=n("./compressedObject"),c=n("./crc32"),h=n("./utf8"),m=n("./compressions"),f=n("./support");function g(y,v){this.options=y,this.loadOptions=v}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(y){var v,_;if(y.skip(22),this.fileNameLength=y.readInt(2),_=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(_),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(S){for(var w in m)if(Object.prototype.hasOwnProperty.call(m,w)&&m[w].magic===S)return m[w];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,v,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var v=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(v),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),y==0&&(this.dosPermissions=63&this.externalFileAttributes),y==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var y=o(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(y){var v,_,S,w=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index+4<w;)v=y.readInt(2),_=y.readInt(2),S=y.readData(_),this.extraFields[v]={id:v,length:_,value:S};y.setIndex(w)},handleUTF8:function(){var y=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var _=a.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(_)}var S=this.findExtraFieldUnicodeComment();if(S!==null)this.fileCommentStr=S;else{var w=a.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(w)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var v=o(y.value);return v.readInt(1)!==1||c(this.fileName)!==v.readInt(4)?null:h.utf8decode(v.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var v=o(y.value);return v.readInt(1)!==1||c(this.fileComment)!==v.readInt(4)?null:h.utf8decode(v.readData(y.length-5))}return null}},r.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){function o(v,_,S){this.name=v,this.dir=S.dir,this.date=S.date,this.comment=S.comment,this.unixPermissions=S.unixPermissions,this.dosPermissions=S.dosPermissions,this._data=_,this._dataBinary=S.binary,this.options={compression:S.compression,compressionOptions:S.compressionOptions}}var a=n("./stream/StreamHelper"),l=n("./stream/DataWorker"),c=n("./utf8"),h=n("./compressedObject"),m=n("./stream/GenericWorker");o.prototype={internalStream:function(v){var _=null,S="string";try{if(!v)throw new Error("No output type specified.");var w=(S=v.toLowerCase())==="string"||S==="text";S!=="binarystring"&&S!=="text"||(S="string"),_=this._decompressWorker();var b=!this._dataBinary;b&&!w&&(_=_.pipe(new c.Utf8EncodeWorker)),!b&&w&&(_=_.pipe(new c.Utf8DecodeWorker))}catch(k){(_=new m("error")).error(k)}return new a(_,S,"")},async:function(v,_){return this.internalStream(v).accumulate(_)},nodeStream:function(v,_){return this.internalStream(v||"nodebuffer").toNodejsStream(_)},_compressWorker:function(v,_){if(this._data instanceof h&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var S=this._decompressWorker();return this._dataBinary||(S=S.pipe(new c.Utf8EncodeWorker)),h.createWorkerFrom(S,v,_)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof m?this._data:new l(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<f.length;y++)o.prototype[f[y]]=g;r.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(o){var a,l,c=o.MutationObserver||o.WebKitMutationObserver;if(c){var h=0,m=new c(v),f=o.document.createTextNode("");m.observe(f,{characterData:!0}),a=function(){f.data=h=++h%2}}else if(o.setImmediate||o.MessageChannel===void 0)a="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var _=o.document.createElement("script");_.onreadystatechange=function(){v(),_.onreadystatechange=null,_.parentNode.removeChild(_),_=null},o.document.documentElement.appendChild(_)}:function(){setTimeout(v,0)};else{var g=new o.MessageChannel;g.port1.onmessage=v,a=function(){g.port2.postMessage(0)}}var y=[];function v(){var _,S;l=!0;for(var w=y.length;w;){for(S=y,y=[],_=-1;++_<w;)S[_]();w=y.length}l=!1}r.exports=function(_){y.push(_)!==1||l||a()}}).call(this,typeof Js<"u"?Js:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var o=n("immediate");function a(){}var l={},c=["REJECTED"],h=["FULFILLED"],m=["PENDING"];function f(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,w!==a&&_(this,w)}function g(w,b,k){this.promise=w,typeof b=="function"&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),typeof k=="function"&&(this.onRejected=k,this.callRejected=this.otherCallRejected)}function y(w,b,k){o(function(){var T;try{T=b(k)}catch(I){return l.reject(w,I)}T===w?l.reject(w,new TypeError("Cannot resolve promise with itself")):l.resolve(w,T)})}function v(w){var b=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof b=="function")return function(){b.apply(w,arguments)}}function _(w,b){var k=!1;function T(j){k||(k=!0,l.reject(w,j))}function I(j){k||(k=!0,l.resolve(w,j))}var R=S(function(){b(I,T)});R.status==="error"&&T(R.value)}function S(w,b){var k={};try{k.value=w(b),k.status="success"}catch(T){k.status="error",k.value=T}return k}(r.exports=f).prototype.finally=function(w){if(typeof w!="function")return this;var b=this.constructor;return this.then(function(k){return b.resolve(w()).then(function(){return k})},function(k){return b.resolve(w()).then(function(){throw k})})},f.prototype.catch=function(w){return this.then(null,w)},f.prototype.then=function(w,b){if(typeof w!="function"&&this.state===h||typeof b!="function"&&this.state===c)return this;var k=new this.constructor(a);return this.state!==m?y(k,this.state===h?w:b,this.outcome):this.queue.push(new g(k,w,b)),k},g.prototype.callFulfilled=function(w){l.resolve(this.promise,w)},g.prototype.otherCallFulfilled=function(w){y(this.promise,this.onFulfilled,w)},g.prototype.callRejected=function(w){l.reject(this.promise,w)},g.prototype.otherCallRejected=function(w){y(this.promise,this.onRejected,w)},l.resolve=function(w,b){var k=S(v,b);if(k.status==="error")return l.reject(w,k.value);var T=k.value;if(T)_(w,T);else{w.state=h,w.outcome=b;for(var I=-1,R=w.queue.length;++I<R;)w.queue[I].callFulfilled(b)}return w},l.reject=function(w,b){w.state=c,w.outcome=b;for(var k=-1,T=w.queue.length;++k<T;)w.queue[k].callRejected(b);return w},f.resolve=function(w){return w instanceof this?w:l.resolve(new this(a),w)},f.reject=function(w){var b=new this(a);return l.reject(b,w)},f.all=function(w){var b=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=w.length,T=!1;if(!k)return this.resolve([]);for(var I=new Array(k),R=0,j=-1,P=new this(a);++j<k;)A(w[j],j);return P;function A(F,K){b.resolve(F).then(function(N){I[K]=N,++R!==k||T||(T=!0,l.resolve(P,I))},function(N){T||(T=!0,l.reject(P,N))})}},f.race=function(w){var b=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=w.length,T=!1;if(!k)return this.resolve([]);for(var I=-1,R=new this(a);++I<k;)j=w[I],b.resolve(j).then(function(P){T||(T=!0,l.resolve(R,P))},function(P){T||(T=!0,l.reject(R,P))});var j;return R}},{immediate:36}],38:[function(n,r,i){var o={};(0,n("./lib/utils/common").assign)(o,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var o=n("./zlib/deflate"),a=n("./utils/common"),l=n("./utils/strings"),c=n("./zlib/messages"),h=n("./zlib/zstream"),m=Object.prototype.toString,f=0,g=-1,y=0,v=8;function _(w){if(!(this instanceof _))return new _(w);this.options=a.assign({level:g,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},w||{});var b=this.options;b.raw&&0<b.windowBits?b.windowBits=-b.windowBits:b.gzip&&0<b.windowBits&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var k=o.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(k!==f)throw new Error(c[k]);if(b.header&&o.deflateSetHeader(this.strm,b.header),b.dictionary){var T;if(T=typeof b.dictionary=="string"?l.string2buf(b.dictionary):m.call(b.dictionary)==="[object ArrayBuffer]"?new Uint8Array(b.dictionary):b.dictionary,(k=o.deflateSetDictionary(this.strm,T))!==f)throw new Error(c[k]);this._dict_set=!0}}function S(w,b){var k=new _(b);if(k.push(w,!0),k.err)throw k.msg||c[k.err];return k.result}_.prototype.push=function(w,b){var k,T,I=this.strm,R=this.options.chunkSize;if(this.ended)return!1;T=b===~~b?b:b===!0?4:0,typeof w=="string"?I.input=l.string2buf(w):m.call(w)==="[object ArrayBuffer]"?I.input=new Uint8Array(w):I.input=w,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new a.Buf8(R),I.next_out=0,I.avail_out=R),(k=o.deflate(I,T))!==1&&k!==f)return this.onEnd(k),!(this.ended=!0);I.avail_out!==0&&(I.avail_in!==0||T!==4&&T!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(a.shrinkBuf(I.output,I.next_out))):this.onData(a.shrinkBuf(I.output,I.next_out)))}while((0<I.avail_in||I.avail_out===0)&&k!==1);return T===4?(k=o.deflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===f):T!==2||(this.onEnd(f),!(I.avail_out=0))},_.prototype.onData=function(w){this.chunks.push(w)},_.prototype.onEnd=function(w){w===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},i.Deflate=_,i.deflate=S,i.deflateRaw=function(w,b){return(b=b||{}).raw=!0,S(w,b)},i.gzip=function(w,b){return(b=b||{}).gzip=!0,S(w,b)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var o=n("./zlib/inflate"),a=n("./utils/common"),l=n("./utils/strings"),c=n("./zlib/constants"),h=n("./zlib/messages"),m=n("./zlib/zstream"),f=n("./zlib/gzheader"),g=Object.prototype.toString;function y(_){if(!(this instanceof y))return new y(_);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},_||{});var S=this.options;S.raw&&0<=S.windowBits&&S.windowBits<16&&(S.windowBits=-S.windowBits,S.windowBits===0&&(S.windowBits=-15)),!(0<=S.windowBits&&S.windowBits<16)||_&&_.windowBits||(S.windowBits+=32),15<S.windowBits&&S.windowBits<48&&!(15&S.windowBits)&&(S.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var w=o.inflateInit2(this.strm,S.windowBits);if(w!==c.Z_OK)throw new Error(h[w]);this.header=new f,o.inflateGetHeader(this.strm,this.header)}function v(_,S){var w=new y(S);if(w.push(_,!0),w.err)throw w.msg||h[w.err];return w.result}y.prototype.push=function(_,S){var w,b,k,T,I,R,j=this.strm,P=this.options.chunkSize,A=this.options.dictionary,F=!1;if(this.ended)return!1;b=S===~~S?S:S===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof _=="string"?j.input=l.binstring2buf(_):g.call(_)==="[object ArrayBuffer]"?j.input=new Uint8Array(_):j.input=_,j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0&&(j.output=new a.Buf8(P),j.next_out=0,j.avail_out=P),(w=o.inflate(j,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&A&&(R=typeof A=="string"?l.string2buf(A):g.call(A)==="[object ArrayBuffer]"?new Uint8Array(A):A,w=o.inflateSetDictionary(this.strm,R)),w===c.Z_BUF_ERROR&&F===!0&&(w=c.Z_OK,F=!1),w!==c.Z_STREAM_END&&w!==c.Z_OK)return this.onEnd(w),!(this.ended=!0);j.next_out&&(j.avail_out!==0&&w!==c.Z_STREAM_END&&(j.avail_in!==0||b!==c.Z_FINISH&&b!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(k=l.utf8border(j.output,j.next_out),T=j.next_out-k,I=l.buf2string(j.output,k),j.next_out=T,j.avail_out=P-T,T&&a.arraySet(j.output,j.output,k,T,0),this.onData(I)):this.onData(a.shrinkBuf(j.output,j.next_out)))),j.avail_in===0&&j.avail_out===0&&(F=!0)}while((0<j.avail_in||j.avail_out===0)&&w!==c.Z_STREAM_END);return w===c.Z_STREAM_END&&(b=c.Z_FINISH),b===c.Z_FINISH?(w=o.inflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===c.Z_OK):b!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(j.avail_out=0))},y.prototype.onData=function(_){this.chunks.push(_)},y.prototype.onEnd=function(_){_===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},i.Inflate=y,i.inflate=v,i.inflateRaw=function(_,S){return(S=S||{}).raw=!0,v(_,S)},i.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(c){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var m=h.shift();if(m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(var f in m)m.hasOwnProperty(f)&&(c[f]=m[f])}}return c},i.shrinkBuf=function(c,h){return c.length===h?c:c.subarray?c.subarray(0,h):(c.length=h,c)};var a={arraySet:function(c,h,m,f,g){if(h.subarray&&c.subarray)c.set(h.subarray(m,m+f),g);else for(var y=0;y<f;y++)c[g+y]=h[m+y]},flattenChunks:function(c){var h,m,f,g,y,v;for(h=f=0,m=c.length;h<m;h++)f+=c[h].length;for(v=new Uint8Array(f),h=g=0,m=c.length;h<m;h++)y=c[h],v.set(y,g),g+=y.length;return v}},l={arraySet:function(c,h,m,f,g){for(var y=0;y<f;y++)c[g+y]=h[m+y]},flattenChunks:function(c){return[].concat.apply([],c)}};i.setTyped=function(c){c?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,a)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,l))},i.setTyped(o)},{}],42:[function(n,r,i){var o=n("./common"),a=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var c=new o.Buf8(256),h=0;h<256;h++)c[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function m(f,g){if(g<65537&&(f.subarray&&l||!f.subarray&&a))return String.fromCharCode.apply(null,o.shrinkBuf(f,g));for(var y="",v=0;v<g;v++)y+=String.fromCharCode(f[v]);return y}c[254]=c[254]=1,i.string2buf=function(f){var g,y,v,_,S,w=f.length,b=0;for(_=0;_<w;_++)(64512&(y=f.charCodeAt(_)))==55296&&_+1<w&&(64512&(v=f.charCodeAt(_+1)))==56320&&(y=65536+(y-55296<<10)+(v-56320),_++),b+=y<128?1:y<2048?2:y<65536?3:4;for(g=new o.Buf8(b),_=S=0;S<b;_++)(64512&(y=f.charCodeAt(_)))==55296&&_+1<w&&(64512&(v=f.charCodeAt(_+1)))==56320&&(y=65536+(y-55296<<10)+(v-56320),_++),y<128?g[S++]=y:(y<2048?g[S++]=192|y>>>6:(y<65536?g[S++]=224|y>>>12:(g[S++]=240|y>>>18,g[S++]=128|y>>>12&63),g[S++]=128|y>>>6&63),g[S++]=128|63&y);return g},i.buf2binstring=function(f){return m(f,f.length)},i.binstring2buf=function(f){for(var g=new o.Buf8(f.length),y=0,v=g.length;y<v;y++)g[y]=f.charCodeAt(y);return g},i.buf2string=function(f,g){var y,v,_,S,w=g||f.length,b=new Array(2*w);for(y=v=0;y<w;)if((_=f[y++])<128)b[v++]=_;else if(4<(S=c[_]))b[v++]=65533,y+=S-1;else{for(_&=S===2?31:S===3?15:7;1<S&&y<w;)_=_<<6|63&f[y++],S--;1<S?b[v++]=65533:_<65536?b[v++]=_:(_-=65536,b[v++]=55296|_>>10&1023,b[v++]=56320|1023&_)}return m(b,v)},i.utf8border=function(f,g){var y;for((g=g||f.length)>f.length&&(g=f.length),y=g-1;0<=y&&(192&f[y])==128;)y--;return y<0||y===0?g:y+c[f[y]]>g?y:g}},{"./common":41}],43:[function(n,r,i){r.exports=function(o,a,l,c){for(var h=65535&o|0,m=o>>>16&65535|0,f=0;l!==0;){for(l-=f=2e3<l?2e3:l;m=m+(h=h+a[c++]|0)|0,--f;);h%=65521,m%=65521}return h|m<<16|0}},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){var o=function(){for(var a,l=[],c=0;c<256;c++){a=c;for(var h=0;h<8;h++)a=1&a?3988292384^a>>>1:a>>>1;l[c]=a}return l}();r.exports=function(a,l,c,h){var m=o,f=h+c;a^=-1;for(var g=h;g<f;g++)a=a>>>8^m[255&(a^l[g])];return-1^a}},{}],46:[function(n,r,i){var o,a=n("../utils/common"),l=n("./trees"),c=n("./adler32"),h=n("./crc32"),m=n("./messages"),f=0,g=4,y=0,v=-2,_=-1,S=4,w=2,b=8,k=9,T=286,I=30,R=19,j=2*T+1,P=15,A=3,F=258,K=F+A+1,N=42,W=113,E=1,Y=2,H=3,M=4;function B(O,ue){return O.msg=m[ue],ue}function D(O){return(O<<1)-(4<O?9:0)}function z(O){for(var ue=O.length;0<=--ue;)O[ue]=0}function $(O){var ue=O.state,se=ue.pending;se>O.avail_out&&(se=O.avail_out),se!==0&&(a.arraySet(O.output,ue.pending_buf,ue.pending_out,se,O.next_out),O.next_out+=se,ue.pending_out+=se,O.total_out+=se,O.avail_out-=se,ue.pending-=se,ue.pending===0&&(ue.pending_out=0))}function Z(O,ue){l._tr_flush_block(O,0<=O.block_start?O.block_start:-1,O.strstart-O.block_start,ue),O.block_start=O.strstart,$(O.strm)}function re(O,ue){O.pending_buf[O.pending++]=ue}function ee(O,ue){O.pending_buf[O.pending++]=ue>>>8&255,O.pending_buf[O.pending++]=255&ue}function Q(O,ue){var se,G,q=O.max_chain_length,ne=O.strstart,ce=O.prev_length,pe=O.nice_match,ie=O.strstart>O.w_size-K?O.strstart-(O.w_size-K):0,ge=O.window,ve=O.w_mask,_e=O.prev,Pe=O.strstart+F,et=ge[ne+ce-1],Re=ge[ne+ce];O.prev_length>=O.good_match&&(q>>=2),pe>O.lookahead&&(pe=O.lookahead);do if(ge[(se=ue)+ce]===Re&&ge[se+ce-1]===et&&ge[se]===ge[ne]&&ge[++se]===ge[ne+1]){ne+=2,se++;do;while(ge[++ne]===ge[++se]&&ge[++ne]===ge[++se]&&ge[++ne]===ge[++se]&&ge[++ne]===ge[++se]&&ge[++ne]===ge[++se]&&ge[++ne]===ge[++se]&&ge[++ne]===ge[++se]&&ge[++ne]===ge[++se]&&ne<Pe);if(G=F-(Pe-ne),ne=Pe-F,ce<G){if(O.match_start=ue,pe<=(ce=G))break;et=ge[ne+ce-1],Re=ge[ne+ce]}}while((ue=_e[ue&ve])>ie&&--q!=0);return ce<=O.lookahead?ce:O.lookahead}function fe(O){var ue,se,G,q,ne,ce,pe,ie,ge,ve,_e=O.w_size;do{if(q=O.window_size-O.lookahead-O.strstart,O.strstart>=_e+(_e-K)){for(a.arraySet(O.window,O.window,_e,_e,0),O.match_start-=_e,O.strstart-=_e,O.block_start-=_e,ue=se=O.hash_size;G=O.head[--ue],O.head[ue]=_e<=G?G-_e:0,--se;);for(ue=se=_e;G=O.prev[--ue],O.prev[ue]=_e<=G?G-_e:0,--se;);q+=_e}if(O.strm.avail_in===0)break;if(ce=O.strm,pe=O.window,ie=O.strstart+O.lookahead,ge=q,ve=void 0,ve=ce.avail_in,ge<ve&&(ve=ge),se=ve===0?0:(ce.avail_in-=ve,a.arraySet(pe,ce.input,ce.next_in,ve,ie),ce.state.wrap===1?ce.adler=c(ce.adler,pe,ve,ie):ce.state.wrap===2&&(ce.adler=h(ce.adler,pe,ve,ie)),ce.next_in+=ve,ce.total_in+=ve,ve),O.lookahead+=se,O.lookahead+O.insert>=A)for(ne=O.strstart-O.insert,O.ins_h=O.window[ne],O.ins_h=(O.ins_h<<O.hash_shift^O.window[ne+1])&O.hash_mask;O.insert&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[ne+A-1])&O.hash_mask,O.prev[ne&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=ne,ne++,O.insert--,!(O.lookahead+O.insert<A)););}while(O.lookahead<K&&O.strm.avail_in!==0)}function Ee(O,ue){for(var se,G;;){if(O.lookahead<K){if(fe(O),O.lookahead<K&&ue===f)return E;if(O.lookahead===0)break}if(se=0,O.lookahead>=A&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+A-1])&O.hash_mask,se=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),se!==0&&O.strstart-se<=O.w_size-K&&(O.match_length=Q(O,se)),O.match_length>=A)if(G=l._tr_tally(O,O.strstart-O.match_start,O.match_length-A),O.lookahead-=O.match_length,O.match_length<=O.max_lazy_match&&O.lookahead>=A){for(O.match_length--;O.strstart++,O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+A-1])&O.hash_mask,se=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart,--O.match_length!=0;);O.strstart++}else O.strstart+=O.match_length,O.match_length=0,O.ins_h=O.window[O.strstart],O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+1])&O.hash_mask;else G=l._tr_tally(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++;if(G&&(Z(O,!1),O.strm.avail_out===0))return E}return O.insert=O.strstart<A-1?O.strstart:A-1,ue===g?(Z(O,!0),O.strm.avail_out===0?H:M):O.last_lit&&(Z(O,!1),O.strm.avail_out===0)?E:Y}function ke(O,ue){for(var se,G,q;;){if(O.lookahead<K){if(fe(O),O.lookahead<K&&ue===f)return E;if(O.lookahead===0)break}if(se=0,O.lookahead>=A&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+A-1])&O.hash_mask,se=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),O.prev_length=O.match_length,O.prev_match=O.match_start,O.match_length=A-1,se!==0&&O.prev_length<O.max_lazy_match&&O.strstart-se<=O.w_size-K&&(O.match_length=Q(O,se),O.match_length<=5&&(O.strategy===1||O.match_length===A&&4096<O.strstart-O.match_start)&&(O.match_length=A-1)),O.prev_length>=A&&O.match_length<=O.prev_length){for(q=O.strstart+O.lookahead-A,G=l._tr_tally(O,O.strstart-1-O.prev_match,O.prev_length-A),O.lookahead-=O.prev_length-1,O.prev_length-=2;++O.strstart<=q&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+A-1])&O.hash_mask,se=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),--O.prev_length!=0;);if(O.match_available=0,O.match_length=A-1,O.strstart++,G&&(Z(O,!1),O.strm.avail_out===0))return E}else if(O.match_available){if((G=l._tr_tally(O,0,O.window[O.strstart-1]))&&Z(O,!1),O.strstart++,O.lookahead--,O.strm.avail_out===0)return E}else O.match_available=1,O.strstart++,O.lookahead--}return O.match_available&&(G=l._tr_tally(O,0,O.window[O.strstart-1]),O.match_available=0),O.insert=O.strstart<A-1?O.strstart:A-1,ue===g?(Z(O,!0),O.strm.avail_out===0?H:M):O.last_lit&&(Z(O,!1),O.strm.avail_out===0)?E:Y}function ae(O,ue,se,G,q){this.good_length=O,this.max_lazy=ue,this.nice_length=se,this.max_chain=G,this.func=q}function be(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=b,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*j),this.dyn_dtree=new a.Buf16(2*(2*I+1)),this.bl_tree=new a.Buf16(2*(2*R+1)),z(this.dyn_ltree),z(this.dyn_dtree),z(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(P+1),this.heap=new a.Buf16(2*T+1),z(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*T+1),z(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ce(O){var ue;return O&&O.state?(O.total_in=O.total_out=0,O.data_type=w,(ue=O.state).pending=0,ue.pending_out=0,ue.wrap<0&&(ue.wrap=-ue.wrap),ue.status=ue.wrap?N:W,O.adler=ue.wrap===2?0:1,ue.last_flush=f,l._tr_init(ue),y):B(O,v)}function Te(O){var ue=Ce(O);return ue===y&&function(se){se.window_size=2*se.w_size,z(se.head),se.max_lazy_match=o[se.level].max_lazy,se.good_match=o[se.level].good_length,se.nice_match=o[se.level].nice_length,se.max_chain_length=o[se.level].max_chain,se.strstart=0,se.block_start=0,se.lookahead=0,se.insert=0,se.match_length=se.prev_length=A-1,se.match_available=0,se.ins_h=0}(O.state),ue}function nt(O,ue,se,G,q,ne){if(!O)return v;var ce=1;if(ue===_&&(ue=6),G<0?(ce=0,G=-G):15<G&&(ce=2,G-=16),q<1||k<q||se!==b||G<8||15<G||ue<0||9<ue||ne<0||S<ne)return B(O,v);G===8&&(G=9);var pe=new be;return(O.state=pe).strm=O,pe.wrap=ce,pe.gzhead=null,pe.w_bits=G,pe.w_size=1<<pe.w_bits,pe.w_mask=pe.w_size-1,pe.hash_bits=q+7,pe.hash_size=1<<pe.hash_bits,pe.hash_mask=pe.hash_size-1,pe.hash_shift=~~((pe.hash_bits+A-1)/A),pe.window=new a.Buf8(2*pe.w_size),pe.head=new a.Buf16(pe.hash_size),pe.prev=new a.Buf16(pe.w_size),pe.lit_bufsize=1<<q+6,pe.pending_buf_size=4*pe.lit_bufsize,pe.pending_buf=new a.Buf8(pe.pending_buf_size),pe.d_buf=1*pe.lit_bufsize,pe.l_buf=3*pe.lit_bufsize,pe.level=ue,pe.strategy=ne,pe.method=se,Te(O)}o=[new ae(0,0,0,0,function(O,ue){var se=65535;for(se>O.pending_buf_size-5&&(se=O.pending_buf_size-5);;){if(O.lookahead<=1){if(fe(O),O.lookahead===0&&ue===f)return E;if(O.lookahead===0)break}O.strstart+=O.lookahead,O.lookahead=0;var G=O.block_start+se;if((O.strstart===0||O.strstart>=G)&&(O.lookahead=O.strstart-G,O.strstart=G,Z(O,!1),O.strm.avail_out===0)||O.strstart-O.block_start>=O.w_size-K&&(Z(O,!1),O.strm.avail_out===0))return E}return O.insert=0,ue===g?(Z(O,!0),O.strm.avail_out===0?H:M):(O.strstart>O.block_start&&(Z(O,!1),O.strm.avail_out),E)}),new ae(4,4,8,4,Ee),new ae(4,5,16,8,Ee),new ae(4,6,32,32,Ee),new ae(4,4,16,16,ke),new ae(8,16,32,32,ke),new ae(8,16,128,128,ke),new ae(8,32,128,256,ke),new ae(32,128,258,1024,ke),new ae(32,258,258,4096,ke)],i.deflateInit=function(O,ue){return nt(O,ue,b,15,8,0)},i.deflateInit2=nt,i.deflateReset=Te,i.deflateResetKeep=Ce,i.deflateSetHeader=function(O,ue){return O&&O.state?O.state.wrap!==2?v:(O.state.gzhead=ue,y):v},i.deflate=function(O,ue){var se,G,q,ne;if(!O||!O.state||5<ue||ue<0)return O?B(O,v):v;if(G=O.state,!O.output||!O.input&&O.avail_in!==0||G.status===666&&ue!==g)return B(O,O.avail_out===0?-5:v);if(G.strm=O,se=G.last_flush,G.last_flush=ue,G.status===N)if(G.wrap===2)O.adler=0,re(G,31),re(G,139),re(G,8),G.gzhead?(re(G,(G.gzhead.text?1:0)+(G.gzhead.hcrc?2:0)+(G.gzhead.extra?4:0)+(G.gzhead.name?8:0)+(G.gzhead.comment?16:0)),re(G,255&G.gzhead.time),re(G,G.gzhead.time>>8&255),re(G,G.gzhead.time>>16&255),re(G,G.gzhead.time>>24&255),re(G,G.level===9?2:2<=G.strategy||G.level<2?4:0),re(G,255&G.gzhead.os),G.gzhead.extra&&G.gzhead.extra.length&&(re(G,255&G.gzhead.extra.length),re(G,G.gzhead.extra.length>>8&255)),G.gzhead.hcrc&&(O.adler=h(O.adler,G.pending_buf,G.pending,0)),G.gzindex=0,G.status=69):(re(G,0),re(G,0),re(G,0),re(G,0),re(G,0),re(G,G.level===9?2:2<=G.strategy||G.level<2?4:0),re(G,3),G.status=W);else{var ce=b+(G.w_bits-8<<4)<<8;ce|=(2<=G.strategy||G.level<2?0:G.level<6?1:G.level===6?2:3)<<6,G.strstart!==0&&(ce|=32),ce+=31-ce%31,G.status=W,ee(G,ce),G.strstart!==0&&(ee(G,O.adler>>>16),ee(G,65535&O.adler)),O.adler=1}if(G.status===69)if(G.gzhead.extra){for(q=G.pending;G.gzindex<(65535&G.gzhead.extra.length)&&(G.pending!==G.pending_buf_size||(G.gzhead.hcrc&&G.pending>q&&(O.adler=h(O.adler,G.pending_buf,G.pending-q,q)),$(O),q=G.pending,G.pending!==G.pending_buf_size));)re(G,255&G.gzhead.extra[G.gzindex]),G.gzindex++;G.gzhead.hcrc&&G.pending>q&&(O.adler=h(O.adler,G.pending_buf,G.pending-q,q)),G.gzindex===G.gzhead.extra.length&&(G.gzindex=0,G.status=73)}else G.status=73;if(G.status===73)if(G.gzhead.name){q=G.pending;do{if(G.pending===G.pending_buf_size&&(G.gzhead.hcrc&&G.pending>q&&(O.adler=h(O.adler,G.pending_buf,G.pending-q,q)),$(O),q=G.pending,G.pending===G.pending_buf_size)){ne=1;break}ne=G.gzindex<G.gzhead.name.length?255&G.gzhead.name.charCodeAt(G.gzindex++):0,re(G,ne)}while(ne!==0);G.gzhead.hcrc&&G.pending>q&&(O.adler=h(O.adler,G.pending_buf,G.pending-q,q)),ne===0&&(G.gzindex=0,G.status=91)}else G.status=91;if(G.status===91)if(G.gzhead.comment){q=G.pending;do{if(G.pending===G.pending_buf_size&&(G.gzhead.hcrc&&G.pending>q&&(O.adler=h(O.adler,G.pending_buf,G.pending-q,q)),$(O),q=G.pending,G.pending===G.pending_buf_size)){ne=1;break}ne=G.gzindex<G.gzhead.comment.length?255&G.gzhead.comment.charCodeAt(G.gzindex++):0,re(G,ne)}while(ne!==0);G.gzhead.hcrc&&G.pending>q&&(O.adler=h(O.adler,G.pending_buf,G.pending-q,q)),ne===0&&(G.status=103)}else G.status=103;if(G.status===103&&(G.gzhead.hcrc?(G.pending+2>G.pending_buf_size&&$(O),G.pending+2<=G.pending_buf_size&&(re(G,255&O.adler),re(G,O.adler>>8&255),O.adler=0,G.status=W)):G.status=W),G.pending!==0){if($(O),O.avail_out===0)return G.last_flush=-1,y}else if(O.avail_in===0&&D(ue)<=D(se)&&ue!==g)return B(O,-5);if(G.status===666&&O.avail_in!==0)return B(O,-5);if(O.avail_in!==0||G.lookahead!==0||ue!==f&&G.status!==666){var pe=G.strategy===2?function(ie,ge){for(var ve;;){if(ie.lookahead===0&&(fe(ie),ie.lookahead===0)){if(ge===f)return E;break}if(ie.match_length=0,ve=l._tr_tally(ie,0,ie.window[ie.strstart]),ie.lookahead--,ie.strstart++,ve&&(Z(ie,!1),ie.strm.avail_out===0))return E}return ie.insert=0,ge===g?(Z(ie,!0),ie.strm.avail_out===0?H:M):ie.last_lit&&(Z(ie,!1),ie.strm.avail_out===0)?E:Y}(G,ue):G.strategy===3?function(ie,ge){for(var ve,_e,Pe,et,Re=ie.window;;){if(ie.lookahead<=F){if(fe(ie),ie.lookahead<=F&&ge===f)return E;if(ie.lookahead===0)break}if(ie.match_length=0,ie.lookahead>=A&&0<ie.strstart&&(_e=Re[Pe=ie.strstart-1])===Re[++Pe]&&_e===Re[++Pe]&&_e===Re[++Pe]){et=ie.strstart+F;do;while(_e===Re[++Pe]&&_e===Re[++Pe]&&_e===Re[++Pe]&&_e===Re[++Pe]&&_e===Re[++Pe]&&_e===Re[++Pe]&&_e===Re[++Pe]&&_e===Re[++Pe]&&Pe<et);ie.match_length=F-(et-Pe),ie.match_length>ie.lookahead&&(ie.match_length=ie.lookahead)}if(ie.match_length>=A?(ve=l._tr_tally(ie,1,ie.match_length-A),ie.lookahead-=ie.match_length,ie.strstart+=ie.match_length,ie.match_length=0):(ve=l._tr_tally(ie,0,ie.window[ie.strstart]),ie.lookahead--,ie.strstart++),ve&&(Z(ie,!1),ie.strm.avail_out===0))return E}return ie.insert=0,ge===g?(Z(ie,!0),ie.strm.avail_out===0?H:M):ie.last_lit&&(Z(ie,!1),ie.strm.avail_out===0)?E:Y}(G,ue):o[G.level].func(G,ue);if(pe!==H&&pe!==M||(G.status=666),pe===E||pe===H)return O.avail_out===0&&(G.last_flush=-1),y;if(pe===Y&&(ue===1?l._tr_align(G):ue!==5&&(l._tr_stored_block(G,0,0,!1),ue===3&&(z(G.head),G.lookahead===0&&(G.strstart=0,G.block_start=0,G.insert=0))),$(O),O.avail_out===0))return G.last_flush=-1,y}return ue!==g?y:G.wrap<=0?1:(G.wrap===2?(re(G,255&O.adler),re(G,O.adler>>8&255),re(G,O.adler>>16&255),re(G,O.adler>>24&255),re(G,255&O.total_in),re(G,O.total_in>>8&255),re(G,O.total_in>>16&255),re(G,O.total_in>>24&255)):(ee(G,O.adler>>>16),ee(G,65535&O.adler)),$(O),0<G.wrap&&(G.wrap=-G.wrap),G.pending!==0?y:1)},i.deflateEnd=function(O){var ue;return O&&O.state?(ue=O.state.status)!==N&&ue!==69&&ue!==73&&ue!==91&&ue!==103&&ue!==W&&ue!==666?B(O,v):(O.state=null,ue===W?B(O,-3):y):v},i.deflateSetDictionary=function(O,ue){var se,G,q,ne,ce,pe,ie,ge,ve=ue.length;if(!O||!O.state||(ne=(se=O.state).wrap)===2||ne===1&&se.status!==N||se.lookahead)return v;for(ne===1&&(O.adler=c(O.adler,ue,ve,0)),se.wrap=0,ve>=se.w_size&&(ne===0&&(z(se.head),se.strstart=0,se.block_start=0,se.insert=0),ge=new a.Buf8(se.w_size),a.arraySet(ge,ue,ve-se.w_size,se.w_size,0),ue=ge,ve=se.w_size),ce=O.avail_in,pe=O.next_in,ie=O.input,O.avail_in=ve,O.next_in=0,O.input=ue,fe(se);se.lookahead>=A;){for(G=se.strstart,q=se.lookahead-(A-1);se.ins_h=(se.ins_h<<se.hash_shift^se.window[G+A-1])&se.hash_mask,se.prev[G&se.w_mask]=se.head[se.ins_h],se.head[se.ins_h]=G,G++,--q;);se.strstart=G,se.lookahead=A-1,fe(se)}return se.strstart+=se.lookahead,se.block_start=se.strstart,se.insert=se.lookahead,se.lookahead=0,se.match_length=se.prev_length=A-1,se.match_available=0,O.next_in=pe,O.input=ie,O.avail_in=ce,se.wrap=ne,y},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,i){r.exports=function(o,a){var l,c,h,m,f,g,y,v,_,S,w,b,k,T,I,R,j,P,A,F,K,N,W,E,Y;l=o.state,c=o.next_in,E=o.input,h=c+(o.avail_in-5),m=o.next_out,Y=o.output,f=m-(a-o.avail_out),g=m+(o.avail_out-257),y=l.dmax,v=l.wsize,_=l.whave,S=l.wnext,w=l.window,b=l.hold,k=l.bits,T=l.lencode,I=l.distcode,R=(1<<l.lenbits)-1,j=(1<<l.distbits)-1;e:do{k<15&&(b+=E[c++]<<k,k+=8,b+=E[c++]<<k,k+=8),P=T[b&R];t:for(;;){if(b>>>=A=P>>>24,k-=A,(A=P>>>16&255)===0)Y[m++]=65535&P;else{if(!(16&A)){if(!(64&A)){P=T[(65535&P)+(b&(1<<A)-1)];continue t}if(32&A){l.mode=12;break e}o.msg="invalid literal/length code",l.mode=30;break e}F=65535&P,(A&=15)&&(k<A&&(b+=E[c++]<<k,k+=8),F+=b&(1<<A)-1,b>>>=A,k-=A),k<15&&(b+=E[c++]<<k,k+=8,b+=E[c++]<<k,k+=8),P=I[b&j];n:for(;;){if(b>>>=A=P>>>24,k-=A,!(16&(A=P>>>16&255))){if(!(64&A)){P=I[(65535&P)+(b&(1<<A)-1)];continue n}o.msg="invalid distance code",l.mode=30;break e}if(K=65535&P,k<(A&=15)&&(b+=E[c++]<<k,(k+=8)<A&&(b+=E[c++]<<k,k+=8)),y<(K+=b&(1<<A)-1)){o.msg="invalid distance too far back",l.mode=30;break e}if(b>>>=A,k-=A,(A=m-f)<K){if(_<(A=K-A)&&l.sane){o.msg="invalid distance too far back",l.mode=30;break e}if(W=w,(N=0)===S){if(N+=v-A,A<F){for(F-=A;Y[m++]=w[N++],--A;);N=m-K,W=Y}}else if(S<A){if(N+=v+S-A,(A-=S)<F){for(F-=A;Y[m++]=w[N++],--A;);if(N=0,S<F){for(F-=A=S;Y[m++]=w[N++],--A;);N=m-K,W=Y}}}else if(N+=S-A,A<F){for(F-=A;Y[m++]=w[N++],--A;);N=m-K,W=Y}for(;2<F;)Y[m++]=W[N++],Y[m++]=W[N++],Y[m++]=W[N++],F-=3;F&&(Y[m++]=W[N++],1<F&&(Y[m++]=W[N++]))}else{for(N=m-K;Y[m++]=Y[N++],Y[m++]=Y[N++],Y[m++]=Y[N++],2<(F-=3););F&&(Y[m++]=Y[N++],1<F&&(Y[m++]=Y[N++]))}break}}break}}while(c<h&&m<g);c-=F=k>>3,b&=(1<<(k-=F<<3))-1,o.next_in=c,o.next_out=m,o.avail_in=c<h?h-c+5:5-(c-h),o.avail_out=m<g?g-m+257:257-(m-g),l.hold=b,l.bits=k}},{}],49:[function(n,r,i){var o=n("../utils/common"),a=n("./adler32"),l=n("./crc32"),c=n("./inffast"),h=n("./inftrees"),m=1,f=2,g=0,y=-2,v=1,_=852,S=592;function w(N){return(N>>>24&255)+(N>>>8&65280)+((65280&N)<<8)+((255&N)<<24)}function b(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function k(N){var W;return N&&N.state?(W=N.state,N.total_in=N.total_out=W.total=0,N.msg="",W.wrap&&(N.adler=1&W.wrap),W.mode=v,W.last=0,W.havedict=0,W.dmax=32768,W.head=null,W.hold=0,W.bits=0,W.lencode=W.lendyn=new o.Buf32(_),W.distcode=W.distdyn=new o.Buf32(S),W.sane=1,W.back=-1,g):y}function T(N){var W;return N&&N.state?((W=N.state).wsize=0,W.whave=0,W.wnext=0,k(N)):y}function I(N,W){var E,Y;return N&&N.state?(Y=N.state,W<0?(E=0,W=-W):(E=1+(W>>4),W<48&&(W&=15)),W&&(W<8||15<W)?y:(Y.window!==null&&Y.wbits!==W&&(Y.window=null),Y.wrap=E,Y.wbits=W,T(N))):y}function R(N,W){var E,Y;return N?(Y=new b,(N.state=Y).window=null,(E=I(N,W))!==g&&(N.state=null),E):y}var j,P,A=!0;function F(N){if(A){var W;for(j=new o.Buf32(512),P=new o.Buf32(32),W=0;W<144;)N.lens[W++]=8;for(;W<256;)N.lens[W++]=9;for(;W<280;)N.lens[W++]=7;for(;W<288;)N.lens[W++]=8;for(h(m,N.lens,0,288,j,0,N.work,{bits:9}),W=0;W<32;)N.lens[W++]=5;h(f,N.lens,0,32,P,0,N.work,{bits:5}),A=!1}N.lencode=j,N.lenbits=9,N.distcode=P,N.distbits=5}function K(N,W,E,Y){var H,M=N.state;return M.window===null&&(M.wsize=1<<M.wbits,M.wnext=0,M.whave=0,M.window=new o.Buf8(M.wsize)),Y>=M.wsize?(o.arraySet(M.window,W,E-M.wsize,M.wsize,0),M.wnext=0,M.whave=M.wsize):(Y<(H=M.wsize-M.wnext)&&(H=Y),o.arraySet(M.window,W,E-Y,H,M.wnext),(Y-=H)?(o.arraySet(M.window,W,E-Y,Y,0),M.wnext=Y,M.whave=M.wsize):(M.wnext+=H,M.wnext===M.wsize&&(M.wnext=0),M.whave<M.wsize&&(M.whave+=H))),0}i.inflateReset=T,i.inflateReset2=I,i.inflateResetKeep=k,i.inflateInit=function(N){return R(N,15)},i.inflateInit2=R,i.inflate=function(N,W){var E,Y,H,M,B,D,z,$,Z,re,ee,Q,fe,Ee,ke,ae,be,Ce,Te,nt,O,ue,se,G,q=0,ne=new o.Buf8(4),ce=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!N||!N.state||!N.output||!N.input&&N.avail_in!==0)return y;(E=N.state).mode===12&&(E.mode=13),B=N.next_out,H=N.output,z=N.avail_out,M=N.next_in,Y=N.input,D=N.avail_in,$=E.hold,Z=E.bits,re=D,ee=z,ue=g;e:for(;;)switch(E.mode){case v:if(E.wrap===0){E.mode=13;break}for(;Z<16;){if(D===0)break e;D--,$+=Y[M++]<<Z,Z+=8}if(2&E.wrap&&$===35615){ne[E.check=0]=255&$,ne[1]=$>>>8&255,E.check=l(E.check,ne,2,0),Z=$=0,E.mode=2;break}if(E.flags=0,E.head&&(E.head.done=!1),!(1&E.wrap)||(((255&$)<<8)+($>>8))%31){N.msg="incorrect header check",E.mode=30;break}if((15&$)!=8){N.msg="unknown compression method",E.mode=30;break}if(Z-=4,O=8+(15&($>>>=4)),E.wbits===0)E.wbits=O;else if(O>E.wbits){N.msg="invalid window size",E.mode=30;break}E.dmax=1<<O,N.adler=E.check=1,E.mode=512&$?10:12,Z=$=0;break;case 2:for(;Z<16;){if(D===0)break e;D--,$+=Y[M++]<<Z,Z+=8}if(E.flags=$,(255&E.flags)!=8){N.msg="unknown compression method",E.mode=30;break}if(57344&E.flags){N.msg="unknown header flags set",E.mode=30;break}E.head&&(E.head.text=$>>8&1),512&E.flags&&(ne[0]=255&$,ne[1]=$>>>8&255,E.check=l(E.check,ne,2,0)),Z=$=0,E.mode=3;case 3:for(;Z<32;){if(D===0)break e;D--,$+=Y[M++]<<Z,Z+=8}E.head&&(E.head.time=$),512&E.flags&&(ne[0]=255&$,ne[1]=$>>>8&255,ne[2]=$>>>16&255,ne[3]=$>>>24&255,E.check=l(E.check,ne,4,0)),Z=$=0,E.mode=4;case 4:for(;Z<16;){if(D===0)break e;D--,$+=Y[M++]<<Z,Z+=8}E.head&&(E.head.xflags=255&$,E.head.os=$>>8),512&E.flags&&(ne[0]=255&$,ne[1]=$>>>8&255,E.check=l(E.check,ne,2,0)),Z=$=0,E.mode=5;case 5:if(1024&E.flags){for(;Z<16;){if(D===0)break e;D--,$+=Y[M++]<<Z,Z+=8}E.length=$,E.head&&(E.head.extra_len=$),512&E.flags&&(ne[0]=255&$,ne[1]=$>>>8&255,E.check=l(E.check,ne,2,0)),Z=$=0}else E.head&&(E.head.extra=null);E.mode=6;case 6:if(1024&E.flags&&(D<(Q=E.length)&&(Q=D),Q&&(E.head&&(O=E.head.extra_len-E.length,E.head.extra||(E.head.extra=new Array(E.head.extra_len)),o.arraySet(E.head.extra,Y,M,Q,O)),512&E.flags&&(E.check=l(E.check,Y,Q,M)),D-=Q,M+=Q,E.length-=Q),E.length))break e;E.length=0,E.mode=7;case 7:if(2048&E.flags){if(D===0)break e;for(Q=0;O=Y[M+Q++],E.head&&O&&E.length<65536&&(E.head.name+=String.fromCharCode(O)),O&&Q<D;);if(512&E.flags&&(E.check=l(E.check,Y,Q,M)),D-=Q,M+=Q,O)break e}else E.head&&(E.head.name=null);E.length=0,E.mode=8;case 8:if(4096&E.flags){if(D===0)break e;for(Q=0;O=Y[M+Q++],E.head&&O&&E.length<65536&&(E.head.comment+=String.fromCharCode(O)),O&&Q<D;);if(512&E.flags&&(E.check=l(E.check,Y,Q,M)),D-=Q,M+=Q,O)break e}else E.head&&(E.head.comment=null);E.mode=9;case 9:if(512&E.flags){for(;Z<16;){if(D===0)break e;D--,$+=Y[M++]<<Z,Z+=8}if($!==(65535&E.check)){N.msg="header crc mismatch",E.mode=30;break}Z=$=0}E.head&&(E.head.hcrc=E.flags>>9&1,E.head.done=!0),N.adler=E.check=0,E.mode=12;break;case 10:for(;Z<32;){if(D===0)break e;D--,$+=Y[M++]<<Z,Z+=8}N.adler=E.check=w($),Z=$=0,E.mode=11;case 11:if(E.havedict===0)return N.next_out=B,N.avail_out=z,N.next_in=M,N.avail_in=D,E.hold=$,E.bits=Z,2;N.adler=E.check=1,E.mode=12;case 12:if(W===5||W===6)break e;case 13:if(E.last){$>>>=7&Z,Z-=7&Z,E.mode=27;break}for(;Z<3;){if(D===0)break e;D--,$+=Y[M++]<<Z,Z+=8}switch(E.last=1&$,Z-=1,3&($>>>=1)){case 0:E.mode=14;break;case 1:if(F(E),E.mode=20,W!==6)break;$>>>=2,Z-=2;break e;case 2:E.mode=17;break;case 3:N.msg="invalid block type",E.mode=30}$>>>=2,Z-=2;break;case 14:for($>>>=7&Z,Z-=7&Z;Z<32;){if(D===0)break e;D--,$+=Y[M++]<<Z,Z+=8}if((65535&$)!=($>>>16^65535)){N.msg="invalid stored block lengths",E.mode=30;break}if(E.length=65535&$,Z=$=0,E.mode=15,W===6)break e;case 15:E.mode=16;case 16:if(Q=E.length){if(D<Q&&(Q=D),z<Q&&(Q=z),Q===0)break e;o.arraySet(H,Y,M,Q,B),D-=Q,M+=Q,z-=Q,B+=Q,E.length-=Q;break}E.mode=12;break;case 17:for(;Z<14;){if(D===0)break e;D--,$+=Y[M++]<<Z,Z+=8}if(E.nlen=257+(31&$),$>>>=5,Z-=5,E.ndist=1+(31&$),$>>>=5,Z-=5,E.ncode=4+(15&$),$>>>=4,Z-=4,286<E.nlen||30<E.ndist){N.msg="too many length or distance symbols",E.mode=30;break}E.have=0,E.mode=18;case 18:for(;E.have<E.ncode;){for(;Z<3;){if(D===0)break e;D--,$+=Y[M++]<<Z,Z+=8}E.lens[ce[E.have++]]=7&$,$>>>=3,Z-=3}for(;E.have<19;)E.lens[ce[E.have++]]=0;if(E.lencode=E.lendyn,E.lenbits=7,se={bits:E.lenbits},ue=h(0,E.lens,0,19,E.lencode,0,E.work,se),E.lenbits=se.bits,ue){N.msg="invalid code lengths set",E.mode=30;break}E.have=0,E.mode=19;case 19:for(;E.have<E.nlen+E.ndist;){for(;ae=(q=E.lencode[$&(1<<E.lenbits)-1])>>>16&255,be=65535&q,!((ke=q>>>24)<=Z);){if(D===0)break e;D--,$+=Y[M++]<<Z,Z+=8}if(be<16)$>>>=ke,Z-=ke,E.lens[E.have++]=be;else{if(be===16){for(G=ke+2;Z<G;){if(D===0)break e;D--,$+=Y[M++]<<Z,Z+=8}if($>>>=ke,Z-=ke,E.have===0){N.msg="invalid bit length repeat",E.mode=30;break}O=E.lens[E.have-1],Q=3+(3&$),$>>>=2,Z-=2}else if(be===17){for(G=ke+3;Z<G;){if(D===0)break e;D--,$+=Y[M++]<<Z,Z+=8}Z-=ke,O=0,Q=3+(7&($>>>=ke)),$>>>=3,Z-=3}else{for(G=ke+7;Z<G;){if(D===0)break e;D--,$+=Y[M++]<<Z,Z+=8}Z-=ke,O=0,Q=11+(127&($>>>=ke)),$>>>=7,Z-=7}if(E.have+Q>E.nlen+E.ndist){N.msg="invalid bit length repeat",E.mode=30;break}for(;Q--;)E.lens[E.have++]=O}}if(E.mode===30)break;if(E.lens[256]===0){N.msg="invalid code -- missing end-of-block",E.mode=30;break}if(E.lenbits=9,se={bits:E.lenbits},ue=h(m,E.lens,0,E.nlen,E.lencode,0,E.work,se),E.lenbits=se.bits,ue){N.msg="invalid literal/lengths set",E.mode=30;break}if(E.distbits=6,E.distcode=E.distdyn,se={bits:E.distbits},ue=h(f,E.lens,E.nlen,E.ndist,E.distcode,0,E.work,se),E.distbits=se.bits,ue){N.msg="invalid distances set",E.mode=30;break}if(E.mode=20,W===6)break e;case 20:E.mode=21;case 21:if(6<=D&&258<=z){N.next_out=B,N.avail_out=z,N.next_in=M,N.avail_in=D,E.hold=$,E.bits=Z,c(N,ee),B=N.next_out,H=N.output,z=N.avail_out,M=N.next_in,Y=N.input,D=N.avail_in,$=E.hold,Z=E.bits,E.mode===12&&(E.back=-1);break}for(E.back=0;ae=(q=E.lencode[$&(1<<E.lenbits)-1])>>>16&255,be=65535&q,!((ke=q>>>24)<=Z);){if(D===0)break e;D--,$+=Y[M++]<<Z,Z+=8}if(ae&&!(240&ae)){for(Ce=ke,Te=ae,nt=be;ae=(q=E.lencode[nt+(($&(1<<Ce+Te)-1)>>Ce)])>>>16&255,be=65535&q,!(Ce+(ke=q>>>24)<=Z);){if(D===0)break e;D--,$+=Y[M++]<<Z,Z+=8}$>>>=Ce,Z-=Ce,E.back+=Ce}if($>>>=ke,Z-=ke,E.back+=ke,E.length=be,ae===0){E.mode=26;break}if(32&ae){E.back=-1,E.mode=12;break}if(64&ae){N.msg="invalid literal/length code",E.mode=30;break}E.extra=15&ae,E.mode=22;case 22:if(E.extra){for(G=E.extra;Z<G;){if(D===0)break e;D--,$+=Y[M++]<<Z,Z+=8}E.length+=$&(1<<E.extra)-1,$>>>=E.extra,Z-=E.extra,E.back+=E.extra}E.was=E.length,E.mode=23;case 23:for(;ae=(q=E.distcode[$&(1<<E.distbits)-1])>>>16&255,be=65535&q,!((ke=q>>>24)<=Z);){if(D===0)break e;D--,$+=Y[M++]<<Z,Z+=8}if(!(240&ae)){for(Ce=ke,Te=ae,nt=be;ae=(q=E.distcode[nt+(($&(1<<Ce+Te)-1)>>Ce)])>>>16&255,be=65535&q,!(Ce+(ke=q>>>24)<=Z);){if(D===0)break e;D--,$+=Y[M++]<<Z,Z+=8}$>>>=Ce,Z-=Ce,E.back+=Ce}if($>>>=ke,Z-=ke,E.back+=ke,64&ae){N.msg="invalid distance code",E.mode=30;break}E.offset=be,E.extra=15&ae,E.mode=24;case 24:if(E.extra){for(G=E.extra;Z<G;){if(D===0)break e;D--,$+=Y[M++]<<Z,Z+=8}E.offset+=$&(1<<E.extra)-1,$>>>=E.extra,Z-=E.extra,E.back+=E.extra}if(E.offset>E.dmax){N.msg="invalid distance too far back",E.mode=30;break}E.mode=25;case 25:if(z===0)break e;if(Q=ee-z,E.offset>Q){if((Q=E.offset-Q)>E.whave&&E.sane){N.msg="invalid distance too far back",E.mode=30;break}fe=Q>E.wnext?(Q-=E.wnext,E.wsize-Q):E.wnext-Q,Q>E.length&&(Q=E.length),Ee=E.window}else Ee=H,fe=B-E.offset,Q=E.length;for(z<Q&&(Q=z),z-=Q,E.length-=Q;H[B++]=Ee[fe++],--Q;);E.length===0&&(E.mode=21);break;case 26:if(z===0)break e;H[B++]=E.length,z--,E.mode=21;break;case 27:if(E.wrap){for(;Z<32;){if(D===0)break e;D--,$|=Y[M++]<<Z,Z+=8}if(ee-=z,N.total_out+=ee,E.total+=ee,ee&&(N.adler=E.check=E.flags?l(E.check,H,ee,B-ee):a(E.check,H,ee,B-ee)),ee=z,(E.flags?$:w($))!==E.check){N.msg="incorrect data check",E.mode=30;break}Z=$=0}E.mode=28;case 28:if(E.wrap&&E.flags){for(;Z<32;){if(D===0)break e;D--,$+=Y[M++]<<Z,Z+=8}if($!==(4294967295&E.total)){N.msg="incorrect length check",E.mode=30;break}Z=$=0}E.mode=29;case 29:ue=1;break e;case 30:ue=-3;break e;case 31:return-4;case 32:default:return y}return N.next_out=B,N.avail_out=z,N.next_in=M,N.avail_in=D,E.hold=$,E.bits=Z,(E.wsize||ee!==N.avail_out&&E.mode<30&&(E.mode<27||W!==4))&&K(N,N.output,N.next_out,ee-N.avail_out)?(E.mode=31,-4):(re-=N.avail_in,ee-=N.avail_out,N.total_in+=re,N.total_out+=ee,E.total+=ee,E.wrap&&ee&&(N.adler=E.check=E.flags?l(E.check,H,ee,N.next_out-ee):a(E.check,H,ee,N.next_out-ee)),N.data_type=E.bits+(E.last?64:0)+(E.mode===12?128:0)+(E.mode===20||E.mode===15?256:0),(re==0&&ee===0||W===4)&&ue===g&&(ue=-5),ue)},i.inflateEnd=function(N){if(!N||!N.state)return y;var W=N.state;return W.window&&(W.window=null),N.state=null,g},i.inflateGetHeader=function(N,W){var E;return N&&N.state&&2&(E=N.state).wrap?((E.head=W).done=!1,g):y},i.inflateSetDictionary=function(N,W){var E,Y=W.length;return N&&N.state?(E=N.state).wrap!==0&&E.mode!==11?y:E.mode===11&&a(1,W,Y,0)!==E.check?-3:K(N,W,Y,Y)?(E.mode=31,-4):(E.havedict=1,g):y},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var o=n("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(m,f,g,y,v,_,S,w){var b,k,T,I,R,j,P,A,F,K=w.bits,N=0,W=0,E=0,Y=0,H=0,M=0,B=0,D=0,z=0,$=0,Z=null,re=0,ee=new o.Buf16(16),Q=new o.Buf16(16),fe=null,Ee=0;for(N=0;N<=15;N++)ee[N]=0;for(W=0;W<y;W++)ee[f[g+W]]++;for(H=K,Y=15;1<=Y&&ee[Y]===0;Y--);if(Y<H&&(H=Y),Y===0)return v[_++]=20971520,v[_++]=20971520,w.bits=1,0;for(E=1;E<Y&&ee[E]===0;E++);for(H<E&&(H=E),N=D=1;N<=15;N++)if(D<<=1,(D-=ee[N])<0)return-1;if(0<D&&(m===0||Y!==1))return-1;for(Q[1]=0,N=1;N<15;N++)Q[N+1]=Q[N]+ee[N];for(W=0;W<y;W++)f[g+W]!==0&&(S[Q[f[g+W]]++]=W);if(j=m===0?(Z=fe=S,19):m===1?(Z=a,re-=257,fe=l,Ee-=257,256):(Z=c,fe=h,-1),N=E,R=_,B=W=$=0,T=-1,I=(z=1<<(M=H))-1,m===1&&852<z||m===2&&592<z)return 1;for(;;){for(P=N-B,F=S[W]<j?(A=0,S[W]):S[W]>j?(A=fe[Ee+S[W]],Z[re+S[W]]):(A=96,0),b=1<<N-B,E=k=1<<M;v[R+($>>B)+(k-=b)]=P<<24|A<<16|F|0,k!==0;);for(b=1<<N-1;$&b;)b>>=1;if(b!==0?($&=b-1,$+=b):$=0,W++,--ee[N]==0){if(N===Y)break;N=f[g+S[W]]}if(H<N&&($&I)!==T){for(B===0&&(B=H),R+=E,D=1<<(M=N-B);M+B<Y&&!((D-=ee[M+B])<=0);)M++,D<<=1;if(z+=1<<M,m===1&&852<z||m===2&&592<z)return 1;v[T=$&I]=H<<24|M<<16|R-_|0}}return $!==0&&(v[R+$]=N-B<<24|64<<16|0),w.bits=H,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var o=n("../utils/common"),a=0,l=1;function c(q){for(var ne=q.length;0<=--ne;)q[ne]=0}var h=0,m=29,f=256,g=f+1+m,y=30,v=19,_=2*g+1,S=15,w=16,b=7,k=256,T=16,I=17,R=18,j=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],P=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],K=new Array(2*(g+2));c(K);var N=new Array(2*y);c(N);var W=new Array(512);c(W);var E=new Array(256);c(E);var Y=new Array(m);c(Y);var H,M,B,D=new Array(y);function z(q,ne,ce,pe,ie){this.static_tree=q,this.extra_bits=ne,this.extra_base=ce,this.elems=pe,this.max_length=ie,this.has_stree=q&&q.length}function $(q,ne){this.dyn_tree=q,this.max_code=0,this.stat_desc=ne}function Z(q){return q<256?W[q]:W[256+(q>>>7)]}function re(q,ne){q.pending_buf[q.pending++]=255&ne,q.pending_buf[q.pending++]=ne>>>8&255}function ee(q,ne,ce){q.bi_valid>w-ce?(q.bi_buf|=ne<<q.bi_valid&65535,re(q,q.bi_buf),q.bi_buf=ne>>w-q.bi_valid,q.bi_valid+=ce-w):(q.bi_buf|=ne<<q.bi_valid&65535,q.bi_valid+=ce)}function Q(q,ne,ce){ee(q,ce[2*ne],ce[2*ne+1])}function fe(q,ne){for(var ce=0;ce|=1&q,q>>>=1,ce<<=1,0<--ne;);return ce>>>1}function Ee(q,ne,ce){var pe,ie,ge=new Array(S+1),ve=0;for(pe=1;pe<=S;pe++)ge[pe]=ve=ve+ce[pe-1]<<1;for(ie=0;ie<=ne;ie++){var _e=q[2*ie+1];_e!==0&&(q[2*ie]=fe(ge[_e]++,_e))}}function ke(q){var ne;for(ne=0;ne<g;ne++)q.dyn_ltree[2*ne]=0;for(ne=0;ne<y;ne++)q.dyn_dtree[2*ne]=0;for(ne=0;ne<v;ne++)q.bl_tree[2*ne]=0;q.dyn_ltree[2*k]=1,q.opt_len=q.static_len=0,q.last_lit=q.matches=0}function ae(q){8<q.bi_valid?re(q,q.bi_buf):0<q.bi_valid&&(q.pending_buf[q.pending++]=q.bi_buf),q.bi_buf=0,q.bi_valid=0}function be(q,ne,ce,pe){var ie=2*ne,ge=2*ce;return q[ie]<q[ge]||q[ie]===q[ge]&&pe[ne]<=pe[ce]}function Ce(q,ne,ce){for(var pe=q.heap[ce],ie=ce<<1;ie<=q.heap_len&&(ie<q.heap_len&&be(ne,q.heap[ie+1],q.heap[ie],q.depth)&&ie++,!be(ne,pe,q.heap[ie],q.depth));)q.heap[ce]=q.heap[ie],ce=ie,ie<<=1;q.heap[ce]=pe}function Te(q,ne,ce){var pe,ie,ge,ve,_e=0;if(q.last_lit!==0)for(;pe=q.pending_buf[q.d_buf+2*_e]<<8|q.pending_buf[q.d_buf+2*_e+1],ie=q.pending_buf[q.l_buf+_e],_e++,pe===0?Q(q,ie,ne):(Q(q,(ge=E[ie])+f+1,ne),(ve=j[ge])!==0&&ee(q,ie-=Y[ge],ve),Q(q,ge=Z(--pe),ce),(ve=P[ge])!==0&&ee(q,pe-=D[ge],ve)),_e<q.last_lit;);Q(q,k,ne)}function nt(q,ne){var ce,pe,ie,ge=ne.dyn_tree,ve=ne.stat_desc.static_tree,_e=ne.stat_desc.has_stree,Pe=ne.stat_desc.elems,et=-1;for(q.heap_len=0,q.heap_max=_,ce=0;ce<Pe;ce++)ge[2*ce]!==0?(q.heap[++q.heap_len]=et=ce,q.depth[ce]=0):ge[2*ce+1]=0;for(;q.heap_len<2;)ge[2*(ie=q.heap[++q.heap_len]=et<2?++et:0)]=1,q.depth[ie]=0,q.opt_len--,_e&&(q.static_len-=ve[2*ie+1]);for(ne.max_code=et,ce=q.heap_len>>1;1<=ce;ce--)Ce(q,ge,ce);for(ie=Pe;ce=q.heap[1],q.heap[1]=q.heap[q.heap_len--],Ce(q,ge,1),pe=q.heap[1],q.heap[--q.heap_max]=ce,q.heap[--q.heap_max]=pe,ge[2*ie]=ge[2*ce]+ge[2*pe],q.depth[ie]=(q.depth[ce]>=q.depth[pe]?q.depth[ce]:q.depth[pe])+1,ge[2*ce+1]=ge[2*pe+1]=ie,q.heap[1]=ie++,Ce(q,ge,1),2<=q.heap_len;);q.heap[--q.heap_max]=q.heap[1],function(Re,st){var dt,lt,Pt,Ke,wt,$t,Bt=st.dyn_tree,It=st.max_code,Mn=st.stat_desc.static_tree,Pn=st.stat_desc.has_stree,dn=st.stat_desc.extra_bits,zn=st.stat_desc.extra_base,jt=st.stat_desc.max_length,Ht=0;for(Ke=0;Ke<=S;Ke++)Re.bl_count[Ke]=0;for(Bt[2*Re.heap[Re.heap_max]+1]=0,dt=Re.heap_max+1;dt<_;dt++)jt<(Ke=Bt[2*Bt[2*(lt=Re.heap[dt])+1]+1]+1)&&(Ke=jt,Ht++),Bt[2*lt+1]=Ke,It<lt||(Re.bl_count[Ke]++,wt=0,zn<=lt&&(wt=dn[lt-zn]),$t=Bt[2*lt],Re.opt_len+=$t*(Ke+wt),Pn&&(Re.static_len+=$t*(Mn[2*lt+1]+wt)));if(Ht!==0){do{for(Ke=jt-1;Re.bl_count[Ke]===0;)Ke--;Re.bl_count[Ke]--,Re.bl_count[Ke+1]+=2,Re.bl_count[jt]--,Ht-=2}while(0<Ht);for(Ke=jt;Ke!==0;Ke--)for(lt=Re.bl_count[Ke];lt!==0;)It<(Pt=Re.heap[--dt])||(Bt[2*Pt+1]!==Ke&&(Re.opt_len+=(Ke-Bt[2*Pt+1])*Bt[2*Pt],Bt[2*Pt+1]=Ke),lt--)}}(q,ne),Ee(ge,et,q.bl_count)}function O(q,ne,ce){var pe,ie,ge=-1,ve=ne[1],_e=0,Pe=7,et=4;for(ve===0&&(Pe=138,et=3),ne[2*(ce+1)+1]=65535,pe=0;pe<=ce;pe++)ie=ve,ve=ne[2*(pe+1)+1],++_e<Pe&&ie===ve||(_e<et?q.bl_tree[2*ie]+=_e:ie!==0?(ie!==ge&&q.bl_tree[2*ie]++,q.bl_tree[2*T]++):_e<=10?q.bl_tree[2*I]++:q.bl_tree[2*R]++,ge=ie,et=(_e=0)===ve?(Pe=138,3):ie===ve?(Pe=6,3):(Pe=7,4))}function ue(q,ne,ce){var pe,ie,ge=-1,ve=ne[1],_e=0,Pe=7,et=4;for(ve===0&&(Pe=138,et=3),pe=0;pe<=ce;pe++)if(ie=ve,ve=ne[2*(pe+1)+1],!(++_e<Pe&&ie===ve)){if(_e<et)for(;Q(q,ie,q.bl_tree),--_e!=0;);else ie!==0?(ie!==ge&&(Q(q,ie,q.bl_tree),_e--),Q(q,T,q.bl_tree),ee(q,_e-3,2)):_e<=10?(Q(q,I,q.bl_tree),ee(q,_e-3,3)):(Q(q,R,q.bl_tree),ee(q,_e-11,7));ge=ie,et=(_e=0)===ve?(Pe=138,3):ie===ve?(Pe=6,3):(Pe=7,4)}}c(D);var se=!1;function G(q,ne,ce,pe){ee(q,(h<<1)+(pe?1:0),3),function(ie,ge,ve,_e){ae(ie),re(ie,ve),re(ie,~ve),o.arraySet(ie.pending_buf,ie.window,ge,ve,ie.pending),ie.pending+=ve}(q,ne,ce)}i._tr_init=function(q){se||(function(){var ne,ce,pe,ie,ge,ve=new Array(S+1);for(ie=pe=0;ie<m-1;ie++)for(Y[ie]=pe,ne=0;ne<1<<j[ie];ne++)E[pe++]=ie;for(E[pe-1]=ie,ie=ge=0;ie<16;ie++)for(D[ie]=ge,ne=0;ne<1<<P[ie];ne++)W[ge++]=ie;for(ge>>=7;ie<y;ie++)for(D[ie]=ge<<7,ne=0;ne<1<<P[ie]-7;ne++)W[256+ge++]=ie;for(ce=0;ce<=S;ce++)ve[ce]=0;for(ne=0;ne<=143;)K[2*ne+1]=8,ne++,ve[8]++;for(;ne<=255;)K[2*ne+1]=9,ne++,ve[9]++;for(;ne<=279;)K[2*ne+1]=7,ne++,ve[7]++;for(;ne<=287;)K[2*ne+1]=8,ne++,ve[8]++;for(Ee(K,g+1,ve),ne=0;ne<y;ne++)N[2*ne+1]=5,N[2*ne]=fe(ne,5);H=new z(K,j,f+1,g,S),M=new z(N,P,0,y,S),B=new z(new Array(0),A,0,v,b)}(),se=!0),q.l_desc=new $(q.dyn_ltree,H),q.d_desc=new $(q.dyn_dtree,M),q.bl_desc=new $(q.bl_tree,B),q.bi_buf=0,q.bi_valid=0,ke(q)},i._tr_stored_block=G,i._tr_flush_block=function(q,ne,ce,pe){var ie,ge,ve=0;0<q.level?(q.strm.data_type===2&&(q.strm.data_type=function(_e){var Pe,et=4093624447;for(Pe=0;Pe<=31;Pe++,et>>>=1)if(1&et&&_e.dyn_ltree[2*Pe]!==0)return a;if(_e.dyn_ltree[18]!==0||_e.dyn_ltree[20]!==0||_e.dyn_ltree[26]!==0)return l;for(Pe=32;Pe<f;Pe++)if(_e.dyn_ltree[2*Pe]!==0)return l;return a}(q)),nt(q,q.l_desc),nt(q,q.d_desc),ve=function(_e){var Pe;for(O(_e,_e.dyn_ltree,_e.l_desc.max_code),O(_e,_e.dyn_dtree,_e.d_desc.max_code),nt(_e,_e.bl_desc),Pe=v-1;3<=Pe&&_e.bl_tree[2*F[Pe]+1]===0;Pe--);return _e.opt_len+=3*(Pe+1)+5+5+4,Pe}(q),ie=q.opt_len+3+7>>>3,(ge=q.static_len+3+7>>>3)<=ie&&(ie=ge)):ie=ge=ce+5,ce+4<=ie&&ne!==-1?G(q,ne,ce,pe):q.strategy===4||ge===ie?(ee(q,2+(pe?1:0),3),Te(q,K,N)):(ee(q,4+(pe?1:0),3),function(_e,Pe,et,Re){var st;for(ee(_e,Pe-257,5),ee(_e,et-1,5),ee(_e,Re-4,4),st=0;st<Re;st++)ee(_e,_e.bl_tree[2*F[st]+1],3);ue(_e,_e.dyn_ltree,Pe-1),ue(_e,_e.dyn_dtree,et-1)}(q,q.l_desc.max_code+1,q.d_desc.max_code+1,ve+1),Te(q,q.dyn_ltree,q.dyn_dtree)),ke(q),pe&&ae(q)},i._tr_tally=function(q,ne,ce){return q.pending_buf[q.d_buf+2*q.last_lit]=ne>>>8&255,q.pending_buf[q.d_buf+2*q.last_lit+1]=255&ne,q.pending_buf[q.l_buf+q.last_lit]=255&ce,q.last_lit++,ne===0?q.dyn_ltree[2*ce]++:(q.matches++,ne--,q.dyn_ltree[2*(E[ce]+f+1)]++,q.dyn_dtree[2*Z(ne)]++),q.last_lit===q.lit_bufsize-1},i._tr_align=function(q){ee(q,2,3),Q(q,k,K),function(ne){ne.bi_valid===16?(re(ne,ne.bi_buf),ne.bi_buf=0,ne.bi_valid=0):8<=ne.bi_valid&&(ne.pending_buf[ne.pending++]=255&ne.bi_buf,ne.bi_buf>>=8,ne.bi_valid-=8)}(q)}},{"../utils/common":41}],53:[function(n,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,i){(function(o){(function(a,l){if(!a.setImmediate){var c,h,m,f,g=1,y={},v=!1,_=a.document,S=Object.getPrototypeOf&&Object.getPrototypeOf(a);S=S&&S.setTimeout?S:a,c={}.toString.call(a.process)==="[object process]"?function(T){process.nextTick(function(){b(T)})}:function(){if(a.postMessage&&!a.importScripts){var T=!0,I=a.onmessage;return a.onmessage=function(){T=!1},a.postMessage("","*"),a.onmessage=I,T}}()?(f="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",k,!1):a.attachEvent("onmessage",k),function(T){a.postMessage(f+T,"*")}):a.MessageChannel?((m=new MessageChannel).port1.onmessage=function(T){b(T.data)},function(T){m.port2.postMessage(T)}):_&&"onreadystatechange"in _.createElement("script")?(h=_.documentElement,function(T){var I=_.createElement("script");I.onreadystatechange=function(){b(T),I.onreadystatechange=null,h.removeChild(I),I=null},h.appendChild(I)}):function(T){setTimeout(b,0,T)},S.setImmediate=function(T){typeof T!="function"&&(T=new Function(""+T));for(var I=new Array(arguments.length-1),R=0;R<I.length;R++)I[R]=arguments[R+1];var j={callback:T,args:I};return y[g]=j,c(g),g++},S.clearImmediate=w}function w(T){delete y[T]}function b(T){if(v)setTimeout(b,0,T);else{var I=y[T];if(I){v=!0;try{(function(R){var j=R.callback,P=R.args;switch(P.length){case 0:j();break;case 1:j(P[0]);break;case 2:j(P[0],P[1]);break;case 3:j(P[0],P[1],P[2]);break;default:j.apply(l,P)}})(I)}finally{w(T),v=!1}}}}function k(T){T.source===a&&typeof T.data=="string"&&T.data.indexOf(f)===0&&b(+T.data.slice(f.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof Js<"u"?Js:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Cw);var EP=Cw.exports;const Tw=Vh(EP);function CP(){const[t]=Vf(),[e,n]=J.useState([]),[r,i]=J.useState([]),[o,a]=J.useState(!0),[l,c]=J.useState(null),[h,m]=J.useState(!1),[f,g]=J.useState(t.get("archived")==="true"),[y,v]=J.useState(t.get("view")==="calendar"),[_,S]=J.useState("ALL"),[w,b]=J.useState(null),k=ap(),T=async()=>{try{console.log("Initializing authorization for Claims component..."),await hc(ze),m(!0),console.log("Authorization initialized successfully")}catch(B){console.error("Authorization initialization failed:",B),c(B.message),a(!1)}},I=async()=>{if(!h){console.log("Authorization not ready, skipping load");return}try{a(!0),c(null);const B=Zn();if(!B||!B.isInitialized)throw new Error("Authorization not properly initialized");const D=B.getCurrentUser();console.log(`Loading claims for ${D==null?void 0:D.role}: ${D==null?void 0:D.fullName}`);let z=ze.from("claims").select("id,claim_number,customer_name,status,vin,vehicle_year,vehicle_make,vehicle_model,assigned_to,appointment_start,appointment_end,firm,notes,created_at,address_line1,city,state,zip,lat,lng,pay_amount,file_total,profiles:assigned_to(full_name)").order("created_at",{ascending:!1});z=B.scopedClaimsQuery(z),z=z.gte("created_at","2025-12-01T00:00:00.000Z"),z=z.or("status.is.null,status.in.(SCHEDULED,IN_PROGRESS,COMPLETED)");const{data:$,error:Z}=await z;if(console.log(" Claims loaded:",($==null?void 0:$.length)||0),$&&$.length>0){const ee=$.map(fe=>fe.created_at).filter(fe=>fe).sort();console.log(" Date range:",ee[0],"to",ee[ee.length-1]);const Q=$.filter(fe=>fe.created_at&&fe.created_at<"2025-12-01");Q.length>0&&(console.error(" WARNING: Found",Q.length,"claims before Dec 1 2025!"),console.error("First old claim:",Q[0]))}if(Z){console.error("Error loading claims:",Z);const ee=B.handleAuthError(Z);if(ee.shouldRedirect){c(`${ee.message} Redirecting to login...`),setTimeout(()=>{window.location.href="/CipherDispatch/"},2e3);return}throw new Error(ee.message)}console.log(`Loaded ${($==null?void 0:$.length)||0} claims for ${D==null?void 0:D.role}`);const re=$||[];i(re),R(re)}catch(B){console.error("Error in load function:",B),c(B.message)}finally{a(!1)}},R=B=>{let D=[...B];_!=="ALL"&&(_==="UNASSIGNED"?D=D.filter(z=>!z.assigned_to):D=D.filter(z=>z.status===_)),n(D)},j=async(B,D)=>{try{const{data:z,error:$}=await ze.from("claim_photos").select("*").eq("claim_id",B).order("created_at",{ascending:!1});if($){alert(`Error fetching photos: ${$.message}`);return}if(!z||z.length===0){alert("No photos to download for this claim");return}const Z=new Tw,re=Z.folder("photos");for(let Ee=0;Ee<z.length;Ee++){const ke=z[Ee],ae=ze.storage.from("claim-photos").getPublicUrl(ke.storage_path).data.publicUrl,Ce=await(await fetch(ae)).blob(),Te=`photo-${Ee+1}.jpg`;re==null||re.file(Te,Ce)}const ee=await Z.generateAsync({type:"blob"}),Q=URL.createObjectURL(ee),fe=document.createElement("a");fe.href=Q,fe.download=`claim_${D}_photos.zip`,document.body.appendChild(fe),fe.click(),document.body.removeChild(fe),URL.revokeObjectURL(Q)}catch(z){alert(`Error creating zip file: ${z.message}`)}},P=(B,D)=>{b(D.id);const z={id:D.id,claimNumber:D.claim_number,firmName:D.firm||"",customerName:D.customer_name,addressLine1:D.address_line1||"",city:D.city||"",state:D.state||"",zip:D.zip||"",lat:D.lat||null,lng:D.lng||null,vin:D.vin||"",vehicleYear:D.vehicle_year||null,vehicleMake:D.vehicle_make||"",vehicleModel:D.vehicle_model||"",status:D.status||"",appointmentStart:D.appointment_start||null},$=JSON.stringify(z);B.dataTransfer.setData("application/json",$),B.dataTransfer.setData("text/plain",$),B.dataTransfer.effectAllowed="copy"},A=()=>{b(null)};if(J.useEffect(()=>{T()},[]),J.useEffect(()=>{if(h){I();const B=Zn();if(B!=null&&B.isInitialized){const D=ze.channel("claims-list").on("postgres_changes",{event:"*",schema:"public",table:"claims"},()=>{console.log("Real-time update received, reloading claims..."),I()}).subscribe();return()=>{ze.removeChannel(D)}}}},[f,h]),J.useEffect(()=>{r.length>0&&R(r)},[_,r]),o)return d.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a202c 0%, #2d3748 100%)",padding:16,display:"flex",alignItems:"center",justifyContent:"center"},children:d.jsx("div",{style:{color:"#e2e8f0",fontSize:"18px"},children:"Loading claims..."})});if(l)return d.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a202c 0%, #2d3748 100%)",padding:16,display:"flex",alignItems:"center",justifyContent:"center"},children:d.jsxs("div",{style:{color:"#ef4444",fontSize:"18px",textAlign:"center",background:"#2d3748",padding:"24px",borderRadius:"8px",border:"2px solid #ef4444"},children:[d.jsx("h3",{children:"Unable to load claims"}),d.jsx("p",{children:l}),d.jsx("button",{onClick:()=>window.location.reload(),style:{background:"#ef4444",color:"white",border:"none",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",marginTop:"12px"},children:"Retry"})]})});const F=r.reduce((B,D)=>{const z=D.status||"UNASSIGNED";return B[z]=(B[z]||0)+1,B},{}),K=r.filter(B=>!B.assigned_to).length,W=(()=>{const B={};return e.forEach(D=>{const z=D.firm||"No Firm";B[z]||(B[z]=[]),B[z].push(D)}),B})(),E=B=>B.filter(D=>D.status!=="COMPLETED"&&D.status!=="CANCELED").length,Y=Zn(),H=Y==null?void 0:Y.getCurrentUser(),M=(H==null?void 0:H.role)==="admin";return d.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a202c 0%, #2d3748 100%)",padding:16},children:[!f&&!y&&d.jsxs("div",{style:{display:"flex",gap:12,marginBottom:24,flexWrap:"wrap",justifyContent:"center"},children:[d.jsxs("button",{onClick:()=>S("ALL"),style:{padding:"12px 20px",background:_==="ALL"?"#667eea":"#374151",color:"white",border:_==="ALL"?"2px solid #818cf8":"2px solid transparent",borderRadius:8,fontWeight:"bold",cursor:"pointer",fontSize:"14px",display:"flex",flexDirection:"column",alignItems:"center",transition:"all 0.2s",minWidth:"120px"},children:[d.jsx("div",{style:{fontSize:"20px",marginBottom:4},children:r.length}),d.jsx("div",{style:{fontSize:"12px",opacity:.9},children:"All Active"})]}),d.jsxs("button",{onClick:()=>S("UNASSIGNED"),style:{padding:"12px 20px",background:_==="UNASSIGNED"?"#9E9E9E":"#374151",color:"white",border:_==="UNASSIGNED"?"2px solid #bdbdbd":"2px solid transparent",borderRadius:8,fontWeight:"bold",cursor:"pointer",fontSize:"14px",display:"flex",flexDirection:"column",alignItems:"center",transition:"all 0.2s",minWidth:"120px"},children:[d.jsx("div",{style:{fontSize:"20px",marginBottom:4},children:K}),d.jsx("div",{style:{fontSize:"12px",opacity:.9},children:"Unassigned"})]}),d.jsxs("button",{onClick:()=>S("SCHEDULED"),style:{padding:"12px 20px",background:_==="SCHEDULED"?"#2196F3":"#374151",color:"white",border:_==="SCHEDULED"?"2px solid #64b5f6":"2px solid transparent",borderRadius:8,fontWeight:"bold",cursor:"pointer",fontSize:"14px",display:"flex",flexDirection:"column",alignItems:"center",transition:"all 0.2s",minWidth:"120px"},children:[d.jsx("div",{style:{fontSize:"20px",marginBottom:4},children:F.SCHEDULED||0}),d.jsx("div",{style:{fontSize:"12px",opacity:.9},children:"Scheduled"})]}),d.jsxs("button",{onClick:()=>S("IN_PROGRESS"),style:{padding:"12px 20px",background:_==="IN_PROGRESS"?"#FF9800":"#374151",color:"white",border:_==="IN_PROGRESS"?"2px solid #ffb74d":"2px solid transparent",borderRadius:8,fontWeight:"bold",cursor:"pointer",fontSize:"14px",display:"flex",flexDirection:"column",alignItems:"center",transition:"all 0.2s",minWidth:"120px"},children:[d.jsx("div",{style:{fontSize:"20px",marginBottom:4},children:F.IN_PROGRESS||0}),d.jsx("div",{style:{fontSize:"12px",opacity:.9},children:"In Progress"})]}),d.jsxs("button",{onClick:()=>S("COMPLETED"),style:{padding:"12px 20px",background:_==="COMPLETED"?"#4CAF50":"#374151",color:"white",border:_==="COMPLETED"?"2px solid #81c784":"2px solid transparent",borderRadius:8,fontWeight:"bold",cursor:"pointer",fontSize:"14px",display:"flex",flexDirection:"column",alignItems:"center",transition:"all 0.2s",minWidth:"120px"},children:[d.jsx("div",{style:{fontSize:"20px",marginBottom:4},children:F.COMPLETED||0}),d.jsx("div",{style:{fontSize:"12px",opacity:.9},children:"Completed"})]}),d.jsxs("button",{onClick:()=>S("CANCELED"),style:{padding:"12px 20px",background:_==="CANCELED"?"#ef4444":"#374151",color:"white",border:_==="CANCELED"?"2px solid #f87171":"2px solid transparent",borderRadius:8,fontWeight:"bold",cursor:"pointer",fontSize:"14px",display:"flex",flexDirection:"column",alignItems:"center",transition:"all 0.2s",minWidth:"120px"},children:[d.jsx("div",{style:{fontSize:"20px",marginBottom:4},children:F.CANCELED||0}),d.jsx("div",{style:{fontSize:"12px",opacity:.9},children:"Canceled"})]})]}),d.jsxs("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",marginBottom:24,gap:16},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,flexWrap:"wrap"},children:[d.jsx(_t,{to:"/",style:{padding:"8px 16px",background:"#4a5568",color:"white",textDecoration:"none",borderRadius:4,fontWeight:"bold"},children:" Home"}),d.jsx("h3",{style:{margin:0,color:"#e2e8f0",fontSize:"20px"},children:y?"Monthly Scheduling Calendar":f?"Archived Claims":"Active Claims"})]}),d.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[d.jsx("button",{onClick:()=>{v(!y),f&&g(!1),S("ALL")},style:{padding:"8px 16px",background:y?"#667eea":"#4a5568",color:"white",border:"none",borderRadius:4,fontWeight:"bold",cursor:"pointer"},children:y?" List View":" Calendar View"}),d.jsx("button",{onClick:()=>{g(!f),y&&v(!1),S("ALL")},style:{padding:"8px 16px",background:f?"#4a5568":"#f59e0b",color:"white",border:"none",borderRadius:4,fontWeight:"bold",cursor:"pointer"},children:f?" View Active Claims":" View Archived"}),f&&d.jsx("button",{onClick:()=>$C(e),style:{padding:"8px 16px",background:"#10b981",color:"white",border:"none",borderRadius:4,fontWeight:"bold",cursor:"pointer"},children:" Download CSV"}),d.jsx(_t,{to:"/admin/claims/new",style:{padding:"8px 16px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",textDecoration:"none",borderRadius:4,fontWeight:"bold"},children:"+ New Claim"})]})]}),M&&!f&&d.jsx("div",{style:{marginBottom:24},children:d.jsx(kP,{claims:r})}),y&&!f?k?d.jsx(kw,{claims:e,onClaimUpdate:I}):d.jsx(pw,{claims:e,onClaimUpdate:I}):e.length===0?d.jsx("div",{style:{textAlign:"center",padding:48,color:"#a0aec0"},children:"No claims found matching your filters."}):k?d.jsx(Ew,{claims:e,showCreateButton:!0,createButtonPath:"/admin/claims/new"}):d.jsx("div",{children:Object.entries(W).map(([B,D])=>{const z=E(D);return d.jsxs("div",{style:{marginBottom:32},children:[d.jsxs("div",{style:{fontSize:"18px",fontWeight:"bold",color:"#e2e8f0",marginBottom:16,paddingBottom:8,borderBottom:`3px solid ${_n(B)}`,display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[d.jsx("span",{style:{display:"inline-block",width:12,height:12,borderRadius:"50%",background:_n(B)}}),d.jsx("span",{children:B})]}),z>0&&d.jsxs("span",{style:{fontSize:"14px",opacity:.7,fontWeight:"normal",background:"#374151",padding:"4px 12px",borderRadius:12},children:[z," pending"]}),d.jsxs("span",{style:{fontSize:"14px",opacity:.7,fontWeight:"normal"},children:["(",D.length," total)"]})]}),d.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:16},children:D.map($=>{var Z;return d.jsxs(_t,{to:`/claim/${$.id}`,draggable:!0,onDragStart:re=>P(re,$),onDragEnd:A,style:{border:"1px solid #4a5568",borderLeft:`4px solid ${_n($.firm)}`,borderRadius:8,padding:16,background:"#2d3748",boxShadow:"0 2px 4px rgba(0,0,0,0.5)",textDecoration:"none",color:"#e2e8f0",transition:"transform 0.2s, box-shadow 0.2s, opacity 0.2s",cursor:w===$.id?"grabbing":"pointer",opacity:w===$.id?.5:1},onMouseOver:re=>{w!==$.id&&(re.currentTarget.style.transform="translateY(-4px)",re.currentTarget.style.boxShadow="0 6px 12px rgba(0,0,0,0.7)")},onMouseOut:re=>{w!==$.id&&(re.currentTarget.style.transform="translateY(0)",re.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.5)")},children:[d.jsxs("div",{style:{marginBottom:12},children:[d.jsxs("div",{style:{fontSize:20,fontWeight:"bold",marginBottom:8,color:"#e2e8f0"},children:["#",$.claim_number]}),d.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[d.jsx("div",{style:{display:"inline-block",padding:"4px 12px",borderRadius:4,fontSize:11,fontWeight:"bold",background:$.status==="COMPLETED"?"#4CAF50":$.status==="IN_PROGRESS"?"#FF9800":$.status==="SCHEDULED"?"#2196F3":$.status==="CANCELED"?"#ef4444":"#9E9E9E",color:"white"},children:$.status}),$.firm&&d.jsx("div",{style:{display:"inline-block",padding:"4px 12px",borderRadius:4,fontSize:11,fontWeight:"bold",background:_n($.firm),color:"white"},children:$.firm}),$.notes&&d.jsx("div",{style:{display:"inline-block",padding:"4px 8px",borderRadius:4,fontSize:11,fontWeight:"bold",background:"rgba(102, 126, 234, 0.2)",color:"#667eea",border:"1px solid #667eea"},title:$.notes.substring(0,100)+($.notes.length>100?"...":""),children:" Note"})]})]}),d.jsx("div",{style:{fontSize:16,marginBottom:12,paddingBottom:12,borderBottom:"1px solid #4a5568"},children:d.jsxs("div",{style:{color:"#e2e8f0",marginBottom:4},children:[d.jsx("strong",{children:"Customer:"})," ",$.customer_name]})}),d.jsxs("div",{style:{fontSize:15,marginBottom:12},children:[d.jsx("div",{style:{color:"#e2e8f0",fontWeight:"bold",marginBottom:6},children:" Appointment"}),$.appointment_start?d.jsxs("div",{style:{color:"#cbd5e0",fontSize:14},children:[d.jsx("strong",{children:"Start:"})," ",new Date($.appointment_start).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})]}):d.jsx("div",{style:{color:"#718096",fontSize:12,fontStyle:"italic"},children:"No appointment scheduled"})]}),d.jsxs("div",{style:{fontSize:13,marginBottom:12},children:[d.jsx("div",{style:{color:"#e2e8f0",fontWeight:"bold",marginBottom:6},children:" Vehicle Info"}),$.vin&&d.jsxs("div",{style:{color:"#a0aec0",fontSize:12,marginBottom:2},children:[d.jsx("strong",{children:"VIN:"})," ",$.vin.substring(0,10),"..."]}),$.vehicle_year||$.vehicle_make||$.vehicle_model?d.jsxs("div",{style:{color:"#a0aec0",fontSize:12},children:[$.vehicle_year&&`${$.vehicle_year} `,$.vehicle_make&&`${$.vehicle_make} `,$.vehicle_model&&$.vehicle_model]}):d.jsx("div",{style:{color:"#718096",fontSize:12,fontStyle:"italic"},children:"No vehicle info"})]}),d.jsxs("div",{style:{fontSize:15,paddingTop:12,borderTop:"1px solid #4a5568"},children:[d.jsxs("div",{style:{color:"#e2e8f0",marginBottom:M?12:0},children:[d.jsx("strong",{children:" Assigned:"})," ",((Z=$.profiles)==null?void 0:Z.full_name)||($.assigned_to?"Unknown User":"Unassigned")]}),M&&d.jsx("button",{onClick:re=>{re.preventDefault(),re.stopPropagation(),j($.id,$.claim_number)},style:{width:"100%",padding:"10px 16px",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"white",border:"none",borderRadius:6,fontWeight:"600",fontSize:14,cursor:"pointer",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},onMouseEnter:re=>{re.currentTarget.style.background="linear-gradient(135deg, #d97706 0%, #b45309 100%)",re.currentTarget.style.transform="translateY(-1px)",re.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)"},onMouseLeave:re=>{re.currentTarget.style.background="linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",re.currentTarget.style.transform="translateY(0)",re.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)"},children:" Download All Photos (ZIP)"})]})]},$.id)})})]},B)})})]})}function TP(){const[t,e]=J.useState([]),[n,r]=J.useState(!0),[i,o]=J.useState(null),[a,l]=J.useState(!1),[c,h]=J.useState(!1),[m,f]=J.useState(null),[g,y]=J.useState(""),[v,_]=J.useState("#9CA3AF"),[S,w]=J.useState("weekly_thu_fri_thu"),[b,k]=J.useState(""),[T,I]=J.useState(!0),R=async()=>{try{console.log("Initializing authorization for Vendors component..."),await hc(ze),l(!0),console.log("Authorization initialized successfully")}catch(W){console.error("Authorization initialization failed:",W),o(W.message),r(!1)}},j=async()=>{if(!a){console.log("Authorization not ready, skipping load");return}try{r(!0),o(null);const W=Zn();if(!W||!W.isInitialized)throw new Error("Authorization not properly initialized");const E=W.getCurrentUser();console.log(`Loading vendors for ${E==null?void 0:E.role}: ${E==null?void 0:E.fullName}`);const{data:Y,error:H}=await ze.from("vendors").select("*").order("name",{ascending:!0});if(H)throw console.error("Error loading vendors:",H),new Error(H.message);console.log(`Loaded ${(Y==null?void 0:Y.length)||0} vendors`),e(Y||[])}catch(W){console.error("Error in loadVendors function:",W),o(W.message)}finally{r(!1)}};J.useEffect(()=>{R()},[]),J.useEffect(()=>{a&&j()},[a]);const P=()=>{h(!0),f(null),y(""),_("#9CA3AF"),w("weekly_thu_fri_thu"),k(""),I(!0)},A=W=>{h(!0),f(W),y(W.name),_(W.color),w(W.pay_cycle_type||"weekly_thu_fri_thu"),k(W.reference_pay_date||""),I(W.active!==!1)},F=()=>{h(!1),f(null),y(""),_("#9CA3AF"),w("weekly_thu_fri_thu"),k(""),I(!0)},K=async()=>{if(!g.trim()){alert("Vendor name is required");return}if(S.startsWith("biweekly")&&!b){alert("Reference pay date is required for bi-weekly pay cycles");return}try{const W={name:g.trim(),color:v,pay_cycle_type:S,reference_pay_date:b||null,active:T};if(m){const{error:E}=await ze.from("vendors").update(W).eq("id",m.id);if(E)throw E}else{const{error:E}=await ze.from("vendors").insert([W]);if(E)throw E}F(),j()}catch(W){alert(`Error saving vendor: ${W.message}`)}},N=async W=>{if(confirm("Are you sure you want to delete this vendor?"))try{const{error:E}=await ze.from("vendors").delete().eq("id",W);if(E)throw E;j()}catch(E){alert(`Error deleting vendor: ${E.message}`)}};return n?d.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a202c 0%, #2d3748 100%)",padding:16,display:"flex",alignItems:"center",justifyContent:"center"},children:d.jsx("div",{style:{color:"#e2e8f0",fontSize:"18px"},children:"Loading vendors..."})}):i?d.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a202c 0%, #2d3748 100%)",padding:16,display:"flex",alignItems:"center",justifyContent:"center"},children:d.jsxs("div",{style:{color:"#ef4444",fontSize:"18px",textAlign:"center",background:"#2d3748",padding:"24px",borderRadius:"8px",border:"2px solid #ef4444"},children:[d.jsx("h3",{children:"Unable to load vendors"}),d.jsx("p",{children:i}),d.jsx("button",{onClick:()=>window.location.reload(),style:{background:"#ef4444",color:"white",border:"none",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",marginTop:"12px"},children:"Retry"})]})}):d.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a202c 0%, #2d3748 100%)",padding:16},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[d.jsx(_t,{to:"/",style:{padding:"8px 16px",background:"#4a5568",color:"white",textDecoration:"none",borderRadius:4,fontWeight:"bold",fontSize:"15px"},children:" Home"}),d.jsx("h3",{style:{margin:0,color:"#e2e8f0",fontSize:"22px",fontWeight:"bold"},children:"Manage Vendors"})]}),d.jsx("button",{onClick:P,style:{padding:"10px 20px",background:"#10b981",color:"white",border:"none",borderRadius:6,fontWeight:"bold",cursor:"pointer",fontSize:"15px"},children:"+ Add Vendor"})]}),c&&d.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:F,children:d.jsxs("div",{style:{background:"#2d3748",border:"1px solid #4a5568",borderRadius:12,padding:32,maxWidth:500,width:"90%"},onClick:W=>W.stopPropagation(),children:[d.jsx("h3",{style:{margin:"0 0 24px 0",color:"#e2e8f0"},children:m?"Edit Vendor":"Add New Vendor"}),d.jsxs("div",{style:{marginBottom:20},children:[d.jsx("label",{style:{display:"block",marginBottom:8,color:"#e2e8f0",fontWeight:"bold"},children:"Vendor Name"}),d.jsx("input",{type:"text",value:g,onChange:W=>y(W.target.value),placeholder:"Enter vendor name",style:{width:"100%",padding:"10px",background:"#1a202c",border:"1px solid #4a5568",borderRadius:6,color:"#e2e8f0",fontSize:"15px"}})]}),d.jsxs("div",{style:{marginBottom:20},children:[d.jsx("label",{style:{display:"block",marginBottom:8,color:"#e2e8f0",fontWeight:"bold"},children:"Color"}),d.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[d.jsx("input",{type:"color",value:v,onChange:W=>_(W.target.value),style:{width:60,height:40,border:"1px solid #4a5568",borderRadius:6,cursor:"pointer"}}),d.jsx("input",{type:"text",value:v,onChange:W=>_(W.target.value),placeholder:"#9CA3AF",style:{flex:1,padding:"10px",background:"#1a202c",border:"1px solid #4a5568",borderRadius:6,color:"#e2e8f0",fontSize:"15px"}})]})]}),d.jsxs("div",{style:{marginBottom:20},children:[d.jsx("label",{style:{display:"block",marginBottom:8,color:"#e2e8f0",fontWeight:"bold"},children:"Pay Cycle Type"}),d.jsxs("select",{value:S,onChange:W=>w(W.target.value),style:{width:"100%",padding:"10px",background:"#1a202c",border:"1px solid #4a5568",borderRadius:6,color:"#e2e8f0",fontSize:"15px"},children:[d.jsx("option",{value:"weekly_thu_fri_thu",children:"Weekly Thu (FriThu work, paid Thu)"}),d.jsx("option",{value:"biweekly_thu_fri_thu",children:"Bi-weekly Wed (2-week period, paid Wed)"}),d.jsx("option",{value:"biweekly_fri_sat_fri",children:"Bi-weekly Thu (2-week period, paid Thu)"}),d.jsx("option",{value:"monthly_15th_prev_month",children:"Monthly 15th (previous month work)"}),d.jsx("option",{value:"semimonthly_15th_end",children:"Semi-monthly: 15th & End-of-Month"}),d.jsx("option",{value:"monthly_last_same_month",children:"Monthly EOM (same month work)"})]})]}),S.startsWith("biweekly")&&d.jsxs("div",{style:{marginBottom:20},children:[d.jsx("label",{style:{display:"block",marginBottom:8,color:"#e2e8f0",fontWeight:"bold"},children:"Reference Pay Date (for bi-weekly calculation)"}),d.jsx("input",{type:"date",value:b,onChange:W=>k(W.target.value),style:{width:"100%",padding:"10px",background:"#1a202c",border:"1px solid #4a5568",borderRadius:6,color:"#e2e8f0",fontSize:"15px"}}),d.jsx("div",{style:{color:"#a0aec0",fontSize:"13px",marginTop:4},children:"Enter a known pay date to calculate bi-weekly schedule"})]}),d.jsx("div",{style:{marginBottom:24},children:d.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,color:"#e2e8f0",fontWeight:"bold",cursor:"pointer"},children:[d.jsx("input",{type:"checkbox",checked:T,onChange:W=>I(W.target.checked),style:{width:20,height:20,cursor:"pointer"}}),"Active Vendor"]})}),d.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"flex-end"},children:[d.jsx("button",{onClick:F,style:{padding:"10px 20px",background:"#4a5568",color:"white",border:"none",borderRadius:6,fontWeight:"bold",cursor:"pointer"},children:"Cancel"}),d.jsx("button",{onClick:K,style:{padding:"10px 20px",background:"#10b981",color:"white",border:"none",borderRadius:6,fontWeight:"bold",cursor:"pointer"},children:"Save"})]})]})}),d.jsx("div",{style:{background:"#2d3748",border:"1px solid #4a5568",borderRadius:12,padding:24},children:t.length===0?d.jsx("div",{style:{textAlign:"center",padding:48,color:"#a0aec0"},children:'No vendors found. Click "Add Vendor" to create one.'}):d.jsx("div",{style:{display:"grid",gap:12},children:t.map(W=>d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"#1a202c",border:"1px solid #4a5568",borderRadius:8,padding:16},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[d.jsx("div",{style:{width:40,height:40,background:W.color,borderRadius:6,border:"1px solid #4a5568"}}),d.jsxs("div",{children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx("div",{style:{color:"#e2e8f0",fontSize:"16px",fontWeight:"bold"},children:W.name}),W.active===!1&&d.jsx("span",{style:{color:"#ef4444",fontSize:"12px",background:"#7f1d1d",padding:"2px 8px",borderRadius:4},children:"Inactive"})]}),d.jsx("div",{style:{color:"#a0aec0",fontSize:"14px"},children:W.pay_cycle_type?W.pay_cycle_type.replace(/_/g," ").replace(/\b\w/g,E=>E.toUpperCase()):"No pay cycle set"})]})]}),d.jsxs("div",{style:{display:"flex",gap:8},children:[d.jsx("button",{onClick:()=>A(W),style:{padding:"8px 16px",background:"#667eea",color:"white",border:"none",borderRadius:6,fontWeight:"bold",cursor:"pointer",fontSize:"14px"},children:"Edit"}),d.jsx("button",{onClick:()=>N(W.id),style:{padding:"8px 16px",background:"#ef4444",color:"white",border:"none",borderRadius:6,fontWeight:"bold",cursor:"pointer",fontSize:"14px"},children:"Delete"})]})]},W.id))})})]})}const Pw={Sedgwick:{baseFee:200,perMileRate:.75,notes:"Pays weekly on Wednesday for Fri-Thu work"},Doan:{baseFee:180,perMileRate:.7,notes:"Pays weekly on Thursday"},Legacy:{baseFee:190,perMileRate:.72,notes:"Pays bi-weekly on Wednesday"},ClaimSolution:{baseFee:195,perMileRate:.73,notes:"Pays bi-weekly on Thursday"},"Complete Claims":{baseFee:185,perMileRate:.71,notes:"Pays bi-weekly on Wednesday"},AMA:{baseFee:175,perMileRate:.68,notes:"Pays bi-weekly"},"A-TEAM":{baseFee:180,perMileRate:.7,notes:"Pays bi-weekly"},ACD:{baseFee:200,perMileRate:.75,notes:"Pays semi-monthly on 15th and EOM"},HEA:{baseFee:210,perMileRate:.78,notes:"Pays monthly on 15th for previous month"},IANET:{baseFee:195,perMileRate:.73,notes:"Pays monthly at end of month"},Frontline:{baseFee:185,perMileRate:.71,notes:"Pays monthly"},SCA:{baseFee:170,perMileRate:.65,notes:"Irregular payer - low volume"}};function lp(t){if(!t)return"";const e=t.toUpperCase().trim();return e.includes("G T APPRAISALS")||e==="LEGACY"?"Legacy":e.includes("SL APPRAISAL")||e==="DOAN"?"Doan":e.includes("AUTOCLAIMSDI")||e.includes("AUTOCLAIMS")?"ACD":e.includes("HEAVY EQUIPMENT")||e==="HEA"?"HEA":e==="CS"||e==="CCS"||e.includes("CLAIMSOLUTION")||e.includes("CLAIM SOLUTION")?"ClaimSolution":e.includes("AMA")?"AMA":e.includes("A TEAM")||e.includes("A-TEAM")||e.includes("ATEAM")?"A-TEAM":e.includes("IANET")?"IANET":e.includes("SEDGWK")||e==="SEDGWICK"?"Sedgwick":e.includes("COMPLETE CLAIMS")?"Complete Claims":e.includes("SCA")?"SCA":e.includes("FRONTLINE")?"Frontline":t}function zu(t,e){if(e&&e>0)return e;const n=lp(t),r=Pw[n];return(r==null?void 0:r.baseFee)||0}function PP(t){const e=lp(t);return e in Pw&&e!=="SCA"}function jw(t){return lp(t)||"Unknown"}function mt(t,e){const n=new Date(t);return n.setDate(n.getDate()+e),n}function Ks(t,e){const r=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),i=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());return Math.floor((i-r)/864e5)}function Hi(t){const e=t.getDay();return e===0?mt(t,1):e===6?mt(t,2):t}function jP(t){const e=t.getDay(),n=e===0?-6:1-e;return mt(t,n)}function nu(t,e){const n=jw(t),r=e.getDay();switch(n){case"Sedgwick":{const i=(3-r+7)%7||7,o=mt(e,i);return{periodStart:mt(o,-5),periodEnd:mt(o,-1),payoutDate:o}}case"Legacy":{const i=new Date("2024-12-18"),o=(3-r+7)%7||7;let a=mt(e,o);const l=Ks(i,a);return Math.floor(l/7)%2!==0&&(a=mt(a,7)),{periodStart:mt(a,-13),periodEnd:mt(a,-1),payoutDate:a}}case"ClaimSolution":{const i=new Date("2024-12-12"),o=(r-4+7)%7,a=mt(e,-o),l=Ks(i,a),c=Math.floor(l/7);let h;c%2===0?h=a:h=mt(a,-7);const m=mt(h,13),f=mt(h,21);return{periodStart:h,periodEnd:m,payoutDate:f}}case"Complete Claims":{const i=new Date("2024-12-04"),o=(3-r+7)%7||7;let a=mt(e,o);const l=Ks(i,a);return Math.floor(l/7)%2!==0&&(a=mt(a,7)),{periodStart:mt(a,-13),periodEnd:mt(a,-1),payoutDate:a}}case"Doan":{const i=(4-r+7)%7||7,o=mt(e,i);return{periodStart:mt(o,-6),periodEnd:o,payoutDate:o}}case"ACD":{const i=e.getMonth(),o=e.getFullYear();if(e.getDate()<=15){const l=new Date(o,i,15);return{periodStart:new Date(o,i,1,0,0,0),periodEnd:new Date(o,i,15,23,59,59),payoutDate:Hi(l)}}else{const l=new Date(o,i+1,0).getDate(),c=new Date(o,i,l);return{periodStart:new Date(o,i,16,0,0,0),periodEnd:new Date(o,i,l,23,59,59),payoutDate:Hi(c)}}}case"HEA":{const i=e.getMonth(),o=e.getFullYear();if(e.getDate()<15){const l=new Date(o,i,15);return{periodStart:new Date(o,i-1,1,0,0,0),periodEnd:new Date(o,i,0,23,59,59),payoutDate:Hi(l)}}else{const l=new Date(o,i+1,15);return{periodStart:new Date(o,i,1,0,0,0),periodEnd:new Date(o,i+1,0,23,59,59),payoutDate:Hi(l)}}}case"IANET":{const i=e.getMonth(),o=e.getFullYear(),a=new Date(o,i+1,0).getDate(),l=new Date(o,i,a);return{periodStart:new Date(o,i,1,0,0,0),periodEnd:new Date(o,i,a,23,59,59),payoutDate:Hi(l)}}case"AMA":{const i=new Date("2024-12-04"),o=(3-r+7)%7||7;let a=mt(e,o);const l=Ks(i,a);return Math.floor(l/7)%2!==0&&(a=mt(a,7)),{periodStart:mt(a,-13),periodEnd:mt(a,-1),payoutDate:a}}case"A-TEAM":{const i=new Date("2024-12-19"),o=(4-r+7)%7||7;let a=mt(e,o);const l=Ks(i,a);return Math.floor(l/7)%2!==0&&(a=mt(a,7)),{periodStart:mt(a,-13),periodEnd:a,payoutDate:a}}case"Frontline":{const i=e.getMonth(),o=e.getFullYear(),a=new Date(o,i+1,0).getDate(),l=new Date(o,i,a);return{periodStart:new Date(o,i,1,0,0,0),periodEnd:new Date(o,i,a,23,59,59),payoutDate:Hi(l)}}case"SCA":{const i=e.getMonth(),o=e.getFullYear(),a=new Date(o,i+1,0).getDate(),l=new Date(o,i,a);return{periodStart:new Date(o,i,1,0,0,0),periodEnd:new Date(o,i,a,23,59,59),payoutDate:Hi(l)}}default:throw new Error(`Unknown or excluded firm: ${n}`)}}function AP(t,e=new Date){const n=new Map;for(const r of t){const i=jw(r.firm);if(!PP(r.firm))continue;let o=null,a=0;if(r.status==="COMPLETED"&&r.completion_date?(o=new Date(r.completion_date),a=r.file_total||r.pay_amount||0):r.appointment_start&&(o=new Date(r.appointment_start),a=r.pay_amount||zu(r.firm)||0),!(!o||a<=0))try{const l=nu(i,o);if(o>=l.periodStart&&o<=l.periodEnd){const c=l.payoutDate.toISOString().split("T")[0],h=`${i}|${c}`;n.has(h)||n.set(h,{payoutDate:l.payoutDate,firm:i,totalExpected:0,claimIds:[],claimCount:0,periodStart:l.periodStart,periodEnd:l.periodEnd});const m=n.get(h);m.totalExpected+=a,m.claimIds.push(r.id),m.claimCount++}}catch(l){console.warn(`Could not process claim ${r.id} for firm ${i}:`,l)}}return Array.from(n.values()).sort((r,i)=>r.payoutDate.getTime()-i.payoutDate.getTime())}function OP(t){const e=new Map;for(const n of t){const r=jP(n.payoutDate),i=r.toISOString().split("T")[0];e.has(i)||e.set(i,{weekStart:r,weekEnd:mt(r,6),totalAmount:0,payouts:[]});const o=e.get(i);o.totalAmount+=n.totalExpected,o.payouts.push(n)}return Array.from(e.values()).sort((n,r)=>n.weekStart.getTime()-r.weekStart.getTime())}function DP(t){const e=new Map,n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(const r of t){const i=r.payoutDate.getFullYear(),o=r.payoutDate.getMonth(),a=`${i}-${o}`;e.has(a)||e.set(a,{year:i,month:o,monthName:n[o],totalAmount:0,byFirm:{}});const l=e.get(a);l.totalAmount+=r.totalExpected,l.byFirm[r.firm]=(l.byFirm[r.firm]||0)+r.totalExpected}return Array.from(e.values()).sort((r,i)=>r.year*12+r.month-(i.year*12+i.month))}function RP(t,e=30){const n=new Date;n.setHours(0,0,0,0);const r=mt(n,e);return t.filter(i=>i.payoutDate>=n&&i.payoutDate<=r)}function Aw(t,e,n){return t>=e&&t<=n}function LP(t,e,n){return t.filter(r=>r.payoutDate.getFullYear()===e&&r.payoutDate.getMonth()===n)}function NP(t){const e=new Date;e.setHours(0,0,0,0);const n=new Date(e);return n.setDate(e.getDate()+7),n.setHours(23,59,59,999),t.filter(r=>Aw(r.payoutDate,e,n))}function IP(t){const e=new Date;e.setDate(e.getDate()+7),e.setHours(0,0,0,0);const n=new Date(e);return n.setDate(e.getDate()+7),n.setHours(23,59,59,999),t.filter(r=>Aw(r.payoutDate,e,n))}function MP(t){const e=new Date,n=e.getMonth(),r=e.getFullYear();return LP(t,r,n)}function Td(t){return t.reduce((e,n)=>e+n.totalExpected,0)}function zP({payouts:t}){const e=NP(t),n=IP(t),r=MP(t),i=Td(e),o=Td(n),a=Td(r);return d.jsxs("div",{className:"payout-dashboard__summary-grid",children:[d.jsxs("div",{className:"payout-dashboard__summary-card payout-dashboard__summary-card--this-week",children:[d.jsx("div",{className:"payout-dashboard__summary-label",children:"Payouts Occurring This Week"}),d.jsxs("div",{className:"payout-dashboard__summary-amount payout-dashboard__summary-amount--this-week",children:["$",i.toFixed(2)]}),d.jsxs("div",{className:"payout-dashboard__summary-count",children:[e.length," payout",e.length!==1?"s":""]})]}),d.jsxs("div",{className:"payout-dashboard__summary-card payout-dashboard__summary-card--next-week",children:[d.jsx("div",{className:"payout-dashboard__summary-label",children:"Payouts Occurring Next Week"}),d.jsxs("div",{className:"payout-dashboard__summary-amount payout-dashboard__summary-amount--next-week",children:["$",o.toFixed(2)]}),d.jsxs("div",{className:"payout-dashboard__summary-count",children:[n.length," payout",n.length!==1?"s":""]})]}),d.jsxs("div",{className:"payout-dashboard__summary-card payout-dashboard__summary-card--this-month",children:[d.jsx("div",{className:"payout-dashboard__summary-label",children:"Payouts Occurring This Month (work may be from prior periods)"}),d.jsxs("div",{className:"payout-dashboard__summary-amount payout-dashboard__summary-amount--this-month",children:["$",a.toFixed(2)]}),d.jsxs("div",{className:"payout-dashboard__summary-count",children:[r.length," payout",r.length!==1?"s":""]})]})]})}function BP({payouts:t,onPayoutClick:e}){return t.length===0?d.jsx("div",{className:"payout-dashboard__empty-state",children:"No upcoming payouts in the next 30 days"}):d.jsx(d.Fragment,{children:t.map((n,r)=>d.jsxs("div",{className:"payout-card",onClick:()=>e(n),children:[d.jsxs("div",{children:[d.jsx("div",{className:"payout-card__field-label",children:"Firm"}),d.jsx("div",{className:"payout-card__firm-name",children:n.firm})]}),d.jsxs("div",{children:[d.jsx("div",{className:"payout-card__field-label",children:"Work Period"}),d.jsxs("div",{className:"payout-card__period",children:[n.periodStart.toLocaleDateString()," - ",n.periodEnd.toLocaleDateString()]})]}),d.jsxs("div",{children:[d.jsx("div",{className:"payout-card__field-label",children:"Payout Date"}),d.jsx("div",{className:"payout-card__date",children:n.payoutDate.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})]}),d.jsxs("div",{className:"payout-card__amount-section",children:[d.jsxs("div",{className:"payout-card__claim-count",children:[n.claimCount," claim",n.claimCount!==1?"s":""," "]}),d.jsxs("div",{className:"payout-card__amount",children:["$",n.totalExpected.toFixed(2)]})]})]},r))})}function FP({weeklyView:t,maxWeeks:e=12}){const n=t.slice(0,e);return d.jsx(d.Fragment,{children:n.map((r,i)=>d.jsxs("div",{className:"period-card",children:[d.jsxs("div",{className:"period-card__header",children:[d.jsxs("div",{children:[d.jsx("div",{className:"period-card__period-label",children:"Week of"}),d.jsxs("div",{className:"period-card__period-value",children:[r.weekStart.toLocaleDateString()," - ",r.weekEnd.toLocaleDateString()]})]}),d.jsxs("div",{children:[d.jsx("div",{className:"period-card__total-label",children:"Payouts Occurring This Week"}),d.jsxs("div",{className:"period-card__total-amount",children:["$",r.totalAmount.toFixed(2)]})]})]}),d.jsx("div",{className:"period-card__payout-list",children:r.payouts.map((o,a)=>d.jsxs("div",{className:"period-card__payout-item",children:[d.jsxs("div",{children:[d.jsx("span",{className:"period-card__payout-firm",children:o.firm}),d.jsx("span",{className:"period-card__payout-date",children:o.payoutDate.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})]}),d.jsxs("div",{className:"period-card__payout-amount",children:["$",o.totalExpected.toFixed(2)]})]},a))})]},i))})}function UP({monthlyView:t,maxMonths:e=6}){const n=t.slice(0,e);return d.jsx(d.Fragment,{children:n.map((r,i)=>d.jsxs("div",{className:"period-card",children:[d.jsxs("div",{className:"period-card__header",children:[d.jsxs("div",{children:[d.jsx("div",{className:"period-card__period-label",children:"Month"}),d.jsxs("div",{className:"period-card__period-value",children:[r.monthName," ",r.year]})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"period-card__total-label",children:["Payouts Occurring in ",r.monthName," (work may be from prior periods)"]}),d.jsxs("div",{className:"period-card__total-amount",children:["$",r.totalAmount.toFixed(2)]})]})]}),d.jsx("div",{className:"period-card__payout-list",children:Object.entries(r.byFirm).map(([o,a],l)=>d.jsxs("div",{className:"period-card__payout-item",children:[d.jsx("div",{className:"period-card__payout-firm",children:o}),d.jsxs("div",{className:"period-card__payout-amount",children:["$",a.toFixed(2)]})]},l))})]},i))})}function WP({payout:t,claims:e,onClose:n,onUpdateAmount:r}){const[i,o]=J.useState(null),[a,l]=J.useState(""),[c,h]=J.useState(null),m=(v,_)=>{o(v.id),h(v),l(_.toString())},f=async()=>{if(!c)return;const v=parseFloat(a);if(isNaN(v)||v<0){alert("Please enter a valid amount");return}await r(c.id,v,c),o(null),h(null),l("")},g=()=>{o(null),h(null),l("")},y=e.reduce((v,_)=>_.status==="COMPLETED"?v+(_.file_total||_.pay_amount||0):v+(_.pay_amount||zu(_.firm)||0),0);return d.jsx("div",{className:"payout-modal-overlay",onClick:n,children:d.jsxs("div",{className:"payout-modal",onClick:v=>v.stopPropagation(),children:[d.jsxs("div",{className:"payout-modal__header",children:[d.jsxs("div",{children:[d.jsxs("h3",{className:"payout-modal__title",children:[t.firm," - Payout Details"]}),d.jsxs("div",{className:"payout-modal__subtitle",children:["Pay Date: ",t.payoutDate.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})]}),d.jsxs("div",{className:"payout-modal__subtitle",children:["Work Period: ",t.periodStart.toLocaleDateString()," - ",t.periodEnd.toLocaleDateString()]})]}),d.jsx("button",{className:"payout-modal__close-button",onClick:n,children:""})]}),d.jsxs("div",{className:"payout-modal__summary",children:[d.jsxs("div",{children:[d.jsx("div",{className:"payout-dashboard__summary-label",children:"Total Claims"}),d.jsx("div",{className:"payout-modal__summary-count",children:e.length})]}),d.jsxs("div",{className:"payout-modal__summary-total",children:[d.jsx("div",{className:"payout-modal__summary-total-label",children:"Total Expected Payout"}),d.jsxs("div",{className:"payout-modal__summary-total-amount",children:["$",y.toFixed(2)]})]})]}),d.jsx("h4",{className:"payout-modal__claims-header",children:"Claims Included in This Payout"}),d.jsx("div",{className:"payout-modal__claims-list",children:e.map(v=>{const _=v.status==="COMPLETED"?v.file_total||v.pay_amount||0:v.pay_amount||zu(v.firm)||0,S=i===v.id,w=v.status==="COMPLETED"?"claim-card__status--completed":"claim-card__status--scheduled";return d.jsxs("div",{className:"claim-card",children:[d.jsxs("div",{className:"claim-card__grid",children:[d.jsxs("div",{children:[d.jsx("div",{className:"claim-card__field-label",children:"Claim Number"}),d.jsxs("div",{className:"claim-card__claim-number",children:["#",v.claim_number||"N/A"]})]}),d.jsxs("div",{children:[d.jsx("div",{className:"claim-card__field-label",children:"Customer"}),d.jsx("div",{className:"claim-card__customer",children:v.customer_name||"Unknown"})]}),d.jsxs("div",{children:[d.jsx("div",{className:"claim-card__field-label",children:"Status"}),d.jsx("div",{className:`claim-card__status ${w}`,children:v.status})]}),d.jsx("div",{className:"claim-card__amount-section",children:S?d.jsxs("div",{className:"claim-card__edit-controls",children:[d.jsx("input",{type:"number",className:"claim-card__edit-input",value:a,onChange:b=>l(b.target.value),onClick:b=>b.stopPropagation()}),d.jsx("button",{className:"claim-card__save-button",onClick:b=>{b.stopPropagation(),f()},children:""}),d.jsx("button",{className:"claim-card__cancel-button",onClick:b=>{b.stopPropagation(),g()},children:""})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"claim-card__field-label",children:"Amount"}),d.jsxs("div",{className:"claim-card__edit-controls",children:[d.jsxs("div",{className:"claim-card__amount",children:["$",_.toFixed(2)]}),d.jsx("button",{className:"claim-card__edit-button",onClick:b=>{b.stopPropagation(),m(v,_)},children:"Edit"})]})]})})]}),d.jsxs("div",{className:"claim-card__footer",children:[d.jsxs("div",{children:["Date: ",d.jsx("span",{className:"claim-card__footer-value",children:v.completion_date?new Date(v.completion_date).toLocaleDateString():v.appointment_start?new Date(v.appointment_start).toLocaleDateString():"N/A"})]}),d.jsxs("div",{children:["Type: ",d.jsx("span",{className:"claim-card__footer-value",children:v.status==="COMPLETED"?v.file_total?"file_total":"pay_amount":v.pay_amount?"pay_amount (scheduled)":"base fee (scheduled)"})]})]})]},v.id)})})]})})}function $P(){const[t,e]=J.useState([]),[n,r]=J.useState([]),[i,o]=J.useState([]),[a,l]=J.useState([]),[c,h]=J.useState(!0),[m,f]=J.useState("upcoming"),[g,y]=J.useState(null),[v,_]=J.useState([]);J.useEffect(()=>{S()},[]);const S=async()=>{try{const{data:T,error:I}=await ze.from("claims").select("id, firm, completion_date, appointment_start, file_total, pay_amount, status").is("archived_at",null).or("status.eq.COMPLETED,status.eq.SCHEDULED,status.eq.IN_PROGRESS").or("completion_date.not.is.null,appointment_start.not.is.null");if(I)throw I;const R=T||[];e(R);const j=AP(R);r(j),o(OP(j)),l(DP(j))}catch(T){console.error("Error loading payout data:",T),alert(`Error: ${T.message}`)}finally{h(!1)}},w=async T=>{y(T);try{const{data:I,error:R}=await ze.from("claims").select("id, claim_number, customer_name, firm, pay_amount, file_total, status, appointment_start, completion_date").is("archived_at",null).in("id",T.claimIds);if(R)throw R;_(I||[])}catch(I){console.error("Error loading claim details:",I),alert(`Error: ${I.message}`)}},b=async(T,I,R)=>{try{const j={};R.status==="COMPLETED"&&R.file_total!=null?j.file_total=I:j.pay_amount=I;const{error:P}=await ze.from("claims").update(j).eq("id",T);if(P)throw P;if(_(A=>A.map(F=>F.id===T?{...F,...j}:F)),await S(),g){const{data:A}=await ze.from("claims").select("id, claim_number, customer_name, firm, pay_amount, file_total, status, appointment_start, completion_date").is("archived_at",null).in("id",g.claimIds);_(A||[])}}catch(j){console.error("Error updating amount:",j),alert(`Error: ${j.message}`)}},k=RP(n,30);return c?d.jsx("div",{className:"payout-dashboard__loading",children:"Loading payout forecasts..."}):d.jsxs("div",{className:"payout-dashboard",children:[d.jsx("div",{className:"payout-dashboard__header",children:d.jsxs("div",{className:"payout-dashboard__header-content",children:[d.jsx(_t,{to:"/",className:"payout-dashboard__home-link",children:" Home"}),d.jsx("h3",{className:"payout-dashboard__title",children:"Payout Forecast Dashboard"})]})}),d.jsx(zP,{payouts:n}),d.jsx("div",{className:"payout-dashboard__view-buttons",children:["upcoming","weekly","monthly"].map(T=>d.jsx("button",{onClick:()=>f(T),className:`payout-dashboard__view-button ${m===T?"payout-dashboard__view-button--active":""}`,children:T.charAt(0).toUpperCase()+T.slice(1)},T))}),d.jsxs("div",{className:"payout-dashboard__view-container",children:[m==="upcoming"&&d.jsxs(d.Fragment,{children:[d.jsxs("h4",{className:"payout-dashboard__view-header",children:["Next 30 Days - Payouts Occurring (",k.length," payouts)"]}),d.jsx(BP,{payouts:k,onPayoutClick:w})]}),m==="weekly"&&d.jsxs(d.Fragment,{children:[d.jsxs("h4",{className:"payout-dashboard__view-header",children:["Weekly Totals - Grouped by Payout Date (",i.length," weeks)"]}),d.jsx(FP,{weeklyView:i})]}),m==="monthly"&&d.jsxs(d.Fragment,{children:[d.jsxs("h4",{className:"payout-dashboard__view-header",children:["Monthly Totals - Grouped by Payout Date (",a.length," months)"]}),d.jsx(UP,{monthlyView:a})]})]}),g&&d.jsx(WP,{payout:g,claims:v,onClose:()=>y(null),onUpdateAmount:b}),d.jsxs("div",{className:"payout-dashboard__info-box",children:[d.jsx("div",{className:"payout-dashboard__info-title",children:"Payout Forecast Details"}),d.jsxs("div",{className:"payout-dashboard__info-text",children:["This forecast includes both ",d.jsx("strong",{children:"completed claims"})," awaiting payment and ",d.jsx("strong",{children:"scheduled appointments"})," for future work."]}),d.jsxs("div",{className:"payout-dashboard__info-text",children:[" Completed claims: Uses actual ",d.jsx("strong",{children:"file_total"})," or ",d.jsx("strong",{children:"pay_amount"})]}),d.jsxs("div",{className:"payout-dashboard__info-text",children:[" Scheduled claims: Uses ",d.jsx("strong",{children:"pay_amount"})," set in the calendar"]}),d.jsxs("div",{className:"payout-dashboard__info-text",children:[d.jsx("strong",{children:"IMPORTANT:"})," All views display payouts grouped by ",d.jsx("strong",{children:"when the payout occurs"}),", not when the work was performed. For example, December work for firms like ACD, IANET, and Legacy typically pays out in January."]}),d.jsx("div",{className:"payout-dashboard__info-text",children:"Payout dates calculated from historical deposit patterns for each firm. All recurring firms included (Sedgwick, Legacy, ACD, ClaimSolution, Complete Claims, Doan, HEA, IANET, AMA, A-TEAM, Frontline)."})]})]})}function Xr(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}function up(t,e){return t.reduce((n,r)=>{const i=e(r);return n[i]||(n[i]=[]),n[i].push(r),n},{})}function HP(t,e){return t.reduce((n,r)=>n+e(r),0)}const VP=["January","February","March","April","May","June","July","August","September","October","November","December"];function ZP(t){const e=t.appointment_start??t.scheduled_at??null;if(!e)return null;const n=Ut(e);return br(n)?Yr(n,"yyyy-MM"):null}function Ow(t,e){return`${t}-${e.toString().padStart(2,"0")}`}function ks(t,e){const n=sp(new Date(t,e-1)),r=op(new Date(t,e-1));return{start:n,end:r}}function qP(t){const e=t.getMonth()===0?t.getFullYear()-1:t.getFullYear(),n=t.getMonth()===0?12:t.getMonth();return{year:e,month:n}}function YP(t){return{year:t.getFullYear(),month:t.getMonth()+1,asOfDate:t}}function cp(t,e){return t>e?0:nT({start:t,end:e}).filter(r=>!qC(r)).length}function Dw(t){return t.is_supplement===!0||t.original_claim_id!=null}function Rw(t,e,n){return t.filter(r=>{if(r.archived_at||ZP(r)!==e)return!1;if(n){const i=r.appointment_start??r.scheduled_at??null;if(!i)return!1;const o=Ut(i);return br(o)?o<=n:!1}return!0})}function GP(t,e,n){const r=Rw(t,e,n);return{allActive:r.filter(i=>i.status!=="CANCELED").length,unassigned:r.filter(i=>i.status==="UNASSIGNED"||i.status===null||!i.assigned_to).length,scheduled:r.filter(i=>i.status==="SCHEDULED").length,inProgress:r.filter(i=>i.status==="IN_PROGRESS").length,completed:r.filter(i=>i.status==="COMPLETED").length,canceled:r.filter(i=>i.status==="CANCELED").length}}function KP(t,e,n,r,i){const o=Ow(e,n),{start:a,end:l}=ks(e,n),c=i?$a([l,r]):void 0,m=Rw(t,o,c).length,f=i?$a([l,r]):l,g=cp(a,f),y=GP(t,o,c);return{calendarClaims:m,calendarClaimsPerWorkingDay:g>0?Xr(m/g,1):0,monthScopedCounts:y}}function mc(t,e,n){return t.filter(r=>{if(r.status!=="COMPLETED"||!r.completion_date)return!1;const i=Ut(r.completion_date);return br(i)&&i>=e&&i<=n})}function JP(t,e,n,r,i){const{start:o,end:a}=ks(e,n),l=i?$a([a,r]):a,c=mc(t,o,l),h=up(c,_=>{const S=Ut(_.completion_date);return Yr(S,"yyyy-MM-dd")});let m=0,f=null;for(const[_,S]of Object.entries(h))S.length>m&&(m=S.length,f=_);const g=i?$a([a,r]):a,y=cp(o,g),v=c.filter(Dw).length;return{totalClaims:c.length,supplementClaims:v,peakDayVolume:m,peakDayDate:f,workingDays:y,claimsPerWorkingDay:y>0?Xr(c.length/y,1):0}}function QP(t,e,n,r,i){const{start:o,end:a}=ks(e,n),l=i?$a([a,r]):a,c=mc(t,o,l),h=c.reduce((f,g)=>f+(g.file_total??g.pay_amount??0),0),m=c.length>0?h/c.length:0;return{grossRevenue:Xr(h,2),avgRevenuePerClaim:Xr(m,2)}}function XP(t){const e=t.filter(n=>!n.archived_at);return{awaitingScheduling:e.filter(n=>!n.assigned_to||n.status==="UNASSIGNED"||n.status===null).length,scheduled:e.filter(n=>n.status==="SCHEDULED").length,inProgress:e.filter(n=>n.status==="IN_PROGRESS").length}}function my(t,e,n,r,i){const o=Ow(e,n),a=KP(t,e,n,r,i),l=JP(t,e,n,r,i),c=QP(t,e,n,r,i),h=XP(t);return{year:e,month:n,monthName:VP[n-1],monthKey:o,isComplete:!i,asOfDate:r,calendarClaims:a.calendarClaims,calendarClaimsPerWorkingDay:a.calendarClaimsPerWorkingDay,monthScopedCounts:a.monthScopedCounts,totalClaims:l.totalClaims,completedThisPeriod:l.totalClaims,supplementClaims:l.supplementClaims,peakDayVolume:l.peakDayVolume,peakDayDate:l.peakDayDate,workingDays:l.workingDays,claimsPerWorkingDay:l.claimsPerWorkingDay,completedByAppointmentMonth:a.monthScopedCounts.completed,completedByCompletionMonth:l.totalClaims,grossRevenue:c.grossRevenue,avgRevenuePerClaim:c.avgRevenuePerClaim,pipeline:h}}function Ul(t,e){const n=t-e,r=e!==0?Xr(n/e*100,1):null;return{delta:n,percent:r}}function gy(t,e,n){if(e===0)return 0;const r=t/e;return Xr(r*n,0)}function ej(t,e){const n=qP(e),r=ks(n.year,n.month),i=my(t,n.year,n.month,r.end,!1),o=YP(e),a=my(t,o.year,o.month,o.asOfDate,!0),l=Ul(a.totalClaims,i.totalClaims),c=Ul(a.grossRevenue,i.grossRevenue),h=Ul(a.avgRevenuePerClaim,i.avgRevenuePerClaim),m=Ul(a.calendarClaims,i.calendarClaims),f=cp(sp(e),op(e));return{lastMonth:i,currentMTD:a,claimsDelta:l.delta,claimsDeltaPercent:l.percent,revenueDelta:c.delta,revenueDeltaPercent:c.percent,avgRevenueDelta:h.delta,avgRevenueDeltaPercent:h.percent,calendarClaimsDelta:m.delta,calendarClaimsDeltaPercent:m.percent,projectedMonthEndClaims:gy(a.totalClaims,a.workingDays,f),projectedMonthEndRevenue:gy(a.grossRevenue,a.workingDays,f)}}function yy(t){if(t.scheduled_at){const e=Ut(t.scheduled_at);if(br(e))return e}if(t.appointment_start){const e=Ut(t.appointment_start);if(br(e))return e}return null}function tj(t,e,n,r){const{start:i,end:o}=ks(e,n),a=t.filter(y=>{const v=yy(y);return v&&v>=i&&v<=o}),l=t.filter(y=>{if(y.file_total==null||!y.completion_date)return!1;const v=Ut(y.completion_date);return br(v)&&v>=i&&v<=o}),c=a.filter(y=>y.created_at);let h=null;if(c.length>0){const y=c.reduce((v,_)=>{const S=Ut(_.created_at),w=yy(_);return v+JC(w,S)},0);h=Xr(y/c.length,1)}const m=mc(t,i,o),f=m.filter(Dw).length,g=m.length>0?Xr(HP(m,y=>y.file_total??0)/m.length,2):0;return{period:{year:e,month:n},admin:{claimsScheduled:a.length,claimsInvoiced:l.length,avgSchedulingLag:h},photography:r??{claimsWithPhotos:0,totalPhotosUploaded:0,avgPhotosPerClaim:0},inspection:{claimsInspected:m.length,supplementsProcessed:f,avgFileTotal:g}}}function nj(t,e,n){const{start:r,end:i}=ks(e,n),o=mc(t,r,i),a=up(o,y=>{const v=Ut(y.completion_date);return Yr(v,"yyyy-MM-dd")}),l={};for(const[y,v]of Object.entries(a))l[y]=v.length;const c={};for(const y of o){const v=Ut(y.completion_date),_=xw(v);c[_]=(c[_]??0)+1}const h=Object.values(a).filter(y=>y.length>=2).length,m={monday:0,tuesday:0,wednesday:0,thursday:0,friday:0,saturday:0,sunday:0},f=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];for(const y of o){const v=Ut(y.completion_date),_=tP(v);m[f[_]]++}const g=rj(t,r,i);return{period:{year:e,month:n},claimsPerDay:l,claimsPerWeek:c,multiClaimDays:h,avgAppointmentSpacing:g,weekdayDistribution:m}}function rj(t,e,n){const r=t.filter(l=>{if(!l.appointment_start)return!1;const c=Ut(l.appointment_start);return br(c)&&c>=e&&c<=n}),i=up(r,l=>{const c=Ut(l.appointment_start);return Yr(c,"yyyy-MM-dd")});let o=0,a=0;for(const l of Object.values(i)){if(l.length<2)continue;const c=[...l].sort((h,m)=>{const f=Ut(h.appointment_start).getTime(),g=Ut(m.appointment_start).getTime();return f-g});for(let h=1;h<c.length;h++){const m=c[h-1].appointment_end?Ut(c[h-1].appointment_end):Ut(c[h-1].appointment_start),f=Ut(c[h].appointment_start),g=eT(f,m);g>0&&g<480&&(o+=g,a++)}}return a>0?Xr(o/a,0):null}function ij(t){return{showSaturday:t.saturday>0,showSunday:t.sunday>0}}async function oj(t,e){const n=t.toISOString(),r=e.toISOString(),i=`
    id,
    claim_number,
    status,
    created_at,
    completion_date,
    appointment_start,
    appointment_end,
    scheduled_at,
    file_total,
    pay_amount,
    firm,
    assigned_to,
    is_supplement,
    original_claim_id,
    archived_at
  `,o=ze.from("claims").select(i).is("archived_at",null).gte("completion_date",n).lte("completion_date",r),a=ze.from("claims").select(i).is("archived_at",null).gte("appointment_start",n).lte("appointment_start",r),l=ze.from("claims").select(i).is("archived_at",null).in("status",["UNASSIGNED","SCHEDULED","IN_PROGRESS"]),[c,h,m]=await Promise.all([o,a,l]);if(c.error)throw c.error;if(h.error)throw h.error;if(m.error)throw m.error;const f=new Map;for(const g of c.data??[])f.set(g.id,g);for(const g of h.data??[])f.set(g.id,g);for(const g of m.data??[])f.set(g.id,g);return Array.from(f.values())}async function sj(t,e){const{data:n,error:r}=await ze.from("claim_photos").select("claim_id, created_at").gte("created_at",t.toISOString()).lte("created_at",e.toISOString());if(r)throw console.error("Error fetching photo metrics:",r),r;const i=n??[],a=new Set(i.map(h=>h.claim_id)).size,l=i.length,c=a>0?Math.round(l/a*10)/10:0;return{claimsWithPhotos:a,totalPhotosUploaded:l,avgPhotosPerClaim:c}}function Vi(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t)}function Pd(t){return t===null?"N/A":`${t>0?"+":""}${t.toFixed(1)}%`}function jd(t){return t>0?"kpi-comparison-card__delta-value--positive":t<0?"kpi-comparison-card__delta-value--negative":"kpi-comparison-card__delta-value--neutral"}function Ad(t){return t>0?"":t<0?"":""}function aj({comparison:t}){const[e,n]=J.useState(!1),{lastMonth:r,currentMTD:i}=t;return d.jsxs("div",{className:"kpi-comparison-grid",children:[d.jsxs("div",{className:"kpi-comparison-card kpi-comparison-card--claims",children:[d.jsx("div",{className:"kpi-comparison-card__label",children:"Total Claims"}),d.jsxs("div",{className:"kpi-comparison-card__values",children:[d.jsxs("div",{className:"kpi-comparison-card__value-block",children:[d.jsx("div",{className:"kpi-comparison-card__value-label",children:r.monthName}),d.jsx("div",{className:"kpi-comparison-card__value",children:r.totalClaims})]}),d.jsxs("div",{className:"kpi-comparison-card__value-block",children:[d.jsxs("div",{className:"kpi-comparison-card__value-label",children:[i.monthName," MTD"]}),d.jsx("div",{className:"kpi-comparison-card__value kpi-comparison-card__value--claims",children:i.totalClaims})]})]}),d.jsxs("div",{className:"kpi-comparison-card__delta",children:[d.jsxs("span",{className:`kpi-comparison-card__delta-value ${jd(t.claimsDelta)}`,children:[Ad(t.claimsDelta)," ",Math.abs(t.claimsDelta)]}),d.jsxs("span",{className:"kpi-comparison-card__delta-percent",children:["(",Pd(t.claimsDeltaPercent),")"]})]}),e&&d.jsx("div",{className:"kpi-comparison-card__pace",children:d.jsxs("span",{className:"kpi-comparison-card__pace-value",children:["Pace: ",t.projectedMonthEndClaims," projected"]})}),d.jsx("div",{className:"kpi-comparison-card__pace",children:d.jsx("button",{className:"kpi-comparison-card__pace-toggle",onClick:()=>n(!e),children:e?"Hide pace":"Show pace"})})]}),d.jsxs("div",{className:"kpi-comparison-card kpi-comparison-card--revenue",children:[d.jsx("div",{className:"kpi-comparison-card__label",children:"Gross Revenue"}),d.jsxs("div",{className:"kpi-comparison-card__values",children:[d.jsxs("div",{className:"kpi-comparison-card__value-block",children:[d.jsx("div",{className:"kpi-comparison-card__value-label",children:r.monthName}),d.jsx("div",{className:"kpi-comparison-card__value",children:Vi(r.grossRevenue)})]}),d.jsxs("div",{className:"kpi-comparison-card__value-block",children:[d.jsxs("div",{className:"kpi-comparison-card__value-label",children:[i.monthName," MTD"]}),d.jsx("div",{className:"kpi-comparison-card__value kpi-comparison-card__value--revenue",children:Vi(i.grossRevenue)})]})]}),d.jsxs("div",{className:"kpi-comparison-card__delta",children:[d.jsxs("span",{className:`kpi-comparison-card__delta-value ${jd(t.revenueDelta)}`,children:[Ad(t.revenueDelta)," ",Vi(Math.abs(t.revenueDelta))]}),d.jsxs("span",{className:"kpi-comparison-card__delta-percent",children:["(",Pd(t.revenueDeltaPercent),")"]})]}),e&&d.jsx("div",{className:"kpi-comparison-card__pace",children:d.jsxs("span",{className:"kpi-comparison-card__pace-value",children:["Pace: ",Vi(t.projectedMonthEndRevenue)," projected"]})})]}),d.jsxs("div",{className:"kpi-comparison-card kpi-comparison-card--avg",children:[d.jsx("div",{className:"kpi-comparison-card__label",children:"Avg Revenue / Claim"}),d.jsxs("div",{className:"kpi-comparison-card__values",children:[d.jsxs("div",{className:"kpi-comparison-card__value-block",children:[d.jsx("div",{className:"kpi-comparison-card__value-label",children:r.monthName}),d.jsx("div",{className:"kpi-comparison-card__value",children:Vi(r.avgRevenuePerClaim)})]}),d.jsxs("div",{className:"kpi-comparison-card__value-block",children:[d.jsxs("div",{className:"kpi-comparison-card__value-label",children:[i.monthName," MTD"]}),d.jsx("div",{className:"kpi-comparison-card__value kpi-comparison-card__value--avg",children:Vi(i.avgRevenuePerClaim)})]})]}),d.jsxs("div",{className:"kpi-comparison-card__delta",children:[d.jsxs("span",{className:`kpi-comparison-card__delta-value ${jd(t.avgRevenueDelta)}`,children:[Ad(t.avgRevenueDelta)," ",Vi(Math.abs(t.avgRevenueDelta))]}),d.jsxs("span",{className:"kpi-comparison-card__delta-percent",children:["(",Pd(t.avgRevenueDeltaPercent),")"]})]})]})]})}function lj(t){return t?new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"N/A"}function uj({snapshot:t}){const e=t.isComplete?t.monthName:`${t.monthName} MTD`;return d.jsxs("div",{className:"kpi-volume-card",children:[d.jsxs("h4",{className:"kpi-volume-card__title",children:["Volume Indicators (",e,")"]}),d.jsxs("div",{className:"kpi-volume-card__grid",children:[d.jsxs("div",{className:"kpi-volume-card__row",style:{background:"#1e3a5f"},children:[d.jsx("span",{className:"kpi-volume-card__row-label",style:{color:"#93c5fd"},children:"Calendar Appointments"}),d.jsx("span",{className:"kpi-volume-card__row-value kpi-volume-card__row-value--highlight",children:t.calendarClaims})]}),d.jsxs("div",{className:"kpi-volume-card__row",children:[d.jsx("span",{className:"kpi-volume-card__row-label",children:"Appts / Working Day"}),d.jsx("span",{className:"kpi-volume-card__row-value",children:t.calendarClaimsPerWorkingDay.toFixed(1)})]}),d.jsx("div",{style:{borderTop:"1px solid #4a5568",margin:"8px 0"}}),d.jsxs("div",{className:"kpi-volume-card__row",style:{background:"#1a3d2e"},children:[d.jsx("span",{className:"kpi-volume-card__row-label",style:{color:"#86efac"},children:"Completed (by completion date)"}),d.jsx("span",{className:"kpi-volume-card__row-value",style:{color:"#10b981"},children:t.totalClaims})]}),d.jsxs("div",{className:"kpi-volume-card__row",children:[d.jsx("span",{className:"kpi-volume-card__row-label",children:"Completed / Working Day"}),d.jsx("span",{className:"kpi-volume-card__row-value",children:t.claimsPerWorkingDay.toFixed(1)})]}),d.jsxs("div",{className:"kpi-volume-card__row",children:[d.jsx("span",{className:"kpi-volume-card__row-label",children:"Peak Day Volume"}),d.jsxs("span",{className:"kpi-volume-card__row-value",children:[t.peakDayVolume,d.jsxs("span",{className:"kpi-volume-card__row-subtext",children:["(",lj(t.peakDayDate),")"]})]})]}),d.jsxs("div",{className:"kpi-volume-card__row",children:[d.jsxs("span",{className:"kpi-volume-card__row-label",children:["Working Days ",t.isComplete?"":"(MTD)"]}),d.jsx("span",{className:"kpi-volume-card__row-value",children:t.workingDays})]}),d.jsxs("div",{className:"kpi-volume-card__row",children:[d.jsx("span",{className:"kpi-volume-card__row-label",children:"Supplements"}),d.jsx("span",{className:"kpi-volume-card__row-value",children:t.supplementClaims})]})]})]})}function cj({snapshot:t}){const{monthScopedCounts:e,monthName:n,isComplete:r}=t,i=r?n:`${n} MTD`;return d.jsxs("div",{className:"kpi-pipeline-card",children:[d.jsxs("h4",{className:"kpi-pipeline-card__title",children:["Calendar Status (",i,")"]}),d.jsxs("div",{className:"kpi-pipeline-card__grid",children:[d.jsxs("div",{className:"kpi-pipeline-card__row kpi-pipeline-card__row--awaiting",children:[d.jsx("span",{className:"kpi-pipeline-card__row-label",children:"All Active"}),d.jsx("span",{className:"kpi-pipeline-card__row-value",style:{color:"#e2e8f0"},children:e.allActive})]}),d.jsxs("div",{className:"kpi-pipeline-card__row kpi-pipeline-card__row--awaiting",children:[d.jsx("span",{className:"kpi-pipeline-card__row-label",children:"Unassigned"}),d.jsx("span",{className:"kpi-pipeline-card__row-value kpi-pipeline-card__row-value--awaiting",children:e.unassigned})]}),d.jsxs("div",{className:"kpi-pipeline-card__row kpi-pipeline-card__row--scheduled",children:[d.jsx("span",{className:"kpi-pipeline-card__row-label",children:"Scheduled"}),d.jsx("span",{className:"kpi-pipeline-card__row-value kpi-pipeline-card__row-value--scheduled",children:e.scheduled})]}),d.jsxs("div",{className:"kpi-pipeline-card__row kpi-pipeline-card__row--in-progress",children:[d.jsx("span",{className:"kpi-pipeline-card__row-label",children:"In Progress"}),d.jsx("span",{className:"kpi-pipeline-card__row-value kpi-pipeline-card__row-value--in-progress",children:e.inProgress})]}),d.jsxs("div",{className:"kpi-pipeline-card__row kpi-pipeline-card__row--completed",children:[d.jsx("span",{className:"kpi-pipeline-card__row-label",children:"Completed"}),d.jsx("span",{className:"kpi-pipeline-card__row-value kpi-pipeline-card__row-value--completed",children:e.completed})]}),e.canceled>0&&d.jsxs("div",{className:"kpi-pipeline-card__row",style:{borderLeftColor:"#6b7280"},children:[d.jsx("span",{className:"kpi-pipeline-card__row-label",children:"Canceled"}),d.jsx("span",{className:"kpi-pipeline-card__row-value",style:{color:"#6b7280"},children:e.canceled})]})]})]})}function dj(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t)}function hj(t){return t===null?"N/A":`${t.toFixed(1)}d`}function fj({metrics:t,monthName:e}){const{admin:n,photography:r,inspection:i}=t;return d.jsxs("div",{className:"kpi-team-grid",children:[d.jsxs("div",{className:"kpi-team-card",children:[d.jsxs("div",{className:"kpi-team-card__header",children:[d.jsx("div",{className:"kpi-team-card__icon kpi-team-card__icon--admin",children:"S"}),d.jsxs("div",{children:[d.jsx("h4",{className:"kpi-team-card__title",children:"Admin"}),d.jsx("p",{className:"kpi-team-card__subtitle",children:"Scheduling & Invoicing"})]})]}),d.jsxs("div",{className:"kpi-team-card__metrics",children:[d.jsxs("div",{className:"kpi-team-card__metric",children:[d.jsx("span",{className:"kpi-team-card__metric-label",children:"Claims Scheduled"}),d.jsx("span",{className:"kpi-team-card__metric-value",children:n.claimsScheduled})]}),d.jsxs("div",{className:"kpi-team-card__metric",children:[d.jsx("span",{className:"kpi-team-card__metric-label",children:"Claims Invoiced"}),d.jsx("span",{className:"kpi-team-card__metric-value",children:n.claimsInvoiced})]}),d.jsxs("div",{className:"kpi-team-card__metric",children:[d.jsx("span",{className:"kpi-team-card__metric-label",children:"Avg Scheduling Lag"}),d.jsx("span",{className:"kpi-team-card__metric-value",children:hj(n.avgSchedulingLag)})]})]})]}),d.jsxs("div",{className:"kpi-team-card",children:[d.jsxs("div",{className:"kpi-team-card__header",children:[d.jsx("div",{className:"kpi-team-card__icon kpi-team-card__icon--photo",children:"P"}),d.jsxs("div",{children:[d.jsx("h4",{className:"kpi-team-card__title",children:"Photography"}),d.jsx("p",{className:"kpi-team-card__subtitle",children:"Field Work"})]})]}),d.jsxs("div",{className:"kpi-team-card__metrics",children:[d.jsxs("div",{className:"kpi-team-card__metric",children:[d.jsx("span",{className:"kpi-team-card__metric-label",children:"Claims with Photos"}),d.jsx("span",{className:"kpi-team-card__metric-value",children:r.claimsWithPhotos})]}),d.jsxs("div",{className:"kpi-team-card__metric",children:[d.jsx("span",{className:"kpi-team-card__metric-label",children:"Total Photos"}),d.jsx("span",{className:"kpi-team-card__metric-value",children:r.totalPhotosUploaded})]}),d.jsxs("div",{className:"kpi-team-card__metric",children:[d.jsx("span",{className:"kpi-team-card__metric-label",children:"Avg Photos / Claim"}),d.jsx("span",{className:"kpi-team-card__metric-value",children:r.avgPhotosPerClaim.toFixed(1)})]})]})]}),d.jsxs("div",{className:"kpi-team-card",children:[d.jsxs("div",{className:"kpi-team-card__header",children:[d.jsx("div",{className:"kpi-team-card__icon kpi-team-card__icon--inspect",children:"I"}),d.jsxs("div",{children:[d.jsx("h4",{className:"kpi-team-card__title",children:"Inspection"}),d.jsx("p",{className:"kpi-team-card__subtitle",children:"Estimates & Supplements"})]})]}),d.jsxs("div",{className:"kpi-team-card__metrics",children:[d.jsxs("div",{className:"kpi-team-card__metric",children:[d.jsx("span",{className:"kpi-team-card__metric-label",children:"Claims Inspected"}),d.jsx("span",{className:"kpi-team-card__metric-value",children:i.claimsInspected})]}),d.jsxs("div",{className:"kpi-team-card__metric",children:[d.jsx("span",{className:"kpi-team-card__metric-label",children:"Supplements"}),d.jsx("span",{className:"kpi-team-card__metric-value",children:i.supplementsProcessed})]}),d.jsxs("div",{className:"kpi-team-card__metric",children:[d.jsx("span",{className:"kpi-team-card__metric-label",children:"Avg File Total"}),d.jsx("span",{className:"kpi-team-card__metric-value",children:dj(i.avgFileTotal)})]})]})]})]})}function pj({metrics:t,monthName:e}){const{weekdayDistribution:n,multiClaimDays:r,avgAppointmentSpacing:i,claimsPerWeek:o}=t,a=ij(n),l=mj(),c=o[l]??0,h=[n.monday,n.tuesday,n.wednesday,n.thursday,n.friday];a.showSaturday&&h.push(n.saturday),a.showSunday&&h.push(n.sunday);const m=Math.max(...h,1);return d.jsxs("div",{className:"kpi-efficiency-card",children:[d.jsxs("h4",{className:"kpi-efficiency-card__title",children:["Efficiency Snapshot (",e,")"]}),d.jsxs("div",{className:"kpi-efficiency-card__summary",children:[d.jsxs("div",{className:"kpi-efficiency-card__summary-item",children:[d.jsx("span",{className:"kpi-efficiency-card__summary-label",children:"This Week"}),d.jsx("span",{className:"kpi-efficiency-card__summary-value",children:c})]}),d.jsxs("div",{className:"kpi-efficiency-card__summary-item",children:[d.jsx("span",{className:"kpi-efficiency-card__summary-label",children:"Multi-Claim Days"}),d.jsx("span",{className:"kpi-efficiency-card__summary-value",children:r})]}),d.jsxs("div",{className:"kpi-efficiency-card__summary-item",children:[d.jsx("span",{className:"kpi-efficiency-card__summary-label",children:"Avg Spacing"}),d.jsx("span",{className:"kpi-efficiency-card__summary-value",children:i!==null?`${i}m`:"N/A"})]})]}),d.jsxs("div",{className:"kpi-efficiency-card__weekday-section",children:[d.jsx("div",{className:"kpi-efficiency-card__weekday-label",children:"Claims by Weekday"}),d.jsxs("div",{className:"kpi-efficiency-card__weekday-grid",children:[d.jsx(Zi,{label:"Mon",value:n.monday,max:m}),d.jsx(Zi,{label:"Tue",value:n.tuesday,max:m}),d.jsx(Zi,{label:"Wed",value:n.wednesday,max:m}),d.jsx(Zi,{label:"Thu",value:n.thursday,max:m}),d.jsx(Zi,{label:"Fri",value:n.friday,max:m}),a.showSaturday&&d.jsx(Zi,{label:"Sat",value:n.saturday,max:m}),a.showSunday&&d.jsx(Zi,{label:"Sun",value:n.sunday,max:m})]})]})]})}function Zi({label:t,value:e,max:n}){const r=n>0?Math.max(4,e/n*60):4;return d.jsxs("div",{className:"kpi-efficiency-card__weekday-bar",children:[d.jsx("div",{className:"kpi-efficiency-card__weekday-bar-fill",style:{height:`${r}px`}}),d.jsx("span",{className:"kpi-efficiency-card__weekday-bar-count",children:e}),d.jsx("span",{className:"kpi-efficiency-card__weekday-bar-label",children:t})]})}function mj(){const t=new Date,e=new Date(t.getFullYear(),0,1),n=t.getTime()-e.getTime();return Math.ceil((n+e.getDay()*864e5)/6048e5)}function gj(){const[t,e]=J.useState(!0),[n,r]=J.useState(null),[i,o]=J.useState(!1),[a,l]=J.useState(null),[c,h]=J.useState(null),[m,f]=J.useState(null),g=J.useCallback(async()=>{try{const S=new Date,w=sp(_P(S,1)),b=op(S),[k,T]=await Promise.all([oj(w,b),sj(w,b)]),I=ej(k,S);l(I);const R=S.getMonth()+1,j=S.getFullYear(),P=tj(k,j,R,T);h(P);const A=nj(k,j,R);f(A),r(null)}catch(S){console.error("Error loading KPI data:",S),r(S.message||"Failed to load KPI data")}finally{e(!1),o(!1)}},[]);J.useEffect(()=>{g()},[g]);const y=()=>{o(!0),g()};if(t)return d.jsx("div",{className:"kpi-dashboard__loading",children:"Loading KPI Dashboard..."});if(n)return d.jsxs("div",{className:"kpi-dashboard__error",children:[d.jsxs("div",{children:["Error: ",n]}),d.jsx("button",{className:"kpi-dashboard__error-retry",onClick:y,children:"Retry"})]});if(!a||!c||!m)return d.jsxs("div",{className:"kpi-dashboard__error",children:[d.jsx("div",{children:"No data available"}),d.jsx("button",{className:"kpi-dashboard__error-retry",onClick:y,children:"Retry"})]});const{lastMonth:v,currentMTD:_}=a;return d.jsxs("div",{className:"kpi-dashboard",children:[d.jsxs("div",{className:"kpi-dashboard__header",children:[d.jsxs("div",{className:"kpi-dashboard__header-left",children:[d.jsx(_t,{to:"/",className:"kpi-dashboard__home-link",children:" Home"}),d.jsx("h1",{className:"kpi-dashboard__title",children:"KPI Dashboard"})]}),d.jsxs("div",{children:[d.jsxs("span",{className:"kpi-dashboard__period-label",children:[v.monthName," vs ",_.monthName," MTD"]}),d.jsx("button",{className:"kpi-dashboard__refresh-btn",onClick:y,disabled:i,style:{marginLeft:"16px"},children:i?"Refreshing...":"Refresh"})]})]}),d.jsxs("section",{className:"kpi-dashboard__section",children:[d.jsxs("h2",{className:"kpi-dashboard__section-header",children:["Monthly Comparison: ",v.monthName," vs ",_.monthName," (MTD)"]}),d.jsx(aj,{comparison:a})]}),d.jsxs("div",{className:"kpi-dashboard__two-col",children:[d.jsx(uj,{snapshot:_}),d.jsx(cj,{snapshot:_})]}),d.jsxs("section",{className:"kpi-dashboard__section",children:[d.jsxs("h2",{className:"kpi-dashboard__section-header",children:["Team Contributions (",_.monthName," MTD)"]}),d.jsx(fj,{metrics:c,monthName:_.monthName})]}),d.jsx("section",{className:"kpi-dashboard__section",children:d.jsx(pj,{metrics:m,monthName:_.monthName})})]})}function yj(){const[t]=Vf(),[e,n]=J.useState([]),[r,i]=J.useState([]),[o,a]=J.useState(!0),[l,c]=J.useState(null),[h,m]=J.useState(!1),[f,g]=J.useState(!1),[y,v]=J.useState(!1),[_,S]=J.useState("ALL"),[w,b]=J.useState(null),[k,T]=J.useState(t.get("view")==="calendar"),[I,R]=J.useState(""),j=ap(),P=async()=>{try{console.log("Initializing authorization for MyClaims component..."),await hc(ze),m(!0),console.log("Authorization initialized successfully")}catch(D){console.error("Authorization initialization failed:",D),c(D.message),a(!1)}},A=async()=>{if(!h){console.log("Authorization not ready, skipping load");return}try{a(!0),c(null);const D=Zn();if(!D||!D.isInitialized)throw new Error("Authorization not properly initialized");const z=D.getCurrentUser();console.log(`Loading my claims for ${z==null?void 0:z.role}: ${z==null?void 0:z.fullName}`);let $=ze.from("claims").select("id,claim_number,customer_name,status,appointment_start,appointment_end,vin,vehicle_year,vehicle_make,vehicle_model,address_line1,city,state,zip,firm,pay_amount,file_total,profiles:assigned_to(full_name)");$=D.scopedClaimsQuery($),$=$.gte("created_at","2025-12-01"),$=$.order("appointment_start");const{data:Z,error:re}=await $;if(re){console.error("Error loading my claims:",re);const ee=D.handleAuthError(re);if(ee.shouldRedirect){c(`${ee.message} Redirecting to login...`),setTimeout(()=>{window.location.href="/CipherDispatch/"},2e3);return}throw new Error(ee.message)}console.log(`Loaded ${(Z==null?void 0:Z.length)||0} my claims for ${z==null?void 0:z.role}`),i(Z||[]),F(Z||[])}catch(D){console.error("Error in load function:",D),c(D.message)}finally{a(!1)}},F=D=>{let z=[...D];if(_!=="ALL"&&(z=z.filter($=>$.status===_)),f?z=z.filter($=>$.status==="COMPLETED"):z=z.filter($=>$.status===null||$.status==="SCHEDULED"||$.status==="IN_PROGRESS"),y&&!f){const $=new Date().toISOString().split("T")[0];z=z.filter(Z=>Z.appointment_start?new Date(Z.appointment_start).toISOString().split("T")[0]===$:!1)}if(I.trim()){const $=I.toLowerCase();z=z.filter(Z=>{var re,ee,Q;return((re=Z.claim_number)==null?void 0:re.toLowerCase().includes($))||((ee=Z.customer_name)==null?void 0:ee.toLowerCase().includes($))||((Q=Z.firm)==null?void 0:Q.toLowerCase().includes($))})}n(z)};J.useEffect(()=>{P()},[]),J.useEffect(()=>{if(h){A();const D=Zn();if(D!=null&&D.isInitialized){const z=ze.channel("my-claims").on("postgres_changes",{event:"*",schema:"public",table:"claims"},()=>{console.log("Real-time update received, reloading my claims..."),A()}).subscribe();return()=>{ze.removeChannel(z)}}}},[h]),J.useEffect(()=>{r.length>0&&F(r)},[f,y,_,I,r]);const K=(D,z)=>{b(z.id);const $={id:z.id,claimNumber:z.claim_number,firmName:"",customerName:z.customer_name,addressLine1:z.address_line1||"",city:z.city||"",state:z.state||"",zip:z.zip||"",lat:null,lng:null,vin:z.vin||"",vehicleYear:z.vehicle_year||null,vehicleMake:z.vehicle_make||"",vehicleModel:z.vehicle_model||"",status:z.status||"",appointmentStart:z.appointment_start||null},Z=JSON.stringify($);D.dataTransfer.setData("application/json",Z),D.dataTransfer.setData("text/plain",Z),D.dataTransfer.effectAllowed="copy"},N=()=>{b(null)},W=()=>{const D={unassigned:0,assigned:0,inProgress:0,completed:0,canceled:0};return r.forEach(z=>{z.status===null?D.unassigned++:z.status==="SCHEDULED"?D.assigned++:z.status==="IN_PROGRESS"?D.inProgress++:z.status==="COMPLETED"?D.completed++:z.status==="CANCELED"&&D.canceled++}),D},E=D=>{if(!D)return"No Appointment";const z=new Date,$=new Date(D),Z=new Date(z.getFullYear(),z.getMonth(),z.getDate()),re=new Date(Z);re.setDate(re.getDate()+1);const ee=new Date(Z);ee.setDate(ee.getDate()+7);const Q=new Date($.getFullYear(),$.getMonth(),$.getDate());return Q<Z?"Overdue":Q.getTime()===Z.getTime()?"Today":Q.getTime()===re.getTime()?"Tomorrow":Q<ee?"This Week":"Later"},Y=()=>{const D={Overdue:[],Today:[],Tomorrow:[],"This Week":[],Later:[],"No Appointment":[]};return e.forEach(z=>{const $=E(z.appointment_start);D[$].push(z)}),D},H=W(),M=Y();if(o)return d.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a202c 0%, #2d3748 100%)",padding:16,display:"flex",alignItems:"center",justifyContent:"center"},children:d.jsx("div",{style:{color:"#e2e8f0",fontSize:"18px"},children:"Loading your claims..."})});if(l)return d.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a202c 0%, #2d3748 100%)",padding:16,display:"flex",alignItems:"center",justifyContent:"center"},children:d.jsxs("div",{style:{color:"#ef4444",fontSize:"18px",textAlign:"center",background:"#2d3748",padding:"24px",borderRadius:"8px",border:"2px solid #ef4444"},children:[d.jsx("h3",{children:"Unable to load your claims"}),d.jsx("p",{children:l}),d.jsx("button",{onClick:()=>window.location.reload(),style:{background:"#ef4444",color:"white",border:"none",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",marginTop:"12px"},children:"Retry"})]})});const B=D=>d.jsxs(_t,{to:`/claim/${D.id}`,draggable:!0,onDragStart:z=>K(z,D),onDragEnd:N,style:{border:"1px solid #4a5568",borderRadius:8,padding:16,background:"#2d3748",boxShadow:"0 2px 4px rgba(0,0,0,0.5)",textDecoration:"none",color:"#e2e8f0",transition:"transform 0.2s, box-shadow 0.2s, opacity 0.2s",cursor:w===D.id?"grabbing":"pointer",opacity:w===D.id?.5:1},onMouseOver:z=>{w!==D.id&&(z.currentTarget.style.transform="translateY(-4px)",z.currentTarget.style.boxShadow="0 6px 12px rgba(0,0,0,0.7)")},onMouseOut:z=>{w!==D.id&&(z.currentTarget.style.transform="translateY(0)",z.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.5)")},children:[d.jsxs("div",{style:{marginBottom:12},children:[d.jsxs("div",{style:{fontSize:20,fontWeight:"bold",marginBottom:8,color:"#e2e8f0"},children:["#",D.claim_number]}),d.jsx("div",{style:{display:"inline-block",padding:"4px 12px",borderRadius:4,fontSize:11,fontWeight:"bold",background:D.status==="COMPLETED"?"#4CAF50":D.status==="IN_PROGRESS"?"#FF9800":D.status==="SCHEDULED"?"#2196F3":"#9E9E9E",color:"white"},children:D.status||"ASSIGNED"})]}),d.jsx("div",{style:{fontSize:16,marginBottom:12,paddingBottom:12,borderBottom:"1px solid #4a5568"},children:d.jsxs("div",{style:{color:"#e2e8f0",marginBottom:4},children:[d.jsx("strong",{children:"Customer:"})," ",D.customer_name]})}),d.jsxs("div",{style:{fontSize:15,marginBottom:12},children:[d.jsx("div",{style:{color:"#e2e8f0",fontWeight:"bold",marginBottom:6},children:" Address"}),D.address_line1?d.jsxs("div",{style:{color:"#cbd5e0",fontSize:14},children:[D.address_line1,", ",D.city,", ",D.state," ",D.zip]}):d.jsx("div",{style:{color:"#718096",fontSize:12,fontStyle:"italic"},children:"No address on file"})]}),d.jsxs("div",{style:{fontSize:15,marginBottom:12},children:[d.jsx("div",{style:{color:"#e2e8f0",fontWeight:"bold",marginBottom:6},children:" Appointment"}),D.appointment_start?d.jsx("div",{style:{color:"#cbd5e0",fontSize:14},children:new Date(D.appointment_start).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})}):d.jsx("div",{style:{color:"#718096",fontSize:12,fontStyle:"italic"},children:"No appointment scheduled"})]}),d.jsxs("div",{style:{fontSize:15},children:[d.jsx("div",{style:{color:"#e2e8f0",fontWeight:"bold",marginBottom:6},children:" Vehicle"}),D.vehicle_year||D.vehicle_make||D.vehicle_model?d.jsxs("div",{style:{color:"#cbd5e0",fontSize:14},children:[D.vehicle_year&&`${D.vehicle_year} `,D.vehicle_make&&`${D.vehicle_make} `,D.vehicle_model&&D.vehicle_model]}):d.jsx("div",{style:{color:"#718096",fontSize:12,fontStyle:"italic"},children:"No vehicle info"})]})]},D.id);return d.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a202c 0%, #2d3748 100%)",padding:16},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[d.jsx(_t,{to:"/",style:{padding:"8px 16px",background:"#4a5568",color:"white",textDecoration:"none",borderRadius:4,fontWeight:"bold",fontSize:"15px"},children:" Home"}),d.jsx("h3",{style:{margin:0,color:"#e2e8f0",fontSize:"22px",fontWeight:"bold"},children:"My Claims"}),!k&&d.jsx("input",{type:"text",placeholder:" Search by claim #, customer, or firm...",value:I,onChange:D=>R(D.target.value),style:{padding:"8px 16px",background:"#1a202c",border:"2px solid #4a5568",borderRadius:"6px",color:"#e2e8f0",fontSize:"14px",width:"300px",marginLeft:"16px",transition:"border-color 0.2s"},onFocus:D=>D.currentTarget.style.borderColor="#667eea",onBlur:D=>D.currentTarget.style.borderColor="#4a5568"})]}),d.jsxs("div",{style:{display:"flex",gap:8},children:[d.jsx("button",{onClick:()=>T(!k),style:{padding:"8px 16px",background:k?"#667eea":"#4a5568",color:"white",border:"none",borderRadius:4,fontWeight:"bold",cursor:"pointer",fontSize:"15px"},children:k?" List View":" Calendar View"}),!f&&!k&&d.jsx("button",{onClick:()=>v(!y),style:{padding:"8px 16px",background:y?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"#4a5568",color:"white",border:y?"2px solid #818cf8":"2px solid transparent",borderRadius:"6px",fontWeight:"bold",cursor:"pointer",fontSize:"15px",transition:"all 0.2s",boxShadow:y?"0 2px 8px rgba(102, 126, 234, 0.4)":"none"},onMouseEnter:D=>{y||(D.currentTarget.style.background="#5a6c7d")},onMouseLeave:D=>{y||(D.currentTarget.style.background="#4a5568")},children:y?" Today's Claims Only":" Filter to Today"}),!k&&d.jsx("button",{onClick:()=>{g(!f),f||(v(!1),S("ALL"))},style:{padding:"8px 16px",background:f?"#4a5568":"#10b981",color:"white",border:"none",borderRadius:4,fontWeight:"bold",cursor:"pointer",fontSize:"15px"},children:f?" View Active Claims":" View Completed"})]})]}),k?j?d.jsx(kw,{claims:r,onClaimUpdate:A}):d.jsx(pw,{claims:r,onClaimUpdate:A}):j?d.jsx(Ew,{claims:e}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{style:{display:"flex",gap:12,marginBottom:24,flexWrap:"wrap"},children:[d.jsxs("button",{onClick:()=>{S("ALL"),g(!1)},style:{padding:"12px 20px",background:_==="ALL"&&!f?"#667eea":"#374151",color:"white",border:_==="ALL"&&!f?"2px solid #818cf8":"2px solid transparent",borderRadius:8,fontWeight:"bold",cursor:"pointer",fontSize:"14px",display:"flex",flexDirection:"column",alignItems:"center",transition:"all 0.2s"},children:[d.jsx("div",{style:{fontSize:"18px",marginBottom:4},children:H.unassigned+H.assigned+H.inProgress}),d.jsx("div",{style:{fontSize:"12px",opacity:.9},children:"All Active"})]}),d.jsxs("button",{onClick:()=>{S("SCHEDULED"),g(!1)},style:{padding:"12px 20px",background:_==="SCHEDULED"?"#2196F3":"#374151",color:"white",border:_==="SCHEDULED"?"2px solid #64b5f6":"2px solid transparent",borderRadius:8,fontWeight:"bold",cursor:"pointer",fontSize:"14px",display:"flex",flexDirection:"column",alignItems:"center",transition:"all 0.2s"},children:[d.jsx("div",{style:{fontSize:"18px",marginBottom:4},children:H.assigned}),d.jsx("div",{style:{fontSize:"12px",opacity:.9},children:"Assigned"})]}),d.jsxs("button",{onClick:()=>{S("IN_PROGRESS"),g(!1)},style:{padding:"12px 20px",background:_==="IN_PROGRESS"?"#FF9800":"#374151",color:"white",border:_==="IN_PROGRESS"?"2px solid #ffb74d":"2px solid transparent",borderRadius:8,fontWeight:"bold",cursor:"pointer",fontSize:"14px",display:"flex",flexDirection:"column",alignItems:"center",transition:"all 0.2s"},children:[d.jsx("div",{style:{fontSize:"18px",marginBottom:4},children:H.inProgress}),d.jsx("div",{style:{fontSize:"12px",opacity:.9},children:"In Progress"})]}),d.jsxs("button",{onClick:()=>{S("COMPLETED"),g(!0)},style:{padding:"12px 20px",background:_==="COMPLETED"&&f?"#4CAF50":"#374151",color:"white",border:_==="COMPLETED"&&f?"2px solid #81c784":"2px solid transparent",borderRadius:8,fontWeight:"bold",cursor:"pointer",fontSize:"14px",display:"flex",flexDirection:"column",alignItems:"center",transition:"all 0.2s"},children:[d.jsx("div",{style:{fontSize:"18px",marginBottom:4},children:H.completed}),d.jsx("div",{style:{fontSize:"12px",opacity:.9},children:"Completed"})]}),d.jsxs("button",{onClick:()=>{S("CANCELED"),g(!0)},style:{padding:"12px 20px",background:_==="CANCELED"&&f?"#EF4444":"#374151",color:"white",border:_==="CANCELED"&&f?"2px solid #f87171":"2px solid transparent",borderRadius:8,fontWeight:"bold",cursor:"pointer",fontSize:"14px",display:"flex",flexDirection:"column",alignItems:"center",transition:"all 0.2s"},children:[d.jsx("div",{style:{fontSize:"18px",marginBottom:4},children:H.canceled}),d.jsx("div",{style:{fontSize:"12px",opacity:.9},children:"Canceled"})]})]}),e.length===0?d.jsx("div",{style:{textAlign:"center",padding:48,color:"#a0aec0"},children:"No claims found matching your filters."}):d.jsx(d.Fragment,{children:Object.entries(M).map(([D,z])=>z.length===0?null:d.jsxs("div",{style:{marginBottom:32},children:[d.jsxs("div",{style:{fontSize:"18px",fontWeight:"bold",color:"#e2e8f0",marginBottom:16,paddingBottom:8,borderBottom:"2px solid #4a5568",display:"flex",alignItems:"center",gap:8},children:[d.jsxs("span",{children:[D==="Overdue"&&"",D==="Today"&&"",D==="Tomorrow"&&"",D==="This Week"&&"",D==="Later"&&"",D==="No Appointment"&&""]}),d.jsx("span",{children:D}),d.jsxs("span",{style:{fontSize:"14px",opacity:.7,fontWeight:"normal"},children:["(",z.length,")"]})]}),d.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:16},children:z.map(B)})]},D))})]})]})}async function _j(t,e){const{data:n,error:r}=await ze.from("routes").select("id, user_id, date, status, total_miles, start_address, end_address").eq("id",t).single();if(r||!n)throw new Error("Route not found");const i=n;if(i.user_id!==e)throw new Error("Forbidden: You do not own this route");if(i.status==="closed")throw new Error("Route is already closed");if(i.total_miles==null||i.total_miles<0)throw new Error("Route mileage data is missing. Complete route optimization first.");if(!i.start_address||!i.end_address)throw new Error("Route address data is missing. Complete route optimization first.");const{data:o,error:a}=await ze.from("claims").select("id").eq("route_id",t).eq("status","COMPLETED");if(a)throw new Error(`Failed to fetch claims: ${a.message}`);const l=(o==null?void 0:o.map(g=>g.id))??[];await ze.from("mileage_logs").delete().eq("route_id",t);const c={route_id:t,user_id:e,log_date:i.date,start_address:i.start_address,end_address:i.end_address,total_miles:i.total_miles,claim_count:l.length,claim_ids:l},{data:h,error:m}=await ze.from("mileage_logs").insert(c).select("id").single();if(m)throw m.code==="23505"?new Error("Route already has an immutable mileage log. Contact admin for corrections."):new Error(`Failed to create mileage log: ${m.message}`);const{error:f}=await ze.from("routes").update({status:"closed"}).eq("id",t);if(f)throw new Error(`Mileage log created but route status update failed. Retry closeRoute() to complete. Error: ${f.message}`);return{success:!0,totalMiles:i.total_miles,claimCount:l.length,mileageLogId:h.id}}function vj(){const[t,e]=J.useState([]),[n,r]=J.useState(!0),[i,o]=J.useState(null),[a,l]=J.useState(null),[c,h]=J.useState(null),[m,f]=J.useState(null);J.useEffect(()=>{g()},[]);const g=async()=>{try{r(!0),o(null);const{data:{user:S}}=await ze.auth.getUser();if(!S){o("Not authenticated"),r(!1);return}l(S.id);const{data:w,error:b}=await ze.from("routes").select("id, date, status, total_miles, start_address, end_address, created_at").eq("user_id",S.id).order("date",{ascending:!1});if(b)throw b;e(w??[])}catch(S){console.error("Error loading routes:",S),o(S.message)}finally{r(!1)}},y=async S=>{if(a)try{h(S),o(null),f(null);const w=await _j(S,a);e(b=>b.map(k=>k.id===S?{...k,status:"closed"}:k)),f(`Route closed successfully. ${w.totalMiles} miles logged for ${w.claimCount} claims.`),setTimeout(()=>f(null),5e3)}catch(w){console.error("Error closing route:",w),o(w.message)}finally{h(null)}},v=S=>new Date(S+"T00:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"}),_=S=>{const w={draft:{bg:"#4a5568",text:"#e2e8f0"},active:{bg:"#2563eb",text:"#ffffff"},closed:{bg:"#059669",text:"#ffffff"}},b=w[S]||w.draft;return d.jsx("span",{style:{padding:"4px 12px",borderRadius:12,fontSize:12,fontWeight:600,textTransform:"uppercase",background:b.bg,color:b.text},children:S})};return n?d.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a202c 0%, #2d3748 100%)",padding:32},children:d.jsx("div",{style:{maxWidth:800,margin:"0 auto",color:"#e2e8f0"},children:"Loading routes..."})}):d.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a202c 0%, #2d3748 100%)",padding:32},children:d.jsxs("div",{style:{maxWidth:800,margin:"0 auto"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[d.jsx("h1",{style:{margin:0,color:"#e2e8f0"},children:"My Routes"}),d.jsx(_t,{to:"/",style:{padding:"10px 20px",background:"#4a5568",color:"#e2e8f0",border:"none",borderRadius:6,textDecoration:"none",fontWeight:500},children:"Back"})]}),t.length>0&&d.jsx("div",{style:{padding:"12px 16px",marginBottom:16,background:"#1e293b",border:"1px solid #334155",borderRadius:8,color:"#94a3b8",fontSize:14},children:(()=>{const S=t.filter(k=>k.status==="active"),w=S.filter(k=>k.total_miles!=null),b=t.filter(k=>k.status==="closed");return w.length>0?d.jsxs("span",{children:[d.jsx("span",{style:{color:"#10b981",fontWeight:600},children:w.length})," ","route",w.length!==1?"s":""," ready to close",b.length>0&&d.jsxs("span",{children:["  ",d.jsx("span",{style:{color:"#6ee7b7"},children:b.length})," already logged"]})]}):S.length>0?d.jsxs("span",{children:[S.length," active route",S.length!==1?"s":""," awaiting mileage data from route optimization"]}):b.length>0?d.jsxs("span",{children:["All routes closed  ",d.jsx("span",{style:{color:"#6ee7b7"},children:b.length})," mileage log",b.length!==1?"s":""," recorded"]}):null})()}),m&&d.jsx("div",{style:{padding:16,marginBottom:16,background:"#065f46",border:"1px solid #059669",borderRadius:8,color:"#d1fae5"},children:m}),i&&d.jsx("div",{style:{padding:16,marginBottom:16,background:"#7f1d1d",border:"1px solid #ef4444",borderRadius:8,color:"#fecaca"},children:i}),t.length===0?d.jsx("div",{style:{background:"#2d3748",border:"1px solid #4a5568",borderRadius:12,padding:32,textAlign:"center",color:"#a0aec0"},children:"No routes found. Routes are created during route optimization."}):d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:16},children:t.map(S=>d.jsxs("div",{style:{background:"#2d3748",border:"1px solid #4a5568",borderRadius:12,padding:20,boxShadow:"0 4px 6px rgba(0,0,0,0.5)"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:12},children:[d.jsxs("div",{children:[d.jsx("div",{style:{color:"#e2e8f0",fontSize:18,fontWeight:600,marginBottom:4},children:v(S.date)}),_(S.status)]}),d.jsx("div",{style:{textAlign:"right",color:"#a0aec0",fontSize:14},children:S.total_miles!=null?d.jsxs("span",{style:{color:"#10b981",fontWeight:600,fontSize:20},children:[S.total_miles.toFixed(1)," mi"]}):d.jsx("span",{children:"No mileage data"})})]}),(S.start_address||S.end_address)&&d.jsxs("div",{style:{color:"#a0aec0",fontSize:14,marginBottom:12},children:[S.start_address&&d.jsxs("div",{children:["From: ",S.start_address]}),S.end_address&&d.jsxs("div",{children:["To: ",S.end_address]})]}),S.status==="active"&&d.jsx("button",{onClick:()=>y(S.id),disabled:c===S.id||S.total_miles==null,style:{width:"100%",padding:"12px 24px",background:c===S.id?"#4a5568":"#059669",color:"white",border:"none",borderRadius:8,fontWeight:600,cursor:c===S.id||S.total_miles==null?"not-allowed":"pointer",opacity:S.total_miles==null?.5:1,transition:"background 0.2s"},onMouseOver:w=>{c!==S.id&&S.total_miles!=null&&(w.currentTarget.style.background="#047857")},onMouseOut:w=>{c!==S.id&&(w.currentTarget.style.background="#059669")},children:c===S.id?"Closing Route...":S.total_miles==null?"Complete route optimization first":"Close Route & Log Mileage"}),S.status==="closed"&&d.jsx("div",{style:{padding:"12px 24px",background:"#1a3d2e",border:"1px solid #059669",borderRadius:8,color:"#6ee7b7",textAlign:"center",fontSize:14},children:"Mileage logged"})]},S.id))})]})})}function wj(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}function Lw(t,e){return new Promise(function(n,r){let i;return xj(t).then(function(o){try{return i=o,n(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(a){return r(a)}},r)})}const xj=t=>new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:i}})=>{const o=new DataView(i);let a=0;if(o.getUint16(a)!==65496)return n("not a valid JPEG");for(a+=2;;){const l=o.getUint16(a);if(l===65498)break;const c=o.getUint16(a+2);if(l===65505&&o.getUint32(a+4)===1165519206){const h=a+10;let m;switch(o.getUint16(h)){case 18761:m=!0;break;case 19789:m=!1;break;default:return n("TIFF header contains invalid endian")}if(o.getUint16(h+2,m)!==42)return n("TIFF header contains invalid version");const f=o.getUint32(h+4,m),g=h+f+2+12*o.getUint16(h+f,m);for(let y=h+f+2;y<g;y+=12)if(o.getUint16(y,m)==274){if(o.getUint16(y+2,m)!==3)return n("Orientation data type is invalid");if(o.getUint32(y+4,m)!==1)return n("Orientation data count is invalid");o.setUint16(y+8,1,m);break}return e(i.slice(a,a+2+c))}a+=2+c}return e(new Blob)}),r.readAsArrayBuffer(t)});var Bu={},bj={get exports(){return Bu},set exports(t){Bu=t}};(function(t){var e,n,r={};bj.exports=r,r.parse=function(i,o){for(var a=r.bin.readUshort,l=r.bin.readUint,c=0,h={},m=new Uint8Array(i),f=m.length-4;l(m,f)!=101010256;)f--;c=f,c+=4;var g=a(m,c+=4);a(m,c+=2);var y=l(m,c+=2),v=l(m,c+=4);c+=4,c=v;for(var _=0;_<g;_++){l(m,c),c+=4,c+=4,c+=4,l(m,c+=4),y=l(m,c+=4);var S=l(m,c+=4),w=a(m,c+=4),b=a(m,c+2),k=a(m,c+4);c+=6;var T=l(m,c+=8);c+=4,c+=w+b+k,r._readLocal(m,T,h,y,S,o)}return h},r._readLocal=function(i,o,a,l,c,h){var m=r.bin.readUshort,f=r.bin.readUint;f(i,o),m(i,o+=4),m(i,o+=2);var g=m(i,o+=2);f(i,o+=2),f(i,o+=4),o+=4;var y=m(i,o+=8),v=m(i,o+=2);o+=2;var _=r.bin.readUTF8(i,o,y);if(o+=y,o+=v,h)a[_]={size:c,csize:l};else{var S=new Uint8Array(i.buffer,o);if(g==0)a[_]=new Uint8Array(S.buffer.slice(o,o+l));else{if(g!=8)throw"unknown compression method: "+g;var w=new Uint8Array(c);r.inflateRaw(S,w),a[_]=w}}},r.inflateRaw=function(i,o){return r.F.inflate(i,o)},r.inflate=function(i,o){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),o)},r.deflate=function(i,o){o==null&&(o={level:6});var a=0,l=new Uint8Array(50+Math.floor(1.1*i.length));l[a]=120,l[a+1]=156,a+=2,a=r.F.deflateRaw(i,l,a,o.level);var c=r.adler(i,0,i.length);return l[a+0]=c>>>24&255,l[a+1]=c>>>16&255,l[a+2]=c>>>8&255,l[a+3]=c>>>0&255,new Uint8Array(l.buffer,0,a+4)},r.deflateRaw=function(i,o){o==null&&(o={level:6});var a=new Uint8Array(50+Math.floor(1.1*i.length)),l=r.F.deflateRaw(i,a,l,o.level);return new Uint8Array(a.buffer,0,l)},r.encode=function(i,o){o==null&&(o=!1);var a=0,l=r.bin.writeUint,c=r.bin.writeUshort,h={};for(var m in i){var f=!r._noNeed(m)&&!o,g=i[m],y=r.crc.crc(g,0,g.length);h[m]={cpr:f,usize:g.length,crc:y,file:f?r.deflateRaw(g):g}}for(var m in h)a+=h[m].file.length+30+46+2*r.bin.sizeUTF8(m);a+=22;var v=new Uint8Array(a),_=0,S=[];for(var m in h){var w=h[m];S.push(_),_=r._writeHeader(v,_,m,w,0)}var b=0,k=_;for(var m in h)w=h[m],S.push(_),_=r._writeHeader(v,_,m,w,1,S[b++]);var T=_-k;return l(v,_,101010256),_+=4,c(v,_+=4,b),c(v,_+=2,b),l(v,_+=2,T),l(v,_+=4,k),_+=4,_+=2,v.buffer},r._noNeed=function(i){var o=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(o)!=-1},r._writeHeader=function(i,o,a,l,c,h){var m=r.bin.writeUint,f=r.bin.writeUshort,g=l.file;return m(i,o,c==0?67324752:33639248),o+=4,c==1&&(o+=2),f(i,o,20),f(i,o+=2,0),f(i,o+=2,l.cpr?8:0),m(i,o+=2,0),m(i,o+=4,l.crc),m(i,o+=4,g.length),m(i,o+=4,l.usize),f(i,o+=4,r.bin.sizeUTF8(a)),f(i,o+=2,0),o+=2,c==1&&(o+=2,o+=2,m(i,o+=6,h),o+=4),o+=r.bin.writeUTF8(i,o,a),c==0&&(i.set(g,o),o+=g.length),o},r.crc={table:function(){for(var i=new Uint32Array(256),o=0;o<256;o++){for(var a=o,l=0;l<8;l++)1&a?a=3988292384^a>>>1:a>>>=1;i[o]=a}return i}(),update:function(i,o,a,l){for(var c=0;c<l;c++)i=r.crc.table[255&(i^o[a+c])]^i>>>8;return i},crc:function(i,o,a){return 4294967295^r.crc.update(4294967295,i,o,a)}},r.adler=function(i,o,a){for(var l=1,c=0,h=o,m=o+a;h<m;){for(var f=Math.min(h+5552,m);h<f;)c+=l+=i[h++];l%=65521,c%=65521}return c<<16|l},r.bin={readUshort:function(i,o){return i[o]|i[o+1]<<8},writeUshort:function(i,o,a){i[o]=255&a,i[o+1]=a>>8&255},readUint:function(i,o){return 16777216*i[o+3]+(i[o+2]<<16|i[o+1]<<8|i[o])},writeUint:function(i,o,a){i[o]=255&a,i[o+1]=a>>8&255,i[o+2]=a>>16&255,i[o+3]=a>>24&255},readASCII:function(i,o,a){for(var l="",c=0;c<a;c++)l+=String.fromCharCode(i[o+c]);return l},writeASCII:function(i,o,a){for(var l=0;l<a.length;l++)i[o+l]=a.charCodeAt(l)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,o,a){for(var l,c="",h=0;h<a;h++)c+="%"+r.bin.pad(i[o+h].toString(16));try{l=decodeURIComponent(c)}catch{return r.bin.readASCII(i,o,a)}return l},writeUTF8:function(i,o,a){for(var l=a.length,c=0,h=0;h<l;h++){var m=a.charCodeAt(h);if(!(4294967168&m))i[o+c]=m,c++;else if(!(4294965248&m))i[o+c]=192|m>>6,i[o+c+1]=128|m>>0&63,c+=2;else if(!(4294901760&m))i[o+c]=224|m>>12,i[o+c+1]=128|m>>6&63,i[o+c+2]=128|m>>0&63,c+=3;else{if(4292870144&m)throw"e";i[o+c]=240|m>>18,i[o+c+1]=128|m>>12&63,i[o+c+2]=128|m>>6&63,i[o+c+3]=128|m>>0&63,c+=4}}return c},sizeUTF8:function(i){for(var o=i.length,a=0,l=0;l<o;l++){var c=i.charCodeAt(l);if(!(4294967168&c))a++;else if(!(4294965248&c))a+=2;else if(!(4294901760&c))a+=3;else{if(4292870144&c)throw"e";a+=4}}return a}},r.F={},r.F.deflateRaw=function(i,o,a,l){var c=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][l],h=r.F.U,m=r.F._goodIndex;r.F._hash;var f=r.F._putsE,g=0,y=a<<3,v=0,_=i.length;if(l==0){for(;g<_;)f(o,y,g+(K=Math.min(65535,_-g))==_?1:0),y=r.F._copyExact(i,g,K,o,y+8),g+=K;return y>>>3}var S=h.lits,w=h.strt,b=h.prev,k=0,T=0,I=0,R=0,j=0,P=0;for(_>2&&(w[P=r.F._hash(i,0)]=0),g=0;g<_;g++){if(j=P,g+1<_-2){P=r.F._hash(i,g+1);var A=g+1&32767;b[A]=w[P],w[P]=A}if(v<=g){(k>14e3||T>26697)&&_-g>100&&(v<g&&(S[k]=g-v,k+=2,v=g),y=r.F._writeBlock(g==_-1||v==_?1:0,S,k,R,i,I,g-I,o,y),k=T=R=0,I=g);var F=0;g<_-2&&(F=r.F._bestMatch(i,g,b,j,Math.min(c[2],_-g),c[3]));var K=F>>>16,N=65535&F;if(F!=0){N=65535&F;var W=m(K=F>>>16,h.of0);h.lhst[257+W]++;var E=m(N,h.df0);h.dhst[E]++,R+=h.exb[W]+h.dxb[E],S[k]=K<<23|g-v,S[k+1]=N<<16|W<<8|E,k+=2,v=g+K}else h.lhst[i[g]]++;T++}}for(I==g&&i.length!=0||(v<g&&(S[k]=g-v,k+=2,v=g),y=r.F._writeBlock(1,S,k,R,i,I,g-I,o,y),k=0,T=0,k=T=R=0,I=g);7&y;)y++;return y>>>3},r.F._bestMatch=function(i,o,a,l,c,h){var m=32767&o,f=a[m],g=m-f+32768&32767;if(f==m||l!=r.F._hash(i,o-g))return 0;for(var y=0,v=0,_=Math.min(32767,o);g<=_&&--h!=0&&f!=m;){if(y==0||i[o+y]==i[o+y-g]){var S=r.F._howLong(i,o,g);if(S>y){if(v=g,(y=S)>=c)break;g+2<S&&(S=g+2);for(var w=0,b=0;b<S-2;b++){var k=o-g+b+32768&32767,T=k-a[k]+32768&32767;T>w&&(w=T,f=k)}}}g+=(m=f)-(f=a[m])+32768&32767}return y<<16|v},r.F._howLong=function(i,o,a){if(i[o]!=i[o-a]||i[o+1]!=i[o+1-a]||i[o+2]!=i[o+2-a])return 0;var l=o,c=Math.min(i.length,o+258);for(o+=3;o<c&&i[o]==i[o-a];)o++;return o-l},r.F._hash=function(i,o){return(i[o]<<8|i[o+1])+(i[o+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,o,a,l,c,h,m,f,g){var y,v,_,S,w,b,k,T,I,R=r.F.U,j=r.F._putsF,P=r.F._putsE;R.lhst[256]++,v=(y=r.F.getTrees())[0],_=y[1],S=y[2],w=y[3],b=y[4],k=y[5],T=y[6],I=y[7];var A=32+(g+3&7?8-(g+3&7):0)+(m<<3),F=l+r.F.contSize(R.fltree,R.lhst)+r.F.contSize(R.fdtree,R.dhst),K=l+r.F.contSize(R.ltree,R.lhst)+r.F.contSize(R.dtree,R.dhst);K+=14+3*k+r.F.contSize(R.itree,R.ihst)+(2*R.ihst[16]+3*R.ihst[17]+7*R.ihst[18]);for(var N=0;N<286;N++)R.lhst[N]=0;for(N=0;N<30;N++)R.dhst[N]=0;for(N=0;N<19;N++)R.ihst[N]=0;var W=A<F&&A<K?0:F<K?1:2;if(j(f,g,i),j(f,g+1,W),g+=3,W==0){for(;7&g;)g++;g=r.F._copyExact(c,h,m,f,g)}else{var E,Y;if(W==1&&(E=R.fltree,Y=R.fdtree),W==2){r.F.makeCodes(R.ltree,v),r.F.revCodes(R.ltree,v),r.F.makeCodes(R.dtree,_),r.F.revCodes(R.dtree,_),r.F.makeCodes(R.itree,S),r.F.revCodes(R.itree,S),E=R.ltree,Y=R.dtree,P(f,g,w-257),P(f,g+=5,b-1),P(f,g+=5,k-4),g+=4;for(var H=0;H<k;H++)P(f,g+3*H,R.itree[1+(R.ordr[H]<<1)]);g+=3*k,g=r.F._codeTiny(T,R.itree,f,g),g=r.F._codeTiny(I,R.itree,f,g)}for(var M=h,B=0;B<a;B+=2){for(var D=o[B],z=D>>>23,$=M+(8388607&D);M<$;)g=r.F._writeLit(c[M++],E,f,g);if(z!=0){var Z=o[B+1],re=Z>>16,ee=Z>>8&255,Q=255&Z;P(f,g=r.F._writeLit(257+ee,E,f,g),z-R.of0[ee]),g+=R.exb[ee],j(f,g=r.F._writeLit(Q,Y,f,g),re-R.df0[Q]),g+=R.dxb[Q],M+=z}}g=r.F._writeLit(256,E,f,g)}return g},r.F._copyExact=function(i,o,a,l,c){var h=c>>>3;return l[h]=a,l[h+1]=a>>>8,l[h+2]=255-l[h],l[h+3]=255-l[h+1],h+=4,l.set(new Uint8Array(i.buffer,o,a),h),c+(a+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,o=r.F._hufTree(i.lhst,i.ltree,15),a=r.F._hufTree(i.dhst,i.dtree,15),l=[],c=r.F._lenCodes(i.ltree,l),h=[],m=r.F._lenCodes(i.dtree,h),f=0;f<l.length;f+=2)i.ihst[l[f]]++;for(f=0;f<h.length;f+=2)i.ihst[h[f]]++;for(var g=r.F._hufTree(i.ihst,i.itree,7),y=19;y>4&&i.itree[1+(i.ordr[y-1]<<1)]==0;)y--;return[o,a,g,c,m,y,l,h]},r.F.getSecond=function(i){for(var o=[],a=0;a<i.length;a+=2)o.push(i[a+1]);return o},r.F.nonZero=function(i){for(var o="",a=0;a<i.length;a+=2)i[a+1]!=0&&(o+=(a>>1)+",");return o},r.F.contSize=function(i,o){for(var a=0,l=0;l<o.length;l++)a+=o[l]*i[1+(l<<1)];return a},r.F._codeTiny=function(i,o,a,l){for(var c=0;c<i.length;c+=2){var h=i[c],m=i[c+1];l=r.F._writeLit(h,o,a,l);var f=h==16?2:h==17?3:7;h>15&&(r.F._putsE(a,l,m,f),l+=f)}return l},r.F._lenCodes=function(i,o){for(var a=i.length;a!=2&&i[a-1]==0;)a-=2;for(var l=0;l<a;l+=2){var c=i[l+1],h=l+3<a?i[l+3]:-1,m=l+5<a?i[l+5]:-1,f=l==0?-1:i[l-1];if(c==0&&h==c&&m==c){for(var g=l+5;g+2<a&&i[g+2]==c;)g+=2;(y=Math.min(g+1-l>>>1,138))<11?o.push(17,y-3):o.push(18,y-11),l+=2*y-2}else if(c==f&&h==c&&m==c){for(g=l+5;g+2<a&&i[g+2]==c;)g+=2;var y=Math.min(g+1-l>>>1,6);o.push(16,y-3),l+=2*y-2}else o.push(c,0)}return a>>>1},r.F._hufTree=function(i,o,a){var l=[],c=i.length,h=o.length,m=0;for(m=0;m<h;m+=2)o[m]=0,o[m+1]=0;for(m=0;m<c;m++)i[m]!=0&&l.push({lit:m,f:i[m]});var f=l.length,g=l.slice(0);if(f==0)return 0;if(f==1){var y=l[0].lit;return g=y==0?1:0,o[1+(y<<1)]=1,o[1+(g<<1)]=1,1}l.sort(function(T,I){return T.f-I.f});var v=l[0],_=l[1],S=0,w=1,b=2;for(l[0]={lit:-1,f:v.f+_.f,l:v,r:_,d:0};w!=f-1;)v=S!=w&&(b==f||l[S].f<l[b].f)?l[S++]:l[b++],_=S!=w&&(b==f||l[S].f<l[b].f)?l[S++]:l[b++],l[w++]={lit:-1,f:v.f+_.f,l:v,r:_};var k=r.F.setDepth(l[w-1],0);for(k>a&&(r.F.restrictDepth(g,a,k),k=a),m=0;m<f;m++)o[1+(g[m].lit<<1)]=g[m].d;return k},r.F.setDepth=function(i,o){return i.lit!=-1?(i.d=o,o):Math.max(r.F.setDepth(i.l,o+1),r.F.setDepth(i.r,o+1))},r.F.restrictDepth=function(i,o,a){var l=0,c=1<<a-o,h=0;for(i.sort(function(f,g){return g.d==f.d?f.f-g.f:g.d-f.d}),l=0;l<i.length&&i[l].d>o;l++){var m=i[l].d;i[l].d=o,h+=c-(1<<a-m)}for(h>>>=a-o;h>0;)(m=i[l].d)<o?(i[l].d++,h-=1<<o-m-1):l++;for(;l>=0;l--)i[l].d==o&&h<0&&(i[l].d--,h++);h!=0&&console.log("debt left")},r.F._goodIndex=function(i,o){var a=0;return o[16|a]<=i&&(a|=16),o[8|a]<=i&&(a|=8),o[4|a]<=i&&(a|=4),o[2|a]<=i&&(a|=2),o[1|a]<=i&&(a|=1),a},r.F._writeLit=function(i,o,a,l){return r.F._putsF(a,l,o[i<<1]),l+o[1+(i<<1)]},r.F.inflate=function(i,o){var a=Uint8Array;if(i[0]==3&&i[1]==0)return o||new a(0);var l=r.F,c=l._bitsF,h=l._bitsE,m=l._decodeTiny,f=l.makeCodes,g=l.codes2map,y=l._get17,v=l.U,_=o==null;_&&(o=new a(i.length>>>2<<3));for(var S,w,b=0,k=0,T=0,I=0,R=0,j=0,P=0,A=0,F=0;b==0;)if(b=c(i,F,1),k=c(i,F+1,2),F+=3,k!=0){if(_&&(o=r.F._check(o,A+(1<<17))),k==1&&(S=v.flmap,w=v.fdmap,j=511,P=31),k==2){T=h(i,F,5)+257,I=h(i,F+5,5)+1,R=h(i,F+10,4)+4,F+=14;for(var K=0;K<38;K+=2)v.itree[K]=0,v.itree[K+1]=0;var N=1;for(K=0;K<R;K++){var W=h(i,F+3*K,3);v.itree[1+(v.ordr[K]<<1)]=W,W>N&&(N=W)}F+=3*R,f(v.itree,N),g(v.itree,N,v.imap),S=v.lmap,w=v.dmap,F=m(v.imap,(1<<N)-1,T+I,i,F,v.ttree);var E=l._copyOut(v.ttree,0,T,v.ltree);j=(1<<E)-1;var Y=l._copyOut(v.ttree,T,I,v.dtree);P=(1<<Y)-1,f(v.ltree,E),g(v.ltree,E,S),f(v.dtree,Y),g(v.dtree,Y,w)}for(;;){var H=S[y(i,F)&j];F+=15&H;var M=H>>>4;if(!(M>>>8))o[A++]=M;else{if(M==256)break;var B=A+M-254;if(M>264){var D=v.ldef[M-257];B=A+(D>>>3)+h(i,F,7&D),F+=7&D}var z=w[y(i,F)&P];F+=15&z;var $=z>>>4,Z=v.ddef[$],re=(Z>>>4)+c(i,F,15&Z);for(F+=15&Z,_&&(o=r.F._check(o,A+(1<<17)));A<B;)o[A]=o[A++-re],o[A]=o[A++-re],o[A]=o[A++-re],o[A]=o[A++-re];A=B}}}else{7&F&&(F+=8-(7&F));var ee=4+(F>>>3),Q=i[ee-4]|i[ee-3]<<8;_&&(o=r.F._check(o,A+Q)),o.set(new a(i.buffer,i.byteOffset+ee,Q),A),F=ee+Q<<3,A+=Q}return o.length==A?o:o.slice(0,A)},r.F._check=function(i,o){var a=i.length;if(o<=a)return i;var l=new Uint8Array(Math.max(a<<1,o));return l.set(i,0),l},r.F._decodeTiny=function(i,o,a,l,c,h){for(var m=r.F._bitsE,f=r.F._get17,g=0;g<a;){var y=i[f(l,c)&o];c+=15&y;var v=y>>>4;if(v<=15)h[g]=v,g++;else{var _=0,S=0;v==16?(S=3+m(l,c,2),c+=2,_=h[g-1]):v==17?(S=3+m(l,c,3),c+=3):v==18&&(S=11+m(l,c,7),c+=7);for(var w=g+S;g<w;)h[g]=_,g++}}return c},r.F._copyOut=function(i,o,a,l){for(var c=0,h=0,m=l.length>>>1;h<a;){var f=i[h+o];l[h<<1]=0,l[1+(h<<1)]=f,f>c&&(c=f),h++}for(;h<m;)l[h<<1]=0,l[1+(h<<1)]=0,h++;return c},r.F.makeCodes=function(i,o){for(var a,l,c,h,m=r.F.U,f=i.length,g=m.bl_count,y=0;y<=o;y++)g[y]=0;for(y=1;y<f;y+=2)g[i[y]]++;var v=m.next_code;for(a=0,g[0]=0,l=1;l<=o;l++)a=a+g[l-1]<<1,v[l]=a;for(c=0;c<f;c+=2)(h=i[c+1])!=0&&(i[c]=v[h],v[h]++)},r.F.codes2map=function(i,o,a){for(var l=i.length,c=r.F.U.rev15,h=0;h<l;h+=2)if(i[h+1]!=0)for(var m=h>>1,f=i[h+1],g=m<<4|f,y=o-f,v=i[h]<<y,_=v+(1<<y);v!=_;)a[c[v]>>>15-o]=g,v++},r.F.revCodes=function(i,o){for(var a=r.F.U.rev15,l=15-o,c=0;c<i.length;c+=2){var h=i[c]<<o-i[c+1];i[c]=a[h]>>>l}},r.F._putsE=function(i,o,a){a<<=7&o;var l=o>>>3;i[l]|=a,i[l+1]|=a>>>8},r.F._putsF=function(i,o,a){a<<=7&o;var l=o>>>3;i[l]|=a,i[l+1]|=a>>>8,i[l+2]|=a>>>16},r.F._bitsE=function(i,o,a){return(i[o>>>3]|i[1+(o>>>3)]<<8)>>>(7&o)&(1<<a)-1},r.F._bitsF=function(i,o,a){return(i[o>>>3]|i[1+(o>>>3)]<<8|i[2+(o>>>3)]<<16)>>>(7&o)&(1<<a)-1},r.F._get17=function(i,o){return(i[o>>>3]|i[1+(o>>>3)]<<8|i[2+(o>>>3)]<<16)>>>(7&o)},r.F._get25=function(i,o){return(i[o>>>3]|i[1+(o>>>3)]<<8|i[2+(o>>>3)]<<16|i[3+(o>>>3)]<<24)>>>(7&o)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=r.F.U,o=0;o<32768;o++){var a=o;a=(4278255360&(a=(4042322160&(a=(3435973836&(a=(2863311530&a)>>>1|(1431655765&a)<<1))>>>2|(858993459&a)<<2))>>>4|(252645135&a)<<4))>>>8|(16711935&a)<<8,i.rev15[o]=(a>>>16|a<<16)>>>17}function l(c,h,m){for(;h--!=0;)c.push(0,m)}for(o=0;o<32;o++)i.ldef[o]=i.of0[o]<<3|i.exb[o],i.ddef[o]=i.df0[o]<<4|i.dxb[o];l(i.fltree,144,8),l(i.fltree,112,9),l(i.fltree,24,7),l(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),l(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),l(i.itree,19,0),l(i.ltree,286,0),l(i.dtree,30,0),l(i.ttree,320,0)}()})();var Sj=wj({__proto__:null,default:Bu},[Bu]);const hr=function(){var t={nextZero(m,f){for(;m[f]!=0;)f++;return f},readUshort:(m,f)=>m[f]<<8|m[f+1],writeUshort(m,f,g){m[f]=g>>8&255,m[f+1]=255&g},readUint:(m,f)=>16777216*m[f]+(m[f+1]<<16|m[f+2]<<8|m[f+3]),writeUint(m,f,g){m[f]=g>>24&255,m[f+1]=g>>16&255,m[f+2]=g>>8&255,m[f+3]=255&g},readASCII(m,f,g){let y="";for(let v=0;v<g;v++)y+=String.fromCharCode(m[f+v]);return y},writeASCII(m,f,g){for(let y=0;y<g.length;y++)m[f+y]=g.charCodeAt(y)},readBytes(m,f,g){const y=[];for(let v=0;v<g;v++)y.push(m[f+v]);return y},pad:m=>m.length<2?`0${m}`:m,readUTF8(m,f,g){let y,v="";for(let _=0;_<g;_++)v+=`%${t.pad(m[f+_].toString(16))}`;try{y=decodeURIComponent(v)}catch{return t.readASCII(m,f,g)}return y}};function e(m,f,g,y){const v=f*g,_=o(y),S=Math.ceil(f*_/8),w=new Uint8Array(4*v),b=new Uint32Array(w.buffer),{ctype:k}=y,{depth:T}=y,I=t.readUshort;if(k==6){const D=v<<2;if(T==8)for(var R=0;R<D;R+=4)w[R]=m[R],w[R+1]=m[R+1],w[R+2]=m[R+2],w[R+3]=m[R+3];if(T==16)for(R=0;R<D;R++)w[R]=m[R<<1]}else if(k==2){const D=y.tabs.tRNS;if(D==null){if(T==8)for(R=0;R<v;R++){var j=3*R;b[R]=255<<24|m[j+2]<<16|m[j+1]<<8|m[j]}if(T==16)for(R=0;R<v;R++)j=6*R,b[R]=255<<24|m[j+4]<<16|m[j+2]<<8|m[j]}else{var P=D[0];const z=D[1],$=D[2];if(T==8)for(R=0;R<v;R++){var A=R<<2;j=3*R,b[R]=255<<24|m[j+2]<<16|m[j+1]<<8|m[j],m[j]==P&&m[j+1]==z&&m[j+2]==$&&(w[A+3]=0)}if(T==16)for(R=0;R<v;R++)A=R<<2,j=6*R,b[R]=255<<24|m[j+4]<<16|m[j+2]<<8|m[j],I(m,j)==P&&I(m,j+2)==z&&I(m,j+4)==$&&(w[A+3]=0)}}else if(k==3){const D=y.tabs.PLTE,z=y.tabs.tRNS,$=z?z.length:0;if(T==1)for(var F=0;F<g;F++){var K=F*S,N=F*f;for(R=0;R<f;R++){A=N+R<<2;var W=3*(E=m[K+(R>>3)]>>7-((7&R)<<0)&1);w[A]=D[W],w[A+1]=D[W+1],w[A+2]=D[W+2],w[A+3]=E<$?z[E]:255}}if(T==2)for(F=0;F<g;F++)for(K=F*S,N=F*f,R=0;R<f;R++)A=N+R<<2,W=3*(E=m[K+(R>>2)]>>6-((3&R)<<1)&3),w[A]=D[W],w[A+1]=D[W+1],w[A+2]=D[W+2],w[A+3]=E<$?z[E]:255;if(T==4)for(F=0;F<g;F++)for(K=F*S,N=F*f,R=0;R<f;R++)A=N+R<<2,W=3*(E=m[K+(R>>1)]>>4-((1&R)<<2)&15),w[A]=D[W],w[A+1]=D[W+1],w[A+2]=D[W+2],w[A+3]=E<$?z[E]:255;if(T==8)for(R=0;R<v;R++){var E;A=R<<2,W=3*(E=m[R]),w[A]=D[W],w[A+1]=D[W+1],w[A+2]=D[W+2],w[A+3]=E<$?z[E]:255}}else if(k==4){if(T==8)for(R=0;R<v;R++){A=R<<2;var Y=m[H=R<<1];w[A]=Y,w[A+1]=Y,w[A+2]=Y,w[A+3]=m[H+1]}if(T==16)for(R=0;R<v;R++){var H;A=R<<2,Y=m[H=R<<2],w[A]=Y,w[A+1]=Y,w[A+2]=Y,w[A+3]=m[H+2]}}else if(k==0)for(P=y.tabs.tRNS?y.tabs.tRNS:-1,F=0;F<g;F++){const D=F*S,z=F*f;if(T==1)for(var M=0;M<f;M++){var B=(Y=255*(m[D+(M>>>3)]>>>7-(7&M)&1))==255*P?0:255;b[z+M]=B<<24|Y<<16|Y<<8|Y}else if(T==2)for(M=0;M<f;M++)B=(Y=85*(m[D+(M>>>2)]>>>6-((3&M)<<1)&3))==85*P?0:255,b[z+M]=B<<24|Y<<16|Y<<8|Y;else if(T==4)for(M=0;M<f;M++)B=(Y=17*(m[D+(M>>>1)]>>>4-((1&M)<<2)&15))==17*P?0:255,b[z+M]=B<<24|Y<<16|Y<<8|Y;else if(T==8)for(M=0;M<f;M++)B=(Y=m[D+M])==P?0:255,b[z+M]=B<<24|Y<<16|Y<<8|Y;else if(T==16)for(M=0;M<f;M++)Y=m[D+(M<<1)],B=I(m,D+(M<<1))==P?0:255,b[z+M]=B<<24|Y<<16|Y<<8|Y}return w}function n(m,f,g,y){const v=o(m),_=Math.ceil(g*v/8),S=new Uint8Array((_+1+m.interlace)*y);return f=m.tabs.CgBI?i(f,S):r(f,S),m.interlace==0?f=a(f,m,0,g,y):m.interlace==1&&(f=function(b,k){const T=k.width,I=k.height,R=o(k),j=R>>3,P=Math.ceil(T*R/8),A=new Uint8Array(I*P);let F=0;const K=[0,0,4,0,2,0,1],N=[0,4,0,2,0,1,0],W=[8,8,8,4,4,2,2],E=[8,8,4,4,2,2,1];let Y=0;for(;Y<7;){const M=W[Y],B=E[Y];let D=0,z=0,$=K[Y];for(;$<I;)$+=M,z++;let Z=N[Y];for(;Z<T;)Z+=B,D++;const re=Math.ceil(D*R/8);a(b,k,F,D,z);let ee=0,Q=K[Y];for(;Q<I;){let fe=N[Y],Ee=F+ee*re<<3;for(;fe<T;){var H;if(R==1&&(H=(H=b[Ee>>3])>>7-(7&Ee)&1,A[Q*P+(fe>>3)]|=H<<7-((7&fe)<<0)),R==2&&(H=(H=b[Ee>>3])>>6-(7&Ee)&3,A[Q*P+(fe>>2)]|=H<<6-((3&fe)<<1)),R==4&&(H=(H=b[Ee>>3])>>4-(7&Ee)&15,A[Q*P+(fe>>1)]|=H<<4-((1&fe)<<2)),R>=8){const ke=Q*P+fe*j;for(let ae=0;ae<j;ae++)A[ke+ae]=b[(Ee>>3)+ae]}Ee+=R,fe+=B}ee++,Q+=M}D*z!=0&&(F+=z*(1+re)),Y+=1}return A}(f,m)),f}function r(m,f){return i(new Uint8Array(m.buffer,2,m.length-6),f)}var i=function(){const m={H:{}};return m.H.N=function(f,g){const y=Uint8Array;let v,_,S=0,w=0,b=0,k=0,T=0,I=0,R=0,j=0,P=0;if(f[0]==3&&f[1]==0)return g||new y(0);const A=m.H,F=A.b,K=A.e,N=A.R,W=A.n,E=A.A,Y=A.Z,H=A.m,M=g==null;for(M&&(g=new y(f.length>>>2<<5));S==0;)if(S=F(f,P,1),w=F(f,P+1,2),P+=3,w!=0){if(M&&(g=m.H.W(g,j+(1<<17))),w==1&&(v=H.J,_=H.h,I=511,R=31),w==2){b=K(f,P,5)+257,k=K(f,P+5,5)+1,T=K(f,P+10,4)+4,P+=14;let D=1;for(var B=0;B<38;B+=2)H.Q[B]=0,H.Q[B+1]=0;for(B=0;B<T;B++){const Z=K(f,P+3*B,3);H.Q[1+(H.X[B]<<1)]=Z,Z>D&&(D=Z)}P+=3*T,W(H.Q,D),E(H.Q,D,H.u),v=H.w,_=H.d,P=N(H.u,(1<<D)-1,b+k,f,P,H.v);const z=A.V(H.v,0,b,H.C);I=(1<<z)-1;const $=A.V(H.v,b,k,H.D);R=(1<<$)-1,W(H.C,z),E(H.C,z,v),W(H.D,$),E(H.D,$,_)}for(;;){const D=v[Y(f,P)&I];P+=15&D;const z=D>>>4;if(!(z>>>8))g[j++]=z;else{if(z==256)break;{let $=j+z-254;if(z>264){const fe=H.q[z-257];$=j+(fe>>>3)+K(f,P,7&fe),P+=7&fe}const Z=_[Y(f,P)&R];P+=15&Z;const re=Z>>>4,ee=H.c[re],Q=(ee>>>4)+F(f,P,15&ee);for(P+=15&ee;j<$;)g[j]=g[j++-Q],g[j]=g[j++-Q],g[j]=g[j++-Q],g[j]=g[j++-Q];j=$}}}}else{7&P&&(P+=8-(7&P));const D=4+(P>>>3),z=f[D-4]|f[D-3]<<8;M&&(g=m.H.W(g,j+z)),g.set(new y(f.buffer,f.byteOffset+D,z),j),P=D+z<<3,j+=z}return g.length==j?g:g.slice(0,j)},m.H.W=function(f,g){const y=f.length;if(g<=y)return f;const v=new Uint8Array(y<<1);return v.set(f,0),v},m.H.R=function(f,g,y,v,_,S){const w=m.H.e,b=m.H.Z;let k=0;for(;k<y;){const T=f[b(v,_)&g];_+=15&T;const I=T>>>4;if(I<=15)S[k]=I,k++;else{let R=0,j=0;I==16?(j=3+w(v,_,2),_+=2,R=S[k-1]):I==17?(j=3+w(v,_,3),_+=3):I==18&&(j=11+w(v,_,7),_+=7);const P=k+j;for(;k<P;)S[k]=R,k++}}return _},m.H.V=function(f,g,y,v){let _=0,S=0;const w=v.length>>>1;for(;S<y;){const b=f[S+g];v[S<<1]=0,v[1+(S<<1)]=b,b>_&&(_=b),S++}for(;S<w;)v[S<<1]=0,v[1+(S<<1)]=0,S++;return _},m.H.n=function(f,g){const y=m.H.m,v=f.length;let _,S,w,b;const k=y.j;for(var T=0;T<=g;T++)k[T]=0;for(T=1;T<v;T+=2)k[f[T]]++;const I=y.K;for(_=0,k[0]=0,S=1;S<=g;S++)_=_+k[S-1]<<1,I[S]=_;for(w=0;w<v;w+=2)b=f[w+1],b!=0&&(f[w]=I[b],I[b]++)},m.H.A=function(f,g,y){const v=f.length,_=m.H.m.r;for(let S=0;S<v;S+=2)if(f[S+1]!=0){const w=S>>1,b=f[S+1],k=w<<4|b,T=g-b;let I=f[S]<<T;const R=I+(1<<T);for(;I!=R;)y[_[I]>>>15-g]=k,I++}},m.H.l=function(f,g){const y=m.H.m.r,v=15-g;for(let _=0;_<f.length;_+=2){const S=f[_]<<g-f[_+1];f[_]=y[S]>>>v}},m.H.M=function(f,g,y){y<<=7&g;const v=g>>>3;f[v]|=y,f[v+1]|=y>>>8},m.H.I=function(f,g,y){y<<=7&g;const v=g>>>3;f[v]|=y,f[v+1]|=y>>>8,f[v+2]|=y>>>16},m.H.e=function(f,g,y){return(f[g>>>3]|f[1+(g>>>3)]<<8)>>>(7&g)&(1<<y)-1},m.H.b=function(f,g,y){return(f[g>>>3]|f[1+(g>>>3)]<<8|f[2+(g>>>3)]<<16)>>>(7&g)&(1<<y)-1},m.H.Z=function(f,g){return(f[g>>>3]|f[1+(g>>>3)]<<8|f[2+(g>>>3)]<<16)>>>(7&g)},m.H.i=function(f,g){return(f[g>>>3]|f[1+(g>>>3)]<<8|f[2+(g>>>3)]<<16|f[3+(g>>>3)]<<24)>>>(7&g)},m.H.m=function(){const f=Uint16Array,g=Uint32Array;return{K:new f(16),j:new f(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new f(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new g(32),J:new f(512),_:[],h:new f(32),$:[],w:new f(32768),C:[],v:[],d:new f(32768),D:[],u:new f(512),Q:[],r:new f(32768),s:new g(286),Y:new g(30),a:new g(19),t:new g(15e3),k:new f(65536),g:new f(32768)}}(),function(){const f=m.H.m;for(var g=0;g<32768;g++){let v=g;v=(2863311530&v)>>>1|(1431655765&v)<<1,v=(3435973836&v)>>>2|(858993459&v)<<2,v=(4042322160&v)>>>4|(252645135&v)<<4,v=(4278255360&v)>>>8|(16711935&v)<<8,f.r[g]=(v>>>16|v<<16)>>>17}function y(v,_,S){for(;_--!=0;)v.push(0,S)}for(g=0;g<32;g++)f.q[g]=f.S[g]<<3|f.T[g],f.c[g]=f.p[g]<<4|f.z[g];y(f._,144,8),y(f._,112,9),y(f._,24,7),y(f._,8,8),m.H.n(f._,9),m.H.A(f._,9,f.J),m.H.l(f._,9),y(f.$,32,5),m.H.n(f.$,5),m.H.A(f.$,5,f.h),m.H.l(f.$,5),y(f.Q,19,0),y(f.C,286,0),y(f.D,30,0),y(f.v,320,0)}(),m.H.N}();function o(m){return[1,null,3,1,2,null,4][m.ctype]*m.depth}function a(m,f,g,y,v){let _=o(f);const S=Math.ceil(y*_/8);let w,b;_=Math.ceil(_/8);let k=m[g],T=0;if(k>1&&(m[g]=[0,0,1][k-2]),k==3)for(T=_;T<S;T++)m[T+1]=m[T+1]+(m[T+1-_]>>>1)&255;for(let I=0;I<v;I++)if(w=g+I*S,b=w+I+1,k=m[b-1],T=0,k==0)for(;T<S;T++)m[w+T]=m[b+T];else if(k==1){for(;T<_;T++)m[w+T]=m[b+T];for(;T<S;T++)m[w+T]=m[b+T]+m[w+T-_]}else if(k==2)for(;T<S;T++)m[w+T]=m[b+T]+m[w+T-S];else if(k==3){for(;T<_;T++)m[w+T]=m[b+T]+(m[w+T-S]>>>1);for(;T<S;T++)m[w+T]=m[b+T]+(m[w+T-S]+m[w+T-_]>>>1)}else{for(;T<_;T++)m[w+T]=m[b+T]+l(0,m[w+T-S],0);for(;T<S;T++)m[w+T]=m[b+T]+l(m[w+T-_],m[w+T-S],m[w+T-_-S])}return m}function l(m,f,g){const y=m+f-g,v=y-m,_=y-f,S=y-g;return v*v<=_*_&&v*v<=S*S?m:_*_<=S*S?f:g}function c(m,f,g){g.width=t.readUint(m,f),f+=4,g.height=t.readUint(m,f),f+=4,g.depth=m[f],f++,g.ctype=m[f],f++,g.compress=m[f],f++,g.filter=m[f],f++,g.interlace=m[f],f++}function h(m,f,g,y,v,_,S,w,b){const k=Math.min(f,v),T=Math.min(g,_);let I=0,R=0;for(let Y=0;Y<T;Y++)for(let H=0;H<k;H++)if(S>=0&&w>=0?(I=Y*f+H<<2,R=(w+Y)*v+S+H<<2):(I=(-w+Y)*f-S+H<<2,R=Y*v+H<<2),b==0)y[R]=m[I],y[R+1]=m[I+1],y[R+2]=m[I+2],y[R+3]=m[I+3];else if(b==1){var j=m[I+3]*.00392156862745098,P=m[I]*j,A=m[I+1]*j,F=m[I+2]*j,K=y[R+3]*(1/255),N=y[R]*K,W=y[R+1]*K,E=y[R+2]*K;const M=1-j,B=j+K*M,D=B==0?0:1/B;y[R+3]=255*B,y[R+0]=(P+N*M)*D,y[R+1]=(A+W*M)*D,y[R+2]=(F+E*M)*D}else if(b==2)j=m[I+3],P=m[I],A=m[I+1],F=m[I+2],K=y[R+3],N=y[R],W=y[R+1],E=y[R+2],j==K&&P==N&&A==W&&F==E?(y[R]=0,y[R+1]=0,y[R+2]=0,y[R+3]=0):(y[R]=P,y[R+1]=A,y[R+2]=F,y[R+3]=j);else if(b==3){if(j=m[I+3],P=m[I],A=m[I+1],F=m[I+2],K=y[R+3],N=y[R],W=y[R+1],E=y[R+2],j==K&&P==N&&A==W&&F==E)continue;if(j<220&&K>20)return!1}return!0}return{decode:function(f){const g=new Uint8Array(f);let y=8;const v=t,_=v.readUshort,S=v.readUint,w={tabs:{},frames:[]},b=new Uint8Array(g.length);let k,T=0,I=0;const R=[137,80,78,71,13,10,26,10];for(var j=0;j<8;j++)if(g[j]!=R[j])throw"The input is not a PNG file!";for(;y<g.length;){const Y=v.readUint(g,y);y+=4;const H=v.readASCII(g,y,4);if(y+=4,H=="IHDR")c(g,y,w);else if(H=="iCCP"){for(var P=y;g[P]!=0;)P++;v.readASCII(g,y,P-y),g[P+1];const M=g.slice(P+2,y+Y);let B=null;try{B=r(M)}catch{B=i(M)}w.tabs[H]=B}else if(H=="CgBI")w.tabs[H]=g.slice(y,y+4);else if(H=="IDAT"){for(j=0;j<Y;j++)b[T+j]=g[y+j];T+=Y}else if(H=="acTL")w.tabs[H]={num_frames:S(g,y),num_plays:S(g,y+4)},k=new Uint8Array(g.length);else if(H=="fcTL"){I!=0&&((E=w.frames[w.frames.length-1]).data=n(w,k.slice(0,I),E.rect.width,E.rect.height),I=0);const M={x:S(g,y+12),y:S(g,y+16),width:S(g,y+4),height:S(g,y+8)};let B=_(g,y+22);B=_(g,y+20)/(B==0?100:B);const D={rect:M,delay:Math.round(1e3*B),dispose:g[y+24],blend:g[y+25]};w.frames.push(D)}else if(H=="fdAT"){for(j=0;j<Y-4;j++)k[I+j]=g[y+j+4];I+=Y-4}else if(H=="pHYs")w.tabs[H]=[v.readUint(g,y),v.readUint(g,y+4),g[y+8]];else if(H=="cHRM")for(w.tabs[H]=[],j=0;j<8;j++)w.tabs[H].push(v.readUint(g,y+4*j));else if(H=="tEXt"||H=="zTXt"){w.tabs[H]==null&&(w.tabs[H]={});var A=v.nextZero(g,y),F=v.readASCII(g,y,A-y),K=y+Y-A-1;if(H=="tEXt")W=v.readASCII(g,A+1,K);else{var N=r(g.slice(A+2,A+2+K));W=v.readUTF8(N,0,N.length)}w.tabs[H][F]=W}else if(H=="iTXt"){w.tabs[H]==null&&(w.tabs[H]={}),A=0,P=y,A=v.nextZero(g,P),F=v.readASCII(g,P,A-P);const M=g[P=A+1];var W;g[P+1],P+=2,A=v.nextZero(g,P),v.readASCII(g,P,A-P),P=A+1,A=v.nextZero(g,P),v.readUTF8(g,P,A-P),K=Y-((P=A+1)-y),M==0?W=v.readUTF8(g,P,K):(N=r(g.slice(P,P+K)),W=v.readUTF8(N,0,N.length)),w.tabs[H][F]=W}else if(H=="PLTE")w.tabs[H]=v.readBytes(g,y,Y);else if(H=="hIST"){const M=w.tabs.PLTE.length/3;for(w.tabs[H]=[],j=0;j<M;j++)w.tabs[H].push(_(g,y+2*j))}else if(H=="tRNS")w.ctype==3?w.tabs[H]=v.readBytes(g,y,Y):w.ctype==0?w.tabs[H]=_(g,y):w.ctype==2&&(w.tabs[H]=[_(g,y),_(g,y+2),_(g,y+4)]);else if(H=="gAMA")w.tabs[H]=v.readUint(g,y)/1e5;else if(H=="sRGB")w.tabs[H]=g[y];else if(H=="bKGD")w.ctype==0||w.ctype==4?w.tabs[H]=[_(g,y)]:w.ctype==2||w.ctype==6?w.tabs[H]=[_(g,y),_(g,y+2),_(g,y+4)]:w.ctype==3&&(w.tabs[H]=g[y]);else if(H=="IEND")break;y+=Y,v.readUint(g,y),y+=4}var E;return I!=0&&((E=w.frames[w.frames.length-1]).data=n(w,k.slice(0,I),E.rect.width,E.rect.height)),w.data=n(w,b,w.width,w.height),delete w.compress,delete w.interlace,delete w.filter,w},toRGBA8:function(f){const g=f.width,y=f.height;if(f.tabs.acTL==null)return[e(f.data,g,y,f).buffer];const v=[];f.frames[0].data==null&&(f.frames[0].data=f.data);const _=g*y*4,S=new Uint8Array(_),w=new Uint8Array(_),b=new Uint8Array(_);for(let T=0;T<f.frames.length;T++){const I=f.frames[T],R=I.rect.x,j=I.rect.y,P=I.rect.width,A=I.rect.height,F=e(I.data,P,A,f);if(T!=0)for(var k=0;k<_;k++)b[k]=S[k];if(I.blend==0?h(F,P,A,S,g,y,R,j,0):I.blend==1&&h(F,P,A,S,g,y,R,j,1),v.push(S.buffer.slice(0)),I.dispose!=0){if(I.dispose==1)h(w,P,A,S,g,y,R,j,0);else if(I.dispose==2)for(k=0;k<_;k++)S[k]=b[k]}}return v},_paeth:l,_copyTile:h,_bin:t}}();(function(){const{_copyTile:t}=hr,{_bin:e}=hr,n=hr._paeth;var r={table:function(){const P=new Uint32Array(256);for(let A=0;A<256;A++){let F=A;for(let K=0;K<8;K++)1&F?F=3988292384^F>>>1:F>>>=1;P[A]=F}return P}(),update(P,A,F,K){for(let N=0;N<K;N++)P=r.table[255&(P^A[F+N])]^P>>>8;return P},crc:(P,A,F)=>4294967295^r.update(4294967295,P,A,F)};function i(P,A,F,K){A[F]+=P[0]*K>>4,A[F+1]+=P[1]*K>>4,A[F+2]+=P[2]*K>>4,A[F+3]+=P[3]*K>>4}function o(P){return Math.max(0,Math.min(255,P))}function a(P,A){const F=P[0]-A[0],K=P[1]-A[1],N=P[2]-A[2],W=P[3]-A[3];return F*F+K*K+N*N+W*W}function l(P,A,F,K,N,W,E){E==null&&(E=1);const Y=K.length,H=[];for(var M=0;M<Y;M++){const Q=K[M];H.push([Q>>>0&255,Q>>>8&255,Q>>>16&255,Q>>>24&255])}for(M=0;M<Y;M++){let Q=4294967295;for(var B=0,D=0;D<Y;D++){var z=a(H[M],H[D]);D!=M&&z<Q&&(Q=z,B=D)}}const $=new Uint32Array(N.buffer),Z=new Int16Array(A*F*4),re=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(M=0;M<re.length;M++)re[M]=255*((re[M]+.5)/16-.5);for(let Q=0;Q<F;Q++)for(let fe=0;fe<A;fe++){var ee;M=4*(Q*A+fe),E!=2?ee=[o(P[M]+Z[M]),o(P[M+1]+Z[M+1]),o(P[M+2]+Z[M+2]),o(P[M+3]+Z[M+3])]:(z=re[4*(3&Q)+(3&fe)],ee=[o(P[M]+z),o(P[M+1]+z),o(P[M+2]+z),o(P[M+3]+z)]),B=0;let Ee=16777215;for(D=0;D<Y;D++){const be=a(ee,H[D]);be<Ee&&(Ee=be,B=D)}const ke=H[B],ae=[ee[0]-ke[0],ee[1]-ke[1],ee[2]-ke[2],ee[3]-ke[3]];E==1&&(fe!=A-1&&i(ae,Z,M+4,7),Q!=F-1&&(fe!=0&&i(ae,Z,M+4*A-4,3),i(ae,Z,M+4*A,5),fe!=A-1&&i(ae,Z,M+4*A+4,1))),W[M>>2]=B,$[M>>2]=K[B]}}function c(P,A,F,K,N){N==null&&(N={});const{crc:W}=r,E=e.writeUint,Y=e.writeUshort,H=e.writeASCII;let M=8;const B=P.frames.length>1;let D,z=!1,$=33+(B?20:0);if(N.sRGB!=null&&($+=13),N.pHYs!=null&&($+=21),N.iCCP!=null&&(D=pako.deflate(N.iCCP),$+=21+D.length+4),P.ctype==3){for(var Z=P.plte.length,re=0;re<Z;re++)P.plte[re]>>>24!=255&&(z=!0);$+=8+3*Z+4+(z?8+1*Z+4:0)}for(var ee=0;ee<P.frames.length;ee++)B&&($+=38),$+=(ke=P.frames[ee]).cimg.length+12,ee!=0&&($+=4);$+=12;const Q=new Uint8Array($),fe=[137,80,78,71,13,10,26,10];for(re=0;re<8;re++)Q[re]=fe[re];if(E(Q,M,13),M+=4,H(Q,M,"IHDR"),M+=4,E(Q,M,A),M+=4,E(Q,M,F),M+=4,Q[M]=P.depth,M++,Q[M]=P.ctype,M++,Q[M]=0,M++,Q[M]=0,M++,Q[M]=0,M++,E(Q,M,W(Q,M-17,17)),M+=4,N.sRGB!=null&&(E(Q,M,1),M+=4,H(Q,M,"sRGB"),M+=4,Q[M]=N.sRGB,M++,E(Q,M,W(Q,M-5,5)),M+=4),N.iCCP!=null){const ae=13+D.length;E(Q,M,ae),M+=4,H(Q,M,"iCCP"),M+=4,H(Q,M,"ICC profile"),M+=11,M+=2,Q.set(D,M),M+=D.length,E(Q,M,W(Q,M-(ae+4),ae+4)),M+=4}if(N.pHYs!=null&&(E(Q,M,9),M+=4,H(Q,M,"pHYs"),M+=4,E(Q,M,N.pHYs[0]),M+=4,E(Q,M,N.pHYs[1]),M+=4,Q[M]=N.pHYs[2],M++,E(Q,M,W(Q,M-13,13)),M+=4),B&&(E(Q,M,8),M+=4,H(Q,M,"acTL"),M+=4,E(Q,M,P.frames.length),M+=4,E(Q,M,N.loop!=null?N.loop:0),M+=4,E(Q,M,W(Q,M-12,12)),M+=4),P.ctype==3){for(E(Q,M,3*(Z=P.plte.length)),M+=4,H(Q,M,"PLTE"),M+=4,re=0;re<Z;re++){const ae=3*re,be=P.plte[re],Ce=255&be,Te=be>>>8&255,nt=be>>>16&255;Q[M+ae+0]=Ce,Q[M+ae+1]=Te,Q[M+ae+2]=nt}if(M+=3*Z,E(Q,M,W(Q,M-3*Z-4,3*Z+4)),M+=4,z){for(E(Q,M,Z),M+=4,H(Q,M,"tRNS"),M+=4,re=0;re<Z;re++)Q[M+re]=P.plte[re]>>>24&255;M+=Z,E(Q,M,W(Q,M-Z-4,Z+4)),M+=4}}let Ee=0;for(ee=0;ee<P.frames.length;ee++){var ke=P.frames[ee];B&&(E(Q,M,26),M+=4,H(Q,M,"fcTL"),M+=4,E(Q,M,Ee++),M+=4,E(Q,M,ke.rect.width),M+=4,E(Q,M,ke.rect.height),M+=4,E(Q,M,ke.rect.x),M+=4,E(Q,M,ke.rect.y),M+=4,Y(Q,M,K[ee]),M+=2,Y(Q,M,1e3),M+=2,Q[M]=ke.dispose,M++,Q[M]=ke.blend,M++,E(Q,M,W(Q,M-30,30)),M+=4);const ae=ke.cimg;E(Q,M,(Z=ae.length)+(ee==0?0:4)),M+=4;const be=M;H(Q,M,ee==0?"IDAT":"fdAT"),M+=4,ee!=0&&(E(Q,M,Ee++),M+=4),Q.set(ae,M),M+=Z,E(Q,M,W(Q,be,M-be)),M+=4}return E(Q,M,0),M+=4,H(Q,M,"IEND"),M+=4,E(Q,M,W(Q,M-4,4)),M+=4,Q.buffer}function h(P,A,F){for(let K=0;K<P.frames.length;K++){const N=P.frames[K];N.rect.width;const W=N.rect.height,E=new Uint8Array(W*N.bpl+W);N.cimg=y(N.img,W,N.bpp,N.bpl,E,A,F)}}function m(P,A,F,K,N){const W=N[0],E=N[1],Y=N[2],H=N[3],M=N[4],B=N[5];let D=6,z=8,$=255;for(var Z=0;Z<P.length;Z++){const se=new Uint8Array(P[Z]);for(var re=se.length,ee=0;ee<re;ee+=4)$&=se[ee+3]}const Q=$!=255,fe=function(G,q,ne,ce,pe,ie){const ge=[];for(var ve=0;ve<G.length;ve++){const dt=new Uint8Array(G[ve]),lt=new Uint32Array(dt.buffer);var _e;let Pt=0,Ke=0,wt=q,$t=ne,Bt=ce?1:0;if(ve!=0){const It=ie||ce||ve==1||ge[ve-2].dispose!=0?1:2;let Mn=0,Pn=1e9;for(let dn=0;dn<It;dn++){var Pe=new Uint8Array(G[ve-1-dn]);const zn=new Uint32Array(G[ve-1-dn]);let jt=q,Ht=ne,Bn=-1,hn=-1;for(let fn=0;fn<ne;fn++)for(let on=0;on<q;on++)lt[Re=fn*q+on]!=zn[Re]&&(on<jt&&(jt=on),on>Bn&&(Bn=on),fn<Ht&&(Ht=fn),fn>hn&&(hn=fn));Bn==-1&&(jt=Ht=Bn=hn=0),pe&&((1&jt)==1&&jt--,(1&Ht)==1&&Ht--);const Lr=(Bn-jt+1)*(hn-Ht+1);Lr<Pn&&(Pn=Lr,Mn=dn,Pt=jt,Ke=Ht,wt=Bn-jt+1,$t=hn-Ht+1)}Pe=new Uint8Array(G[ve-1-Mn]),Mn==1&&(ge[ve-1].dispose=2),_e=new Uint8Array(wt*$t*4),t(Pe,q,ne,_e,wt,$t,-Pt,-Ke,0),Bt=t(dt,q,ne,_e,wt,$t,-Pt,-Ke,3)?1:0,Bt==1?g(dt,q,ne,_e,{x:Pt,y:Ke,width:wt,height:$t}):t(dt,q,ne,_e,wt,$t,-Pt,-Ke,0)}else _e=dt.slice(0);ge.push({rect:{x:Pt,y:Ke,width:wt,height:$t},img:_e,blend:Bt,dispose:0})}if(ce)for(ve=0;ve<ge.length;ve++){if((st=ge[ve]).blend==1)continue;const dt=st.rect,lt=ge[ve-1].rect,Pt=Math.min(dt.x,lt.x),Ke=Math.min(dt.y,lt.y),wt={x:Pt,y:Ke,width:Math.max(dt.x+dt.width,lt.x+lt.width)-Pt,height:Math.max(dt.y+dt.height,lt.y+lt.height)-Ke};ge[ve-1].dispose=1,ve-1!=0&&f(G,q,ne,ge,ve-1,wt,pe),f(G,q,ne,ge,ve,wt,pe)}let et=0;if(G.length!=1)for(var Re=0;Re<ge.length;Re++){var st;et+=(st=ge[Re]).rect.width*st.rect.height}return ge}(P,A,F,W,E,Y),Ee={},ke=[],ae=[];if(K!=0){const se=[];for(ee=0;ee<fe.length;ee++)se.push(fe[ee].img.buffer);const G=function(pe){let ie=0;for(var ge=0;ge<pe.length;ge++)ie+=pe[ge].byteLength;const ve=new Uint8Array(ie);let _e=0;for(ge=0;ge<pe.length;ge++){const Pe=new Uint8Array(pe[ge]),et=Pe.length;for(let Re=0;Re<et;Re+=4){let st=Pe[Re],dt=Pe[Re+1],lt=Pe[Re+2];const Pt=Pe[Re+3];Pt==0&&(st=dt=lt=0),ve[_e+Re]=st,ve[_e+Re+1]=dt,ve[_e+Re+2]=lt,ve[_e+Re+3]=Pt}_e+=et}return ve.buffer}(se),q=_(G,K);for(ee=0;ee<q.plte.length;ee++)ke.push(q.plte[ee].est.rgba);let ne=0;for(ee=0;ee<fe.length;ee++){const ce=(Ce=fe[ee]).img.length;var be=new Uint8Array(q.inds.buffer,ne>>2,ce>>2);ae.push(be);const pe=new Uint8Array(q.abuf,ne,ce);B&&l(Ce.img,Ce.rect.width,Ce.rect.height,ke,pe,be),Ce.img.set(pe),ne+=ce}}else for(Z=0;Z<fe.length;Z++){var Ce=fe[Z];const se=new Uint32Array(Ce.img.buffer);var Te=Ce.rect.width;for(re=se.length,be=new Uint8Array(re),ae.push(be),ee=0;ee<re;ee++){const G=se[ee];if(ee!=0&&G==se[ee-1])be[ee]=be[ee-1];else if(ee>Te&&G==se[ee-Te])be[ee]=be[ee-Te];else{let q=Ee[G];if(q==null&&(Ee[G]=q=ke.length,ke.push(G),ke.length>=300))break;be[ee]=q}}}const nt=ke.length;for(nt<=256&&M==0&&(z=nt<=2?1:nt<=4?2:nt<=16?4:8,z=Math.max(z,H)),Z=0;Z<fe.length;Z++){(Ce=fe[Z]).rect.x,Ce.rect.y,Te=Ce.rect.width;const se=Ce.rect.height;let G=Ce.img;new Uint32Array(G.buffer);let q=4*Te,ne=4;if(nt<=256&&M==0){q=Math.ceil(z*Te/8);var O=new Uint8Array(q*se);const ce=ae[Z];for(let pe=0;pe<se;pe++){ee=pe*q;const ie=pe*Te;if(z==8)for(var ue=0;ue<Te;ue++)O[ee+ue]=ce[ie+ue];else if(z==4)for(ue=0;ue<Te;ue++)O[ee+(ue>>1)]|=ce[ie+ue]<<4-4*(1&ue);else if(z==2)for(ue=0;ue<Te;ue++)O[ee+(ue>>2)]|=ce[ie+ue]<<6-2*(3&ue);else if(z==1)for(ue=0;ue<Te;ue++)O[ee+(ue>>3)]|=ce[ie+ue]<<7-1*(7&ue)}G=O,D=3,ne=1}else if(Q==0&&fe.length==1){O=new Uint8Array(Te*se*3);const ce=Te*se;for(ee=0;ee<ce;ee++){const pe=3*ee,ie=4*ee;O[pe]=G[ie],O[pe+1]=G[ie+1],O[pe+2]=G[ie+2]}G=O,D=2,ne=3,q=3*Te}Ce.img=G,Ce.bpl=q,Ce.bpp=ne}return{ctype:D,depth:z,plte:ke,frames:fe}}function f(P,A,F,K,N,W,E){const Y=Uint8Array,H=Uint32Array,M=new Y(P[N-1]),B=new H(P[N-1]),D=N+1<P.length?new Y(P[N+1]):null,z=new Y(P[N]),$=new H(z.buffer);let Z=A,re=F,ee=-1,Q=-1;for(let Ee=0;Ee<W.height;Ee++)for(let ke=0;ke<W.width;ke++){const ae=W.x+ke,be=W.y+Ee,Ce=be*A+ae,Te=$[Ce];Te==0||K[N-1].dispose==0&&B[Ce]==Te&&(D==null||D[4*Ce+3]!=0)||(ae<Z&&(Z=ae),ae>ee&&(ee=ae),be<re&&(re=be),be>Q&&(Q=be))}ee==-1&&(Z=re=ee=Q=0),E&&((1&Z)==1&&Z--,(1&re)==1&&re--),W={x:Z,y:re,width:ee-Z+1,height:Q-re+1};const fe=K[N];fe.rect=W,fe.blend=1,fe.img=new Uint8Array(W.width*W.height*4),K[N-1].dispose==0?(t(M,A,F,fe.img,W.width,W.height,-W.x,-W.y,0),g(z,A,F,fe.img,W)):t(z,A,F,fe.img,W.width,W.height,-W.x,-W.y,0)}function g(P,A,F,K,N){t(P,A,F,K,N.width,N.height,-N.x,-N.y,2)}function y(P,A,F,K,N,W,E){const Y=[];let H,M=[0,1,2,3,4];W!=-1?M=[W]:(A*K>5e5||F==1)&&(M=[0]),E&&(H={level:0});const B=Sj;for(var D=0;D<M.length;D++){for(let Z=0;Z<A;Z++)v(N,P,Z,K,F,M[D]);Y.push(B.deflate(N,H))}let z,$=1e9;for(D=0;D<Y.length;D++)Y[D].length<$&&(z=D,$=Y[D].length);return Y[z]}function v(P,A,F,K,N,W){const E=F*K;let Y=E+F;if(P[Y]=W,Y++,W==0)if(K<500)for(var H=0;H<K;H++)P[Y+H]=A[E+H];else P.set(new Uint8Array(A.buffer,E,K),Y);else if(W==1){for(H=0;H<N;H++)P[Y+H]=A[E+H];for(H=N;H<K;H++)P[Y+H]=A[E+H]-A[E+H-N]+256&255}else if(F==0){for(H=0;H<N;H++)P[Y+H]=A[E+H];if(W==2)for(H=N;H<K;H++)P[Y+H]=A[E+H];if(W==3)for(H=N;H<K;H++)P[Y+H]=A[E+H]-(A[E+H-N]>>1)+256&255;if(W==4)for(H=N;H<K;H++)P[Y+H]=A[E+H]-n(A[E+H-N],0,0)+256&255}else{if(W==2)for(H=0;H<K;H++)P[Y+H]=A[E+H]+256-A[E+H-K]&255;if(W==3){for(H=0;H<N;H++)P[Y+H]=A[E+H]+256-(A[E+H-K]>>1)&255;for(H=N;H<K;H++)P[Y+H]=A[E+H]+256-(A[E+H-K]+A[E+H-N]>>1)&255}if(W==4){for(H=0;H<N;H++)P[Y+H]=A[E+H]+256-n(0,A[E+H-K],0)&255;for(H=N;H<K;H++)P[Y+H]=A[E+H]+256-n(A[E+H-N],A[E+H-K],A[E+H-N-K])&255}}}function _(P,A){const F=new Uint8Array(P),K=F.slice(0),N=new Uint32Array(K.buffer),W=S(K,A),E=W[0],Y=W[1],H=F.length,M=new Uint8Array(H>>2);let B;if(F.length<2e7)for(var D=0;D<H;D+=4)B=w(E,z=F[D]*(1/255),$=F[D+1]*(1/255),Z=F[D+2]*(1/255),re=F[D+3]*(1/255)),M[D>>2]=B.ind,N[D>>2]=B.est.rgba;else for(D=0;D<H;D+=4){var z=F[D]*.00392156862745098,$=F[D+1]*(1/255),Z=F[D+2]*(1/255),re=F[D+3]*(1/255);for(B=E;B.left;)B=b(B.est,z,$,Z,re)<=0?B.left:B.right;M[D>>2]=B.ind,N[D>>2]=B.est.rgba}return{abuf:K.buffer,inds:M,plte:Y}}function S(P,A,F){F==null&&(F=1e-4);const K=new Uint32Array(P.buffer),N={i0:0,i1:P.length,bst:null,est:null,tdst:0,left:null,right:null};N.bst=I(P,N.i0,N.i1),N.est=R(N.bst);const W=[N];for(;W.length<A;){let Y=0,H=0;for(var E=0;E<W.length;E++)W[E].est.L>Y&&(Y=W[E].est.L,H=E);if(Y<F)break;const M=W[H],B=k(P,K,M.i0,M.i1,M.est.e,M.est.eMq255);if(M.i0>=B||M.i1<=B){M.est.L=0;continue}const D={i0:M.i0,i1:B,bst:null,est:null,tdst:0,left:null,right:null};D.bst=I(P,D.i0,D.i1),D.est=R(D.bst);const z={i0:B,i1:M.i1,bst:null,est:null,tdst:0,left:null,right:null};for(z.bst={R:[],m:[],N:M.bst.N-D.bst.N},E=0;E<16;E++)z.bst.R[E]=M.bst.R[E]-D.bst.R[E];for(E=0;E<4;E++)z.bst.m[E]=M.bst.m[E]-D.bst.m[E];z.est=R(z.bst),M.left=D,M.right=z,W[H]=D,W.push(z)}for(W.sort((Y,H)=>H.bst.N-Y.bst.N),E=0;E<W.length;E++)W[E].ind=E;return[N,W]}function w(P,A,F,K,N){if(P.left==null)return P.tdst=function(D,z,$,Z,re){const ee=z-D[0],Q=$-D[1],fe=Z-D[2],Ee=re-D[3];return ee*ee+Q*Q+fe*fe+Ee*Ee}(P.est.q,A,F,K,N),P;const W=b(P.est,A,F,K,N);let E=P.left,Y=P.right;W>0&&(E=P.right,Y=P.left);const H=w(E,A,F,K,N);if(H.tdst<=W*W)return H;const M=w(Y,A,F,K,N);return M.tdst<H.tdst?M:H}function b(P,A,F,K,N){const{e:W}=P;return W[0]*A+W[1]*F+W[2]*K+W[3]*N-P.eMq}function k(P,A,F,K,N,W){for(K-=4;F<K;){for(;T(P,F,N)<=W;)F+=4;for(;T(P,K,N)>W;)K-=4;if(F>=K)break;const E=A[F>>2];A[F>>2]=A[K>>2],A[K>>2]=E,F+=4,K-=4}for(;T(P,F,N)>W;)F-=4;return F+4}function T(P,A,F){return P[A]*F[0]+P[A+1]*F[1]+P[A+2]*F[2]+P[A+3]*F[3]}function I(P,A,F){const K=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],N=[0,0,0,0],W=F-A>>2;for(let E=A;E<F;E+=4){const Y=P[E]*.00392156862745098,H=P[E+1]*(1/255),M=P[E+2]*(1/255),B=P[E+3]*(1/255);N[0]+=Y,N[1]+=H,N[2]+=M,N[3]+=B,K[0]+=Y*Y,K[1]+=Y*H,K[2]+=Y*M,K[3]+=Y*B,K[5]+=H*H,K[6]+=H*M,K[7]+=H*B,K[10]+=M*M,K[11]+=M*B,K[15]+=B*B}return K[4]=K[1],K[8]=K[2],K[9]=K[6],K[12]=K[3],K[13]=K[7],K[14]=K[11],{R:K,m:N,N:W}}function R(P){const{R:A}=P,{m:F}=P,{N:K}=P,N=F[0],W=F[1],E=F[2],Y=F[3],H=K==0?0:1/K,M=[A[0]-N*N*H,A[1]-N*W*H,A[2]-N*E*H,A[3]-N*Y*H,A[4]-W*N*H,A[5]-W*W*H,A[6]-W*E*H,A[7]-W*Y*H,A[8]-E*N*H,A[9]-E*W*H,A[10]-E*E*H,A[11]-E*Y*H,A[12]-Y*N*H,A[13]-Y*W*H,A[14]-Y*E*H,A[15]-Y*Y*H],B=M,D=j;let z=[Math.random(),Math.random(),Math.random(),Math.random()],$=0,Z=0;if(K!=0)for(let ee=0;ee<16&&(z=D.multVec(B,z),Z=Math.sqrt(D.dot(z,z)),z=D.sml(1/Z,z),!(ee!=0&&Math.abs(Z-$)<1e-9));ee++)$=Z;const re=[N*H,W*H,E*H,Y*H];return{Cov:M,q:re,e:z,L:$,eMq255:D.dot(D.sml(255,re),z),eMq:D.dot(z,re),rgba:(Math.round(255*re[3])<<24|Math.round(255*re[2])<<16|Math.round(255*re[1])<<8|Math.round(255*re[0])<<0)>>>0}}var j={multVec:(P,A)=>[P[0]*A[0]+P[1]*A[1]+P[2]*A[2]+P[3]*A[3],P[4]*A[0]+P[5]*A[1]+P[6]*A[2]+P[7]*A[3],P[8]*A[0]+P[9]*A[1]+P[10]*A[2]+P[11]*A[3],P[12]*A[0]+P[13]*A[1]+P[14]*A[2]+P[15]*A[3]],dot:(P,A)=>P[0]*A[0]+P[1]*A[1]+P[2]*A[2]+P[3]*A[3],sml:(P,A)=>[P*A[0],P*A[1],P*A[2],P*A[3]]};hr.encode=function(A,F,K,N,W,E,Y){N==null&&(N=0),Y==null&&(Y=!1);const H=m(A,F,K,N,[!1,!1,!1,0,Y,!1]);return h(H,-1),c(H,F,K,W,E)},hr.encodeLL=function(A,F,K,N,W,E,Y,H){const M={ctype:0+(N==1?0:2)+(W==0?0:4),depth:E,frames:[]},B=(N+W)*E,D=B*F;for(let z=0;z<A.length;z++)M.frames.push({rect:{x:0,y:0,width:F,height:K},img:new Uint8Array(A[z]),blend:0,dispose:1,bpp:Math.ceil(B/8),bpl:Math.ceil(D/8)});return h(M,0,!0),c(M,F,K,Y,H)},hr.encode.compress=m,hr.encode.dither=l,hr.quantize=_,hr.quantize.getKDtree=S,hr.quantize.getNearest=w})();const Nw={toArrayBuffer(t,e){const n=t.width,r=t.height,i=n<<2,o=t.getContext("2d").getImageData(0,0,n,r),a=new Uint32Array(o.data.buffer),l=(32*n+31)/32<<2,c=l*r,h=122+c,m=new ArrayBuffer(h),f=new DataView(m),g=1<<20;let y,v,_,S,w=g,b=0,k=0,T=0;function I(P){f.setUint16(k,P,!0),k+=2}function R(P){f.setUint32(k,P,!0),k+=4}function j(P){k+=P}I(19778),R(h),j(4),R(122),R(108),R(n),R(-r>>>0),I(1),I(32),R(3),R(c),R(2835),R(2835),j(8),R(16711680),R(65280),R(255),R(4278190080),R(1466527264),function P(){for(;b<r&&w>0;){for(S=122+b*l,y=0;y<i;)w--,v=a[T++],_=v>>>24,f.setUint32(S+y,v<<8|_),y+=4;b++}T<a.length?(w=g,setTimeout(P,Nw._dly)):e(m)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var Dn={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},kj={[Dn.CHROME]:16384,[Dn.FIREFOX]:11180,[Dn.DESKTOP_SAFARI]:16384,[Dn.IE]:8192,[Dn.IOS]:4096,[Dn.ETC]:8192};const dp=typeof window<"u",Iw=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Fu=dp&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),Ej=(dp||Iw)&&(Fu&&Fu.getOriginalSymbol(window,"File")||typeof File<"u"&&File),Mw=(dp||Iw)&&(Fu&&Fu.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function hp(t,e,n=Date.now()){return new Promise(r=>{const i=t.split(","),o=i[0].match(/:(.*?);/)[1],a=globalThis.atob(i[1]);let l=a.length;const c=new Uint8Array(l);for(;l--;)c[l]=a.charCodeAt(l);const h=new Blob([c],{type:o});h.name=e,h.lastModified=n,r(h)})}function zw(t){return new Promise((e,n)=>{const r=new Mw;r.onload=()=>e(r.result),r.onerror=i=>n(i),r.readAsDataURL(t)})}function Bw(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>n(i),r.src=t})}function so(){if(so.cachedResult!==void 0)return so.cachedResult;let t=Dn.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=Dn.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=Dn.IOS:/Safari/i.test(e)?t=Dn.DESKTOP_SAFARI:/Firefox/i.test(e)?t=Dn.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=Dn.IE),so.cachedResult=t,so.cachedResult}function Fw(t,e){const n=so(),r=kj[n];let i=t,o=e,a=i*o;const l=i>o?o/i:i/o;for(;a>r*r;){const c=(r+i)/2,h=(r+o)/2;c<h?(o=h,i=h*l):(o=c*l,i=c),a=i*o}return{width:i,height:o}}function gc(t,e){let n,r;try{if(n=new OffscreenCanvas(t,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=t,n.height=e,[n,r]}function Uw(t,e){const{width:n,height:r}=Fw(t.width,t.height),[i,o]=gc(n,r);return e&&/jpe?g/.test(e)&&(o.fillStyle="white",o.fillRect(0,0,i.width,i.height)),o.drawImage(t,0,0,i.width,i.height),i}function ru(){return ru.cachedResult!==void 0||(ru.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),ru.cachedResult}function Uu(t,e={}){return new Promise(function(n,r){let i,o;var a=function(){try{return o=Uw(i,e.fileType||t.type),n([i,o])}catch(c){return r(c)}},l=function(c){try{var h=function(m){try{throw m}catch(f){return r(f)}};try{let m;return zw(t).then(function(f){try{return m=f,Bw(m).then(function(g){try{return i=g,function(){try{return a()}catch(y){return r(y)}}()}catch(y){return h(y)}},h)}catch(g){return h(g)}},h)}catch(m){h(m)}}catch(m){return r(m)}};try{if(ru()||[Dn.DESKTOP_SAFARI,Dn.MOBILE_SAFARI].includes(so()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(c){try{return i=c,a()}catch{return l()}},l)}catch{l()}})}function Wu(t,e,n,r,i=1){return new Promise(function(o,a){let l;if(e==="image/png"){let f,g,y;return f=t.getContext("2d"),{data:g}=f.getImageData(0,0,t.width,t.height),y=hr.encode([g.buffer],t.width,t.height,4096*i),l=new Blob([y],{type:e}),l.name=n,l.lastModified=r,c.call(this)}{let f=function(){return c.call(this)};var h=f;if(e==="image/bmp")return new Promise(g=>Nw.toBlob(t,g)).then((function(g){try{return l=g,l.name=n,l.lastModified=r,f.call(this)}catch(y){return a(y)}}).bind(this),a);{let g=function(){return f.call(this)};var m=g;if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:i}).then((function(y){try{return l=y,l.name=n,l.lastModified=r,g.call(this)}catch(v){return a(v)}}).bind(this),a);{let y;return y=t.toDataURL(e,i),hp(y,n,r).then((function(v){try{return l=v,g.call(this)}catch(_){return a(_)}}).bind(this),a)}}}function c(){return o(l)}})}function Ar(t){t.width=0,t.height=0}function Qo(){return new Promise(function(t,e){let n,r,i,o;return Qo.cachedResult!==void 0?t(Qo.cachedResult):hp("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(a){try{return n=a,Uu(n).then(function(l){try{return r=l[1],Wu(r,n.type,n.name,n.lastModified).then(function(c){try{return i=c,Ar(r),Uu(i).then(function(h){try{return o=h[0],Qo.cachedResult=o.width===1&&o.height===2,t(Qo.cachedResult)}catch(m){return e(m)}},e)}catch(h){return e(h)}},e)}catch(c){return e(c)}},e)}catch(l){return e(l)}},e)})}function Ww(t){return new Promise((e,n)=>{const r=new Mw;r.onload=i=>{const o=new DataView(i.target.result);if(o.getUint16(0,!1)!=65496)return e(-2);const a=o.byteLength;let l=2;for(;l<a;){if(o.getUint16(l+2,!1)<=8)return e(-1);const c=o.getUint16(l,!1);if(l+=2,c==65505){if(o.getUint32(l+=2,!1)!=1165519206)return e(-1);const h=o.getUint16(l+=6,!1)==18761;l+=o.getUint32(l+4,h);const m=o.getUint16(l,h);l+=2;for(let f=0;f<m;f++)if(o.getUint16(l+12*f,h)==274)return e(o.getUint16(l+12*f+8,h))}else{if((65280&c)!=65280)break;l+=o.getUint16(l,!1)}}return e(-1)},r.onerror=i=>n(i),r.readAsArrayBuffer(t)})}function $w(t,e){const{width:n}=t,{height:r}=t,{maxWidthOrHeight:i}=e;let o,a=t;return isFinite(i)&&(n>i||r>i)&&([a,o]=gc(n,r),n>r?(a.width=i,a.height=r/n*i):(a.width=n/r*i,a.height=i),o.drawImage(t,0,0,a.width,a.height),Ar(t)),a}function Hw(t,e){const{width:n}=t,{height:r}=t,[i,o]=gc(n,r);switch(e>4&&e<9?(i.width=r,i.height=n):(i.width=n,i.height=r),e){case 2:o.transform(-1,0,0,1,n,0);break;case 3:o.transform(-1,0,0,-1,n,r);break;case 4:o.transform(1,0,0,-1,0,r);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,r,0);break;case 7:o.transform(0,-1,-1,0,r,n);break;case 8:o.transform(0,-1,1,0,0,n)}return o.drawImage(t,0,0,n,r),Ar(t),i}function _y(t,e,n=0){return new Promise(function(r,i){let o,a,l,c,h,m,f,g,y,v,_,S,w,b,k,T,I,R,j,P;function A(K=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;o+=K,e.onProgress(Math.min(o,100))}function F(K){if(e.signal&&e.signal.aborted)throw e.signal.reason;o=Math.min(Math.max(K,o),100),e.onProgress(o)}return o=n,a=e.maxIteration||10,l=1024*e.maxSizeMB*1024,A(),Uu(t,e).then((function(K){try{return[,c]=K,A(),h=$w(c,e),A(),new Promise(function(N,W){var E;if(!(E=e.exifOrientation))return Ww(t).then((function(H){try{return E=H,Y.call(this)}catch(M){return W(M)}}).bind(this),W);function Y(){return N(E)}return Y.call(this)}).then((function(N){try{return m=N,A(),Qo().then((function(W){try{return f=W?h:Hw(h,m),A(),g=e.initialQuality||1,y=e.fileType||t.type,Wu(f,y,t.name,t.lastModified,g).then((function(E){try{{let B=function(){if(a--&&(k>l||k>w)){let z,$;return z=P?.95*j.width:j.width,$=P?.95*j.height:j.height,[I,R]=gc(z,$),R.drawImage(j,0,0,z,$),g*=y==="image/png"?.85:.95,Wu(I,y,t.name,t.lastModified,g).then(function(Z){try{return T=Z,Ar(j),j=I,k=T.size,F(Math.min(99,Math.floor((b-k)/(b-l)*100))),B}catch(re){return i(re)}},i)}return[1]},D=function(){return Ar(j),Ar(I),Ar(h),Ar(f),Ar(c),F(100),r(T)};var H=B,M=D;if(v=E,A(),_=v.size>l,S=v.size>t.size,!_&&!S)return F(100),r(v);var Y;return w=t.size,b=v.size,k=b,j=f,P=!e.alwaysKeepResolution&&_,(Y=(function(z){for(;z;){if(z.then)return void z.then(Y,i);try{if(z.pop){if(z.length)return z.pop()?D.call(this):z;z=B}else z=z.call(this)}catch($){return i($)}}}).bind(this))(B)}}catch(B){return i(B)}}).bind(this),i)}catch(E){return i(E)}}).bind(this),i)}catch(W){return i(W)}}).bind(this),i)}catch(N){return i(N)}}).bind(this),i)})}const Cj=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Od;function Tj(t,e){return new Promise((n,r)=>{Od||(Od=function(a){const l=[];return l.push(a),URL.createObjectURL(new Blob(l))}(Cj));const i=new Worker(Od);i.addEventListener("message",function(a){if(e.signal&&e.signal.aborted)i.terminate();else if(a.data.progress===void 0){if(a.data.error)return r(new Error(a.data.error)),void i.terminate();n(a.data.file),i.terminate()}else e.onProgress(a.data.progress)}),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),i.terminate()}),i.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function an(t,e){return new Promise(function(n,r){let i,o,a,l,c,h;if(i={...e},a=0,{onProgress:l}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,c=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=y=>{a=y,typeof l=="function"&&l(a)},!(t instanceof Blob||t instanceof Ej))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(h=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!c||typeof Worker!="function"||h)return _y(t,i).then((function(y){try{return o=y,g.call(this)}catch(v){return r(v)}}).bind(this),r);var m=(function(){try{return g.call(this)}catch(y){return r(y)}}).bind(this),f=function(y){try{return _y(t,i).then(function(v){try{return o=v,m()}catch(_){return r(_)}},r)}catch(v){return r(v)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",Tj(t,i).then(function(y){try{return o=y,m()}catch{return f()}},f)}catch{f()}function g(){try{o.name=t.name,o.lastModified=t.lastModified}catch{}try{i.preserveExif&&t.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===t.type)&&(o=Lw(t,o))}catch{}return n(o)}})}an.getDataUrlFromFile=zw,an.getFilefromDataUrl=hp,an.loadImage=Bw,an.drawImageInCanvas=Uw,an.drawFileInCanvas=Uu,an.canvasToFile=Wu,an.getExifOrientation=Ww,an.handleMaxWidthOrHeight=$w,an.followExifOrientation=Hw,an.cleanupCanvasMemory=Ar,an.isAutoOrientationInBrowser=Qo,an.approximateBelowMaximumCanvasSizeOfBrowser=Fw,an.copyExifWithoutOrientation=Lw,an.getBrowserName=so,an.version="2.0.2";const vy={SCHEDULED:"#2196F3",IN_PROGRESS:"#FF9800",COMPLETED:"#4CAF50",CANCELED:"#ef4444"};function Fr({title:t,icon:e,defaultOpen:n=!1,children:r}){const[i,o]=J.useState(n);return d.jsxs("div",{className:"mobile-detail__section",children:[d.jsxs("button",{className:"mobile-detail__section-header",onClick:()=>o(!i),children:[d.jsxs("span",{className:"mobile-detail__section-title",children:[e," ",t]}),d.jsx("span",{className:`mobile-detail__section-chevron ${i?"mobile-detail__section-chevron--open":""}`,children:""})]}),i&&d.jsx("div",{className:"mobile-detail__section-content",children:r})]})}function tn({label:t,value:e,href:n}){return d.jsxs("div",{className:"mobile-detail__field",children:[d.jsx("div",{className:"mobile-detail__field-label",children:t}),n?d.jsx("a",{href:n,className:"mobile-detail__field-value mobile-detail__field-value--link",children:e}):d.jsx("div",{className:"mobile-detail__field-value",children:e||d.jsx("span",{className:"mobile-detail__field-empty",children:"Not set"})})]})}function Pj({claim:t,photos:e,users:n,isAdmin:r,isEditing:i,backLink:o,onStartEditing:a,onSaveEdits:l,onCancelEdits:c,onStatusChange:h,onPhotoClick:m,onPhotoCapture:f,onPhoto:g}){const y=k=>k?k.replace("_"," "):"Assigned",v=()=>{const k=encodeURIComponent(`${t.address_line1||""} ${t.city||""} ${t.state||""} ${t.zip||""}`);window.open(`https://www.google.com/maps?q=${k}`,"_blank")},_=k=>{if(!k)return"Not scheduled";try{return new Date(k).toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}catch{return"Invalid date"}},S=()=>{if(!t.assigned_to)return"Unassigned";const k=n.find(T=>T.user_id===t.assigned_to);return(k==null?void 0:k.full_name)||"Unknown User"},w=t.status==="CANCELED",b=e.length>0;return d.jsxs("div",{className:"mobile-detail",children:[d.jsxs("div",{className:"mobile-detail__header",children:[d.jsx(_t,{to:o,className:"mobile-detail__back",children:""}),d.jsxs("div",{className:"mobile-detail__header-info",children:[d.jsxs("span",{className:"mobile-detail__claim-number",children:["#",t.claim_number]}),d.jsx("span",{className:"mobile-detail__status",style:{backgroundColor:vy[t.status]||"#9E9E9E"},children:y(t.status)})]}),r&&!i&&!w&&d.jsx("button",{className:"mobile-detail__edit-btn",onClick:a,children:"Edit"}),r&&i&&d.jsxs("div",{className:"mobile-detail__edit-actions",children:[d.jsx("button",{className:"mobile-detail__save-btn",onClick:l,children:"Save"}),d.jsx("button",{className:"mobile-detail__cancel-btn",onClick:c,children:""})]})]}),d.jsxs("div",{className:"mobile-detail__banner",children:[d.jsx("div",{className:"mobile-detail__customer-name",children:t.customer_name}),t.firm&&d.jsx("div",{className:"mobile-detail__firm-badge",style:{borderColor:_n(t.firm),color:_n(t.firm)},children:t.firm})]}),d.jsxs("div",{className:"mobile-detail__content",children:[d.jsx(_t,{to:f,className:"mobile-detail__photo-capture-btn",children:" Guided Photo Capture"}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",marginBottom:"12px"},children:[d.jsx("input",{id:`mobile-photo-gallery-${t.id}`,type:"file",accept:"image/*",multiple:!0,onChange:async k=>{const T=k.target.files;T&&T.length>0&&(await(g==null?void 0:g(T)),k.target.value="")},style:{display:"none"}}),d.jsx("label",{htmlFor:`mobile-photo-gallery-${t.id}`,className:"mobile-detail__photo-capture-btn",style:{marginBottom:0},children:" Choose from Gallery"})]}),d.jsxs(Fr,{title:"Customer",icon:"",defaultOpen:!0,children:[d.jsx(tn,{label:"Name",value:t.customer_name}),d.jsx(tn,{label:"Phone",value:t.phone?` ${t.phone}`:null,href:t.phone?`tel:${t.phone}`:void 0}),d.jsx(tn,{label:"Email",value:t.email?` ${t.email}`:null,href:t.email?`mailto:${t.email}`:void 0})]}),d.jsxs(Fr,{title:"Location",icon:"",defaultOpen:!0,children:[d.jsx(tn,{label:"Address",value:t.address_line1?`${t.address_line1}${t.address_line2?`, ${t.address_line2}`:""}`:null}),d.jsx(tn,{label:"City",value:t.city?`${t.city}, ${t.state||""} ${t.zip||""}`:null}),d.jsx("button",{className:"mobile-detail__maps-btn",onClick:v,children:" Open in Maps"})]}),d.jsxs(Fr,{title:"Appointment",icon:"",defaultOpen:!0,children:[d.jsx(tn,{label:"Start",value:_(t.appointment_start)}),d.jsx(tn,{label:"End",value:_(t.appointment_end)}),d.jsx(tn,{label:"Assigned To",value:S()})]}),d.jsxs(Fr,{title:"Vehicle",icon:"",defaultOpen:!1,children:[d.jsx(tn,{label:"VIN",value:t.vin}),d.jsxs("div",{className:"mobile-detail__field-row",children:[d.jsx(tn,{label:"Year",value:t.vehicle_year}),d.jsx(tn,{label:"Make",value:t.vehicle_make}),d.jsx(tn,{label:"Model",value:t.vehicle_model})]}),d.jsx(tn,{label:"Date of Loss",value:t.date_of_loss?new Date(t.date_of_loss).toLocaleDateString():null}),d.jsx(tn,{label:"Insurance",value:t.insurance_company})]}),t.notes&&d.jsx(Fr,{title:"Notes",icon:"",defaultOpen:!1,children:d.jsx("div",{className:"mobile-detail__notes",children:t.notes})}),d.jsx(Fr,{title:`Photos (${e.length})`,icon:"",defaultOpen:b,children:e.length===0?d.jsx("div",{className:"mobile-detail__photos-empty",children:"No photos yet. Use Guided Photo Capture to add photos."}):d.jsx("div",{className:"mobile-detail__photos-grid",children:e.map((k,T)=>{const I=ze.storage.from("claim-photos").getPublicUrl(k.storage_path).data.publicUrl;return d.jsx("div",{className:"mobile-detail__photo",style:{backgroundImage:`url(${I})`},onClick:()=>m(T)},k.id)})})}),r&&d.jsxs(Fr,{title:"Payment",icon:"",defaultOpen:!1,children:[d.jsx(tn,{label:"Pay Amount",value:t.pay_amount?`$${t.pay_amount.toFixed(2)}`:null}),d.jsx(tn,{label:"File Total",value:t.file_total?`$${t.file_total.toFixed(2)}`:null}),t.status==="COMPLETED"&&d.jsxs(d.Fragment,{children:[d.jsx(tn,{label:"Payout Status",value:t.payout_status||"Not applicable"}),d.jsx(tn,{label:"Expected Payout",value:t.expected_payout_date?new Date(t.expected_payout_date).toLocaleDateString():null})]})]}),r&&d.jsxs(Fr,{title:"Status & Actions",icon:"",defaultOpen:!1,children:[d.jsxs("div",{className:"mobile-detail__status-current",children:[d.jsx("span",{className:"mobile-detail__status-label",children:"Current Status:"}),d.jsx("span",{className:"mobile-detail__status-badge",style:{backgroundColor:vy[t.status]||"#9E9E9E"},children:y(t.status)})]}),d.jsxs("div",{className:"mobile-detail__status-actions",children:[d.jsx("button",{className:"mobile-detail__action-btn mobile-detail__action-btn--scheduled",onClick:()=>h("SCHEDULED"),children:" Scheduled"}),d.jsx("button",{className:"mobile-detail__action-btn mobile-detail__action-btn--progress",onClick:()=>h("IN_PROGRESS"),children:" In Progress"}),d.jsx("button",{className:"mobile-detail__action-btn mobile-detail__action-btn--complete",onClick:()=>h("COMPLETED"),children:" Complete"}),d.jsx("button",{className:"mobile-detail__action-btn mobile-detail__action-btn--cancel",onClick:()=>h("CANCELED"),children:" Cancel"})]})]}),r&&d.jsxs(Fr,{title:"Danger Zone",icon:"",defaultOpen:!1,children:[d.jsx("p",{className:"mobile-detail__danger-warning",children:"Permanent deletion cannot be undone. All photos and data will be lost."}),d.jsx("button",{className:"mobile-detail__delete-btn",onClick:()=>h("DELETE"),children:" Permanently Delete Claim"})]})]})]})}function wy(){var ct;const{id:t}=Yv(),e=ni(),[n]=Vf(),[r,i]=J.useState(null),[o,a]=J.useState([]),[l,c]=J.useState(null),[h,m]=J.useState([]),[f,g]=J.useState(!1),y=ap(),[v,_]=J.useState(0),[S,w]=J.useState(1),[b,k]=J.useState(0),[T,I]=J.useState(0),[R,j]=J.useState(!1),[P,A]=J.useState({x:0,y:0}),[F,K]=J.useState(""),[N,W]=J.useState(""),[E,Y]=J.useState(""),[H,M]=J.useState(""),[B,D]=J.useState(""),[z,$]=J.useState(""),[Z,re]=J.useState(""),[ee,Q]=J.useState(""),[fe,Ee]=J.useState(""),[ke,ae]=J.useState(""),[be,Ce]=J.useState(""),[Te,nt]=J.useState(""),[O,ue]=J.useState(""),[se,G]=J.useState(""),[q,ne]=J.useState(""),[ce,pe]=J.useState(""),[ie,ge]=J.useState(""),[ve,_e]=J.useState(""),[Pe,et]=J.useState(""),[Re,st]=J.useState(""),[dt,lt]=J.useState(""),[Pt,Ke]=J.useState([]),wt=async()=>{const{data:V}=await ze.from("claims").select("*").eq("id",t).single();i(V);const Se=await ze.from("claim_photos").select("*").eq("claim_id",t).order("created_at",{ascending:!1});a(Se.data||[])};J.useEffect(()=>{wt(),(async()=>{const{data:V}=await ze.from("profiles").select("user_id, full_name, role").order("full_name");m(V||[])})(),(async()=>{const{data:V}=await ze.from("vendors").select("id, name").eq("active",!0).order("name");Ke(V||[])})()},[t]);const $t=async V=>{if(!(!V||V.length===0||!t)){for(let Se=0;Se<V.length;Se++){const Ge=V[Se];try{const De=await an(Ge,{maxWidthOrHeight:1600,maxSizeMB:1.5,useWebWorker:!0}),We=`claim/${t}/${crypto.randomUUID()}.jpg`,{error:Je}=await ze.storage.from("claim-photos").upload(We,De,{contentType:"image/jpeg"});if(Je){alert(`Error uploading ${Ge.name}: ${Je.message}`);continue}const{error:xt}=await ze.from("claim_photos").insert({claim_id:t,storage_path:We});xt&&alert(`Error saving ${Ge.name}: ${xt.message}`)}catch(De){alert(`Error processing ${Ge.name}: ${De.message}`)}}await wt()}},Bt=async V=>{const Se=V.target.files;!Se||Se.length===0||(await $t(Se),V.target.value="")},It=async V=>{if(!t)return;const{error:Se}=await ze.from("claims").update(V).eq("id",t);Se?alert(Se.message):await wt()},Mn=()=>{var V,Se,Ge;K((r==null?void 0:r.customer_name)||""),W((r==null?void 0:r.phone)||""),Y((r==null?void 0:r.email)||""),M(((V=r==null?void 0:r.vehicle_year)==null?void 0:V.toString())||""),D((r==null?void 0:r.vehicle_make)||""),$((r==null?void 0:r.vehicle_model)||""),re((r==null?void 0:r.vin)||""),Q((r==null?void 0:r.date_of_loss)||""),Ee((r==null?void 0:r.insurance_company)||""),ae((r==null?void 0:r.notes)||""),Ce((r==null?void 0:r.address_line1)||""),nt((r==null?void 0:r.address_line2)||""),ue((r==null?void 0:r.city)||""),G((r==null?void 0:r.state)||""),ne((r==null?void 0:r.zip)||""),pe(r!=null&&r.appointment_start?(()=>{const De=new Date(r.appointment_start),We=De.getFullYear(),Je=String(De.getMonth()+1).padStart(2,"0"),xt=String(De.getDate()).padStart(2,"0"),ht=String(De.getHours()).padStart(2,"0"),pt=String(De.getMinutes()).padStart(2,"0");return`${We}-${Je}-${xt}T${ht}:${pt}`})():""),ge(r!=null&&r.appointment_end?(()=>{const De=new Date(r.appointment_end),We=De.getFullYear(),Je=String(De.getMonth()+1).padStart(2,"0"),xt=String(De.getDate()).padStart(2,"0"),ht=String(De.getHours()).padStart(2,"0"),pt=String(De.getMinutes()).padStart(2,"0");return`${We}-${Je}-${xt}T${ht}:${pt}`})():""),_e((r==null?void 0:r.assigned_to)||""),et(((Se=r==null?void 0:r.pay_amount)==null?void 0:Se.toString())||""),st(((Ge=r==null?void 0:r.file_total)==null?void 0:Ge.toString())||""),lt((r==null?void 0:r.firm)||""),g(!0)},Pn=async()=>{const V={customer_name:F,phone:N,email:E,vehicle_make:B,vehicle_model:z,vin:Z,date_of_loss:ee||null,insurance_company:fe||null,notes:ke,address_line1:be,address_line2:Te,city:O,state:se,zip:q,assigned_to:ve||null,firm:dt||null};if(H){const Se=parseInt(H);isNaN(Se)||(V.vehicle_year=Se)}if(Pe){const Se=parseFloat(Pe);isNaN(Se)||(V.pay_amount=Se)}else V.pay_amount=null;if(Re){const Se=parseFloat(Re);isNaN(Se)||(V.file_total=Se)}else V.file_total=null;if(ce){const[Se,Ge]=ce.split("T"),[De,We,Je]=Se.split("-").map(Number),[xt,ht]=Ge.split(":").map(Number),pt=new Date(De,We-1,Je,xt,ht,0);V.appointment_start=pt.toISOString()}if(ie){const[Se,Ge]=ie.split("T"),[De,We,Je]=Se.split("-").map(Number),[xt,ht]=Ge.split(":").map(Number),pt=new Date(De,We-1,Je,xt,ht,0);V.appointment_end=pt.toISOString()}await It(V),g(!1)},dn=()=>{g(!1)},zn=async()=>{if(confirm("Mark this claim as COMPLETED? This will notify the admin.")){const V=new Date,Se=`${V.getFullYear()}-${String(V.getMonth()+1).padStart(2,"0")}`,Ge=V.getFullYear(),De=String(V.getMonth()+1).padStart(2,"0"),We=String(V.getDate()).padStart(2,"0"),Je=`${Ge}-${De}-${We}T00:00:00Z`;let xt=null;if(r.firm)try{const ht=nu(r.firm,V),pt=ht.payoutDate.getFullYear(),Xt=String(ht.payoutDate.getMonth()+1).padStart(2,"0"),pn=String(ht.payoutDate.getDate()).padStart(2,"0");xt=`${pt}-${Xt}-${pn}T00:00:00Z`}catch(ht){console.warn("Could not calculate expected payout date:",ht)}await It({status:"COMPLETED",completed_month:Se,completion_date:Je,expected_payout_date:xt,payout_status:"unpaid"})}},jt=async()=>{if(!t||!confirm(` WARNING: Are you sure you want to PERMANENTLY DELETE this claim?

Claim #${r.claim_number}
Customer: ${r.customer_name}

This action CANNOT be undone and will delete:
- The claim record
- All associated photos
- All related data

Type "DELETE" in the next dialog to confirm.`))return;if(prompt('Type "DELETE" to confirm permanent deletion:')!=="DELETE"){alert("Deletion cancelled - text did not match.");return}for(const De of o)await ze.storage.from("claim-photos").remove([De.storage_path]);await ze.from("claim_photos").delete().eq("claim_id",t);const{error:Ge}=await ze.from("claims").delete().eq("id",t);Ge?alert(`Error deleting claim: ${Ge.message}`):(alert("Claim permanently deleted."),e("/admin/claims"))},Ht=async V=>{if(!confirm("Delete this photo? This cannot be undone."))return;const{error:Se}=await ze.storage.from("claim-photos").remove([V.storage_path]);if(Se){alert(`Error deleting photo from storage: ${Se.message}`);return}const{error:Ge}=await ze.from("claim_photos").delete().eq("id",V.id);if(Ge){alert(`Error deleting photo record: ${Ge.message}`);return}c(null),await wt()},Bn=async()=>{if(o.length===0){alert("No photos to download");return}try{const V=new Tw,Se=V.folder("photos");for(let Je=0;Je<o.length;Je++){const xt=o[Je],ht=ze.storage.from("claim-photos").getPublicUrl(xt.storage_path).data.publicUrl,Xt=await(await fetch(ht)).blob(),pn=`photo-${Je+1}.jpg`;Se==null||Se.file(pn,Xt)}const Ge=await V.generateAsync({type:"blob"}),De=URL.createObjectURL(Ge),We=document.createElement("a");We.href=De,We.download=`claim_${r.claim_number}_photos.zip`,document.body.appendChild(We),We.click(),document.body.removeChild(We),URL.revokeObjectURL(De)}catch(V){alert(`Error creating zip file: ${V.message}`)}},hn=()=>{_(0),w(1),k(0),I(0),j(!1)},Lr=()=>{_(V=>(V-90)%360)},fn=()=>{_(V=>(V+90)%360)},on=()=>{w(V=>Math.min(V+.5,4))},ri=()=>{w(V=>{const Se=Math.max(V-.5,1);return Se===1&&(k(0),I(0)),Se})},Es=V=>{S>1&&(j(!0),A({x:V.clientX-b,y:V.clientY-T}))},te=V=>{R&&S>1&&(k(V.clientX-P.x),I(V.clientY-P.y))},oe=()=>{j(!1)},de=V=>{V.preventDefault(),V.deltaY<0?on():ri()};if(!r)return null;const ye=Zn(),me=ye==null?void 0:ye.getCurrentUser(),Be=(me==null?void 0:me.role)==="admin",Ve=n.get("from")==="calendar",Le=(Be?"/admin/claims":"/my-claims")+(Ve?"?view=calendar":""),Me=async V=>{if(V==="DELETE"){jt();return}if(V==="CANCELED"){confirm("Cancel this claim? This will mark it as CANCELED and remove it from active claims.")&&It({status:"CANCELED"});return}if(V==="COMPLETED"){const Se=new Date,Ge=Se.getFullYear(),De=String(Se.getMonth()+1).padStart(2,"0"),We=String(Se.getDate()).padStart(2,"0"),Je=`${Ge}-${De}-${We}T00:00:00Z`,xt=`${Ge}-${De}`;let ht=null;if(r.firm)try{const pt=nu(r.firm,Se),Xt=pt.payoutDate.getFullYear(),pn=String(pt.payoutDate.getMonth()+1).padStart(2,"0"),Qe=String(pt.payoutDate.getDate()).padStart(2,"0");ht=`${Xt}-${pn}-${Qe}T00:00:00Z`}catch(pt){console.warn("Could not calculate expected payout date:",pt)}It({status:"COMPLETED",completion_date:Je,completed_month:xt,expected_payout_date:ht,payout_status:"unpaid"});return}It({status:V})};if(y)return d.jsxs(d.Fragment,{children:[d.jsx(Pj,{claim:r,photos:o,users:h,isAdmin:Be,isEditing:f,backLink:Le,onStartEditing:Mn,onSaveEdits:Pn,onCancelEdits:dn,onStatusChange:Me,onMarkComplete:zn,onPhotoClick:c,onPhotoCapture:`/appraiser/claim/${t}/photos`,onPhoto:$t}),l!==null&&d.jsxs("div",{onClick:()=>{c(null),hn()},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.95)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[d.jsx("button",{onClick:()=>{c(null),hn()},style:{position:"absolute",top:20,right:20,background:"white",border:"none",borderRadius:50,width:40,height:40,fontSize:24,cursor:"pointer",fontWeight:"bold",zIndex:1e4},children:""}),d.jsx("div",{style:{position:"relative",maxWidth:"90%",maxHeight:"80%",display:"flex",alignItems:"center",justifyContent:"center"},onClick:V=>V.stopPropagation(),children:d.jsx("img",{src:ze.storage.from("claim-photos").getPublicUrl(o[l].storage_path).data.publicUrl,style:{maxWidth:"100%",maxHeight:"80vh",objectFit:"contain"}})}),d.jsxs("div",{style:{display:"flex",gap:16,marginTop:20,alignItems:"center"},onClick:V=>V.stopPropagation(),children:[d.jsx("button",{onClick:V=>{V.stopPropagation(),c(l>0?l-1:o.length-1)},style:{padding:"12px 24px",background:"#667eea",color:"white",border:"none",borderRadius:6,fontSize:16,fontWeight:"bold",cursor:"pointer"},children:" Prev"}),d.jsxs("span",{style:{color:"white",fontSize:16},children:[l+1," / ",o.length]}),d.jsx("button",{onClick:V=>{V.stopPropagation(),c(l<o.length-1?l+1:0)},style:{padding:"12px 24px",background:"#667eea",color:"white",border:"none",borderRadius:6,fontSize:16,fontWeight:"bold",cursor:"pointer"},children:"Next "})]})]})]});const Ae=()=>{const V=encodeURIComponent(`${r.address_line1} ${r.city||""} ${r.state||""} ${r.zip||""}`);window.open(`https://www.google.com/maps?q=${V}`,"_blank")},je={background:"#374151",border:"1px solid #4b5563",borderRadius:"12px",padding:"24px",boxShadow:"0 4px 6px rgba(0,0,0,0.3)"},Ue={fontSize:"22px",fontWeight:"bold",color:"#f8fafc",marginBottom:"16px",paddingBottom:"12px",borderBottom:"2px solid #4b5563"},Ne={fontSize:"15px",fontWeight:"600",color:"#cbd5e1",marginBottom:"6px",textTransform:"uppercase",letterSpacing:"0.5px"},Ze={fontSize:"17px",color:"#ffffff",marginBottom:"12px"};return d.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%)",padding:"24px 16px"},children:d.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[d.jsxs("div",{style:{...je,display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderColor:"#667eea"},children:[d.jsxs("div",{children:[d.jsxs("h2",{style:{margin:0,color:"white",fontSize:"28px",fontWeight:"bold"},children:["Claim #",r.claim_number]}),d.jsx("p",{style:{margin:"4px 0 0 0",color:"rgba(255,255,255,0.9)",fontSize:"16px"},children:r.customer_name})]}),d.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[d.jsx(_t,{to:`/appraiser/claim/${t}/photos`,style:{padding:"10px 20px",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"white",textDecoration:"none",borderRadius:"8px",fontWeight:"600",fontSize:"15px",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",display:"inline-block"},onMouseEnter:V=>{V.currentTarget.style.transform="translateY(-1px)",V.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)"},onMouseLeave:V=>{V.currentTarget.style.transform="translateY(0)",V.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)"},children:" Guided Photo Capture"}),(()=>{const V=Zn(),Se=V==null?void 0:V.getCurrentUser(),Ge=(Se==null?void 0:Se.role)==="admin",De=r.status==="CANCELED";return Ge?f?d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:Pn,style:{padding:"10px 20px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",fontSize:"15px",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},onMouseEnter:We=>{We.currentTarget.style.transform="translateY(-1px)",We.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)"},onMouseLeave:We=>{We.currentTarget.style.transform="translateY(0)",We.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)"},children:" Save Changes"}),d.jsx("button",{onClick:dn,style:{padding:"10px 20px",background:"rgba(239, 68, 68, 0.9)",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",fontSize:"15px",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},onMouseEnter:We=>{We.currentTarget.style.background="rgba(220, 38, 38, 0.9)",We.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:We=>{We.currentTarget.style.background="rgba(239, 68, 68, 0.9)",We.currentTarget.style.transform="translateY(0)"},children:" Cancel"})]}):De?d.jsx("div",{style:{padding:"10px 20px",background:"rgba(255,255,255,0.1)",color:"rgba(255,255,255,0.4)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px",fontWeight:"600",fontSize:"15px",backdropFilter:"blur(10px)",cursor:"not-allowed"},title:"Editing is disabled for archived claims",children:" Archived - Edit Disabled"}):d.jsx("button",{onClick:Mn,style:{padding:"10px 20px",background:"rgba(255,255,255,0.2)",color:"white",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"8px",fontWeight:"600",fontSize:"15px",backdropFilter:"blur(10px)",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:We=>We.currentTarget.style.background="rgba(255,255,255,0.3)",onMouseLeave:We=>We.currentTarget.style.background="rgba(255,255,255,0.2)",children:" Edit Claim"}):null})(),(()=>{const V=Zn(),Se=V==null?void 0:V.getCurrentUser(),Ge=(Se==null?void 0:Se.role)==="admin",De=n.get("from")==="calendar";let We=Ge?"/admin/claims":"/my-claims";return De&&(We+="?view=calendar"),d.jsxs(_t,{to:We,style:{padding:"10px 20px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",textDecoration:"none",borderRadius:"8px",fontWeight:"600",fontSize:"15px",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.2)",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",display:"inline-block"},onMouseEnter:Je=>{Je.currentTarget.style.background="linear-gradient(135deg, #818cf8 0%, #8b5fbf 100%)",Je.currentTarget.style.transform="translateY(-1px)",Je.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)"},onMouseLeave:Je=>{Je.currentTarget.style.background="linear-gradient(135deg, #667eea 0%, #764ba2 100%)",Je.currentTarget.style.transform="translateY(0)",Je.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)"},children:[" Back to ",De?"Calendar":"Claims"]})})(),d.jsx(_t,{to:"/",style:{padding:"10px 20px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",textDecoration:"none",borderRadius:"8px",fontWeight:"600",fontSize:"15px",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.2)",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",display:"inline-block"},onMouseEnter:V=>{V.currentTarget.style.background="linear-gradient(135deg, #818cf8 0%, #8b5fbf 100%)",V.currentTarget.style.transform="translateY(-1px)",V.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)"},onMouseLeave:V=>{V.currentTarget.style.background="linear-gradient(135deg, #667eea 0%, #764ba2 100%)",V.currentTarget.style.transform="translateY(0)",V.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)"},children:" Home"})]})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px",marginBottom:"24px"},children:[(()=>{const V=Zn(),Se=V==null?void 0:V.getCurrentUser();return(Se==null?void 0:Se.role)==="admin"?d.jsxs("div",{style:je,children:[d.jsx("h4",{style:Ue,children:" Payment Information"}),d.jsxs("div",{style:{marginBottom:"16px"},children:[d.jsx("div",{style:Ne,children:"Pay Amount"}),f?d.jsx("input",{type:"number",step:"0.01",value:Pe,onChange:De=>et(De.target.value),placeholder:"Enter amount",style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:De=>De.target.style.borderColor="#667eea",onBlur:De=>De.target.style.borderColor="#6b7280"}):r.pay_amount?d.jsxs("div",{style:Ze,children:["$",r.pay_amount.toFixed(2)]}):(r.status==="SCHEDULED"||r.status==="IN_PROGRESS")&&r.firm?d.jsxs("div",{style:{...Ze,color:"#f59e0b"},children:["$",zu(r.firm,r.pay_amount).toFixed(2),d.jsx("span",{style:{fontSize:"13px",color:"#a0aec0",marginLeft:"8px"},children:"(estimated)"})]}):d.jsx("div",{style:{...Ze,color:"#9ca3af",fontStyle:"italic"},children:"Not set"})]}),d.jsxs("div",{style:{marginBottom:"16px"},children:[d.jsx("div",{style:Ne,children:"File Total"}),f?d.jsx("input",{type:"number",step:"0.01",value:Re,onChange:De=>st(De.target.value),placeholder:"Enter file total",style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:De=>De.target.style.borderColor="#667eea",onBlur:De=>De.target.style.borderColor="#6b7280"}):r.file_total?d.jsxs("div",{style:Ze,children:["$",r.file_total.toFixed(2)]}):d.jsx("div",{style:{...Ze,color:"#9ca3af",fontStyle:"italic"},children:"Not set"})]}),r.status==="COMPLETED"&&d.jsx(d.Fragment,{children:d.jsxs("div",{style:{marginTop:"24px",paddingTop:"16px",borderTop:"2px solid #4b5563"},children:[d.jsx("h5",{style:{...Ne,fontSize:"16px",fontWeight:"bold",color:"#a78bfa",marginBottom:"16px"},children:" Payout Tracking"}),d.jsxs("div",{style:{marginBottom:"16px"},children:[d.jsx("div",{style:Ne,children:"Expected Payout Date"}),d.jsx("div",{style:Ze,children:r.expected_payout_date?new Date(r.expected_payout_date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):d.jsx("span",{style:{color:"#9ca3af",fontStyle:"italic"},children:"Not calculated"})})]}),d.jsxs("div",{style:{marginBottom:"16px"},children:[d.jsx("div",{style:Ne,children:"Actual Payout Date"}),d.jsx("div",{style:Ze,children:r.actual_payout_date?new Date(r.actual_payout_date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):d.jsx("span",{style:{color:"#9ca3af",fontStyle:"italic"},children:"Payment not received"})})]}),d.jsxs("div",{style:{marginBottom:"16px"},children:[d.jsx("div",{style:Ne,children:"Payout Status"}),d.jsx("div",{style:{...Ze,display:"inline-block",padding:"6px 16px",borderRadius:"20px",background:r.payout_status==="paid"?"#10b981":r.payout_status==="overdue"?"#ef4444":r.payout_status==="unpaid"?"#f59e0b":"#6b7280",color:"white",fontWeight:"bold",textTransform:"uppercase",fontSize:"14px"},children:r.payout_status||"not_applicable"})]}),r.payout_status!=="paid"&&!r.actual_payout_date&&d.jsx("button",{onClick:async()=>{if(confirm("Mark this claim as PAID and record today as the payment date?")){const De=new Date,We=De.getFullYear(),Je=String(De.getMonth()+1).padStart(2,"0"),xt=String(De.getDate()).padStart(2,"0"),ht=`${We}-${Je}-${xt}T00:00:00Z`;await It({actual_payout_date:ht,payout_status:"paid"})}},style:{width:"100%",padding:"14px",fontSize:"16px",fontWeight:"bold",color:"white",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",border:"none",borderRadius:"8px",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",transition:"transform 0.1s"},onMouseEnter:De=>De.currentTarget.style.transform="translateY(-2px)",onMouseLeave:De=>De.currentTarget.style.transform="translateY(0)",children:" Mark as Paid Today"})]})})]}):null})(),d.jsxs("div",{style:je,children:[d.jsx("h4",{style:Ue,children:" Firm"}),d.jsxs("div",{style:{marginBottom:"16px"},children:[d.jsx("div",{style:Ne,children:"Vendor"}),f?d.jsxs("select",{value:dt,onChange:V=>lt(V.target.value),style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s",cursor:"pointer"},onFocus:V=>V.target.style.borderColor="#667eea",onBlur:V=>V.target.style.borderColor="#6b7280",children:[d.jsx("option",{value:"",children:"Select a firm..."}),Pt.map(V=>d.jsx("option",{value:V.name,children:V.name},V.id))]}):d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[d.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"4px",background:_n(r.firm),border:"2px solid rgba(255,255,255,0.3)"}}),d.jsx("div",{style:Ze,children:r.firm||"Not assigned"})]})]})]}),d.jsxs("div",{style:je,children:[d.jsx("h4",{style:Ue,children:" Customer Information"}),d.jsxs("div",{style:{marginBottom:"16px"},children:[d.jsx("div",{style:Ne,children:"Name"}),f?d.jsx("input",{type:"text",value:F,onChange:V=>K(V.target.value),style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:V=>V.target.style.borderColor="#667eea",onBlur:V=>V.target.style.borderColor="#6b7280"}):d.jsx("div",{style:Ze,children:r.customer_name})]}),d.jsxs("div",{style:{marginBottom:"16px"},children:[d.jsx("div",{style:Ne,children:"Phone"}),f?d.jsx("input",{type:"tel",value:N,onChange:V=>W(V.target.value),placeholder:"Phone number",style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:V=>V.target.style.borderColor="#667eea",onBlur:V=>V.target.style.borderColor="#6b7280"}):r.phone?d.jsxs("a",{href:`tel:${r.phone}`,style:{fontSize:"17px",color:"#818cf8",textDecoration:"none",fontWeight:"600"},children:[" ",r.phone]}):d.jsx("div",{style:{...Ze,color:"#9ca3af",fontStyle:"italic"},children:"No phone"})]}),d.jsxs("div",{style:{marginBottom:"16px"},children:[d.jsx("div",{style:Ne,children:"Email"}),f?d.jsx("input",{type:"email",value:E,onChange:V=>Y(V.target.value),placeholder:"Email address",style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:V=>V.target.style.borderColor="#667eea",onBlur:V=>V.target.style.borderColor="#6b7280"}):r.email?d.jsxs("a",{href:`mailto:${r.email}`,style:{fontSize:"17px",color:"#818cf8",textDecoration:"none",fontWeight:"600"},children:[" ",r.email]}):d.jsx("div",{style:{...Ze,color:"#9ca3af",fontStyle:"italic"},children:"No email"})]})]}),d.jsxs("div",{style:je,children:[d.jsx("h4",{style:Ue,children:" Vehicle Information"}),d.jsxs("div",{style:{marginBottom:"16px"},children:[d.jsx("div",{style:Ne,children:"VIN"}),f?d.jsx("input",{type:"text",value:Z,onChange:V=>re(V.target.value),placeholder:"Vehicle Identification Number",style:{width:"100%",padding:"12px 16px",fontSize:"16px",fontFamily:"monospace",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:V=>V.target.style.borderColor="#667eea",onBlur:V=>V.target.style.borderColor="#6b7280"}):r.vin?d.jsx("div",{style:{...Ze,fontFamily:"monospace",fontSize:"16px"},children:r.vin}):d.jsx("div",{style:{...Ze,color:"#9ca3af",fontStyle:"italic"},children:"No VIN"})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(100px, 1fr))",gap:"12px"},children:[d.jsxs("div",{children:[d.jsx("div",{style:Ne,children:"Year"}),f?d.jsx("input",{type:"number",value:H,onChange:V=>M(V.target.value),placeholder:"Year",min:"1900",max:"2100",style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:V=>V.target.style.borderColor="#667eea",onBlur:V=>V.target.style.borderColor="#6b7280"}):r.vehicle_year?d.jsx("div",{style:Ze,children:r.vehicle_year}):d.jsx("div",{style:{...Ze,color:"#9ca3af",fontStyle:"italic"},children:"-"})]}),d.jsxs("div",{children:[d.jsx("div",{style:Ne,children:"Make"}),f?d.jsx("input",{type:"text",value:B,onChange:V=>D(V.target.value),placeholder:"Make",style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:V=>V.target.style.borderColor="#667eea",onBlur:V=>V.target.style.borderColor="#6b7280"}):r.vehicle_make?d.jsx("div",{style:Ze,children:r.vehicle_make}):d.jsx("div",{style:{...Ze,color:"#9ca3af",fontStyle:"italic"},children:"-"})]}),d.jsxs("div",{children:[d.jsx("div",{style:Ne,children:"Model"}),f?d.jsx("input",{type:"text",value:z,onChange:V=>$(V.target.value),placeholder:"Model",style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:V=>V.target.style.borderColor="#667eea",onBlur:V=>V.target.style.borderColor="#6b7280"}):r.vehicle_model?d.jsx("div",{style:Ze,children:r.vehicle_model}):d.jsx("div",{style:{...Ze,color:"#9ca3af",fontStyle:"italic"},children:"-"})]})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px",marginTop:"16px"},children:[d.jsxs("div",{children:[d.jsx("div",{style:Ne,children:"Date of Loss"}),f?d.jsx("input",{type:"date",value:ee,onChange:V=>Q(V.target.value),style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:V=>V.target.style.borderColor="#667eea",onBlur:V=>V.target.style.borderColor="#6b7280"}):r.date_of_loss?d.jsx("div",{style:Ze,children:new Date(r.date_of_loss).toLocaleDateString()}):d.jsx("div",{style:{...Ze,color:"#9ca3af",fontStyle:"italic"},children:"-"})]}),d.jsxs("div",{children:[d.jsx("div",{style:Ne,children:"Insurance Company"}),f?d.jsx("input",{type:"text",value:fe,onChange:V=>Ee(V.target.value),placeholder:"Insurance Company",style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:V=>V.target.style.borderColor="#667eea",onBlur:V=>V.target.style.borderColor="#6b7280"}):r.insurance_company?d.jsx("div",{style:Ze,children:r.insurance_company}):d.jsx("div",{style:{...Ze,color:"#9ca3af",fontStyle:"italic"},children:"-"})]})]})]})]}),(r.notes||f)&&d.jsxs("div",{style:{...je,marginBottom:"24px"},children:[d.jsx("h4",{style:Ue,children:" Accident Description"}),f?d.jsx("textarea",{value:ke,onChange:V=>ae(V.target.value),placeholder:"Enter accident description...",style:{width:"100%",minHeight:"120px",padding:"12px",background:"#475569",border:"2px solid #6b7280",borderRadius:"8px",color:"#ffffff",fontSize:"16px",lineHeight:"1.6",fontFamily:"inherit",resize:"vertical"},onFocus:V=>V.target.style.borderColor="#667eea",onBlur:V=>V.target.style.borderColor="#6b7280"}):d.jsx("div",{style:{whiteSpace:"pre-wrap",background:"#2d3748",border:"1px solid #4b5563",padding:"16px",borderRadius:"8px",color:"#ffffff",fontSize:"16px",lineHeight:"1.6"},children:r.notes||d.jsx("span",{style:{color:"#9ca3af",fontStyle:"italic"},children:"No description provided"})})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px",marginBottom:"24px"},children:[d.jsxs("div",{style:je,children:[d.jsx("h4",{style:Ue,children:" Appointment"}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("div",{style:Ne,children:"Start Date & Time"}),f?d.jsx("input",{type:"datetime-local",value:ce,onChange:V=>pe(V.target.value),style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:V=>V.target.style.borderColor="#667eea",onBlur:V=>V.target.style.borderColor="#6b7280"}):r.appointment_start?d.jsx("div",{style:Ze,children:new Date(r.appointment_start).toLocaleString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}):d.jsx("div",{style:{...Ze,color:"#9ca3af",fontStyle:"italic"},children:"No appointment set"})]}),d.jsxs("div",{children:[d.jsx("div",{style:Ne,children:"End Date & Time"}),f?d.jsx("input",{type:"datetime-local",value:ie,onChange:V=>ge(V.target.value),style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:V=>V.target.style.borderColor="#667eea",onBlur:V=>V.target.style.borderColor="#6b7280"}):r.appointment_end?d.jsx("div",{style:Ze,children:new Date(r.appointment_end).toLocaleString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}):d.jsx("div",{style:{...Ze,color:"#9ca3af",fontStyle:"italic"},children:"No end time set"})]})]}),d.jsxs("div",{style:je,children:[d.jsx("h4",{style:Ue,children:" Assignment"}),d.jsx("div",{style:Ne,children:"Assigned Appraiser"}),f?d.jsxs("select",{value:ve,onChange:V=>_e(V.target.value),style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",cursor:"pointer",transition:"border-color 0.2s"},onFocus:V=>V.target.style.borderColor="#667eea",onBlur:V=>V.target.style.borderColor="#6b7280",children:[d.jsx("option",{value:"",children:"Unassigned"}),h.map(V=>d.jsxs("option",{value:V.user_id,children:[V.full_name||V.user_id," (",V.role,")"]},V.user_id))]}):d.jsx("div",{style:Ze,children:r.assigned_to?((ct=h.find(V=>V.user_id===r.assigned_to))==null?void 0:ct.full_name)||"Unknown User":"Unassigned"})]})]}),d.jsxs("div",{style:je,children:[d.jsx("h4",{style:Ue,children:" Status & Actions"}),d.jsxs("div",{style:{marginBottom:"24px"},children:[d.jsx("div",{style:Ne,children:"Current Status"}),d.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"12px 24px",borderRadius:"8px",fontSize:"17px",fontWeight:"bold",background:r.status==="COMPLETED"?"#4CAF50":r.status==="IN_PROGRESS"?"#FF9800":r.status==="SCHEDULED"?"#2196F3":r.status==="CANCELED"?"#ef4444":"#9E9E9E",color:"white",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:[r.status==="COMPLETED"&&"",r.status==="IN_PROGRESS"&&"",r.status==="SCHEDULED"&&"",r.status==="CANCELED"&&"",!r.status&&""," ",r.status||"NOT_STARTED"]})]}),Be&&d.jsxs("div",{style:{marginBottom:"24px"},children:[d.jsx("div",{style:Ne,children:"Update Status"}),d.jsxs("select",{onChange:async V=>{const Se=V.target.value;if(Se==="DELETE")jt();else if(Se==="CANCELED")confirm("Cancel this claim? This will mark it as CANCELED and remove it from active claims.")&&It({status:"CANCELED"});else if(Se==="COMPLETED"){const Ge=new Date,De=Ge.getFullYear(),We=String(Ge.getMonth()+1).padStart(2,"0"),Je=String(Ge.getDate()).padStart(2,"0"),xt=`${De}-${We}-${Je}T00:00:00Z`,ht=`${De}-${We}`;let pt=null;if(r.firm)try{const Xt=nu(r.firm,Ge),pn=Xt.payoutDate.getFullYear(),Qe=String(Xt.payoutDate.getMonth()+1).padStart(2,"0"),bt=String(Xt.payoutDate.getDate()).padStart(2,"0");pt=`${pn}-${Qe}-${bt}T00:00:00Z`}catch(Xt){console.warn("Could not calculate expected payout date:",Xt)}It({status:"COMPLETED",completion_date:xt,completed_month:ht,expected_payout_date:pt,payout_status:"unpaid"})}else Se&&It({status:Se});V.target.value=""},style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",cursor:"pointer",fontWeight:"600",transition:"border-color 0.2s"},onFocus:V=>V.target.style.borderColor="#667eea",onBlur:V=>V.target.style.borderColor="#6b7280",children:[d.jsx("option",{value:"",children:"Choose an action..."}),d.jsx("option",{value:"SCHEDULED",children:" Mark as Scheduled"}),d.jsx("option",{value:"IN_PROGRESS",children:" In Progress"}),d.jsx("option",{value:"COMPLETED",children:" Mark as Complete"}),d.jsx("option",{value:"CANCELED",children:" Cancel Claim"}),d.jsx("option",{value:"DELETE",style:{color:"#ef4444",fontWeight:"bold"},children:" Permanently Delete Claim"})]}),d.jsx("p",{style:{fontSize:"14px",color:"#cbd5e1",marginTop:"8px",fontStyle:"italic"},children:" Permanent delete cannot be undone. All photos and data will be lost."})]})]}),d.jsxs("div",{style:je,children:[d.jsx("h4",{style:Ue,children:" Location"}),f?d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsxs("div",{style:{marginBottom:"16px"},children:[d.jsx("div",{style:Ne,children:"Address Line 1"}),d.jsx("input",{type:"text",value:be,onChange:V=>Ce(V.target.value),placeholder:"Street address",style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:V=>V.target.style.borderColor="#667eea",onBlur:V=>V.target.style.borderColor="#6b7280"})]}),d.jsxs("div",{style:{marginBottom:"16px"},children:[d.jsx("div",{style:Ne,children:"Address Line 2 (Optional)"}),d.jsx("input",{type:"text",value:Te,onChange:V=>nt(V.target.value),placeholder:"Apt, suite, etc.",style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:V=>V.target.style.borderColor="#667eea",onBlur:V=>V.target.style.borderColor="#6b7280"})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(100px, 1fr))",gap:"12px"},children:[d.jsxs("div",{children:[d.jsx("div",{style:Ne,children:"City"}),d.jsx("input",{type:"text",value:O,onChange:V=>ue(V.target.value),placeholder:"City",style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:V=>V.target.style.borderColor="#667eea",onBlur:V=>V.target.style.borderColor="#6b7280"})]}),d.jsxs("div",{children:[d.jsx("div",{style:Ne,children:"State"}),d.jsx("input",{type:"text",value:se,onChange:V=>G(V.target.value),placeholder:"State",style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:V=>V.target.style.borderColor="#667eea",onBlur:V=>V.target.style.borderColor="#6b7280"})]}),d.jsxs("div",{children:[d.jsx("div",{style:Ne,children:"ZIP"}),d.jsx("input",{type:"text",value:q,onChange:V=>ne(V.target.value),placeholder:"ZIP",style:{width:"100%",padding:"12px 16px",fontSize:"17px",border:"2px solid #6b7280",borderRadius:"8px",background:"#475569",color:"#ffffff",transition:"border-color 0.2s"},onFocus:V=>V.target.style.borderColor="#667eea",onBlur:V=>V.target.style.borderColor="#6b7280"})]})]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{style:{marginBottom:"16px"},children:[d.jsx("div",{style:Ne,children:"Street Address"}),d.jsxs("div",{style:Ze,children:[r.address_line1,r.address_line2&&d.jsxs(d.Fragment,{children:[", ",r.address_line2]})]})]}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("div",{style:Ne,children:"City, State, ZIP"}),d.jsxs("div",{style:Ze,children:[r.city,", ",r.state," ",r.zip]})]})]}),r.lat&&r.lng?d.jsx("div",{style:{height:"350px",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 6px rgba(0,0,0,0.3)",marginBottom:"16px"},children:d.jsxs(cw,{center:[r.lat,r.lng],zoom:15,style:{height:"100%",width:"100%"},children:[d.jsx(fw,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:" OpenStreetMap contributors"}),d.jsx(dw,{position:[r.lat,r.lng],children:d.jsx(hw,{children:"Claim Location"})})]})}):d.jsx("div",{style:{padding:"20px",textAlign:"center",background:"#2d3748",borderRadius:"8px",color:"#cbd5e1",fontSize:"16px",marginBottom:"16px"},children:"No coordinates available"}),d.jsx("button",{onClick:Ae,style:{width:"100%",padding:"12px 24px",fontSize:"16px",fontWeight:"600",background:"#10b981",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},onMouseEnter:V=>{V.currentTarget.style.background="#059669",V.currentTarget.style.transform="translateY(-1px)",V.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)"},onMouseLeave:V=>{V.currentTarget.style.background="#10b981",V.currentTarget.style.transform="translateY(0)",V.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)"},children:" Open in Google Maps"})]}),d.jsxs("div",{style:je,children:[d.jsxs("h4",{style:Ue,children:[" Photos (",o.length,")"]}),d.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"24px",flexWrap:"wrap"},children:[d.jsx("label",{htmlFor:"photo-upload",style:{flex:"1",minWidth:"200px",padding:"14px 24px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",borderRadius:"8px",fontWeight:"600",fontSize:"16px",cursor:"pointer",textAlign:"center",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},onMouseEnter:V=>{V.currentTarget.style.transform="translateY(-1px)",V.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)"},onMouseLeave:V=>{V.currentTarget.style.transform="translateY(0)",V.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)"},children:" Take Photo"}),d.jsx("input",{id:"photo-upload",type:"file",accept:"image/*",capture:"environment",onChange:Bt,style:{display:"none"},multiple:!0}),d.jsx("label",{htmlFor:"photo-gallery",style:{flex:"1",minWidth:"200px",padding:"14px 24px",background:"#10b981",color:"white",borderRadius:"8px",fontWeight:"600",fontSize:"16px",cursor:"pointer",textAlign:"center",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},onMouseEnter:V=>{V.currentTarget.style.background="#059669",V.currentTarget.style.transform="translateY(-1px)",V.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)"},onMouseLeave:V=>{V.currentTarget.style.background="#10b981",V.currentTarget.style.transform="translateY(0)",V.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)"},children:" Choose from Gallery"}),d.jsx("input",{id:"photo-gallery",type:"file",accept:"image/*",onChange:Bt,style:{display:"none"},multiple:!0}),o.length>0&&d.jsx("button",{onClick:Bn,style:{flex:"1",minWidth:"200px",padding:"14px 24px",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"white",borderRadius:"8px",fontWeight:"600",fontSize:"16px",cursor:"pointer",textAlign:"center",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",border:"none"},onMouseEnter:V=>{V.currentTarget.style.background="linear-gradient(135deg, #d97706 0%, #b45309 100%)",V.currentTarget.style.transform="translateY(-1px)",V.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)"},onMouseLeave:V=>{V.currentTarget.style.background="linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",V.currentTarget.style.transform="translateY(0)",V.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)"},children:" Download All Photos"})]}),d.jsx("p",{style:{fontSize:"15px",color:"#cbd5e1",marginBottom:"20px",padding:"12px",background:"#2d3748",borderRadius:"8px",borderLeft:"4px solid #667eea"},children:" Tip: Photos are automatically compressed and optimized for storage"}),d.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:"16px"},children:o.map((V,Se)=>{const Ge=ze.storage.from("claim-photos").getPublicUrl(V.storage_path).data.publicUrl;return d.jsxs("div",{style:{position:"relative"},children:[d.jsx("div",{onClick:()=>c(Se),style:{width:"100%",height:200,backgroundImage:`url(${Ge})`,backgroundSize:"cover",backgroundPosition:"center",borderRadius:4,cursor:"pointer",border:"2px solid #ddd",position:"relative"},children:d.jsx("button",{onClick:De=>{De.stopPropagation(),Ht(V)},style:{position:"absolute",top:4,right:4,width:28,height:28,borderRadius:"50%",background:"rgba(244, 67, 54, 0.9)",color:"white",border:"2px solid white",fontSize:18,fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:0,lineHeight:1},children:""})}),d.jsx("a",{href:Ge,download:`claim-${r==null?void 0:r.claim_number}-photo-${V.id}.jpg`,onClick:De=>De.stopPropagation(),style:{display:"block",width:"100%",marginTop:4,padding:"10px",background:"#4CAF50",color:"white",textAlign:"center",borderRadius:4,textDecoration:"none",fontSize:14,fontWeight:"bold",boxSizing:"border-box"},children:" Download"})]},V.id)})})]}),l!==null&&d.jsxs("div",{onClick:()=>{c(null),hn()},onMouseMove:te,onMouseUp:oe,onMouseLeave:oe,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.95)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",overflow:"hidden"},children:[d.jsx("button",{onClick:()=>{c(null),hn()},style:{position:"absolute",top:20,right:20,background:"white",border:"none",borderRadius:50,width:40,height:40,fontSize:24,cursor:"pointer",fontWeight:"bold",zIndex:1e4},children:""}),d.jsxs("div",{onClick:V=>V.stopPropagation(),style:{position:"absolute",top:20,left:20,display:"flex",flexDirection:"column",gap:8,zIndex:1e4},children:[d.jsx("button",{onClick:on,disabled:S>=4,style:{padding:"8px 16px",background:S>=4?"#4a5568":"#667eea",color:"white",border:"none",borderRadius:6,fontSize:18,fontWeight:"bold",cursor:S>=4?"not-allowed":"pointer",opacity:S>=4?.5:1},children:"+"}),d.jsxs("div",{style:{padding:"4px 8px",background:"rgba(255,255,255,0.2)",color:"white",borderRadius:4,fontSize:14,textAlign:"center",fontWeight:"bold"},children:[Math.round(S*100),"%"]}),d.jsx("button",{onClick:ri,disabled:S<=1,style:{padding:"8px 16px",background:S<=1?"#4a5568":"#667eea",color:"white",border:"none",borderRadius:6,fontSize:18,fontWeight:"bold",cursor:S<=1?"not-allowed":"pointer",opacity:S<=1?.5:1},children:""})]}),d.jsxs("div",{onClick:V=>V.stopPropagation(),style:{position:"absolute",top:20,left:"50%",transform:"translateX(-50%)",display:"flex",gap:12,zIndex:1e4},children:[d.jsx("button",{onClick:Lr,style:{padding:"10px 20px",background:"#667eea",color:"white",border:"none",borderRadius:6,fontSize:16,fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",gap:6},children:" Rotate Left"}),d.jsx("button",{onClick:fn,style:{padding:"10px 20px",background:"#667eea",color:"white",border:"none",borderRadius:6,fontSize:16,fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",gap:6},children:"Rotate Right "})]}),d.jsx("div",{style:{position:"relative",maxWidth:"90%",maxHeight:"80%",display:"flex",alignItems:"center",justifyContent:"center"},onClick:V=>V.stopPropagation(),children:d.jsx("img",{src:ze.storage.from("claim-photos").getPublicUrl(o[l].storage_path).data.publicUrl,onWheel:de,onMouseDown:Es,style:{maxWidth:"100%",maxHeight:"80vh",objectFit:"contain",transform:`rotate(${v}deg) scale(${S}) translate(${b/S}px, ${T/S}px)`,transition:R?"none":"transform 0.2s ease-out",cursor:S>1?R?"grabbing":"grab":"default",userSelect:"none"},draggable:!1})}),d.jsxs("div",{style:{display:"flex",gap:16,marginTop:20,alignItems:"center"},onClick:V=>V.stopPropagation(),children:[d.jsx("button",{onClick:V=>{V.stopPropagation(),hn(),c(l>0?l-1:o.length-1)},style:{padding:"12px 24px",background:"#667eea",color:"white",border:"none",borderRadius:6,fontSize:16,fontWeight:"bold",cursor:"pointer"},children:" Previous"}),d.jsxs("span",{style:{color:"white",fontSize:16,fontWeight:"bold"},children:[l+1," / ",o.length]}),d.jsx("button",{onClick:V=>{V.stopPropagation(),hn(),c(l<o.length-1?l+1:0)},style:{padding:"12px 24px",background:"#667eea",color:"white",border:"none",borderRadius:6,fontSize:16,fontWeight:"bold",cursor:"pointer"},children:"Next "}),d.jsx("a",{href:ze.storage.from("claim-photos").getPublicUrl(o[l].storage_path).data.publicUrl,download:`claim-${r==null?void 0:r.claim_number}-photo-${o[l].id}.jpg`,style:{padding:"12px 24px",background:"#4CAF50",color:"white",borderRadius:6,fontSize:16,fontWeight:"bold",textDecoration:"none",display:"inline-block"},children:" Download"}),d.jsx("button",{onClick:V=>{V.stopPropagation(),Ht(o[l])},style:{padding:"12px 24px",background:"#f44336",color:"white",border:"none",borderRadius:6,fontSize:16,fontWeight:"bold",cursor:"pointer"},children:" Delete"})]})]})]})})}const Vw=[{id:"vin_windshield",photo_type:"vin_windshield",label:"VIN (Windshield)",instruction:"Capture VIN through windshield in landscape mode",order_index:1,required:!0,inspection_types:["regular","heavy_duty"],max_photos:1},{id:"vin_sticker",photo_type:"vin_sticker",label:"VIN (Manufacturer Sticker)",instruction:"Capture manufacturer VIN sticker in landscape mode",order_index:2,required:!0,inspection_types:["regular","heavy_duty"],max_photos:1},{id:"mileage",photo_type:"mileage",label:"Mileage / Oil Sticker",instruction:"Capture odometer or oil sticker in windshield",order_index:3,required:!0,inspection_types:["regular","heavy_duty"],max_photos:1},{id:"door_interior",photo_type:"door_interior",label:"Driver Door Interior",instruction:"Capture driver door panel",order_index:4,required:!0,inspection_types:["regular","heavy_duty"],max_photos:1},{id:"rear_interior",photo_type:"rear_interior",label:"Rear Interior",instruction:"Capture rear seating area",order_index:5,required:!0,inspection_types:["regular","heavy_duty"],max_photos:1},{id:"console",photo_type:"console",label:"Center Console",instruction:"Capture center console area",order_index:6,required:!0,inspection_types:["regular","heavy_duty"],max_photos:1},{id:"headliner",photo_type:"headliner",label:"Headliner",instruction:"Capture roof interior",order_index:7,required:!0,inspection_types:["regular","heavy_duty"],max_photos:1},{id:"engine_bay",photo_type:"engine_bay",label:"Engine Bay",instruction:"Capture engine compartment overview",order_index:8,required:!0,inspection_types:["regular","heavy_duty"],max_photos:1},{id:"dipstick",photo_type:"dipstick",label:"Engine Oil Dipstick",instruction:"Capture oil dipstick reading",order_index:9,required:!0,inspection_types:["regular","heavy_duty"],max_photos:1},{id:"label_regular",photo_type:"manufacturer_label",label:"Manufacturer/Specialty Label",instruction:"Capture label if present",order_index:10,required:!1,inspection_types:["regular"],max_photos:-1},{id:"label_heavy",photo_type:"manufacturer_label",label:"Manufacturer/Specialty Label",instruction:"Capture truck body tags, trailer tags, specialty equipment labels",order_index:10,required:!0,inspection_types:["heavy_duty"],max_photos:-1},{id:"lf_exterior",photo_type:"lf_exterior",label:"Left Front",instruction:"Capture left front quarter panel",order_index:11,required:!0,inspection_types:["regular","heavy_duty"],max_photos:1},{id:"left_side",photo_type:"left_side",label:"Left Side",instruction:"Capture left side profile",order_index:12,required:!0,inspection_types:["regular","heavy_duty"],max_photos:1},{id:"lr_exterior",photo_type:"lr_exterior",label:"Left Rear",instruction:"Capture left rear quarter panel",order_index:13,required:!0,inspection_types:["regular","heavy_duty"],max_photos:1},{id:"rear",photo_type:"rear",label:"Rear",instruction:"Capture rear view",order_index:14,required:!0,inspection_types:["regular","heavy_duty"],max_photos:1},{id:"license_plate",photo_type:"license_plate",label:"License Plate",instruction:"Capture license plate clearly",order_index:15,required:!0,inspection_types:["regular","heavy_duty"],max_photos:1},{id:"rr_exterior",photo_type:"rr_exterior",label:"Right Rear",instruction:"Capture right rear quarter panel",order_index:16,required:!0,inspection_types:["regular","heavy_duty"],max_photos:1},{id:"right_side",photo_type:"right_side",label:"Right Side",instruction:"Capture right side profile",order_index:17,required:!0,inspection_types:["regular","heavy_duty"],max_photos:1},{id:"rf_exterior",photo_type:"rf_exterior",label:"Right Front",instruction:"Capture right front quarter panel",order_index:18,required:!0,inspection_types:["regular","heavy_duty"],max_photos:1},{id:"front",photo_type:"front",label:"Front",instruction:"Capture front view",order_index:19,required:!0,inspection_types:["regular","heavy_duty"],max_photos:1},{id:"damage_wide",photo_type:"damage_wide",label:"Damage Overview (Wide)",instruction:"Capture damage from distance",order_index:20,required:!0,inspection_types:["regular","heavy_duty"],max_photos:1},{id:"damage_close",photo_type:"damage_close",label:"Damage Overview (Closer)",instruction:"Capture damage detail",order_index:21,required:!0,inspection_types:["regular","heavy_duty"],max_photos:1},{id:"damage_detail",photo_type:"damage_detail",label:"Damage Photos",instruction:"Capture additional damage details (minimum 1 required)",order_index:22,required:!0,inspection_types:["regular","heavy_duty"],max_photos:-1},{id:"structural",photo_type:"structural_damage",label:"Structural Damage",instruction:"Capture frame/structural damage",order_index:23,required:!1,conditional_group:"structural",inspection_types:["regular","heavy_duty"],max_photos:-1},{id:"airbags",photo_type:"airbags_deployed",label:"Airbags Deployed",instruction:"Capture deployed airbags clearly visible in interior",order_index:24,required:!1,conditional_group:"airbags",inspection_types:["regular","heavy_duty"],max_photos:-1},{id:"tow_bill",photo_type:"tow_bill",label:"Tow Bill",instruction:"Capture tow bill/receipt",order_index:25,required:!1,conditional_group:"tow_bill",inspection_types:["regular","heavy_duty"],max_photos:-1},{id:"lf_tread",photo_type:"lf_tread",label:"Left Front Tire Tread",instruction:"Capture LF tire tread depth",order_index:26,required:!0,inspection_types:["regular"],max_photos:1},{id:"lr_tread",photo_type:"lr_tread",label:"Left Rear Tire Tread",instruction:"Capture LR tire tread depth",order_index:27,required:!0,inspection_types:["regular"],max_photos:1},{id:"rr_tread",photo_type:"rr_tread",label:"Right Rear Tire Tread",instruction:"Capture RR tire tread depth",order_index:28,required:!0,inspection_types:["regular"],max_photos:1},{id:"rf_tread",photo_type:"rf_tread",label:"Right Front Tire Tread",instruction:"Capture RF tire tread depth",order_index:29,required:!0,inspection_types:["regular"],max_photos:1},{id:"tires_generic",photo_type:"tires_generic",label:"Tires (Generic)",instruction:"Capture tire condition (minimum 1 required)",order_index:26,required:!0,inspection_types:["heavy_duty"],max_photos:-1}];function ya(t){if(!t.inspection_type)return[];let e=Vw.filter(n=>n.inspection_types.includes(t.inspection_type));return t.inspection_type==="regular"&&t.manufacturer_label_present===!1&&(e=e.filter(n=>n.id!=="label_regular")),e=e.filter(n=>n.conditional_group?t.enabled_conditionals.has(n.conditional_group):!0),e.sort((n,r)=>n.order_index-r.order_index)}function xy(t){if(!t.inspection_type)return!1;const e=ya(t);for(const n of e){if(!n.required&&!n.conditional_group)continue;const i=(t.captured_photos.get(n.id)||[]).length;if(n.required&&i===0||n.conditional_group&&t.enabled_conditionals.has(n.conditional_group)&&i===0)return!1}return!0}function jj(t){if(!t.inspection_type)return{completed:0,total:0};const e=ya(t);let n=0;for(const i of e){if(!i.required&&!i.conditional_group)continue;(t.captured_photos.get(i.id)||[]).length>0&&n++}const r=e.filter(i=>i.required||i.conditional_group&&t.enabled_conditionals.has(i.conditional_group)).length;return{completed:n,total:r}}class Aj{constructor(){ai(this,"queue",[]);ai(this,"maxRetries",3);ai(this,"processing",!1)}async addPhoto(e,n){const r=crypto.randomUUID(),i={photoId:r,slotId:e,blob:n,status:"pending",retryCount:0};return this.queue.push(i),this.processing||this.processQueue(),r}async processQueue(){if(!this.processing){for(this.processing=!0;this.queue.some(e=>e.status==="pending"||e.status==="failed"&&e.retryCount<this.maxRetries);){for(const e of this.queue)e.status!=="completed"&&e.status!=="uploading"&&(e.status==="failed"&&e.retryCount>=this.maxRetries||await this.uploadPhoto(e));await this.delay(1e3)}this.processing=!1}}async uploadPhoto(e){try{e.status="uploading";const n=window.__current_claim_id,r=window.__inspection_type;if(!n)throw new Error("No claim ID available");const i=await an(e.blob,{maxWidthOrHeight:1600,maxSizeMB:1.5,useWebWorker:!0}),o=`${n}/${e.photoId}.jpg`,{error:a}=await ze.storage.from("claim-photos").upload(o,i);if(a)throw a;const l=Vw.find(h=>h.id===e.slotId);if(!l)throw new Error("Slot not found");const{error:c}=await ze.from("claim_photos").insert({id:e.photoId,claim_id:n,storage_path:o,photo_type:l.photo_type,order_index:l.order_index,required:l.required,conditional_group:l.conditional_group||null,inspection_type:r});if(c)throw c;e.status="completed"}catch(n){console.error(`Upload failed for ${e.photoId}:`,n),e.retryCount++,e.status="failed",e.retryCount<this.maxRetries&&(await this.delay(1e3*Math.pow(2,e.retryCount)),e.status="pending")}}getStatus(){const e=this.queue.filter(o=>o.status==="pending").length,n=this.queue.filter(o=>o.status==="uploading").length,r=this.queue.filter(o=>o.status==="failed"&&o.retryCount>=this.maxRetries).length;return{allComplete:this.queue.every(o=>o.status==="completed"),uploading:n,failed:r,pending:e}}delay(e){return new Promise(n=>setTimeout(n,e))}getTaskStatus(e){return this.queue.find(n=>n.photoId===e)}}const by=new Aj;function Oj(){var H,M;const{id:t}=Yv(),e=ni(),[n,r]=J.useState({claim_id:t,inspection_type:null,completed:!1,enabled_conditionals:new Set,captured_photos:new Map}),[i,o]=J.useState(0),[a,l]=J.useState(!1),[c,h]=J.useState({allComplete:!0,uploading:0,failed:0,pending:0}),[m,f]=J.useState(!1),[g,y]=J.useState(!1),[v,_]=J.useState(!1),S=J.useRef(null),w=J.useRef(null),b=J.useRef(null);J.useEffect(()=>{window.__current_claim_id=t,window.__inspection_type=n.inspection_type},[t,n.inspection_type]),J.useEffect(()=>{const B=setInterval(()=>{h(by.getStatus())},1e3);return()=>clearInterval(B)},[]),J.useEffect(()=>{(async()=>{const{data:D}=await ze.from("claim_photos").select("inspection_type").eq("claim_id",t).limit(1).single();D!=null&&D.inspection_type&&r(z=>({...z,inspection_type:D.inspection_type}))})()},[t]),J.useEffect(()=>(a?(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%"):(document.body.style.overflow="",document.body.style.position="",document.body.style.width=""),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width=""}),[a]);const k=B=>{r(D=>({...D,inspection_type:B})),B==="regular"&&f(!0)},T=B=>{r(D=>({...D,manufacturer_label_present:B})),f(!1)},I=B=>{r(D=>{const z=new Set(D.enabled_conditionals);return z.has(B)?z.delete(B):z.add(B),{...D,enabled_conditionals:z}})},R=()=>{if(S.current){const B=S.current.videoWidth,D=S.current.videoHeight;B>0&&D>0&&(_(!0),y(window.innerWidth>window.innerHeight))}},j=async()=>{try{_(!1),y(!1),l(!0),requestAnimationFrame(async()=>{try{const B=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1920},height:{ideal:1080}}});w.current=B;const D=S.current;if(!D)return;D.muted=!0,D.playsInline=!0,D.onloadedmetadata=()=>{R()},D.onplaying=()=>{v||R()};const z=()=>{y(window.innerWidth>window.innerHeight)};b.current=z,window.addEventListener("resize",z),window.addEventListener("orientationchange",z),D.srcObject=B,await D.play(),setTimeout(()=>{!v&&D.videoWidth>0&&R()},500)}catch(B){console.error("Camera stream error:",B)}})}catch(B){console.error("Camera error:",B),alert("Failed to access camera. Please check permissions.")}},P=()=>{w.current&&(w.current.getTracks().forEach(B=>B.stop()),w.current=null),S.current&&(S.current.onloadedmetadata=null,S.current.onplaying=null),b.current&&(window.removeEventListener("resize",b.current),window.removeEventListener("orientationchange",b.current),b.current=null),l(!1),_(!1),y(!1)},A=async()=>{if(!(!S.current||!w.current))try{const B=w.current.getVideoTracks()[0],z=await new ImageCapture(B).takePhoto();navigator.vibrate&&navigator.vibrate(30);const $=ya(n),Z=$[i];if(!Z)return;const re=URL.createObjectURL(z),Q={id:crypto.randomUUID(),slot_id:Z.id,blob:z,url:re,uploaded:!1};r(fe=>{const Ee=new Map(fe.captured_photos),ke=Ee.get(Z.id)||[];return Ee.set(Z.id,[...ke,Q]),{...fe,captured_photos:Ee}}),by.addPhoto(Z.id,z),P(),setTimeout(()=>{const fe=i+1;fe<$.length&&o(fe)},300)}catch(B){console.error("Capture error:",B),alert("Failed to capture photo. Please try again.")}},F=(B,D)=>{if(n.completed){alert("Inspection is completed. Photos are read-only.");return}r(z=>{const $=new Map(z.captured_photos),re=($.get(B)||[]).filter(ee=>ee.id!==D);return re.length>0?$.set(B,re):$.delete(B),{...z,captured_photos:$}})},K=async()=>{if(!xy(n)){alert("Please complete all required photo slots before finishing.");return}!c.allComplete&&!window.confirm(`${c.uploading+c.pending} photos are still uploading.

They will continue uploading in the background.

Complete inspection now?`)||(r(B=>({...B,completed:!0})),await ze.from("claims").update({photos_completed:!0}).eq("id",t),alert(" Inspection completed! All photos saved."),e(`/appraiser/claim/${t}`))},N=ya(n),W=N[i],E=jj(n),Y=xy(n);return n.inspection_type?m?d.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a202c 0%, #2d3748 100%)",padding:20},children:d.jsxs("div",{style:{maxWidth:600,margin:"0 auto"},children:[d.jsx("h2",{style:{color:"#e2e8f0",marginBottom:20},children:"Manufacturer/Specialty Label"}),d.jsx("p",{style:{color:"#cbd5e0",marginBottom:20},children:"Is a manufacturer or specialty label present on this vehicle?"}),d.jsx("button",{onClick:()=>T(!0),style:{width:"100%",padding:20,marginBottom:15,background:"#4a5568",color:"white",border:"none",borderRadius:8,fontSize:18,cursor:"pointer"},children:"Yes - Label Present"}),d.jsx("button",{onClick:()=>T(!1),style:{width:"100%",padding:20,background:"#4a5568",color:"white",border:"none",borderRadius:8,fontSize:18,cursor:"pointer"},children:"No - No Label"})]})}):d.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a202c 0%, #2d3748 100%)",padding:20},children:[d.jsxs("div",{style:{maxWidth:800,margin:"0 auto"},children:[d.jsxs("div",{style:{background:"#2d3748",border:"1px solid #4a5568",borderRadius:8,padding:16,marginBottom:20},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("div",{children:[d.jsx("h2",{style:{margin:0,color:"#e2e8f0"},children:"Photo Capture"}),d.jsx("p",{style:{margin:"5px 0 0 0",color:"#cbd5e0",fontSize:14},children:n.inspection_type==="regular"?" Regular Vehicle":" Heavy Duty"})]}),d.jsxs("div",{style:{textAlign:"right"},children:[d.jsxs("div",{style:{color:"#e2e8f0",fontSize:20,fontWeight:"bold"},children:[E.completed," / ",E.total]}),d.jsx("div",{style:{color:"#cbd5e0",fontSize:12},children:"photos complete"})]})]}),!c.allComplete&&d.jsxs("div",{style:{marginTop:12,padding:10,background:"#f59e0b",borderRadius:6,color:"#1a202c",fontSize:14},children:[" Uploading ",c.uploading+c.pending," ","photo(s) safely in background..."]}),c.failed>0&&d.jsxs("div",{style:{marginTop:12,padding:10,background:"#ef4444",borderRadius:6,color:"white",fontSize:14},children:[" ",c.failed," photo(s) failed to upload. Check connection."]})]}),d.jsxs("div",{style:{background:"#2d3748",border:"1px solid #4a5568",borderRadius:8,padding:16,marginBottom:20},children:[d.jsx("h3",{style:{color:"#e2e8f0",fontSize:16,marginTop:0},children:"Additional Sections (If Applicable)"}),["structural","airbags","tow_bill"].map(B=>d.jsxs("label",{style:{display:"flex",alignItems:"center",marginBottom:10,cursor:"pointer"},children:[d.jsx("input",{type:"checkbox",checked:n.enabled_conditionals.has(B),onChange:()=>I(B),disabled:n.completed,style:{marginRight:10,width:20,height:20}}),d.jsxs("span",{style:{color:"#e2e8f0"},children:[B==="structural"&&"Structural Damage",B==="airbags"&&"Airbags Deployed",B==="tow_bill"&&"Tow Bill"]})]},B))]}),W&&d.jsxs("div",{style:{background:"#2d3748",border:"2px solid #667eea",borderRadius:8,padding:20,marginBottom:20},children:[d.jsxs("h3",{style:{color:"#e2e8f0",marginTop:0},children:[W.label,W.required&&d.jsx("span",{style:{color:"#ef4444"},children:" *"})]}),d.jsx("p",{style:{color:"#cbd5e0",marginBottom:20},children:W.instruction}),(H=n.captured_photos.get(W.id))==null?void 0:H.map(B=>d.jsxs("div",{style:{marginBottom:15,position:"relative"},children:[d.jsx("img",{src:B.url,alt:"Captured",style:{width:"100%",borderRadius:8}}),!n.completed&&d.jsx("button",{onClick:()=>F(W.id,B.id),style:{position:"absolute",top:10,right:10,padding:"8px 16px",background:"#ef4444",color:"white",border:"none",borderRadius:6,cursor:"pointer",fontWeight:"bold"},children:" Retake"})]},B.id)),d.jsx("div",{style:{display:"flex",gap:10},children:!a&&d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:j,disabled:n.completed,style:{flex:1,padding:15,background:n.completed?"#4a5568":"#667eea",color:"white",border:"none",borderRadius:8,fontSize:18,fontWeight:"bold",cursor:n.completed?"not-allowed":"pointer"},children:" Capture Photo"}),W.max_photos===-1&&((M=n.captured_photos.get(W.id))==null?void 0:M.length)>0&&d.jsx("button",{onClick:()=>{const B=i+1;B<N.length&&o(B)},style:{padding:15,background:"#10b981",color:"white",border:"none",borderRadius:8,fontWeight:"bold",cursor:"pointer"},children:"Next "})]})})]}),d.jsxs("div",{style:{background:"#2d3748",border:"1px solid #4a5568",borderRadius:8,padding:16,marginBottom:20},children:[d.jsx("h4",{style:{color:"#e2e8f0",marginTop:0},children:"Photo Slots"}),d.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(80px, 1fr))",gap:10},children:N.map((B,D)=>{var re;const $=(((re=n.captured_photos.get(B.id))==null?void 0:re.length)||0)>0,Z=D===i;return d.jsxs("button",{onClick:()=>o(D),style:{padding:10,background:Z?"#667eea":$?"#10b981":"#4a5568",color:"white",border:"none",borderRadius:6,fontSize:12,cursor:"pointer",textAlign:"center"},children:[D+1,$&&" ",B.required&&" *"]},B.id)})})]}),d.jsx("button",{onClick:K,disabled:!Y||n.completed,style:{width:"100%",padding:20,background:Y&&!n.completed?"#10b981":"#4a5568",color:"white",border:"none",borderRadius:8,fontSize:20,fontWeight:"bold",cursor:Y&&!n.completed?"pointer":"not-allowed",marginBottom:20},children:n.completed?" Inspection Completed":" Complete Inspection"}),d.jsx("button",{onClick:()=>e(`/appraiser/claim/${t}`),style:{width:"100%",padding:15,background:"#2d3748",color:"#e2e8f0",border:"1px solid #4a5568",borderRadius:8,cursor:"pointer"},children:" Back to Claim"})]}),a&&d.jsxs("div",{style:{position:"fixed",inset:0,zIndex:9999,background:"#000"},children:[d.jsx("video",{ref:S,autoPlay:!0,playsInline:!0,muted:!0,style:{width:"100%",height:"100%",objectFit:"cover"}}),(()=>{const B=ya(n),D=i+1,z=B[D];return z?d.jsxs("div",{style:{position:"absolute",top:"max(20px, env(safe-area-inset-top))",left:"50%",transform:"translateX(-50%)",padding:"8px 16px",background:"rgba(45, 55, 72, 0.9)",borderRadius:8,color:"#e2e8f0",fontSize:13,maxWidth:"80%",textAlign:"center"},children:["Next: ",z.label]}):null})(),v&&!g&&d.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",padding:24,background:"rgba(245, 158, 11, 0.95)",borderRadius:12,color:"#1a202c",fontWeight:"bold",fontSize:18,textAlign:"center",maxWidth:"80%",pointerEvents:"none"},children:[" LANDSCAPE MODE REQUIRED",d.jsx("br",{}),"Rotate your device to landscape"]}),d.jsx("button",{onClick:P,style:{position:"absolute",top:"max(20px, env(safe-area-inset-top))",right:20,width:44,height:44,background:"rgba(0, 0, 0, 0.6)",color:"white",border:"none",borderRadius:"50%",fontSize:24,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.4)"},children:""}),d.jsx("button",{onClick:A,disabled:!v||!g,style:{position:"absolute",bottom:"max(30px, env(safe-area-inset-bottom))",right:30,width:80,height:80,background:v&&g?"linear-gradient(135deg, #10b981 0%, #059669 100%)":"rgba(107, 114, 128, 0.8)",color:"white",border:"4px solid white",borderRadius:"50%",fontSize:32,cursor:v&&g?"pointer":"not-allowed",opacity:v&&g?1:.6,boxShadow:v&&g?"0 6px 20px rgba(16, 185, 129, 0.6)":"0 4px 12px rgba(0, 0, 0, 0.4)",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]})]}):d.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a202c 0%, #2d3748 100%)",padding:20},children:d.jsxs("div",{style:{maxWidth:600,margin:"0 auto"},children:[d.jsx("h2",{style:{color:"#e2e8f0",marginBottom:20},children:"Select Inspection Type"}),d.jsx("button",{onClick:()=>k("regular"),style:{width:"100%",padding:20,marginBottom:15,background:"#4a5568",color:"white",border:"none",borderRadius:8,fontSize:18,fontWeight:"bold",cursor:"pointer"},children:" Regular Vehicle"}),d.jsx("button",{onClick:()=>k("heavy_duty"),style:{width:"100%",padding:20,background:"#4a5568",color:"white",border:"none",borderRadius:8,fontSize:18,fontWeight:"bold",cursor:"pointer"},children:" Heavy Duty / Commercial Vehicle"}),d.jsx("button",{onClick:()=>e(`/appraiser/claim/${t}`),style:{width:"100%",padding:12,marginTop:20,background:"#2d3748",color:"#e2e8f0",border:"1px solid #4a5568",borderRadius:8,cursor:"pointer"},children:" Back to Claim"})]})})}function Dj({size:t="md",message:e="Loading...",fullScreen:n=!1}){const r={sm:"w-6 h-6 border-2",md:"w-12 h-12 border-4",lg:"w-16 h-16 border-4"},i=d.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3",children:[d.jsx("div",{className:`${r[t]} border-blue-500 border-t-transparent rounded-full animate-spin`,role:"status","aria-live":"polite","aria-label":e}),e&&d.jsx("p",{className:"text-brand-light-300 text-sm font-medium","aria-live":"polite",children:e})]});return n?d.jsx("div",{className:"min-h-screen bg-gradient-dark flex items-center justify-center",children:i}):i}function Rj({variant:t="primary",size:e="md",children:n,onClick:r,disabled:i=!1,type:o="button",className:a="",ariaLabel:l}){const c="inline-flex items-center justify-center font-medium rounded transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-brand-dark-900 disabled:opacity-50 disabled:cursor-not-allowed",h={primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500 shadow-sm hover:shadow-md",secondary:"bg-brand-dark-700 hover:bg-brand-dark-600 text-brand-light-100 border border-brand-dark-600 focus:ring-brand-dark-600",danger:"bg-status-canceled hover:bg-red-600 text-white focus:ring-red-500 shadow-sm hover:shadow-md",success:"bg-status-completed hover:bg-green-600 text-white focus:ring-green-500 shadow-sm hover:shadow-md",ghost:"bg-transparent hover:bg-brand-dark-700 text-brand-light-100 border border-transparent hover:border-brand-dark-600 focus:ring-brand-dark-600"},m={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};return d.jsx("button",{type:o,onClick:r,disabled:i,className:`${c} ${h[t]} ${m[e]} ${a}`,"aria-label":l,children:n})}function Pr({children:t,requiredRole:e}){const[n,r]=J.useState(!0),[i,o]=J.useState(!1),[a,l]=J.useState(null),c=_o();J.useEffect(()=>{h()},[]);const h=async()=>{try{const m=Zn();m!=null&&m.isInitialized||await hc(ze);const f=Zn(),g=f==null?void 0:f.getCurrentUser();if(!g){o(!1),r(!1);return}if(l(g.role),e&&g.role!==e){o(!1),r(!1);return}o(!0),r(!1)}catch(m){console.error("Auth check failed:",m),o(!1),r(!1)}};return n?d.jsx(Dj,{fullScreen:!0,message:"Checking authorization..."}):!i&&!a?d.jsx(PS,{to:"/login",state:{from:c},replace:!0}):!i&&e&&a!==e?d.jsx("div",{className:"min-h-screen bg-gradient-dark flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-brand-dark-800 border-2 border-red-500 rounded-lg p-8 max-w-md text-center shadow-card-hover",children:[d.jsx("div",{className:"mb-4",children:d.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),d.jsx("h2",{className:"text-2xl font-bold text-brand-light-100 mb-4",children:"Access Denied"}),d.jsxs("p",{className:"text-brand-light-300 mb-6",children:["You don't have permission to access this page. This area is restricted to"," ",d.jsx("span",{className:"font-semibold text-brand-light-100",children:e})," users."]}),d.jsxs("p",{className:"text-sm text-brand-light-400 mb-6",children:["Your current role: ",d.jsx("span",{className:"font-semibold",children:a})]}),d.jsx(Rj,{variant:"primary",onClick:()=>window.history.back(),children:"Go Back"})]})}):d.jsx(d.Fragment,{children:t})}const Lj=ek({immediate:!0,onNeedRefresh(){Lj(!0),window.location.reload()}}),Nj=MS([{path:"/",element:d.jsx(kC,{})},{path:"/login",element:d.jsx(EC,{})},{path:"/admin/claims",element:d.jsx(Pr,{requiredRole:"admin",children:d.jsx(CP,{})})},{path:"/admin/claims/new",element:d.jsx(Pr,{requiredRole:"admin",children:d.jsx(UC,{})})},{path:"/admin/vendors",element:d.jsx(Pr,{requiredRole:"admin",children:d.jsx(TP,{})})},{path:"/admin/payouts",element:d.jsx(Pr,{requiredRole:"admin",children:d.jsx($P,{})})},{path:"/admin/kpi",element:d.jsx(Pr,{requiredRole:"admin",children:d.jsx(gj,{})})},{path:"/my-claims",element:d.jsx(Pr,{children:d.jsx(yj,{})})},{path:"/my-routes",element:d.jsx(Pr,{children:d.jsx(vj,{})})},{path:"/claim/:id",element:d.jsx(Pr,{children:d.jsx(wy,{})})},{path:"/appraiser/claim/:id",element:d.jsx(Pr,{children:d.jsx(wy,{})})},{path:"/appraiser/claim/:id/photos",element:d.jsx(Pr,{children:d.jsx(Oj,{})})}],{basename:"/CipherDispatch/"});Dd.createRoot(document.getElementById("root")).render(d.jsx(_a.StrictMode,{children:d.jsx(ZS,{router:Nj})}));
